function supportsSVG(){return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect}function noty(t){var e=0,n={animateOpen:"animation.open",animateClose:"animation.close",easing:"animation.easing",speed:"animation.speed",onShow:"callback.onShow",onShown:"callback.afterShow",onClose:"callback.onClose",onClosed:"callback.afterClose"};return jQuery.each(t,function(i,r){if(n[i]){e++;var o=n[i].split(".");t[o[0]]||(t[o[0]]={}),t[o[0]][o[1]]=r?r:function(){},delete t[i]}}),t.closeWith||(t.closeWith=jQuery.noty.defaults.closeWith),t.hasOwnProperty("closeButton")&&(e++,t.closeButton&&t.closeWith.push("button"),delete t.closeButton),t.hasOwnProperty("closeOnSelfClick")&&(e++,t.closeOnSelfClick&&t.closeWith.push("click"),delete t.closeOnSelfClick),t.hasOwnProperty("closeOnSelfOver")&&(e++,t.closeOnSelfOver&&t.closeWith.push("hover"),delete t.closeOnSelfOver),t.hasOwnProperty("custom")&&(e++,"null"!=t.custom.container&&(t.custom=t.custom.container)),t.hasOwnProperty("cssPrefix")&&(e++,delete t.cssPrefix),"noty_theme_default"==t.theme&&(e++,t.theme="defaultTheme"),t.hasOwnProperty("dismissQueue")||(t.dismissQueue="topLeft"==t.layout||"topRight"==t.layout||"bottomLeft"==t.layout||"bottomRight"==t.layout?!0:!1),t.buttons&&jQuery.each(t.buttons,function(t,n){n.click&&(e++,n.onClick=n.click,delete n.click),n.type&&(e++,n.addClass=n.type,delete n.type)}),e&&"undefined"!=typeof console&&console.warn&&console.warn("You are using noty v2 with v1.x.x options. @deprecated until v2.2.0 - Please update your options."),jQuery.notyRenderer.init(t)}function formatCurrencyNiceRounding(t,e){e="undefined"!=typeof e?e:0;var n=2,i=!1;return t%1!=0&&0==isNaN(t)&&(i=!0),n=1==i?2:0,0!=e&&(n=e),$.formatCurrency.toMoney(t.toString(),{roundToDecimalPlace:n})}function getContrastYIQ(t){var e=parseInt(t.substr(0,2),16),n=parseInt(t.substr(2,2),16),i=parseInt(t.substr(4,2),16),r=(299*e+587*n+114*i)/1e3;return r>=128?"black":"white"}function fast_rgbToHsl(t,e,n){t/=255,e/=255,n/=255;var i=Math.max(t,e,n),r=Math.min(t,e,n),o,s,a=(i+r)/2;if(i==r)o=s=0;else{var l=i-r;switch(s=a>.5?l/(2-i-r):l/(i+r),i){case t:o=(e-n)/l+(n>e?6:0);break;case e:o=(n-t)/l+2;break;case n:o=(t-e)/l+4}o/=6}return[o,s,a]}function fast_hslToRgb(t,e,n){function i(t,e,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?t+6*(e-t)*n:.5>n?e:2/3>n?t+(e-t)*(2/3-n)*6:t}var r,o,s;if(0==e)r=o=s=n;else{var a=.5>n?n*(1+e):n+e-n*e,l=2*n-a;r=i(l,a,t+1/3),o=i(l,a,t),s=i(l,a,t-1/3)}return[255*r,255*o,255*s]}(function(){var t=this,e=t._,n={},i=Array.prototype,r=Object.prototype,o=Function.prototype,s=i.push,a=i.slice,l=i.concat,c=i.unshift,u=r.toString,h=r.hasOwnProperty,d=i.forEach,p=i.map,f=i.reduce,m=i.reduceRight,g=i.filter,v=i.every,y=i.some,b=i.indexOf,_=i.lastIndexOf,w=Array.isArray,x=Object.keys,$=o.bind,k=function(t){return t instanceof k?t:this instanceof k?void(this._wrapped=t):new k(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):t._=k,k.VERSION="1.4.2";var C=k.each=k.forEach=function(t,e,i){if(null!=t)if(d&&t.forEach===d)t.forEach(e,i);else if(t.length===+t.length){for(var r=0,o=t.length;o>r;r++)if(e.call(i,t[r],r,t)===n)return}else for(var s in t)if(k.has(t,s)&&e.call(i,t[s],s,t)===n)return};k.map=k.collect=function(t,e,n){var i=[];return null==t?i:p&&t.map===p?t.map(e,n):(C(t,function(t,r,o){i[i.length]=e.call(n,t,r,o)}),i)},k.reduce=k.foldl=k.inject=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),f&&t.reduce===f)return i&&(e=k.bind(e,i)),r?t.reduce(e,n):t.reduce(e);if(C(t,function(t,o,s){r?n=e.call(i,n,t,o,s):(n=t,r=!0)}),!r)throw new TypeError("Reduce of empty array with no initial value");return n},k.reduceRight=k.foldr=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),m&&t.reduceRight===m)return i&&(e=k.bind(e,i)),arguments.length>2?t.reduceRight(e,n):t.reduceRight(e);var o=t.length;if(o!==+o){var s=k.keys(t);o=s.length}if(C(t,function(a,l,c){l=s?s[--o]:--o,r?n=e.call(i,n,t[l],l,c):(n=t[l],r=!0)}),!r)throw new TypeError("Reduce of empty array with no initial value");return n},k.find=k.detect=function(t,e,n){var i;return S(t,function(t,r,o){return e.call(n,t,r,o)?(i=t,!0):void 0}),i},k.filter=k.select=function(t,e,n){var i=[];return null==t?i:g&&t.filter===g?t.filter(e,n):(C(t,function(t,r,o){e.call(n,t,r,o)&&(i[i.length]=t)}),i)},k.reject=function(t,e,n){var i=[];return null==t?i:(C(t,function(t,r,o){e.call(n,t,r,o)||(i[i.length]=t)}),i)},k.every=k.all=function(t,e,i){e||(e=k.identity);var r=!0;return null==t?r:v&&t.every===v?t.every(e,i):(C(t,function(t,o,s){return(r=r&&e.call(i,t,o,s))?void 0:n}),!!r)};var S=k.some=k.any=function(t,e,i){e||(e=k.identity);var r=!1;return null==t?r:y&&t.some===y?t.some(e,i):(C(t,function(t,o,s){return r||(r=e.call(i,t,o,s))?n:void 0}),!!r)};k.contains=k.include=function(t,e){var n=!1;return null==t?n:b&&t.indexOf===b?-1!=t.indexOf(e):n=S(t,function(t){return t===e})},k.invoke=function(t,e){var n=a.call(arguments,2);return k.map(t,function(t){return(k.isFunction(e)?e:t[e]).apply(t,n)})},k.pluck=function(t,e){return k.map(t,function(t){return t[e]})},k.where=function(t,e){return k.isEmpty(e)?[]:k.filter(t,function(t){for(var n in e)if(e[n]!==t[n])return!1;return!0})},k.max=function(t,e,n){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!e&&k.isEmpty(t))return-1/0;var i={computed:-1/0};return C(t,function(t,r,o){var s=e?e.call(n,t,r,o):t;s>=i.computed&&(i={value:t,computed:s})}),i.value},k.min=function(t,e,n){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!e&&k.isEmpty(t))return 1/0;var i={computed:1/0};return C(t,function(t,r,o){var s=e?e.call(n,t,r,o):t;s<i.computed&&(i={value:t,computed:s})}),i.value},k.shuffle=function(t){var e,n=0,i=[];return C(t,function(t){e=k.random(n++),i[n-1]=i[e],i[e]=t}),i};var T=function(t){return k.isFunction(t)?t:function(e){return e[t]}};k.sortBy=function(t,e,n){var i=T(e);return k.pluck(k.map(t,function(t,e,r){return{value:t,index:e,criteria:i.call(n,t,e,r)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index<e.index?-1:1}),"value")};var A=function(t,e,n,i){var r={},o=T(e);return C(t,function(e,s){var a=o.call(n,e,s,t);i(r,a,e)}),r};k.groupBy=function(t,e,n){return A(t,e,n,function(t,e,n){(k.has(t,e)?t[e]:t[e]=[]).push(n)})},k.countBy=function(t,e,n){return A(t,e,n,function(t,e,n){k.has(t,e)||(t[e]=0),t[e]++})},k.sortedIndex=function(t,e,n,i){n=null==n?k.identity:T(n);for(var r=n.call(i,e),o=0,s=t.length;s>o;){var a=o+s>>>1;n.call(i,t[a])<r?o=a+1:s=a}return o},k.toArray=function(t){return t?t.length===+t.length?a.call(t):k.values(t):[]},k.size=function(t){return t.length===+t.length?t.length:k.keys(t).length},k.first=k.head=k.take=function(t,e,n){return null==e||n?t[0]:a.call(t,0,e)},k.initial=function(t,e,n){return a.call(t,0,t.length-(null==e||n?1:e))},k.last=function(t,e,n){return null==e||n?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},k.rest=k.tail=k.drop=function(t,e,n){return a.call(t,null==e||n?1:e)},k.compact=function(t){return k.filter(t,function(t){return!!t})};var E=function(t,e,n){return C(t,function(t){k.isArray(t)?e?s.apply(n,t):E(t,e,n):n.push(t)}),n};k.flatten=function(t,e){return E(t,e,[])},k.without=function(t){return k.difference(t,a.call(arguments,1))},k.uniq=k.unique=function(t,e,n,i){var r=n?k.map(t,n,i):t,o=[],s=[];return C(r,function(n,i){(e?i&&s[s.length-1]===n:k.contains(s,n))||(s.push(n),o.push(t[i]))}),o},k.union=function(){return k.uniq(l.apply(i,arguments))},k.intersection=function(t){var e=a.call(arguments,1);return k.filter(k.uniq(t),function(t){return k.every(e,function(e){return k.indexOf(e,t)>=0})})},k.difference=function(t){var e=l.apply(i,a.call(arguments,1));return k.filter(t,function(t){return!k.contains(e,t)})},k.zip=function(){for(var t=a.call(arguments),e=k.max(k.pluck(t,"length")),n=new Array(e),i=0;e>i;i++)n[i]=k.pluck(t,""+i);return n},k.object=function(t,e){for(var n={},i=0,r=t.length;r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},k.indexOf=function(t,e,n){if(null==t)return-1;var i=0,r=t.length;if(n){if("number"!=typeof n)return i=k.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,r+n):n}if(b&&t.indexOf===b)return t.indexOf(e,n);for(;r>i;i++)if(t[i]===e)return i;return-1},k.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(_&&t.lastIndexOf===_)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var r=i?n:t.length;r--;)if(t[r]===e)return r;return-1},k.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=0,o=new Array(i);i>r;)o[r++]=t,t+=n;return o};var P=function(){};k.bind=function B(t,e){var n,i;if(t.bind===$&&$)return $.apply(t,a.call(arguments,1));if(!k.isFunction(t))throw new TypeError;return i=a.call(arguments,2),n=function(){if(!(this instanceof n))return t.apply(e,i.concat(a.call(arguments)));P.prototype=t.prototype;var r=new P,o=t.apply(r,i.concat(a.call(arguments)));return Object(o)===o?o:r}},k.bindAll=function(t){var e=a.call(arguments,1);return 0==e.length&&(e=k.functions(t)),C(e,function(e){t[e]=k.bind(t[e],t)}),t},k.memoize=function(t,e){var n={};return e||(e=k.identity),function(){var i=e.apply(this,arguments);return k.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},k.delay=function(t,e){var n=a.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},k.defer=function(t){return k.delay.apply(k,[t,1].concat(a.call(arguments,1)))},k.throttle=function(t,e){var n,i,r,o,s,a,l=k.debounce(function(){s=o=!1},e);return function(){n=this,i=arguments;var c=function(){r=null,s&&(a=t.apply(n,i)),l()};return r||(r=setTimeout(c,e)),o?s=!0:(o=!0,a=t.apply(n,i)),l(),a}},k.debounce=function(t,e,n){var i,r;return function(){var o=this,s=arguments,a=function(){i=null,n||(r=t.apply(o,s))},l=n&&!i;return clearTimeout(i),i=setTimeout(a,e),l&&(r=t.apply(o,s)),r}},k.once=function(t){var e=!1,n;return function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)}},k.wrap=function(t,e){return function(){var n=[t];return s.apply(n,arguments),e.apply(this,n)}},k.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},k.after=function(t,e){return 0>=t?e():function(){return--t<1?e.apply(this,arguments):void 0}},k.keys=x||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)k.has(t,n)&&(e[e.length]=n);return e},k.values=function(t){var e=[];for(var n in t)k.has(t,n)&&e.push(t[n]);return e},k.pairs=function(t){var e=[];for(var n in t)k.has(t,n)&&e.push([n,t[n]]);return e},k.invert=function(t){var e={};for(var n in t)k.has(t,n)&&(e[t[n]]=n);return e},k.functions=k.methods=function(t){var e=[];for(var n in t)k.isFunction(t[n])&&e.push(n);return e.sort()},k.extend=function(t){return C(a.call(arguments,1),function(e){for(var n in e)t[n]=e[n]}),t},k.pick=function(t){var e={},n=l.apply(i,a.call(arguments,1));return C(n,function(n){n in t&&(e[n]=t[n])}),e},k.omit=function(t){var e={},n=l.apply(i,a.call(arguments,1));for(var r in t)k.contains(n,r)||(e[r]=t[r]);return e},k.defaults=function(t){return C(a.call(arguments,1),function(e){for(var n in e)null==t[n]&&(t[n]=e[n])}),t},k.clone=function(t){return k.isObject(t)?k.isArray(t)?t.slice():k.extend({},t):t},k.tap=function(t,e){return e(t),t};var N=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof k&&(t=t._wrapped),e instanceof k&&(e=e._wrapped);var r=u.call(t);if(r!=u.call(e))return!1;switch(r){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=n.length;o--;)if(n[o]==t)return i[o]==e;n.push(t),i.push(e);var s=0,a=!0;if("[object Array]"==r){if(s=t.length,a=s==e.length)for(;s--&&(a=N(t[s],e[s],n,i)););}else{var l=t.constructor,c=e.constructor;if(l!==c&&!(k.isFunction(l)&&l instanceof l&&k.isFunction(c)&&c instanceof c))return!1;for(var h in t)if(k.has(t,h)&&(s++,!(a=k.has(e,h)&&N(t[h],e[h],n,i))))break;if(a){for(h in e)if(k.has(e,h)&&!s--)break;a=!s}}return n.pop(),i.pop(),a};k.isEqual=function(t,e){return N(t,e,[],[])},k.isEmpty=function(t){if(null==t)return!0;if(k.isArray(t)||k.isString(t))return 0===t.length;for(var e in t)if(k.has(t,e))return!1;return!0},k.isElement=function(t){return!(!t||1!==t.nodeType)},k.isArray=w||function(t){return"[object Array]"==u.call(t)},k.isObject=function(t){return t===Object(t)},C(["Arguments","Function","String","Number","Date","RegExp"],function(t){k["is"+t]=function(e){return u.call(e)=="[object "+t+"]"}}),k.isArguments(arguments)||(k.isArguments=function(t){return!(!t||!k.has(t,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(t){return"function"==typeof t}),k.isFinite=function(t){return k.isNumber(t)&&isFinite(t)},k.isNaN=function(t){return k.isNumber(t)&&t!=+t},k.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==u.call(t)},k.isNull=function(t){return null===t},k.isUndefined=function(t){return void 0===t},k.has=function(t,e){return h.call(t,e)},k.noConflict=function(){return t._=e,this},k.identity=function(t){return t},k.times=function(t,e,n){for(var i=0;t>i;i++)e.call(n,i)},k.random=function(t,e){return null==e&&(e=t,t=0),t+(0|Math.random()*(e-t+1))};var O={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};O.unescape=k.invert(O.escape);var j={escape:new RegExp("["+k.keys(O.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(O.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(t){k[t]=function(e){return null==e?"":(""+e).replace(j[t],function(e){return O[t][e]})}}),k.result=function(t,e){if(null==t)return null;var n=t[e];return k.isFunction(n)?n.call(t):n},k.mixin=function(t){C(k.functions(t),function(e){var n=k[e]=t[e];k.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),D.call(this,n.apply(k,t))}})};var M=0;k.uniqueId=function(t){var e=M++;return t?t+e:e},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var R=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},I=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(t,e,n){n=k.defaults({},n,k.templateSettings);var i=new RegExp([(n.escape||R).source,(n.interpolate||R).source,(n.evaluate||R).source].join("|")+"|$","g"),r=0,o="__p+='";t.replace(i,function(e,n,i,s,a){o+=t.slice(r,a).replace(I,function(t){return"\\"+F[t]}),o+=n?"'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?"'+\n((__t=("+i+"))==null?'':__t)+\n'":s?"';\n"+s+"\n__p+='":"",r=a+e.length}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(n.variable||"obj","_",o)}catch(a){throw a.source=o,a}if(e)return s(e,k);var l=function(t){return s.call(this,t,k)};return l.source="function("+(n.variable||"obj")+"){\n"+o+"}",l},k.chain=function(t){return k(t).chain()};var D=function(t){return this._chain?k(t).chain():t};k.mixin(k),C(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];k.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],D.call(this,n)}}),C(["concat","join","slice"],function(t){var e=i[t];k.prototype[t]=function(){return D.call(this,e.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this),supportsSVG()&&(!function(t){var e="0.3.4",n="hasOwnProperty",i=/[\.\/]/,r="*",o=function(){},s=function(t,e){return t-e},a,l,c={n:{}},u=function(t,e){var n=c,i=l,r=Array.prototype.slice.call(arguments,2),o=u.listeners(t),h=0,d=!1,p,f=[],m={},g=[],v=a,y=[];a=t,l=0;for(var b=0,_=o.length;_>b;b++)"zIndex"in o[b]&&(f.push(o[b].zIndex),o[b].zIndex<0&&(m[o[b].zIndex]=o[b]));for(f.sort(s);f[h]<0;)if(p=m[f[h++]],g.push(p.apply(e,r)),l)return l=i,g;for(b=0;_>b;b++)if(p=o[b],"zIndex"in p)if(p.zIndex==f[h]){if(g.push(p.apply(e,r)),l)break;do if(h++,p=m[f[h]],p&&g.push(p.apply(e,r)),l)break;while(p)}else m[p.zIndex]=p;else if(g.push(p.apply(e,r)),l)break;return l=i,a=v,g.length?g:null};u.listeners=function(t){var e=t.split(i),n=c,o,s,a,l,u,h,d,p,f=[n],m=[];for(l=0,u=e.length;u>l;l++){for(p=[],h=0,d=f.length;d>h;h++)for(n=f[h].n,s=[n[e[l]],n[r]],a=2;a--;)o=s[a],o&&(p.push(o),m=m.concat(o.f||[]));f=p}return m},u.on=function(t,e){for(var n=t.split(i),r=c,s=0,a=n.length;a>s;s++)r=r.n,!r[n[s]]&&(r[n[s]]={n:{}}),r=r[n[s]];for(r.f=r.f||[],s=0,a=r.f.length;a>s;s++)if(r.f[s]==e)return o;return r.f.push(e),function(t){+t==+t&&(e.zIndex=+t)}},u.stop=function(){l=1},u.nt=function(t){return t?new RegExp("(?:\\.|\\/|^)"+t+"(?:\\.|\\/|$)").test(a):a},u.off=u.unbind=function(t,e){var o=t.split(i),s,a,l,u,h,d,p,f=[c];for(u=0,h=o.length;h>u;u++)for(d=0;d<f.length;d+=l.length-2){if(l=[d,1],s=f[d].n,o[u]!=r)s[o[u]]&&l.push(s[o[u]]);else for(a in s)s[n](a)&&l.push(s[a]);f.splice.apply(f,l)}for(u=0,h=f.length;h>u;u++)for(s=f[u];s.n;){if(e){if(s.f){for(d=0,p=s.f.length;p>d;d++)if(s.f[d]==e){s.f.splice(d,1);break}!s.f.length&&delete s.f}for(a in s.n)if(s.n[n](a)&&s.n[a].f){var m=s.n[a].f;for(d=0,p=m.length;p>d;d++)if(m[d]==e){m.splice(d,1);break}!m.length&&delete s.n[a].f}}else{delete s.f;for(a in s.n)s.n[n](a)&&s.n[a].f&&delete s.n[a].f}s=s.n}},u.once=function(t,e){var n=function(){var i=e.apply(this,arguments);return u.unbind(t,n),i};return u.on(t,n)},u.version=e,u.toString=function(){return"You are running Eve "+e},"undefined"!=typeof module&&module.exports?module.exports=u:"undefined"!=typeof define?define("eve",[],function(){return u}):t.eve=u}(this),function(){function t(t){for(var e=0;e<En.length;e++)En[e].el.paper==t&&En.splice(e--,1)}function e(t,e,n,r,o,a){n=le(n);var l,c,u,h=[],d,p,f,m=t.ms,g={},v={},y={};if(r)for(w=0,$=En.length;$>w;w++){var b=En[w];if(b.el.id==e.id&&b.anim==t){b.percent!=n?(En.splice(w,1),u=1):c=b,e.attr(b.totalOrigin);break}}else r=+v;for(var w=0,$=t.percents.length;$>w;w++){if(t.percents[w]==n||t.percents[w]>r*t.top){n=t.percents[w],p=t.percents[w-1]||0,m=m/t.top*(n-p),d=t.percents[w+1],l=t.anim[n];break}r&&e.attr(t.anim[t.percents[w]])}if(l){if(c)c.initstatus=r,c.start=new Date-c.ms*r;else{for(var k in l)if(l[S](k)&&(de[S](k)||e.paper.customAttributes[S](k)))switch(g[k]=e.attr(k),null==g[k]&&(g[k]=he[k]),v[k]=l[k],de[k]){case J:y[k]=(v[k]-g[k])/m;break;case"colour":g[k]=_.getRGB(g[k]);var C=_.getRGB(v[k]);y[k]={r:(C.r-g[k].r)/m,g:(C.g-g[k].g)/m,b:(C.b-g[k].b)/m};break;case"path":var T=Xe(g[k],v[k]),A=T[1];for(g[k]=T[0],y[k]=[],w=0,$=g[k].length;$>w;w++){y[k][w]=[0];for(var E=1,P=g[k][w].length;P>E;E++)y[k][w][E]=(A[w][E]-g[k][w][E])/m}break;case"transform":var N=e._,O=ln(N[k],v[k]);if(O)for(g[k]=O.from,v[k]=O.to,y[k]=[],y[k].real=!0,w=0,$=g[k].length;$>w;w++)for(y[k][w]=[g[k][w][0]],E=1,P=g[k][w].length;P>E;E++)y[k][w][E]=(v[k][w][E]-g[k][w][E])/m;else{var M=e.matrix||new s,R={_:{transform:N.transform},getBBox:function(){return e.getBBox(1)}};g[k]=[M.a,M.b,M.c,M.d,M.e,M.f],sn(R,v[k]),v[k]=R._.transform,y[k]=[(R.matrix.a-M.a)/m,(R.matrix.b-M.b)/m,(R.matrix.c-M.c)/m,(R.matrix.d-M.d)/m,(R.matrix.e-M.e)/m,(R.matrix.f-M.f)/m]}break;case"csv":var F=I(l[k])[D](x),B=I(g[k])[D](x);if("clip-rect"==k)for(g[k]=B,y[k]=[],w=B.length;w--;)y[k][w]=(F[w]-g[k][w])/m;v[k]=F;break;default:for(F=[][j](l[k]),B=[][j](g[k]),y[k]=[],w=e.paper.customAttributes[k].length;w--;)y[k][w]=((F[w]||0)-(B[w]||0))/m}var z=l.easing,L=_.easing_formulas[z];if(!L)if(L=I(z).match(oe),L&&5==L.length){var q=L;L=function(t){return i(t,+q[1],+q[2],+q[3],+q[4],m)}}else L=Ce;if(f=l.start||t.start||+new Date,b={anim:t,percent:n,timestamp:f,start:f+(t.del||0),status:0,initstatus:r||0,stop:!1,ms:m,easing:L,from:g,diff:y,to:v,el:e,callback:l.callback,prev:p,next:d,repeat:a||t.times,origin:e.attr(),totalOrigin:o},En.push(b),r&&!c&&!u&&(b.stop=!0,b.start=new Date-m*r,1==En.length))return Nn();u&&(b.start=new Date-b.ms*r),1==En.length&&Pn(Nn)}eve("raphael.anim.start."+e.id,e,t)}}function n(t,e){var n=[],i={};if(this.ms=e,this.times=1,t){for(var r in t)t[S](r)&&(i[le(r)]=t[r],n.push(le(r)));n.sort($e)}this.anim=i,this.top=n[n.length-1],this.percents=n}function i(t,e,n,i,r,o){function s(t,e){var n,i,r,o,s,a;for(r=t,a=0;8>a;a++){if(o=l(r)-t,V(o)<e)return r;if(s=(3*h*r+2*u)*r+c,V(s)<1e-6)break;r-=o/s}if(n=0,i=1,r=t,n>r)return n;if(r>i)return i;for(;i>n;){if(o=l(r),V(o-t)<e)return r;t>o?n=r:i=r,r=(i-n)/2+n}return r}function a(t,e){var n=s(t,e);return((f*n+p)*n+d)*n}function l(t){return((h*t+u)*t+c)*t}var c=3*e,u=3*(i-e)-c,h=1-c-u,d=3*n,p=3*(r-n)-d,f=1-d-p;return a(t,1/(200*o))}function r(){return this.x+F+this.y+F+this.width+" \xd7 "+this.height}function o(){return this.x+F+this.y}function s(t,e,n,i,r,o){null!=t?(this.a=+t,this.b=+e,this.c=+n,this.d=+i,this.e=+r,this.f=+o):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function a(t,e,n){t=_._path2curve(t),e=_._path2curve(e);for(var i,r,o,s,a,c,u,h,d,p,f=n?0:[],m=0,g=t.length;g>m;m++){var v=t[m];if("M"==v[0])i=a=v[1],r=c=v[2];else{"C"==v[0]?(d=[i,r].concat(v.slice(1)),i=d[6],r=d[7]):(d=[i,r,i,r,a,c,a,c],i=a,r=c);for(var y=0,b=e.length;b>y;y++){var w=e[y];if("M"==w[0])o=u=w[1],s=h=w[2];else{"C"==w[0]?(p=[o,s].concat(w.slice(1)),o=p[6],s=p[7]):(p=[o,s,o,s,u,h,u,h],o=u,s=h);var x=l(d,p,n);if(n)f+=x;else{for(var $=0,k=x.length;k>$;$++)x[$].segment1=m,x[$].segment2=y,x[$].bez1=d,x[$].bez2=p;f=f.concat(x)}}}}}return f}function l(t,e,n){var i=_.bezierBBox(t),r=_.bezierBBox(e);if(!_.isBBoxIntersect(i,r))return n?0:[];for(var o=p.apply(0,t),s=p.apply(0,e),a=~~(o/5),l=~~(s/5),c=[],u=[],d={},f=n?0:[],m=0;a+1>m;m++){var g=_.findDotsAtSegment.apply(_,t.concat(m/a));c.push({x:g.x,y:g.y,t:m/a})}for(m=0;l+1>m;m++)g=_.findDotsAtSegment.apply(_,e.concat(m/l)),u.push({x:g.x,y:g.y,t:m/l});for(m=0;a>m;m++)for(var v=0;l>v;v++){var y=c[m],b=c[m+1],w=u[v],x=u[v+1],$=V(b.x-y.x)<.001?"y":"x",k=V(x.x-w.x)<.001?"y":"x",C=h(y.x,y.y,b.x,b.y,w.x,w.y,x.x,x.y);if(C){if(d[C.x.toFixed(4)]==C.y.toFixed(4))continue;d[C.x.toFixed(4)]=C.y.toFixed(4);var S=y.t+V((C[$]-y[$])/(b[$]-y[$]))*(b.t-y.t),T=w.t+V((C[k]-w[k])/(x[k]-w[k]))*(x.t-w.t);S>=0&&1>=S&&T>=0&&1>=T&&(n?f++:f.push({x:C.x,y:C.y,t1:S,t2:T}))}}return f}function c(t,e){return l(t,e,1)}function u(t,e){return l(t,e)}function h(t,e,n,i,r,o,s,a){if(!(H(t,n)<Q(r,s)||Q(t,n)>H(r,s)||H(e,i)<Q(o,a)||Q(e,i)>H(o,a))){var l=(t*i-e*n)*(r-s)-(t-n)*(r*a-o*s),c=(t*i-e*n)*(o-a)-(e-i)*(r*a-o*s),u=(t-n)*(o-a)-(e-i)*(r-s);if(!u)return;var h=l/u,d=c/u,p=+h.toFixed(2),f=+d.toFixed(2);if(p<+Q(t,n).toFixed(2)||p>+H(t,n).toFixed(2)||p<+Q(r,s).toFixed(2)||p>+H(r,s).toFixed(2)||f<+Q(e,i).toFixed(2)||f>+H(e,i).toFixed(2)||f<+Q(o,a).toFixed(2)||f>+H(o,a).toFixed(2))return;return{x:h,y:d}}}function d(t,e,n,i,r,o,s,a,l){if(!(0>l||p(t,e,n,i,r,o,s,a)<l)){var c=1,u=c/2,h=c-u,d,f=.01;for(d=p(t,e,n,i,r,o,s,a,h);V(d-l)>f;)u/=2,h+=(l>d?1:-1)*u,d=p(t,e,n,i,r,o,s,a,h);return h}}function p(t,e,n,i,r,o,s,a,l){null==l&&(l=1),l=l>1?1:0>l?0:l;for(var c=l/2,u=12,h=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,m=0;u>m;m++){var g=c*h[m]+c,v=f(g,t,n,r,s),y=f(g,e,i,o,a),b=v*v+y*y;p+=d[m]*q.sqrt(b)}return c*p}function f(t,e,n,i,r){var o=-3*e+9*n-9*i+3*r,s=t*o+6*e-12*n+6*i;return t*s-3*e+3*n}function m(t,e){for(var n=[],i=0,r=t.length;r-2*!e>i;i+=2){var o=[{x:+t[i-2],y:+t[i-1]},{x:+t[i],y:+t[i+1]},{x:+t[i+2],y:+t[i+3]},{x:+t[i+4],y:+t[i+5]}];e?i?r-4==i?o[3]={x:+t[0],y:+t[1]}:r-2==i&&(o[2]={x:+t[0],y:+t[1]},o[3]={x:+t[2],y:+t[3]}):o[0]={x:+t[r-2],y:+t[r-1]}:r-4==i?o[3]=o[2]:i||(o[0]={x:+t[i],y:+t[i+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n}function g(){return this.hex}function v(t,e,n){function i(){var r=Array.prototype.slice.call(arguments,0),o=r.join("\u2400"),s=i.cache=i.cache||{},a=i.count=i.count||[];return s[S](o)?(y(a,o),n?n(s[o]):s[o]):(a.length>=1e3&&delete s[a.shift()],a.push(o),s[o]=t[O](e,r),n?n(s[o]):s[o])}return i}function y(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return t.push(t.splice(n,1)[0])}function b(t){if(Object(t)!==t)return t;var e=new t.constructor;for(var n in t)t[S](n)&&(e[n]=b(t[n]));return e}function _(t){if(_.is(t,"function"))return w?t():eve.on("raphael.DOMload",t);if(_.is(t,X))return _._engine.create[O](_,t.splice(0,3+_.is(t[0],J))).add(t);var e=Array.prototype.slice.call(arguments,0);if(_.is(e[e.length-1],"function")){var n=e.pop();return w?n.call(_._engine.create[O](_,e)):eve.on("raphael.DOMload",function(){n.call(_._engine.create[O](_,e))})}return _._engine.create[O](_,arguments)}_.version="2.1.0",_.eve=eve;var w,x=/[, ]+/,$={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},k=/\{(\d+)\}/g,C="prototype",S="hasOwnProperty",T={doc:document,win:window},A={was:Object.prototype[S].call(T.win,"Raphael"),is:T.win.Raphael},E=function(){this.ca=this.customAttributes={}},P,N="appendChild",O="apply",j="concat",M="createTouch"in T.doc,R="",F=" ",I=String,D="split",B="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[D](F),z={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},L=I.prototype.toLowerCase,q=Math,H=q.max,Q=q.min,V=q.abs,U=q.pow,W=q.PI,J="number",G="string",X="array",K="toString",Y="fill",Z=Object.prototype.toString,te={},ee="push",ne=_._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,ie=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,re={NaN:1,Infinity:1,"-Infinity":1},oe=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,se=q.round,ae="setAttribute",le=parseFloat,ce=parseInt,ue=I.prototype.toUpperCase,he=_._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},de=_._availableAnimAttrs={blur:J,"clip-rect":"csv",cx:J,cy:J,fill:"colour","fill-opacity":J,"font-size":J,height:J,opacity:J,path:"path",r:J,rx:J,ry:J,stroke:"colour","stroke-opacity":J,"stroke-width":J,transform:"transform",width:J,x:J,y:J},pe=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]/g,fe=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,me={hs:1,rg:1},ge=/,?([achlmqrstvxz]),?/gi,ve=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ye=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,be=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,_e=_._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,we={},xe=function(t,e){return t.key-e.key},$e=function(t,e){return le(t)-le(e)},ke=function(){},Ce=function(t){return t},Se=_._rectPath=function(t,e,n,i,r){return r?[["M",t+r,e],["l",n-2*r,0],["a",r,r,0,0,1,r,r],["l",0,i-2*r],["a",r,r,0,0,1,-r,r],["l",2*r-n,0],["a",r,r,0,0,1,-r,-r],["l",0,2*r-i],["a",r,r,0,0,1,r,-r],["z"]]:[["M",t,e],["l",n,0],["l",0,i],["l",-n,0],["z"]]},Te=function(t,e,n,i){return null==i&&(i=n),[["M",t,e],["m",0,-i],["a",n,i,0,1,1,0,2*i],["a",n,i,0,1,1,0,-2*i],["z"]]},Ae=_._getPath={path:function(t){return t.attr("path")},circle:function(t){var e=t.attrs;return Te(e.cx,e.cy,e.r)},ellipse:function(t){var e=t.attrs;return Te(e.cx,e.cy,e.rx,e.ry)},rect:function(t){var e=t.attrs;return Se(e.x,e.y,e.width,e.height,e.r)},image:function(t){var e=t.attrs;return Se(e.x,e.y,e.width,e.height)},text:function(t){var e=t._getBBox();return Se(e.x,e.y,e.width,e.height)}},Ee=_.mapPath=function(t,e){if(!e)return t;var n,i,r,o,s,a,l;for(t=Xe(t),r=0,s=t.length;s>r;r++)for(l=t[r],o=1,a=l.length;a>o;o+=2)n=e.x(l[o],l[o+1]),i=e.y(l[o],l[o+1]),l[o]=n,l[o+1]=i;return t};if(_._g=T,_.type=T.win.SVGAngle||T.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==_.type){var Pe=T.doc.createElement("div"),Ne;if(Pe.innerHTML='<v:shape adj="1"/>',Ne=Pe.firstChild,Ne.style.behavior="url(#default#VML)",!Ne||"object"!=typeof Ne.adj)return _.type=R;Pe=null}_.svg=!(_.vml="VML"==_.type),_._Paper=E,_.fn=P=E.prototype=_.prototype,_._id=0,_._oid=0,_.is=function(t,e){return e=L.call(e),"finite"==e?!re[S](+t):"array"==e?t instanceof Array:"null"==e&&null===t||e==typeof t&&null!==t||"object"==e&&t===Object(t)||"array"==e&&Array.isArray&&Array.isArray(t)||Z.call(t).slice(8,-1).toLowerCase()==e},_.angle=function(t,e,n,i,r,o){if(null==r){var s=t-n,a=e-i;return s||a?(180+180*q.atan2(-a,-s)/W+360)%360:0}return _.angle(t,e,r,o)-_.angle(n,i,r,o)},_.rad=function(t){return t%360*W/180},_.deg=function(t){return 180*t/W%360},_.snapTo=function(t,e,n){if(n=_.is(n,"finite")?n:10,_.is(t,X)){for(var i=t.length;i--;)if(V(t[i]-e)<=n)return t[i]}else{t=+t;var r=e%t;if(n>r)return e-r;if(r>t-n)return e-r+t}return e};var Oe=_.createUUID=function(t,e){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(t,e).toUpperCase()}}(/[xy]/g,function(t){var e=16*q.random()|0,n="x"==t?e:3&e|8;return n.toString(16)});_.setWindow=function(t){eve("raphael.setWindow",_,T.win,t),T.win=t,T.doc=T.win.document,_._engine.initWin&&_._engine.initWin(T.win)};var je=function(t){if(_.vml){var e=/^\s+|\s+$/g,n;try{var i=new ActiveXObject("htmlfile");i.write("<body>"),i.close(),n=i.body}catch(r){n=createPopup().document.body}var o=n.createTextRange();je=v(function(t){try{n.style.color=I(t).replace(e,R);var i=o.queryCommandValue("ForeColor");return i=(255&i)<<16|65280&i|(16711680&i)>>>16,"#"+("000000"+i.toString(16)).slice(-6)}catch(r){return"none"}})}else{var s=T.doc.createElement("i");s.title="Rapha\xebl Colour Picker",s.style.display="none",T.doc.body.appendChild(s),je=v(function(t){return s.style.color=t,T.doc.defaultView.getComputedStyle(s,R).getPropertyValue("color")})}return je(t)},Me=function(){return"hsb("+[this.h,this.s,this.b]+")"},Re=function(){return"hsl("+[this.h,this.s,this.l]+")"},Fe=function(){return this.hex},Ie=function(t,e,n){if(null==e&&_.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(n=t.b,e=t.g,t=t.r),null==e&&_.is(t,G)){var i=_.getRGB(t);t=i.r,e=i.g,n=i.b}return(t>1||e>1||n>1)&&(t/=255,e/=255,n/=255),[t,e,n]},De=function(t,e,n,i){t*=255,e*=255,n*=255;var r={r:t,g:e,b:n,hex:_.rgb(t,e,n),toString:Fe};
return _.is(i,"finite")&&(r.opacity=i),r};_.color=function(t){var e;return _.is(t,"object")&&"h"in t&&"s"in t&&"b"in t?(e=_.hsb2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):_.is(t,"object")&&"h"in t&&"s"in t&&"l"in t?(e=_.hsl2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):(_.is(t,"string")&&(t=_.getRGB(t)),_.is(t,"object")&&"r"in t&&"g"in t&&"b"in t?(e=_.rgb2hsl(t),t.h=e.h,t.s=e.s,t.l=e.l,e=_.rgb2hsb(t),t.v=e.b):(t={hex:"none"},t.r=t.g=t.b=t.h=t.s=t.v=t.l=-1)),t.toString=Fe,t},_.hsb2rgb=function(t,e,n,i){this.is(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(n=t.b,e=t.s,t=t.h,i=t.o),t*=360;var r,o,s,a,l;return t=t%360/60,l=n*e,a=l*(1-V(t%2-1)),r=o=s=n-l,t=~~t,r+=[l,a,0,0,a,l][t],o+=[a,l,l,a,0,0][t],s+=[0,0,a,l,l,a][t],De(r,o,s,i)},_.hsl2rgb=function(t,e,n,i){this.is(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(n=t.l,e=t.s,t=t.h),(t>1||e>1||n>1)&&(t/=360,e/=100,n/=100),t*=360;var r,o,s,a,l;return t=t%360/60,l=2*e*(.5>n?n:1-n),a=l*(1-V(t%2-1)),r=o=s=n-l/2,t=~~t,r+=[l,a,0,0,a,l][t],o+=[a,l,l,a,0,0][t],s+=[0,0,a,l,l,a][t],De(r,o,s,i)},_.rgb2hsb=function(t,e,n){n=Ie(t,e,n),t=n[0],e=n[1],n=n[2];var i,r,o,s;return o=H(t,e,n),s=o-Q(t,e,n),i=0==s?null:o==t?(e-n)/s:o==e?(n-t)/s+2:(t-e)/s+4,i=(i+360)%6*60/360,r=0==s?0:s/o,{h:i,s:r,b:o,toString:Me}},_.rgb2hsl=function(t,e,n){n=Ie(t,e,n),t=n[0],e=n[1],n=n[2];var i,r,o,s,a,l;return s=H(t,e,n),a=Q(t,e,n),l=s-a,i=0==l?null:s==t?(e-n)/l:s==e?(n-t)/l+2:(t-e)/l+4,i=(i+360)%6*60/360,o=(s+a)/2,r=0==l?0:.5>o?l/(2*o):l/(2-2*o),{h:i,s:r,l:o,toString:Re}},_._path2string=function(){return this.join(",").replace(ge,"$1")};var Be=_._preload=function(t,e){var n=T.doc.createElement("img");n.style.cssText="position:absolute;left:-9999em;top:-9999em",n.onload=function(){e.call(this),this.onload=null,T.doc.body.removeChild(this)},n.onerror=function(){T.doc.body.removeChild(this)},T.doc.body.appendChild(n),n.src=t};_.getRGB=v(function(t){if(!t||(t=I(t)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:g};if("none"==t)return{r:-1,g:-1,b:-1,hex:"none",toString:g};!me[S](t.toLowerCase().substring(0,2))&&"#"!=t.charAt()&&(t=je(t));var e,n,i,r,o,s,a,l=t.match(ie);return l?(l[2]&&(r=ce(l[2].substring(5),16),i=ce(l[2].substring(3,5),16),n=ce(l[2].substring(1,3),16)),l[3]&&(r=ce((s=l[3].charAt(3))+s,16),i=ce((s=l[3].charAt(2))+s,16),n=ce((s=l[3].charAt(1))+s,16)),l[4]&&(a=l[4][D](fe),n=le(a[0]),"%"==a[0].slice(-1)&&(n*=2.55),i=le(a[1]),"%"==a[1].slice(-1)&&(i*=2.55),r=le(a[2]),"%"==a[2].slice(-1)&&(r*=2.55),"rgba"==l[1].toLowerCase().slice(0,4)&&(o=le(a[3])),a[3]&&"%"==a[3].slice(-1)&&(o/=100)),l[5]?(a=l[5][D](fe),n=le(a[0]),"%"==a[0].slice(-1)&&(n*=2.55),i=le(a[1]),"%"==a[1].slice(-1)&&(i*=2.55),r=le(a[2]),"%"==a[2].slice(-1)&&(r*=2.55),("deg"==a[0].slice(-3)||"\xb0"==a[0].slice(-1))&&(n/=360),"hsba"==l[1].toLowerCase().slice(0,4)&&(o=le(a[3])),a[3]&&"%"==a[3].slice(-1)&&(o/=100),_.hsb2rgb(n,i,r,o)):l[6]?(a=l[6][D](fe),n=le(a[0]),"%"==a[0].slice(-1)&&(n*=2.55),i=le(a[1]),"%"==a[1].slice(-1)&&(i*=2.55),r=le(a[2]),"%"==a[2].slice(-1)&&(r*=2.55),("deg"==a[0].slice(-3)||"\xb0"==a[0].slice(-1))&&(n/=360),"hsla"==l[1].toLowerCase().slice(0,4)&&(o=le(a[3])),a[3]&&"%"==a[3].slice(-1)&&(o/=100),_.hsl2rgb(n,i,r,o)):(l={r:n,g:i,b:r,toString:g},l.hex="#"+(16777216|r|i<<8|n<<16).toString(16).slice(1),_.is(o,"finite")&&(l.opacity=o),l)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:g}},_),_.hsb=v(function(t,e,n){return _.hsb2rgb(t,e,n).hex}),_.hsl=v(function(t,e,n){return _.hsl2rgb(t,e,n).hex}),_.rgb=v(function(t,e,n){return"#"+(16777216|n|e<<8|t<<16).toString(16).slice(1)}),_.getColor=function(t){var e=this.getColor.start=this.getColor.start||{h:0,s:1,b:t||.75},n=this.hsb2rgb(e.h,e.s,e.b);return e.h+=.075,e.h>1&&(e.h=0,e.s-=.2,e.s<=0&&(this.getColor.start={h:0,s:1,b:e.b})),n.hex},_.getColor.reset=function(){delete this.start},_.parsePathString=function(t){if(!t)return null;var e=ze(t);if(e.arr)return qe(e.arr);var n={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},i=[];return _.is(t,X)&&_.is(t[0],X)&&(i=qe(t)),i.length||I(t).replace(ve,function(t,e,r){var o=[],s=e.toLowerCase();if(r.replace(be,function(t,e){e&&o.push(+e)}),"m"==s&&o.length>2&&(i.push([e][j](o.splice(0,2))),s="l",e="m"==e?"l":"L"),"r"==s)i.push([e][j](o));else for(;o.length>=n[s]&&(i.push([e][j](o.splice(0,n[s]))),n[s]););}),i.toString=_._path2string,e.arr=qe(i),i},_.parseTransformString=v(function(t){if(!t)return null;var e={r:3,s:4,t:2,m:6},n=[];return _.is(t,X)&&_.is(t[0],X)&&(n=qe(t)),n.length||I(t).replace(ye,function(t,e,i){var r=[],o=L.call(e);i.replace(be,function(t,e){e&&r.push(+e)}),n.push([e][j](r))}),n.toString=_._path2string,n});var ze=function(t){var e=ze.ps=ze.ps||{};return e[t]?e[t].sleep=100:e[t]={sleep:100},setTimeout(function(){for(var n in e)e[S](n)&&n!=t&&(e[n].sleep--,!e[n].sleep&&delete e[n])}),e[t]};_.findDotsAtSegment=function(t,e,n,i,r,o,s,a,l){var c=1-l,u=U(c,3),h=U(c,2),d=l*l,p=d*l,f=u*t+3*h*l*n+3*c*l*l*r+p*s,m=u*e+3*h*l*i+3*c*l*l*o+p*a,g=t+2*l*(n-t)+d*(r-2*n+t),v=e+2*l*(i-e)+d*(o-2*i+e),y=n+2*l*(r-n)+d*(s-2*r+n),b=i+2*l*(o-i)+d*(a-2*o+i),_=c*t+l*n,w=c*e+l*i,x=c*r+l*s,$=c*o+l*a,k=90-180*q.atan2(g-y,v-b)/W;return(g>y||b>v)&&(k+=180),{x:f,y:m,m:{x:g,y:v},n:{x:y,y:b},start:{x:_,y:w},end:{x:x,y:$},alpha:k}},_.bezierBBox=function(t,e,n,i,r,o,s,a){_.is(t,"array")||(t=[t,e,n,i,r,o,s,a]);var l=Ge.apply(null,t);return{x:l.min.x,y:l.min.y,x2:l.max.x,y2:l.max.y,width:l.max.x-l.min.x,height:l.max.y-l.min.y}},_.isPointInsideBBox=function(t,e,n){return e>=t.x&&e<=t.x2&&n>=t.y&&n<=t.y2},_.isBBoxIntersect=function(t,e){var n=_.isPointInsideBBox;return n(e,t.x,t.y)||n(e,t.x2,t.y)||n(e,t.x,t.y2)||n(e,t.x2,t.y2)||n(t,e.x,e.y)||n(t,e.x2,e.y)||n(t,e.x,e.y2)||n(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)},_.pathIntersection=function(t,e){return a(t,e)},_.pathIntersectionNumber=function(t,e){return a(t,e,1)},_.isPointInsidePath=function(t,e,n){var i=_.pathBBox(t);return _.isPointInsideBBox(i,e,n)&&a(t,[["M",e,n],["H",i.x2+10]],1)%2==1},_._removedFactory=function(t){return function(){eve("raphael.log",null,"Rapha\xebl: you are calling to method \u201c"+t+"\u201d of removed object",t)}};var Le=_.pathBBox=function(t){var e=ze(t);if(e.bbox)return b(e.bbox);if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0};t=Xe(t);for(var n=0,i=0,r=[],o=[],s,a=0,l=t.length;l>a;a++)if(s=t[a],"M"==s[0])n=s[1],i=s[2],r.push(n),o.push(i);else{var c=Ge(n,i,s[1],s[2],s[3],s[4],s[5],s[6]);r=r[j](c.min.x,c.max.x),o=o[j](c.min.y,c.max.y),n=s[5],i=s[6]}var u=Q[O](0,r),h=Q[O](0,o),d=H[O](0,r),p=H[O](0,o),f={x:u,y:h,x2:d,y2:p,width:d-u,height:p-h};return e.bbox=b(f),f},qe=function(t){var e=b(t);return e.toString=_._path2string,e},He=_._pathToRelative=function(t){var e=ze(t);if(e.rel)return qe(e.rel);_.is(t,X)&&_.is(t&&t[0],X)||(t=_.parsePathString(t));var n=[],i=0,r=0,o=0,s=0,a=0;"M"==t[0][0]&&(i=t[0][1],r=t[0][2],o=i,s=r,a++,n.push(["M",i,r]));for(var l=a,c=t.length;c>l;l++){var u=n[l]=[],h=t[l];if(h[0]!=L.call(h[0]))switch(u[0]=L.call(h[0]),u[0]){case"a":u[1]=h[1],u[2]=h[2],u[3]=h[3],u[4]=h[4],u[5]=h[5],u[6]=+(h[6]-i).toFixed(3),u[7]=+(h[7]-r).toFixed(3);break;case"v":u[1]=+(h[1]-r).toFixed(3);break;case"m":o=h[1],s=h[2];default:for(var d=1,p=h.length;p>d;d++)u[d]=+(h[d]-(d%2?i:r)).toFixed(3)}else{u=n[l]=[],"m"==h[0]&&(o=h[1]+i,s=h[2]+r);for(var f=0,m=h.length;m>f;f++)n[l][f]=h[f]}var g=n[l].length;switch(n[l][0]){case"z":i=o,r=s;break;case"h":i+=+n[l][g-1];break;case"v":r+=+n[l][g-1];break;default:i+=+n[l][g-2],r+=+n[l][g-1]}}return n.toString=_._path2string,e.rel=qe(n),n},Qe=_._pathToAbsolute=function(t){var e=ze(t);if(e.abs)return qe(e.abs);if(_.is(t,X)&&_.is(t&&t[0],X)||(t=_.parsePathString(t)),!t||!t.length)return[["M",0,0]];var n=[],i=0,r=0,o=0,s=0,a=0;"M"==t[0][0]&&(i=+t[0][1],r=+t[0][2],o=i,s=r,a++,n[0]=["M",i,r]);for(var l=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),c,u,h=a,d=t.length;d>h;h++){if(n.push(c=[]),u=t[h],u[0]!=ue.call(u[0]))switch(c[0]=ue.call(u[0]),c[0]){case"A":c[1]=u[1],c[2]=u[2],c[3]=u[3],c[4]=u[4],c[5]=u[5],c[6]=+(u[6]+i),c[7]=+(u[7]+r);break;case"V":c[1]=+u[1]+r;break;case"H":c[1]=+u[1]+i;break;case"R":for(var p=[i,r][j](u.slice(1)),f=2,g=p.length;g>f;f++)p[f]=+p[f]+i,p[++f]=+p[f]+r;n.pop(),n=n[j](m(p,l));break;case"M":o=+u[1]+i,s=+u[2]+r;default:for(f=1,g=u.length;g>f;f++)c[f]=+u[f]+(f%2?i:r)}else if("R"==u[0])p=[i,r][j](u.slice(1)),n.pop(),n=n[j](m(p,l)),c=["R"][j](u.slice(-2));else for(var v=0,y=u.length;y>v;v++)c[v]=u[v];switch(c[0]){case"Z":i=o,r=s;break;case"H":i=c[1];break;case"V":r=c[1];break;case"M":o=c[c.length-2],s=c[c.length-1];default:i=c[c.length-2],r=c[c.length-1]}}return n.toString=_._path2string,e.abs=qe(n),n},Ve=function(t,e,n,i){return[t,e,n,i,n,i]},Ue=function(t,e,n,i,r,o){var s=1/3,a=2/3;return[s*t+a*n,s*e+a*i,s*r+a*n,s*o+a*i,r,o]},We=function(t,e,n,i,r,o,s,a,l,c){var u=120*W/180,h=W/180*(+r||0),d=[],p,f=v(function(t,e,n){var i=t*q.cos(n)-e*q.sin(n),r=t*q.sin(n)+e*q.cos(n);return{x:i,y:r}});if(c)S=c[0],T=c[1],k=c[2],C=c[3];else{p=f(t,e,-h),t=p.x,e=p.y,p=f(a,l,-h),a=p.x,l=p.y;var m=q.cos(W/180*r),g=q.sin(W/180*r),y=(t-a)/2,b=(e-l)/2,_=y*y/(n*n)+b*b/(i*i);_>1&&(_=q.sqrt(_),n=_*n,i=_*i);var w=n*n,x=i*i,$=(o==s?-1:1)*q.sqrt(V((w*x-w*b*b-x*y*y)/(w*b*b+x*y*y))),k=$*n*b/i+(t+a)/2,C=$*-i*y/n+(e+l)/2,S=q.asin(((e-C)/i).toFixed(9)),T=q.asin(((l-C)/i).toFixed(9));S=k>t?W-S:S,T=k>a?W-T:T,0>S&&(S=2*W+S),0>T&&(T=2*W+T),s&&S>T&&(S-=2*W),!s&&T>S&&(T-=2*W)}var A=T-S;if(V(A)>u){var E=T,P=a,N=l;T=S+u*(s&&T>S?1:-1),a=k+n*q.cos(T),l=C+i*q.sin(T),d=We(a,l,n,i,r,0,s,P,N,[T,E,k,C])}A=T-S;var O=q.cos(S),M=q.sin(S),R=q.cos(T),F=q.sin(T),I=q.tan(A/4),B=4/3*n*I,z=4/3*i*I,L=[t,e],H=[t+B*M,e-z*O],Q=[a+B*F,l-z*R],U=[a,l];if(H[0]=2*L[0]-H[0],H[1]=2*L[1]-H[1],c)return[H,Q,U][j](d);d=[H,Q,U][j](d).join()[D](",");for(var J=[],G=0,X=d.length;X>G;G++)J[G]=G%2?f(d[G-1],d[G],h).y:f(d[G],d[G+1],h).x;return J},Je=function(t,e,n,i,r,o,s,a,l){var c=1-l;return{x:U(c,3)*t+3*U(c,2)*l*n+3*c*l*l*r+U(l,3)*s,y:U(c,3)*e+3*U(c,2)*l*i+3*c*l*l*o+U(l,3)*a}},Ge=v(function(t,e,n,i,r,o,s,a){var l=r-2*n+t-(s-2*r+n),c=2*(n-t)-2*(r-n),u=t-n,h=(-c+q.sqrt(c*c-4*l*u))/2/l,d=(-c-q.sqrt(c*c-4*l*u))/2/l,p=[e,a],f=[t,s],m;return V(h)>"1e12"&&(h=.5),V(d)>"1e12"&&(d=.5),h>0&&1>h&&(m=Je(t,e,n,i,r,o,s,a,h),f.push(m.x),p.push(m.y)),d>0&&1>d&&(m=Je(t,e,n,i,r,o,s,a,d),f.push(m.x),p.push(m.y)),l=o-2*i+e-(a-2*o+i),c=2*(i-e)-2*(o-i),u=e-i,h=(-c+q.sqrt(c*c-4*l*u))/2/l,d=(-c-q.sqrt(c*c-4*l*u))/2/l,V(h)>"1e12"&&(h=.5),V(d)>"1e12"&&(d=.5),h>0&&1>h&&(m=Je(t,e,n,i,r,o,s,a,h),f.push(m.x),p.push(m.y)),d>0&&1>d&&(m=Je(t,e,n,i,r,o,s,a,d),f.push(m.x),p.push(m.y)),{min:{x:Q[O](0,f),y:Q[O](0,p)},max:{x:H[O](0,f),y:H[O](0,p)}}}),Xe=_._path2curve=v(function(t,e){var n=!e&&ze(t);if(!e&&n.curve)return qe(n.curve);for(var i=Qe(t),r=e&&Qe(e),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a=(function(t,e){var n,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"][j](We[O](0,[e.x,e.y][j](t.slice(1))));break;case"S":n=e.x+(e.x-(e.bx||e.x)),i=e.y+(e.y-(e.by||e.y)),t=["C",n,i][j](t.slice(1));break;case"T":e.qx=e.x+(e.x-(e.qx||e.x)),e.qy=e.y+(e.y-(e.qy||e.y)),t=["C"][j](Ue(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"][j](Ue(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"][j](Ve(e.x,e.y,t[1],t[2]));break;case"H":t=["C"][j](Ve(e.x,e.y,t[1],e.y));break;case"V":t=["C"][j](Ve(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"][j](Ve(e.x,e.y,e.X,e.Y))}return t}),l=function(t,e){if(t[e].length>7){t[e].shift();for(var n=t[e];n.length;)t.splice(e++,0,["C"][j](n.splice(0,6)));t.splice(e,1),h=H(i.length,r&&r.length||0)}},c=function(t,e,n,o,s){t&&e&&"M"==t[s][0]&&"M"!=e[s][0]&&(e.splice(s,0,["M",o.x,o.y]),n.bx=0,n.by=0,n.x=t[s][1],n.y=t[s][2],h=H(i.length,r&&r.length||0))},u=0,h=H(i.length,r&&r.length||0);h>u;u++){i[u]=a(i[u],o),l(i,u),r&&(r[u]=a(r[u],s)),r&&l(r,u),c(i,r,o,s,u),c(r,i,s,o,u);var d=i[u],p=r&&r[u],f=d.length,m=r&&p.length;o.x=d[f-2],o.y=d[f-1],o.bx=le(d[f-4])||o.x,o.by=le(d[f-3])||o.y,s.bx=r&&(le(p[m-4])||s.x),s.by=r&&(le(p[m-3])||s.y),s.x=r&&p[m-2],s.y=r&&p[m-1]}return r||(n.curve=qe(i)),r?[i,r]:i},null,qe),Ke=_._parseDots=v(function(t){for(var e=[],n=0,i=t.length;i>n;n++){var r={},o=t[n].match(/^([^:]*):?([\d\.]*)/);if(r.color=_.getRGB(o[1]),r.color.error)return null;r.color=r.color.hex,o[2]&&(r.offset=o[2]+"%"),e.push(r)}for(n=1,i=e.length-1;i>n;n++)if(!e[n].offset){for(var s=le(e[n-1].offset||0),a=0,l=n+1;i>l;l++)if(e[l].offset){a=e[l].offset;break}a||(a=100,l=i),a=le(a);for(var c=(a-s)/(l-n+1);l>n;n++)s+=c,e[n].offset=s+"%"}return e}),Ye=_._tear=function(t,e){t==e.top&&(e.top=t.prev),t==e.bottom&&(e.bottom=t.next),t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next)},Ze=_._tofront=function(t,e){e.top!==t&&(Ye(t,e),t.next=null,t.prev=e.top,e.top.next=t,e.top=t)},tn=_._toback=function(t,e){e.bottom!==t&&(Ye(t,e),t.next=e.bottom,t.prev=null,e.bottom.prev=t,e.bottom=t)},en=_._insertafter=function(t,e,n){Ye(t,n),e==n.top&&(n.top=t),e.next&&(e.next.prev=t),t.next=e.next,t.prev=e,e.next=t},nn=_._insertbefore=function(t,e,n){Ye(t,n),e==n.bottom&&(n.bottom=t),e.prev&&(e.prev.next=t),t.prev=e.prev,e.prev=t,t.next=e},rn=_.toMatrix=function(t,e){var n=Le(t),i={_:{transform:R},getBBox:function(){return n}};return sn(i,e),i.matrix},on=_.transformPath=function(t,e){return Ee(t,rn(t,e))},sn=_._extractTransform=function(t,e){if(null==e)return t._.transform;e=I(e).replace(/\.{3}|\u2026/g,t._.transform||R);var n=_.parseTransformString(e),i=0,r=0,o=0,a=1,l=1,c=t._,u=new s;if(c.transform=n||[],n)for(var h=0,d=n.length;d>h;h++){var p=n[h],f=p.length,m=I(p[0]).toLowerCase(),g=p[0]!=m,v=g?u.invert():0,y,b,w,x,$;"t"==m&&3==f?g?(y=v.x(0,0),b=v.y(0,0),w=v.x(p[1],p[2]),x=v.y(p[1],p[2]),u.translate(w-y,x-b)):u.translate(p[1],p[2]):"r"==m?2==f?($=$||t.getBBox(1),u.rotate(p[1],$.x+$.width/2,$.y+$.height/2),i+=p[1]):4==f&&(g?(w=v.x(p[2],p[3]),x=v.y(p[2],p[3]),u.rotate(p[1],w,x)):u.rotate(p[1],p[2],p[3]),i+=p[1]):"s"==m?2==f||3==f?($=$||t.getBBox(1),u.scale(p[1],p[f-1],$.x+$.width/2,$.y+$.height/2),a*=p[1],l*=p[f-1]):5==f&&(g?(w=v.x(p[3],p[4]),x=v.y(p[3],p[4]),u.scale(p[1],p[2],w,x)):u.scale(p[1],p[2],p[3],p[4]),a*=p[1],l*=p[2]):"m"==m&&7==f&&u.add(p[1],p[2],p[3],p[4],p[5],p[6]),c.dirtyT=1,t.matrix=u}t.matrix=u,c.sx=a,c.sy=l,c.deg=i,c.dx=r=u.e,c.dy=o=u.f,1==a&&1==l&&!i&&c.bbox?(c.bbox.x+=+r,c.bbox.y+=+o):c.dirtyT=1},an=function(t){var e=t[0];switch(e.toLowerCase()){case"t":return[e,0,0];case"m":return[e,1,0,0,1,0,0];case"r":return 4==t.length?[e,0,t[2],t[3]]:[e,0];case"s":return 5==t.length?[e,1,1,t[3],t[4]]:3==t.length?[e,1,1]:[e,1]}},ln=_._equaliseTransform=function(t,e){e=I(e).replace(/\.{3}|\u2026/g,t),t=_.parseTransformString(t)||[],e=_.parseTransformString(e)||[];for(var n=H(t.length,e.length),i=[],r=[],o=0,s,a,l,c;n>o;o++){if(l=t[o]||an(e[o]),c=e[o]||an(l),l[0]!=c[0]||"r"==l[0].toLowerCase()&&(l[2]!=c[2]||l[3]!=c[3])||"s"==l[0].toLowerCase()&&(l[3]!=c[3]||l[4]!=c[4]))return;for(i[o]=[],r[o]=[],s=0,a=H(l.length,c.length);a>s;s++)s in l&&(i[o][s]=l[s]),s in c&&(r[o][s]=c[s])}return{from:i,to:r}};_._getContainer=function(t,e,n,i){var r;return r=null!=i||_.is(t,"object")?t:T.doc.getElementById(t),null!=r?r.tagName?null==e?{container:r,width:r.style.pixelWidth||r.offsetWidth,height:r.style.pixelHeight||r.offsetHeight}:{container:r,width:e,height:n}:{container:1,x:t,y:e,width:n,height:i}:void 0},_.pathToRelative=He,_._engine={},_.path2curve=Xe,_.matrix=function(t,e,n,i,r,o){return new s(t,e,n,i,r,o)},function(t){function e(t){var e=q.sqrt(n(t));t[0]&&(t[0]/=e),t[1]&&(t[1]/=e)}function n(t){return t[0]*t[0]+t[1]*t[1]}t.add=function(t,e,n,i,r,o){var a=[[],[],[]],l=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],c=[[t,n,r],[e,i,o],[0,0,1]],u,h,d,p;for(t&&t instanceof s&&(c=[[t.a,t.c,t.e],[t.b,t.d,t.f],[0,0,1]]),u=0;3>u;u++)for(h=0;3>h;h++){for(p=0,d=0;3>d;d++)p+=l[u][d]*c[d][h];a[u][h]=p}this.a=a[0][0],this.b=a[1][0],this.c=a[0][1],this.d=a[1][1],this.e=a[0][2],this.f=a[1][2]},t.invert=function(){var t=this,e=t.a*t.d-t.b*t.c;return new s(t.d/e,-t.b/e,-t.c/e,t.a/e,(t.c*t.f-t.d*t.e)/e,(t.b*t.e-t.a*t.f)/e)},t.clone=function(){return new s(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(t,e){this.add(1,0,0,1,t,e)},t.scale=function(t,e,n,i){null==e&&(e=t),(n||i)&&this.add(1,0,0,1,n,i),this.add(t,0,0,e,0,0),(n||i)&&this.add(1,0,0,1,-n,-i)},t.rotate=function(t,e,n){t=_.rad(t),e=e||0,n=n||0;var i=+q.cos(t).toFixed(9),r=+q.sin(t).toFixed(9);this.add(i,r,-r,i,e,n),this.add(1,0,0,1,-e,-n)},t.x=function(t,e){return t*this.a+e*this.c+this.e},t.y=function(t,e){return t*this.b+e*this.d+this.f},t.get=function(t){return+this[I.fromCharCode(97+t)].toFixed(4)},t.toString=function(){return _.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},t.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.split=function(){var t={};t.dx=this.e,t.dy=this.f;var i=[[this.a,this.c],[this.b,this.d]];t.scalex=q.sqrt(n(i[0])),e(i[0]),t.shear=i[0][0]*i[1][0]+i[0][1]*i[1][1],i[1]=[i[1][0]-i[0][0]*t.shear,i[1][1]-i[0][1]*t.shear],t.scaley=q.sqrt(n(i[1])),e(i[1]),t.shear/=t.scaley;var r=-i[0][1],o=i[1][1];return 0>o?(t.rotate=_.deg(q.acos(o)),0>r&&(t.rotate=360-t.rotate)):t.rotate=_.deg(q.asin(r)),t.isSimple=!(+t.shear.toFixed(9)||t.scalex.toFixed(9)!=t.scaley.toFixed(9)&&t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},t.toTransformString=function(t){var e=t||this[D]();return e.isSimple?(e.scalex=+e.scalex.toFixed(4),e.scaley=+e.scaley.toFixed(4),e.rotate=+e.rotate.toFixed(4),(e.dx||e.dy?"t"+[e.dx,e.dy]:R)+(1!=e.scalex||1!=e.scaley?"s"+[e.scalex,e.scaley,0,0]:R)+(e.rotate?"r"+[e.rotate,0,0]:R)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(s.prototype);var cn=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);P.safari="Apple Computer, Inc."==navigator.vendor&&(cn&&cn[1]<4||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&cn&&cn[1]<8?function(){var t=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){t.remove()})}:ke;for(var un=function(){this.returnValue=!1},hn=function(){return this.originalEvent.preventDefault()},dn=function(){this.cancelBubble=!0},pn=function(){return this.originalEvent.stopPropagation()},fn=function(){return T.doc.addEventListener?function(t,e,n,i){var r=M&&z[e]?z[e]:e,o=function(r){var o=T.doc.documentElement.scrollTop||T.doc.body.scrollTop,s=T.doc.documentElement.scrollLeft||T.doc.body.scrollLeft,a=r.clientX+s,l=r.clientY+o;if(M&&z[S](e))for(var c=0,u=r.targetTouches&&r.targetTouches.length;u>c;c++)if(r.targetTouches[c].target==t){var h=r;r=r.targetTouches[c],r.originalEvent=h,r.preventDefault=hn,r.stopPropagation=pn;break}return n.call(i,r,a,l)};return t.addEventListener(r,o,!1),function(){return t.removeEventListener(r,o,!1),!0}}:T.doc.attachEvent?function(t,e,n,i){var r=function(t){t=t||T.win.event;var e=T.doc.documentElement.scrollTop||T.doc.body.scrollTop,r=T.doc.documentElement.scrollLeft||T.doc.body.scrollLeft,o=t.clientX+r,s=t.clientY+e;return t.preventDefault=t.preventDefault||un,t.stopPropagation=t.stopPropagation||dn,n.call(i,t,o,s)};t.attachEvent("on"+e,r);var o=function(){return t.detachEvent("on"+e,r),!0};return o}:void 0}(),mn=[],gn=function(t){for(var e=t.clientX,n=t.clientY,i=T.doc.documentElement.scrollTop||T.doc.body.scrollTop,r=T.doc.documentElement.scrollLeft||T.doc.body.scrollLeft,o,s=mn.length;s--;){if(o=mn[s],M){for(var a=t.touches.length,l;a--;)if(l=t.touches[a],l.identifier==o.el._drag.id){e=l.clientX,n=l.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();var c=o.el.node,u,h=c.nextSibling,d=c.parentNode,p=c.style.display;T.win.opera&&d.removeChild(c),c.style.display="none",u=o.el.paper.getElementByPoint(e,n),c.style.display=p,T.win.opera&&(h?d.insertBefore(c,h):d.appendChild(c)),u&&eve("raphael.drag.over."+o.el.id,o.el,u),e+=r,n+=i,eve("raphael.drag.move."+o.el.id,o.move_scope||o.el,e-o.el._drag.x,n-o.el._drag.y,e,n,t)}},vn=function(t){_.unmousemove(gn).unmouseup(vn);for(var e=mn.length,n;e--;)n=mn[e],n.el._drag={},eve("raphael.drag.end."+n.el.id,n.end_scope||n.start_scope||n.move_scope||n.el,t);mn=[]},yn=_.el={},bn=B.length;bn--;)(function(t){_[t]=yn[t]=function(e,n){return _.is(e,"function")&&(this.events=this.events||[],this.events.push({name:t,f:e,unbind:fn(this.shape||this.node||T.doc,t,e,n||this)})),this},_["un"+t]=yn["un"+t]=function(e){for(var n=this.events||[],i=n.length;i--;)if(n[i].name==t&&n[i].f==e)return n[i].unbind(),n.splice(i,1),!n.length&&delete this.events,this;return this}})(B[bn]);yn.data=function(t,e){var n=we[this.id]=we[this.id]||{};if(1==arguments.length){if(_.is(t,"object")){for(var i in t)t[S](i)&&this.data(i,t[i]);return this}return eve("raphael.data.get."+this.id,this,n[t],t),n[t]}return n[t]=e,eve("raphael.data.set."+this.id,this,e,t),this},yn.removeData=function(t){return null==t?we[this.id]={}:we[this.id]&&delete we[this.id][t],this},yn.hover=function(t,e,n,i){return this.mouseover(t,n).mouseout(e,i||n)},yn.unhover=function(t,e){return this.unmouseover(t).unmouseout(e)};var _n=[];yn.drag=function(t,e,n,i,r,o){function s(s){(s.originalEvent||s).preventDefault();var a=T.doc.documentElement.scrollTop||T.doc.body.scrollTop,l=T.doc.documentElement.scrollLeft||T.doc.body.scrollLeft;this._drag.x=s.clientX+l,this._drag.y=s.clientY+a,this._drag.id=s.identifier,!mn.length&&_.mousemove(gn).mouseup(vn),mn.push({el:this,move_scope:i,start_scope:r,end_scope:o}),e&&eve.on("raphael.drag.start."+this.id,e),t&&eve.on("raphael.drag.move."+this.id,t),n&&eve.on("raphael.drag.end."+this.id,n),eve("raphael.drag.start."+this.id,r||i||this,s.clientX+l,s.clientY+a,s)}return this._drag={},_n.push({el:this,start:s}),this.mousedown(s),this},yn.onDragOver=function(t){t?eve.on("raphael.drag.over."+this.id,t):eve.unbind("raphael.drag.over."+this.id)},yn.undrag=function(){for(var t=_n.length;t--;)_n[t].el==this&&(this.unmousedown(_n[t].start),_n.splice(t,1),eve.unbind("raphael.drag.*."+this.id));!_n.length&&_.unmousemove(gn).unmouseup(vn)},P.circle=function(t,e,n){var i=_._engine.circle(this,t||0,e||0,n||0);return this.__set__&&this.__set__.push(i),i},P.rect=function(t,e,n,i,r){var o=_._engine.rect(this,t||0,e||0,n||0,i||0,r||0);return this.__set__&&this.__set__.push(o),o},P.ellipse=function(t,e,n,i){var r=_._engine.ellipse(this,t||0,e||0,n||0,i||0);return this.__set__&&this.__set__.push(r),r},P.path=function(t){t&&!_.is(t,G)&&!_.is(t[0],X)&&(t+=R);var e=_._engine.path(_.format[O](_,arguments),this);return this.__set__&&this.__set__.push(e),e},P.image=function(t,e,n,i,r){var o=_._engine.image(this,t||"about:blank",e||0,n||0,i||0,r||0);return this.__set__&&this.__set__.push(o),o},P.text=function(t,e,n){var i=_._engine.text(this,t||0,e||0,I(n));return this.__set__&&this.__set__.push(i),i},P.set=function(t){!_.is(t,"array")&&(t=Array.prototype.splice.call(arguments,0,arguments.length));var e=new jn(t);return this.__set__&&this.__set__.push(e),e},P.setStart=function(t){this.__set__=t||this.set()},P.setFinish=function(t){var e=this.__set__;return delete this.__set__,e},P.setSize=function(t,e){return _._engine.setSize.call(this,t,e)},P.setViewBox=function(t,e,n,i,r){return _._engine.setViewBox.call(this,t,e,n,i,r)},P.top=P.bottom=null,P.raphael=_;var wn=function(t){var e=t.getBoundingClientRect(),n=t.ownerDocument,i=n.body,r=n.documentElement,o=r.clientTop||i.clientTop||0,s=r.clientLeft||i.clientLeft||0,a=e.top+(T.win.pageYOffset||r.scrollTop||i.scrollTop)-o,l=e.left+(T.win.pageXOffset||r.scrollLeft||i.scrollLeft)-s;return{y:a,x:l}};P.getElementByPoint=function(t,e){var n=this,i=n.canvas,r=T.doc.elementFromPoint(t,e);if(T.win.opera&&"svg"==r.tagName){var o=wn(i),s=i.createSVGRect();s.x=t-o.x,s.y=e-o.y,s.width=s.height=1;var a=i.getIntersectionList(s,null);a.length&&(r=a[a.length-1])}if(!r)return null;for(;r.parentNode&&r!=i.parentNode&&!r.raphael;)r=r.parentNode;return r==n.canvas.parentNode&&(r=i),r=r&&r.raphael?n.getById(r.raphaelid):null},P.getById=function(t){for(var e=this.bottom;e;){if(e.id==t)return e;e=e.next}return null},P.forEach=function(t,e){for(var n=this.bottom;n;){if(t.call(e,n)===!1)return this;n=n.next}return this},P.getElementsByPoint=function(t,e){var n=this.set();return this.forEach(function(i){i.isPointInside(t,e)&&n.push(i)}),n},yn.isPointInside=function(t,e){var n=this.realPath=this.realPath||Ae[this.type](this);return _.isPointInsidePath(n,t,e)},yn.getBBox=function(t){if(this.removed)return{};var e=this._;return t?((e.dirty||!e.bboxwt)&&(this.realPath=Ae[this.type](this),e.bboxwt=Le(this.realPath),e.bboxwt.toString=r,e.dirty=0),b(e.bboxwt)):((e.dirty||e.dirtyT||!e.bbox)&&((e.dirty||!this.realPath)&&(e.bboxwt=0,this.realPath=Ae[this.type](this)),e.bbox=Le(Ee(this.realPath,this.matrix)),e.bbox.toString=r,e.dirty=e.dirtyT=0),b(e.bbox))},yn.getBBoxWOTransform=function(){return this.getBBox(1)},yn.clone=function(){if(this.removed)return null;var t=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(t),t},yn.glow=function(t){if("text"==this.type)return null;t=t||{};var e={width:(t.width||10)+(+this.attr("stroke-width")||1),fill:t.fill||!1,opacity:t.opacity||.5,offsetx:t.offsetx||0,offsety:t.offsety||0,color:t.color||"#000"},n=e.width/2,i=this.paper,r=i.set(),o=this.realPath||Ae[this.type](this);o=this.matrix?Ee(o,this.matrix):o;for(var s=1;n+1>s;s++)r.push(i.path(o).attr({stroke:e.color,fill:e.fill?e.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(e.width/n*s).toFixed(3),opacity:+(e.opacity/n).toFixed(3)}));return r.insertBefore(this).translate(e.offsetx,e.offsety)};var xn={},$n=function(t,e,n,i,r,o,s,a,l){return null==l?p(t,e,n,i,r,o,s,a):_.findDotsAtSegment(t,e,n,i,r,o,s,a,d(t,e,n,i,r,o,s,a,l))},kn=function(t,e){return function(n,i,r){n=Xe(n);for(var o,s,a,l,c="",u={},h,d=0,p=0,f=n.length;f>p;p++){if(a=n[p],"M"==a[0])o=+a[1],s=+a[2];else{if(l=$n(o,s,a[1],a[2],a[3],a[4],a[5],a[6]),d+l>i){if(e&&!u.start){if(h=$n(o,s,a[1],a[2],a[3],a[4],a[5],a[6],i-d),c+=["C"+h.start.x,h.start.y,h.m.x,h.m.y,h.x,h.y],r)return c;u.start=c,c=["M"+h.x,h.y+"C"+h.n.x,h.n.y,h.end.x,h.end.y,a[5],a[6]].join(),d+=l,o=+a[5],s=+a[6];continue}if(!t&&!e)return h=$n(o,s,a[1],a[2],a[3],a[4],a[5],a[6],i-d),{x:h.x,y:h.y,alpha:h.alpha}}d+=l,o=+a[5],s=+a[6]}c+=a.shift()+a}return u.end=c,h=t?d:e?u:_.findDotsAtSegment(o,s,a[0],a[1],a[2],a[3],a[4],a[5],1),h.alpha&&(h={x:h.x,y:h.y,alpha:h.alpha}),h}},Cn=kn(1),Sn=kn(),Tn=kn(0,1);_.getTotalLength=Cn,_.getPointAtLength=Sn,_.getSubpath=function(t,e,n){if(this.getTotalLength(t)-n<1e-6)return Tn(t,e).end;var i=Tn(t,n,1);return e?Tn(i,e).end:i},yn.getTotalLength=function(){return"path"==this.type?this.node.getTotalLength?this.node.getTotalLength():Cn(this.attrs.path):void 0},yn.getPointAtLength=function(t){return"path"==this.type?Sn(this.attrs.path,t):void 0},yn.getSubpath=function(t,e){return"path"==this.type?_.getSubpath(this.attrs.path,t,e):void 0};var An=_.easing_formulas={linear:function(t){return t},"<":function(t){return U(t,1.7)},">":function(t){return U(t,.48)},"<>":function(t){var e=.48-t/1.04,n=q.sqrt(.1734+e*e),i=n-e,r=U(V(i),1/3)*(0>i?-1:1),o=-n-e,s=U(V(o),1/3)*(0>o?-1:1),a=r+s+.5;return 3*(1-a)*a*a+a*a*a},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){t-=1;var e=1.70158;return t*t*((e+1)*t+e)+1},elastic:function(t){return t==!!t?t:U(2,-10*t)*q.sin(2*(t-.075)*W/.3)+1},bounce:function(t){var e=7.5625,n=2.75,i;return 1/n>t?i=e*t*t:2/n>t?(t-=1.5/n,i=e*t*t+.75):2.5/n>t?(t-=2.25/n,i=e*t*t+.9375):(t-=2.625/n,i=e*t*t+.984375),i}};An.easeIn=An["ease-in"]=An["<"],An.easeOut=An["ease-out"]=An[">"],An.easeInOut=An["ease-in-out"]=An["<>"],An["back-in"]=An.backIn,An["back-out"]=An.backOut;var En=[],Pn=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,16)},Nn=function(){for(var t=+new Date,n=0;n<En.length;n++){var i=En[n];if(!i.el.removed&&!i.paused){var r=t-i.start,o=i.ms,s=i.easing,a=i.from,l=i.diff,c=i.to,u=i.t,h=i.el,d={},p,f={},m;if(i.initstatus?(r=(i.initstatus*i.anim.top-i.prev)/(i.percent-i.prev)*o,i.status=i.initstatus,delete i.initstatus,i.stop&&En.splice(n--,1)):i.status=(i.prev+(i.percent-i.prev)*(r/o))/i.anim.top,!(0>r))if(o>r){var g=s(r/o);for(var v in a)if(a[S](v)){switch(de[v]){case J:p=+a[v]+g*o*l[v];break;case"colour":p="rgb("+[On(se(a[v].r+g*o*l[v].r)),On(se(a[v].g+g*o*l[v].g)),On(se(a[v].b+g*o*l[v].b))].join(",")+")";break;case"path":p=[];for(var y=0,b=a[v].length;b>y;y++){p[y]=[a[v][y][0]];for(var w=1,x=a[v][y].length;x>w;w++)p[y][w]=+a[v][y][w]+g*o*l[v][y][w];p[y]=p[y].join(F)}p=p.join(F);break;case"transform":if(l[v].real)for(p=[],y=0,b=a[v].length;b>y;y++)for(p[y]=[a[v][y][0]],w=1,x=a[v][y].length;x>w;w++)p[y][w]=a[v][y][w]+g*o*l[v][y][w];else{var $=function(t){return+a[v][t]+g*o*l[v][t]};p=[["m",$(0),$(1),$(2),$(3),$(4),$(5)]]}break;case"csv":if("clip-rect"==v)for(p=[],y=4;y--;)p[y]=+a[v][y]+g*o*l[v][y];break;default:var k=[][j](a[v]);for(p=[],y=h.paper.customAttributes[v].length;y--;)p[y]=+k[y]+g*o*l[v][y]}d[v]=p}h.attr(d),function(t,e,n){setTimeout(function(){eve("raphael.anim.frame."+t,e,n)})}(h.id,h,i.anim)}else{if(function(t,e,n){setTimeout(function(){eve("raphael.anim.frame."+e.id,e,n),eve("raphael.anim.finish."+e.id,e,n),_.is(t,"function")&&t.call(e)})}(i.callback,h,i.anim),h.attr(c),En.splice(n--,1),i.repeat>1&&!i.next){for(m in c)c[S](m)&&(f[m]=i.totalOrigin[m]);i.el.attr(f),e(i.anim,i.el,i.anim.percents[0],null,i.totalOrigin,i.repeat-1)}i.next&&!i.stop&&e(i.anim,i.el,i.next,null,i.totalOrigin,i.repeat)}}}_.svg&&h&&h.paper&&h.paper.safari(),En.length&&Pn(Nn)},On=function(t){return t>255?255:0>t?0:t};yn.animateWith=function(t,i,r,o,s,a){var l=this;if(l.removed)return a&&a.call(l),l;var c=r instanceof n?r:_.animation(r,o,s,a),u,h;e(c,l,c.percents[0],null,l.attr());for(var d=0,p=En.length;p>d;d++)if(En[d].anim==i&&En[d].el==t){En[p-1].start=En[d].start;break}return l},yn.onAnimation=function(t){return t?eve.on("raphael.anim.frame."+this.id,t):eve.unbind("raphael.anim.frame."+this.id),this},n.prototype.delay=function(t){var e=new n(this.anim,this.ms);return e.times=this.times,e.del=+t||0,e},n.prototype.repeat=function(t){var e=new n(this.anim,this.ms);return e.del=this.del,e.times=q.floor(H(t,0))||1,e},_.animation=function(t,e,i,r){if(t instanceof n)return t;(_.is(i,"function")||!i)&&(r=r||i||null,i=null),t=Object(t),e=+e||0;var o={},s,a;for(a in t)t[S](a)&&le(a)!=a&&le(a)+"%"!=a&&(s=!0,o[a]=t[a]);return s?(i&&(o.easing=i),r&&(o.callback=r),new n({100:o},e)):new n(t,e)},yn.animate=function(t,i,r,o){var s=this;if(s.removed)return o&&o.call(s),s;var a=t instanceof n?t:_.animation(t,i,r,o);return e(a,s,a.percents[0],null,s.attr()),s},yn.setTime=function(t,e){return t&&null!=e&&this.status(t,Q(e,t.ms)/t.ms),this},yn.status=function(t,n){var i=[],r=0,o,s;if(null!=n)return e(t,this,-1,Q(n,1)),this;for(o=En.length;o>r;r++)if(s=En[r],s.el.id==this.id&&(!t||s.anim==t)){if(t)return s.status;i.push({anim:s.anim,status:s.status})}return t?0:i},yn.pause=function(t){for(var e=0;e<En.length;e++)En[e].el.id==this.id&&(!t||En[e].anim==t)&&eve("raphael.anim.pause."+this.id,this,En[e].anim)!==!1&&(En[e].paused=!0);return this},yn.resume=function(t){for(var e=0;e<En.length;e++)if(En[e].el.id==this.id&&(!t||En[e].anim==t)){var n=En[e];eve("raphael.anim.resume."+this.id,this,n.anim)!==!1&&(delete n.paused,this.status(n.anim,n.status))}return this},yn.stop=function(t){for(var e=0;e<En.length;e++)En[e].el.id==this.id&&(!t||En[e].anim==t)&&eve("raphael.anim.stop."+this.id,this,En[e].anim)!==!1&&En.splice(e--,1);return this},eve.on("raphael.remove",t),eve.on("raphael.clear",t),yn.toString=function(){return"Rapha\xebl\u2019s object"};var jn=function(t){if(this.items=[],this.length=0,this.type="set",t)for(var e=0,n=t.length;n>e;e++)t[e]&&(t[e].constructor==yn.constructor||t[e].constructor==jn)&&(this[this.items.length]=this.items[this.items.length]=t[e],this.length++)},Mn=jn.prototype;Mn.push=function(){for(var t,e,n=0,i=arguments.length;i>n;n++)t=arguments[n],t&&(t.constructor==yn.constructor||t.constructor==jn)&&(e=this.items.length,this[e]=this.items[e]=t,this.length++);return this},Mn.pop=function(){return this.length&&delete this[this.length--],this.items.pop()
},Mn.forEach=function(t,e){for(var n=0,i=this.items.length;i>n;n++)if(t.call(e,this.items[n],n)===!1)return this;return this};for(var Rn in yn)yn[S](Rn)&&(Mn[Rn]=function(t){return function(){var e=arguments;return this.forEach(function(n){n[t][O](n,e)})}}(Rn));Mn.attr=function(t,e){if(t&&_.is(t,X)&&_.is(t[0],"object"))for(var n=0,i=t.length;i>n;n++)this.items[n].attr(t[n]);else for(var r=0,o=this.items.length;o>r;r++)this.items[r].attr(t,e);return this},Mn.clear=function(){for(;this.length;)this.pop()},Mn.splice=function(t,e,n){t=0>t?H(this.length+t,0):t,e=H(0,Q(this.length-t,e));var i=[],r=[],o=[],s;for(s=2;s<arguments.length;s++)o.push(arguments[s]);for(s=0;e>s;s++)r.push(this[t+s]);for(;s<this.length-t;s++)i.push(this[t+s]);var a=o.length;for(s=0;s<a+i.length;s++)this.items[t+s]=this[t+s]=a>s?o[s]:i[s-a];for(s=this.items.length=this.length-=e-a;this[s];)delete this[s++];return new jn(r)},Mn.exclude=function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]==t)return this.splice(e,1),!0},Mn.animate=function(t,e,n,i){(_.is(n,"function")||!n)&&(i=n||null);var r=this.items.length,o=r,s,a=this,l;if(!r)return this;i&&(l=function(){!--r&&i.call(a)}),n=_.is(n,G)?n:l;var c=_.animation(t,e,n,l);for(s=this.items[--o].animate(c);o--;)this.items[o]&&!this.items[o].removed&&this.items[o].animateWith(s,c,c);return this},Mn.insertAfter=function(t){for(var e=this.items.length;e--;)this.items[e].insertAfter(t);return this},Mn.getBBox=function(){for(var t=[],e=[],n=[],i=[],r=this.items.length;r--;)if(!this.items[r].removed){var o=this.items[r].getBBox();t.push(o.x),e.push(o.y),n.push(o.x+o.width),i.push(o.y+o.height)}return t=Q[O](0,t),e=Q[O](0,e),n=H[O](0,n),i=H[O](0,i),{x:t,y:e,x2:n,y2:i,width:n-t,height:i-e}},Mn.clone=function(t){t=new jn;for(var e=0,n=this.items.length;n>e;e++)t.push(this.items[e].clone());return t},Mn.toString=function(){return"Rapha\xebl\u2018s set"},_.registerFont=function(t){if(!t.face)return t;this.fonts=this.fonts||{};var e={w:t.w,face:{},glyphs:{}},n=t.face["font-family"];for(var i in t.face)t.face[S](i)&&(e.face[i]=t.face[i]);if(this.fonts[n]?this.fonts[n].push(e):this.fonts[n]=[e],!t.svg){e.face["units-per-em"]=ce(t.face["units-per-em"],10);for(var r in t.glyphs)if(t.glyphs[S](r)){var o=t.glyphs[r];if(e.glyphs[r]={w:o.w,k:{},d:o.d&&"M"+o.d.replace(/[mlcxtrv]/g,function(t){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[t]||"M"})+"z"},o.k)for(var s in o.k)o[S](s)&&(e.glyphs[r].k[s]=o.k[s])}}return t},P.getFont=function(t,e,n,i){if(i=i||"normal",n=n||"normal",e=+e||{normal:400,bold:700,lighter:300,bolder:800}[e]||400,_.fonts){var r=_.fonts[t];if(!r){var o=new RegExp("(^|\\s)"+t.replace(/[^\w\d\s+!~.:_-]/g,R)+"(\\s|$)","i");for(var s in _.fonts)if(_.fonts[S](s)&&o.test(s)){r=_.fonts[s];break}}var a;if(r)for(var l=0,c=r.length;c>l&&(a=r[l],a.face["font-weight"]!=e||a.face["font-style"]!=n&&a.face["font-style"]||a.face["font-stretch"]!=i);l++);return a}},P.print=function(t,e,n,i,r,o,s){o=o||"middle",s=H(Q(s||0,1),-1);var a=I(n)[D](R),l=0,c=0,u=R,h;if(_.is(i,n)&&(i=this.getFont(i)),i){h=(r||16)/i.face["units-per-em"];for(var d=i.face.bbox[D](x),p=+d[0],f=d[3]-d[1],m=0,g=+d[1]+("baseline"==o?f+ +i.face.descent:f/2),v=0,y=a.length;y>v;v++){if("\n"==a[v])l=0,w=0,c=0,m+=f;else{var b=c&&i.glyphs[a[v-1]]||{},w=i.glyphs[a[v]];l+=c?(b.w||i.w)+(b.k&&b.k[a[v]]||0)+i.w*s:0,c=1}w&&w.d&&(u+=_.transformPath(w.d,["t",l*h,m*h,"s",h,h,p,g,"t",(t-p)/h,(e-g)/h]))}}return this.path(u).attr({fill:"#000",stroke:"none"})},P.add=function(t){if(_.is(t,"array"))for(var e=this.set(),n=0,i=t.length,r;i>n;n++)r=t[n]||{},$[S](r.type)&&e.push(this[r.type]().attr(r));return e},_.format=function(t,e){var n=_.is(e,X)?[0][j](e):arguments;return t&&_.is(t,G)&&n.length-1&&(t=t.replace(k,function(t,e){return null==n[++e]?R:n[e]})),t||R},_.fullfill=function(){var t=/\{([^\}]+)\}/g,e=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,n=function(t,n,i){var r=i;return n.replace(e,function(t,e,n,i,o){e=e||i,r&&(e in r&&(r=r[e]),"function"==typeof r&&o&&(r=r()))}),r=(null==r||r==i?t:r)+""};return function(e,i){return String(e).replace(t,function(t,e){return n(t,e,i)})}}(),_.ninja=function(){return A.was?T.win.Raphael=A.is:delete Raphael,_},_.st=Mn,function(t,e,n){function i(){/in/.test(t.readyState)?setTimeout(i,9):_.eve("raphael.DOMload")}null==t.readyState&&t.addEventListener&&(t.addEventListener(e,n=function(){t.removeEventListener(e,n,!1),t.readyState="complete"},!1),t.readyState="loading"),i()}(document,"DOMContentLoaded"),A.was?T.win.Raphael=_:Raphael=_,eve.on("raphael.DOMload",function(){w=!0})}(),window.Raphael.svg&&function(t){var e="hasOwnProperty",n=String,i=parseFloat,r=parseInt,o=Math,s=o.max,a=o.abs,l=o.pow,c=/[, ]+/,u=t.eve,h="",d=" ",p="http://www.w3.org/1999/xlink",f={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},m={};t.toString=function(){return"Your browser supports SVG.\nYou are running Rapha\xebl "+this.version};var g=function(i,r){if(r){"string"==typeof i&&(i=g(i));for(var o in r)r[e](o)&&("xlink:"==o.substring(0,6)?i.setAttributeNS(p,o.substring(6),n(r[o])):i.setAttribute(o,n(r[o])))}else i=t._g.doc.createElementNS("http://www.w3.org/2000/svg",i),i.style&&(i.style.webkitTapHighlightColor="rgba(0,0,0,0)");return i},v=function(e,r){var c="linear",u=e.id+r,d=.5,p=.5,f=e.node,m=e.paper,v=f.style,y=t._g.doc.getElementById(u);if(!y){if(r=n(r).replace(t._radial_gradient,function(t,e,n){if(c="radial",e&&n){d=i(e),p=i(n);var r=2*(p>.5)-1;l(d-.5,2)+l(p-.5,2)>.25&&(p=o.sqrt(.25-l(d-.5,2))*r+.5)&&.5!=p&&(p=p.toFixed(5)-1e-5*r)}return h}),r=r.split(/\s*\-\s*/),"linear"==c){var b=r.shift();if(b=-i(b),isNaN(b))return null;var _=[0,0,o.cos(t.rad(b)),o.sin(t.rad(b))],w=1/(s(a(_[2]),a(_[3]))||1);_[2]*=w,_[3]*=w,_[2]<0&&(_[0]=-_[2],_[2]=0),_[3]<0&&(_[1]=-_[3],_[3]=0)}var x=t._parseDots(r);if(!x)return null;if(u=u.replace(/[\(\)\s,\xb0#]/g,"_"),e.gradient&&u!=e.gradient.id&&(m.defs.removeChild(e.gradient),delete e.gradient),!e.gradient){y=g(c+"Gradient",{id:u}),e.gradient=y,g(y,"radial"==c?{fx:d,fy:p}:{x1:_[0],y1:_[1],x2:_[2],y2:_[3],gradientTransform:e.matrix.invert()}),m.defs.appendChild(y);for(var $=0,k=x.length;k>$;$++)y.appendChild(g("stop",{offset:x[$].offset?x[$].offset:$?"100%":"0%","stop-color":x[$].color||"#fff"}))}}return g(f,{fill:"url(#"+u+")",opacity:1,"fill-opacity":1}),v.fill=h,v.opacity=1,v.fillOpacity=1,1},y=function(t){var e=t.getBBox(1);g(t.pattern,{patternTransform:t.matrix.invert()+" translate("+e.x+","+e.y+")"})},b=function(i,r,o){if("path"==i.type){for(var s=n(r).toLowerCase().split("-"),a=i.paper,l=o?"end":"start",c=i.node,u=i.attrs,d=u["stroke-width"],p=s.length,v="classic",y,b,_,w,x,$=3,k=3,C=5;p--;)switch(s[p]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":v=s[p];break;case"wide":k=5;break;case"narrow":k=2;break;case"long":$=5;break;case"short":$=2}if("open"==v?($+=2,k+=2,C+=2,_=1,w=o?4:1,x={fill:"none",stroke:u.stroke}):(w=_=$/2,x={fill:u.stroke,stroke:"none"}),i._.arrows?o?(i._.arrows.endPath&&m[i._.arrows.endPath]--,i._.arrows.endMarker&&m[i._.arrows.endMarker]--):(i._.arrows.startPath&&m[i._.arrows.startPath]--,i._.arrows.startMarker&&m[i._.arrows.startMarker]--):i._.arrows={},"none"!=v){var S="raphael-marker-"+v,T="raphael-marker-"+l+v+$+k;t._g.doc.getElementById(S)?m[S]++:(a.defs.appendChild(g(g("path"),{"stroke-linecap":"round",d:f[v],id:S})),m[S]=1);var A=t._g.doc.getElementById(T),E;A?(m[T]++,E=A.getElementsByTagName("use")[0]):(A=g(g("marker"),{id:T,markerHeight:k,markerWidth:$,orient:"auto",refX:w,refY:k/2}),E=g(g("use"),{"xlink:href":"#"+S,transform:(o?"rotate(180 "+$/2+" "+k/2+") ":h)+"scale("+$/C+","+k/C+")","stroke-width":(1/(($/C+k/C)/2)).toFixed(4)}),A.appendChild(E),a.defs.appendChild(A),m[T]=1),g(E,x);var P=_*("diamond"!=v&&"oval"!=v);o?(y=i._.arrows.startdx*d||0,b=t.getTotalLength(u.path)-P*d):(y=P*d,b=t.getTotalLength(u.path)-(i._.arrows.enddx*d||0)),x={},x["marker-"+l]="url(#"+T+")",(b||y)&&(x.d=Raphael.getSubpath(u.path,y,b)),g(c,x),i._.arrows[l+"Path"]=S,i._.arrows[l+"Marker"]=T,i._.arrows[l+"dx"]=P,i._.arrows[l+"Type"]=v,i._.arrows[l+"String"]=r}else o?(y=i._.arrows.startdx*d||0,b=t.getTotalLength(u.path)-y):(y=0,b=t.getTotalLength(u.path)-(i._.arrows.enddx*d||0)),i._.arrows[l+"Path"]&&g(c,{d:Raphael.getSubpath(u.path,y,b)}),delete i._.arrows[l+"Path"],delete i._.arrows[l+"Marker"],delete i._.arrows[l+"dx"],delete i._.arrows[l+"Type"],delete i._.arrows[l+"String"];for(x in m)if(m[e](x)&&!m[x]){var N=t._g.doc.getElementById(x);N&&N.parentNode.removeChild(N)}}},_={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},w=function(t,e,i){if(e=_[n(e).toLowerCase()]){for(var r=t.attrs["stroke-width"]||"1",o={round:r,square:r,butt:0}[t.attrs["stroke-linecap"]||i["stroke-linecap"]]||0,s=[],a=e.length;a--;)s[a]=e[a]*r+(a%2?1:-1)*o;g(t.node,{"stroke-dasharray":s.join(",")})}};u.on("raphael.util.attr.blur",function(t){this.blur(t)}),u.on("raphael.util.attr.cursor",function(t){this.node.style.cursor=t});var x=function(i,o){var l=i.node,d=i.attrs,f=l.style.visibility;l.style.visibility="hidden";for(var m in o)if(u("raphael.util.attr."+m,i,o[m]),o[e](m)){if(!t._availableAttrs[e](m))continue;var _=o[m];switch(d[m]=_,m){case"blur":i.blur(_);break;case"href":case"title":case"target":var x=l.parentNode;if("a"!=x.tagName.toLowerCase()){var $=g("a");x.insertBefore($,l),$.appendChild(l),x=$}"target"==m?x.setAttributeNS(p,"show","blank"==_?"new":_):x.setAttributeNS(p,m,_);break;case"cursor":break;case"transform":i.transform(_);break;case"arrow-start":b(i,_);break;case"arrow-end":b(i,_,1);break;case"clip-rect":var C=n(_).split(c);if(4==C.length){i.clip&&i.clip.parentNode.parentNode.removeChild(i.clip.parentNode);var S=g("clipPath"),T=g("rect");S.id=t.createUUID(),g(T,{x:C[0],y:C[1],width:C[2],height:C[3]}),S.appendChild(T),i.paper.defs.appendChild(S),g(l,{"clip-path":"url(#"+S.id+")"}),i.clip=T}if(!_){var A=l.getAttribute("clip-path");if(A){var E=t._g.doc.getElementById(A.replace(/(^url\(#|\)$)/g,h));E&&E.parentNode.removeChild(E),g(l,{"clip-path":h}),delete i.clip}}break;case"path":"path"==i.type&&(g(l,{d:_?d.path=t._pathToAbsolute(_):"M0,0"}),i._.dirty=1,i._.arrows&&("startString"in i._.arrows&&b(i,i._.arrows.startString),"endString"in i._.arrows&&b(i,i._.arrows.endString,1)));break;case"width":if(l.setAttribute(m,_),i._.dirty=1,!d.fx)break;m="x",_=d.x;case"x":d.fx&&(_=-d.x-(d.width||0));case"rx":if("rx"==m&&"rect"==i.type)break;case"cx":l.setAttribute(m,_),i.pattern&&y(i),i._.dirty=1;break;case"height":if(l.setAttribute(m,_),i._.dirty=1,!d.fy)break;m="y",_=d.y;case"y":d.fy&&(_=-d.y-(d.height||0));case"ry":if("ry"==m&&"rect"==i.type)break;case"cy":l.setAttribute(m,_),i.pattern&&y(i),i._.dirty=1;break;case"r":"rect"==i.type?g(l,{rx:_,ry:_}):l.setAttribute(m,_),i._.dirty=1;break;case"src":"image"==i.type&&l.setAttributeNS(p,"href",_);break;case"stroke-width":(1!=i._.sx||1!=i._.sy)&&(_/=s(a(i._.sx),a(i._.sy))||1),i.paper._vbSize&&(_*=i.paper._vbSize),l.setAttribute(m,_),d["stroke-dasharray"]&&w(i,d["stroke-dasharray"],o),i._.arrows&&("startString"in i._.arrows&&b(i,i._.arrows.startString),"endString"in i._.arrows&&b(i,i._.arrows.endString,1));break;case"stroke-dasharray":w(i,_,o);break;case"fill":var P=n(_).match(t._ISURL);if(P){S=g("pattern");var N=g("image");S.id=t.createUUID(),g(S,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),g(N,{x:0,y:0,"xlink:href":P[1]}),S.appendChild(N),function(e){t._preload(P[1],function(){var t=this.offsetWidth,n=this.offsetHeight;g(e,{width:t,height:n}),g(N,{width:t,height:n}),i.paper.safari()})}(S),i.paper.defs.appendChild(S),g(l,{fill:"url(#"+S.id+")"}),i.pattern=S,i.pattern&&y(i);break}var O=t.getRGB(_);if(O.error){if(("circle"==i.type||"ellipse"==i.type||"r"!=n(_).charAt())&&v(i,_)){if("opacity"in d||"fill-opacity"in d){var j=t._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,h));if(j){var M=j.getElementsByTagName("stop");g(M[M.length-1],{"stop-opacity":("opacity"in d?d.opacity:1)*("fill-opacity"in d?d["fill-opacity"]:1)})}}d.gradient=_,d.fill="none";break}}else delete o.gradient,delete d.gradient,!t.is(d.opacity,"undefined")&&t.is(o.opacity,"undefined")&&g(l,{opacity:d.opacity}),!t.is(d["fill-opacity"],"undefined")&&t.is(o["fill-opacity"],"undefined")&&g(l,{"fill-opacity":d["fill-opacity"]});O[e]("opacity")&&g(l,{"fill-opacity":O.opacity>1?O.opacity/100:O.opacity});case"stroke":O=t.getRGB(_),l.setAttribute(m,O.hex),"stroke"==m&&O[e]("opacity")&&g(l,{"stroke-opacity":O.opacity>1?O.opacity/100:O.opacity}),"stroke"==m&&i._.arrows&&("startString"in i._.arrows&&b(i,i._.arrows.startString),"endString"in i._.arrows&&b(i,i._.arrows.endString,1));break;case"gradient":("circle"==i.type||"ellipse"==i.type||"r"!=n(_).charAt())&&v(i,_);break;case"opacity":d.gradient&&!d[e]("stroke-opacity")&&g(l,{"stroke-opacity":_>1?_/100:_});case"fill-opacity":if(d.gradient){j=t._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,h)),j&&(M=j.getElementsByTagName("stop"),g(M[M.length-1],{"stop-opacity":_}));break}default:"font-size"==m&&(_=r(_,10)+"px");var R=m.replace(/(\-.)/g,function(t){return t.substring(1).toUpperCase()});l.style[R]=_,i._.dirty=1,l.setAttribute(m,_)}}k(i,o),l.style.visibility=f},$=1.2,k=function(i,o){if("text"==i.type&&(o[e]("text")||o[e]("font")||o[e]("font-size")||o[e]("x")||o[e]("y"))){var s=i.attrs,a=i.node,l=a.firstChild?r(t._g.doc.defaultView.getComputedStyle(a.firstChild,h).getPropertyValue("font-size"),10):10;if(o[e]("text")){for(s.text=o.text;a.firstChild;)a.removeChild(a.firstChild);for(var c=n(o.text).split("\n"),u=[],d,p=0,f=c.length;f>p;p++)d=g("tspan"),p&&g(d,{dy:l*$,x:s.x}),d.appendChild(t._g.doc.createTextNode(c[p])),a.appendChild(d),u[p]=d}else for(u=a.getElementsByTagName("tspan"),p=0,f=u.length;f>p;p++)p?g(u[p],{dy:l*$,x:s.x}):g(u[0],{dy:0});g(a,{x:s.x,y:s.y}),i._.dirty=1;var m=i._getBBox(),v=s.y-(m.y+m.height/2);v&&t.is(v,"finite")&&g(u[0],{dy:v})}},C=function(e,n){var i=0,r=0;this[0]=this.node=e,e.raphael=!0,this.id=t._oid++,e.raphaelid=this.id,this.matrix=t.matrix(),this.realPath=null,this.paper=n,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},S=t.el;C.prototype=S,S.constructor=C,t._engine.path=function(t,e){var n=g("path");e.canvas&&e.canvas.appendChild(n);var i=new C(n,e);return i.type="path",x(i,{fill:"none",stroke:"#000",path:t}),i},S.rotate=function(t,e,r){if(this.removed)return this;if(t=n(t).split(c),t.length-1&&(e=i(t[1]),r=i(t[2])),t=i(t[0]),null==r&&(e=r),null==e||null==r){var o=this.getBBox(1);e=o.x+o.width/2,r=o.y+o.height/2}return this.transform(this._.transform.concat([["r",t,e,r]])),this},S.scale=function(t,e,r,o){if(this.removed)return this;if(t=n(t).split(c),t.length-1&&(e=i(t[1]),r=i(t[2]),o=i(t[3])),t=i(t[0]),null==e&&(e=t),null==o&&(r=o),null==r||null==o)var s=this.getBBox(1);return r=null==r?s.x+s.width/2:r,o=null==o?s.y+s.height/2:o,this.transform(this._.transform.concat([["s",t,e,r,o]])),this},S.translate=function(t,e){return this.removed?this:(t=n(t).split(c),t.length-1&&(e=i(t[1])),t=i(t[0])||0,e=+e||0,this.transform(this._.transform.concat([["t",t,e]])),this)},S.transform=function(n){var i=this._;if(null==n)return i.transform;if(t._extractTransform(this,n),this.clip&&g(this.clip,{transform:this.matrix.invert()}),this.pattern&&y(this),this.node&&g(this.node,{transform:this.matrix}),1!=i.sx||1!=i.sy){var r=this.attrs[e]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":r})}return this},S.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},S.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},S.remove=function(){if(!this.removed&&this.node.parentNode){var e=this.paper;e.__set__&&e.__set__.exclude(this),u.unbind("raphael.*.*."+this.id),this.gradient&&e.defs.removeChild(this.gradient),t._tear(this,e),"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var n in this)this[n]="function"==typeof this[n]?t._removedFactory(n):null;this.removed=!0}},S._getBBox=function(){if("none"==this.node.style.display){this.show();var t=!0}var e={};try{e=this.node.getBBox()}catch(n){}finally{e=e||{}}return t&&this.hide(),e},S.attr=function(n,i){if(this.removed)return this;if(null==n){var r={};for(var o in this.attrs)this.attrs[e](o)&&(r[o]=this.attrs[o]);return r.gradient&&"none"==r.fill&&(r.fill=r.gradient)&&delete r.gradient,r.transform=this._.transform,r}if(null==i&&t.is(n,"string")){if("fill"==n&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==n)return this._.transform;for(var s=n.split(c),a={},l=0,h=s.length;h>l;l++)n=s[l],a[n]=n in this.attrs?this.attrs[n]:t.is(this.paper.customAttributes[n],"function")?this.paper.customAttributes[n].def:t._availableAttrs[n];return h-1?a:a[s[0]]}if(null==i&&t.is(n,"array")){for(a={},l=0,h=n.length;h>l;l++)a[n[l]]=this.attr(n[l]);return a}if(null!=i){var d={};d[n]=i}else null!=n&&t.is(n,"object")&&(d=n);for(var p in d)u("raphael.attr."+p+"."+this.id,this,d[p]);for(p in this.paper.customAttributes)if(this.paper.customAttributes[e](p)&&d[e](p)&&t.is(this.paper.customAttributes[p],"function")){var f=this.paper.customAttributes[p].apply(this,[].concat(d[p]));this.attrs[p]=d[p];for(var m in f)f[e](m)&&(d[m]=f[m])}return x(this,d),this},S.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var e=this.paper;return e.top!=this&&t._tofront(this,e),this},S.toBack=function(){if(this.removed)return this;var e=this.node.parentNode;"a"==e.tagName.toLowerCase()?e.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):e.firstChild!=this.node&&e.insertBefore(this.node,this.node.parentNode.firstChild),t._toback(this,this.paper);var n=this.paper;return this},S.insertAfter=function(e){if(this.removed)return this;var n=e.node||e[e.length-1].node;return n.nextSibling?n.parentNode.insertBefore(this.node,n.nextSibling):n.parentNode.appendChild(this.node),t._insertafter(this,e,this.paper),this},S.insertBefore=function(e){if(this.removed)return this;var n=e.node||e[0].node;return n.parentNode.insertBefore(this.node,n),t._insertbefore(this,e,this.paper),this},S.blur=function(e){var n=this;if(0!==+e){var i=g("filter"),r=g("feGaussianBlur");n.attrs.blur=e,i.id=t.createUUID(),g(r,{stdDeviation:+e||1.5}),i.appendChild(r),n.paper.defs.appendChild(i),n._blur=i,g(n.node,{filter:"url(#"+i.id+")"})}else n._blur&&(n._blur.parentNode.removeChild(n._blur),delete n._blur,delete n.attrs.blur),n.node.removeAttribute("filter")},t._engine.circle=function(t,e,n,i){var r=g("circle");t.canvas&&t.canvas.appendChild(r);var o=new C(r,t);return o.attrs={cx:e,cy:n,r:i,fill:"none",stroke:"#000"},o.type="circle",g(r,o.attrs),o},t._engine.rect=function(t,e,n,i,r,o){var s=g("rect");t.canvas&&t.canvas.appendChild(s);var a=new C(s,t);return a.attrs={x:e,y:n,width:i,height:r,r:o||0,rx:o||0,ry:o||0,fill:"none",stroke:"#000"},a.type="rect",g(s,a.attrs),a},t._engine.ellipse=function(t,e,n,i,r){var o=g("ellipse");t.canvas&&t.canvas.appendChild(o);var s=new C(o,t);return s.attrs={cx:e,cy:n,rx:i,ry:r,fill:"none",stroke:"#000"},s.type="ellipse",g(o,s.attrs),s},t._engine.image=function(t,e,n,i,r,o){var s=g("image");g(s,{x:n,y:i,width:r,height:o,preserveAspectRatio:"none"}),s.setAttributeNS(p,"href",e),t.canvas&&t.canvas.appendChild(s);var a=new C(s,t);return a.attrs={x:n,y:i,width:r,height:o,src:e},a.type="image",a},t._engine.text=function(e,n,i,r){var o=g("text");e.canvas&&e.canvas.appendChild(o);var s=new C(o,e);return s.attrs={x:n,y:i,"text-anchor":"middle",text:r,font:t._availableAttrs.font,stroke:"none",fill:"#000"},s.type="text",x(s,s.attrs),s},t._engine.setSize=function(t,e){return this.width=t||this.width,this.height=e||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},t._engine.create=function(){var e=t._getContainer.apply(0,arguments),n=e&&e.container,i=e.x,r=e.y,o=e.width,s=e.height;if(!n)throw new Error("SVG container not found.");var a=g("svg"),l="overflow:hidden;",c;return i=i||0,r=r||0,o=o||512,s=s||342,g(a,{height:s,version:1.1,width:o,xmlns:"http://www.w3.org/2000/svg"}),1==n?(a.style.cssText=l+"position:absolute;left:"+i+"px;top:"+r+"px",t._g.doc.body.appendChild(a),c=1):(a.style.cssText=l+"position:relative",n.firstChild?n.insertBefore(a,n.firstChild):n.appendChild(a)),n=new t._Paper,n.width=o,n.height=s,n.canvas=a,n.clear(),n._left=n._top=0,c&&(n.renderfix=function(){}),n.renderfix(),n},t._engine.setViewBox=function(t,e,n,i,r){u("raphael.setViewBox",this,this._viewBox,[t,e,n,i,r]);var o=s(n/this.width,i/this.height),a=this.top,l=r?"meet":"xMinYMin",c,h;for(null==t?(this._vbSize&&(o=1),delete this._vbSize,c="0 0 "+this.width+d+this.height):(this._vbSize=o,c=t+d+e+d+n+d+i),g(this.canvas,{viewBox:c,preserveAspectRatio:l});o&&a;)h="stroke-width"in a.attrs?a.attrs["stroke-width"]:1,a.attr({"stroke-width":h}),a._.dirty=1,a._.dirtyT=1,a=a.prev;return this._viewBox=[t,e,n,i,!!r],this},t.prototype.renderfix=function(){var t=this.canvas,e=t.style,n;try{n=t.getScreenCTM()||t.createSVGMatrix()}catch(i){n=t.createSVGMatrix()}var r=-n.e%1,o=-n.f%1;(r||o)&&(r&&(this._left=(this._left+r)%1,e.left=this._left+"px"),o&&(this._top=(this._top+o)%1,e.top=this._top+"px"))},t.prototype.clear=function(){t.eve("raphael.clear",this);for(var e=this.canvas;e.firstChild;)e.removeChild(e.firstChild);this.bottom=this.top=null,(this.desc=g("desc")).appendChild(t._g.doc.createTextNode("Created with Rapha\xebl "+t.version)),e.appendChild(this.desc),e.appendChild(this.defs=g("defs"))},t.prototype.remove=function(){u("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null};var T=t.st;for(var A in S)S[e](A)&&!T[e](A)&&(T[A]=function(t){return function(){var e=arguments;return this.forEach(function(n){n[t].apply(n,e)})}}(A))}(window.Raphael),window.Raphael.vml&&function(t){var e="hasOwnProperty",n=String,i=parseFloat,r=Math,o=r.round,s=r.max,a=r.min,l=r.abs,c="fill",u=/[, ]+/,h=t.eve,d=" progid:DXImageTransform.Microsoft",p=" ",f="",m={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},g=/([clmz]),?([^clmz]*)/gi,v=/ progid:\S+Blur\([^\)]+\)/g,y=/-?[^,\s-]+/g,b="position:absolute;left:0;top:0;width:1px;height:1px",_=21600,w={path:1,rect:1,image:1},x={circle:1,ellipse:1},$=function(e){var i=/[ahqstv]/gi,r=t._pathToAbsolute;if(n(e).match(i)&&(r=t._path2curve),i=/[clmz]/g,r==t._pathToAbsolute&&!n(e).match(i)){var s=n(e).replace(g,function(t,e,n){var i=[],r="m"==e.toLowerCase(),s=m[e];return n.replace(y,function(t){r&&2==i.length&&(s+=i+m["m"==e?"l":"L"],i=[]),i.push(o(t*_))}),s+i});return s}var a=r(e),l,c;s=[];for(var u=0,h=a.length;h>u;u++){l=a[u],c=a[u][0].toLowerCase(),"z"==c&&(c="x");for(var d=1,v=l.length;v>d;d++)c+=o(l[d]*_)+(d!=v-1?",":f);s.push(c)}return s.join(p)},k=function(e,n,i){var r=t.matrix();return r.rotate(-e,.5,.5),{dx:r.x(n,i),dy:r.y(n,i)}},C=function(t,e,n,i,r,o){var s=t._,a=t.matrix,u=s.fillpos,h=t.node,d=h.style,f=1,m="",g,v=_/e,y=_/n;if(d.visibility="hidden",e&&n){if(h.coordsize=l(v)+p+l(y),d.rotation=o*(0>e*n?-1:1),o){var b=k(o,i,r);i=b.dx,r=b.dy}if(0>e&&(m+="x"),0>n&&(m+=" y")&&(f=-1),d.flip=m,h.coordorigin=i*-v+p+r*-y,u||s.fillsize){var w=h.getElementsByTagName(c);w=w&&w[0],h.removeChild(w),u&&(b=k(o,a.x(u[0],u[1]),a.y(u[0],u[1])),w.position=b.dx*f+p+b.dy*f),s.fillsize&&(w.size=s.fillsize[0]*l(e)+p+s.fillsize[1]*l(n)),h.appendChild(w)}d.visibility="visible"}};t.toString=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\xebl "+this.version};var S=function(t,e,i){for(var r=n(e).toLowerCase().split("-"),o=i?"end":"start",s=r.length,a="classic",l="medium",c="medium";s--;)switch(r[s]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":a=r[s];break;case"wide":case"narrow":c=r[s];break;case"long":case"short":l=r[s]}var u=t.node.getElementsByTagName("stroke")[0];u[o+"arrow"]=a,u[o+"arrowlength"]=l,u[o+"arrowwidth"]=c},T=function(r,l){r.attrs=r.attrs||{};var h=r.node,d=r.attrs,m=h.style,g,v=w[r.type]&&(l.x!=d.x||l.y!=d.y||l.width!=d.width||l.height!=d.height||l.cx!=d.cx||l.cy!=d.cy||l.rx!=d.rx||l.ry!=d.ry||l.r!=d.r),y=x[r.type]&&(d.cx!=l.cx||d.cy!=l.cy||d.r!=l.r||d.rx!=l.rx||d.ry!=l.ry),b=r;for(var k in l)l[e](k)&&(d[k]=l[k]);if(v&&(d.path=t._getPath[r.type](r),r._.dirty=1),l.href&&(h.href=l.href),l.title&&(h.title=l.title),l.target&&(h.target=l.target),l.cursor&&(m.cursor=l.cursor),"blur"in l&&r.blur(l.blur),(l.path&&"path"==r.type||v)&&(h.path=$(~n(d.path).toLowerCase().indexOf("r")?t._pathToAbsolute(d.path):d.path),"image"==r.type&&(r._.fillpos=[d.x,d.y],r._.fillsize=[d.width,d.height],C(r,1,1,0,0,0))),"transform"in l&&r.transform(l.transform),y){var T=+d.cx,E=+d.cy,P=+d.rx||+d.r||0,O=+d.ry||+d.r||0;h.path=t.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",o((T-P)*_),o((E-O)*_),o((T+P)*_),o((E+O)*_),o(T*_))}if("clip-rect"in l){var j=n(l["clip-rect"]).split(u);if(4==j.length){j[2]=+j[2]+ +j[0],j[3]=+j[3]+ +j[1];var M=h.clipRect||t._g.doc.createElement("div"),R=M.style;R.clip=t.format("rect({1}px {2}px {3}px {0}px)",j),h.clipRect||(R.position="absolute",R.top=0,R.left=0,R.width=r.paper.width+"px",R.height=r.paper.height+"px",h.parentNode.insertBefore(M,h),M.appendChild(h),h.clipRect=M)}l["clip-rect"]||h.clipRect&&(h.clipRect.style.clip="auto")}if(r.textpath){var F=r.textpath.style;l.font&&(F.font=l.font),l["font-family"]&&(F.fontFamily='"'+l["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,f)+'"'),l["font-size"]&&(F.fontSize=l["font-size"]),l["font-weight"]&&(F.fontWeight=l["font-weight"]),l["font-style"]&&(F.fontStyle=l["font-style"])}if("arrow-start"in l&&S(b,l["arrow-start"]),"arrow-end"in l&&S(b,l["arrow-end"],1),null!=l.opacity||null!=l["stroke-width"]||null!=l.fill||null!=l.src||null!=l.stroke||null!=l["stroke-width"]||null!=l["stroke-opacity"]||null!=l["fill-opacity"]||null!=l["stroke-dasharray"]||null!=l["stroke-miterlimit"]||null!=l["stroke-linejoin"]||null!=l["stroke-linecap"]){var I=h.getElementsByTagName(c),D=!1;if(I=I&&I[0],!I&&(D=I=N(c)),"image"==r.type&&l.src&&(I.src=l.src),l.fill&&(I.on=!0),(null==I.on||"none"==l.fill||null===l.fill)&&(I.on=!1),I.on&&l.fill){var B=n(l.fill).match(t._ISURL);if(B){I.parentNode==h&&h.removeChild(I),I.rotate=!0,I.src=B[1],I.type="tile";var z=r.getBBox(1);I.position=z.x+p+z.y,r._.fillpos=[z.x,z.y],t._preload(B[1],function(){r._.fillsize=[this.offsetWidth,this.offsetHeight]})}else I.color=t.getRGB(l.fill).hex,I.src=f,I.type="solid",t.getRGB(l.fill).error&&(b.type in{circle:1,ellipse:1}||"r"!=n(l.fill).charAt())&&A(b,l.fill,I)&&(d.fill="none",d.gradient=l.fill,I.rotate=!1)}if("fill-opacity"in l||"opacity"in l){var L=((+d["fill-opacity"]+1||2)-1)*((+d.opacity+1||2)-1)*((+t.getRGB(l.fill).o+1||2)-1);L=a(s(L,0),1),I.opacity=L,I.src&&(I.color="none")}h.appendChild(I);var q=h.getElementsByTagName("stroke")&&h.getElementsByTagName("stroke")[0],H=!1;!q&&(H=q=N("stroke")),(l.stroke&&"none"!=l.stroke||l["stroke-width"]||null!=l["stroke-opacity"]||l["stroke-dasharray"]||l["stroke-miterlimit"]||l["stroke-linejoin"]||l["stroke-linecap"])&&(q.on=!0),("none"==l.stroke||null===l.stroke||null==q.on||0==l.stroke||0==l["stroke-width"])&&(q.on=!1);var Q=t.getRGB(l.stroke);q.on&&l.stroke&&(q.color=Q.hex),L=((+d["stroke-opacity"]+1||2)-1)*((+d.opacity+1||2)-1)*((+Q.o+1||2)-1);var V=.75*(i(l["stroke-width"])||1);if(L=a(s(L,0),1),null==l["stroke-width"]&&(V=d["stroke-width"]),l["stroke-width"]&&(q.weight=V),V&&1>V&&(L*=V)&&(q.weight=1),q.opacity=L,l["stroke-linejoin"]&&(q.joinstyle=l["stroke-linejoin"]||"miter"),q.miterlimit=l["stroke-miterlimit"]||8,l["stroke-linecap"]&&(q.endcap="butt"==l["stroke-linecap"]?"flat":"square"==l["stroke-linecap"]?"square":"round"),l["stroke-dasharray"]){var U={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};q.dashstyle=U[e](l["stroke-dasharray"])?U[l["stroke-dasharray"]]:f}H&&h.appendChild(q)}if("text"==b.type){b.paper.canvas.style.display=f;var W=b.paper.span,J=100,G=d.font&&d.font.match(/\d+(?:\.\d*)?(?=px)/);m=W.style,d.font&&(m.font=d.font),d["font-family"]&&(m.fontFamily=d["font-family"]),d["font-weight"]&&(m.fontWeight=d["font-weight"]),d["font-style"]&&(m.fontStyle=d["font-style"]),G=i(d["font-size"]||G&&G[0])||10,m.fontSize=G*J+"px",b.textpath.string&&(W.innerHTML=n(b.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var X=W.getBoundingClientRect();b.W=d.w=(X.right-X.left)/J,b.H=d.h=(X.bottom-X.top)/J,b.X=d.x,b.Y=d.y+b.H/2,("x"in l||"y"in l)&&(b.path.v=t.format("m{0},{1}l{2},{1}",o(d.x*_),o(d.y*_),o(d.x*_)+1));for(var K=["x","y","text","font","font-family","font-weight","font-style","font-size"],Y=0,Z=K.length;Z>Y;Y++)if(K[Y]in l){b._.dirty=1;break}switch(d["text-anchor"]){case"start":b.textpath.style["v-text-align"]="left",b.bbx=b.W/2;break;case"end":b.textpath.style["v-text-align"]="right",b.bbx=-b.W/2;break;default:b.textpath.style["v-text-align"]="center",b.bbx=0}b.textpath.style["v-text-kern"]=!0}},A=function(e,o,s){e.attrs=e.attrs||{};var a=e.attrs,l=Math.pow,c,u,h="linear",d=".5 .5";if(e.attrs.gradient=o,o=n(o).replace(t._radial_gradient,function(t,e,n){return h="radial",e&&n&&(e=i(e),n=i(n),l(e-.5,2)+l(n-.5,2)>.25&&(n=r.sqrt(.25-l(e-.5,2))*(2*(n>.5)-1)+.5),d=e+p+n),f}),o=o.split(/\s*\-\s*/),"linear"==h){var m=o.shift();if(m=-i(m),isNaN(m))return null}var g=t._parseDots(o);if(!g)return null;if(e=e.shape||e.node,g.length){e.removeChild(s),s.on=!0,s.method="none",s.color=g[0].color,s.color2=g[g.length-1].color;for(var v=[],y=0,b=g.length;b>y;y++)g[y].offset&&v.push(g[y].offset+p+g[y].color);s.colors=v.length?v.join():"0% "+s.color,"radial"==h?(s.type="gradientTitle",s.focus="100%",s.focussize="0 0",s.focusposition=d,s.angle=0):(s.type="gradient",s.angle=(270-m)%360),e.appendChild(s)}return 1},E=function(e,n){this[0]=this.node=e,e.raphael=!0,this.id=t._oid++,e.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=n,this.matrix=t.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},P=t.el;E.prototype=P,P.constructor=E,P.transform=function(e){if(null==e)return this._.transform;var i=this.paper._viewBoxShift,r=i?"s"+[i.scale,i.scale]+"-1-1t"+[i.dx,i.dy]:f,o;i&&(o=e=n(e).replace(/\.{3}|\u2026/g,this._.transform||f)),t._extractTransform(this,r+e);var s=this.matrix.clone(),a=this.skew,l=this.node,c,u=~n(this.attrs.fill).indexOf("-"),h=!n(this.attrs.fill).indexOf("url(");if(s.translate(-.5,-.5),h||u||"image"==this.type)if(a.matrix="1 0 0 1",a.offset="0 0",c=s.split(),u&&c.noRotation||!c.isSimple){l.style.filter=s.toFilter();var d=this.getBBox(),m=this.getBBox(1),g=d.x-m.x,v=d.y-m.y;l.coordorigin=g*-_+p+v*-_,C(this,1,1,g,v,0)}else l.style.filter=f,C(this,c.scalex,c.scaley,c.dx,c.dy,c.rotate);else l.style.filter=f,a.matrix=n(s),a.offset=s.offset();return o&&(this._.transform=o),this},P.rotate=function(t,e,r){if(this.removed)return this;if(null!=t){if(t=n(t).split(u),t.length-1&&(e=i(t[1]),r=i(t[2])),t=i(t[0]),null==r&&(e=r),null==e||null==r){var o=this.getBBox(1);e=o.x+o.width/2,r=o.y+o.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",t,e,r]])),this}},P.translate=function(t,e){return this.removed?this:(t=n(t).split(u),t.length-1&&(e=i(t[1])),t=i(t[0])||0,e=+e||0,this._.bbox&&(this._.bbox.x+=t,this._.bbox.y+=e),this.transform(this._.transform.concat([["t",t,e]])),this)},P.scale=function(t,e,r,o){if(this.removed)return this;if(t=n(t).split(u),t.length-1&&(e=i(t[1]),r=i(t[2]),o=i(t[3]),isNaN(r)&&(r=null),isNaN(o)&&(o=null)),t=i(t[0]),null==e&&(e=t),null==o&&(r=o),null==r||null==o)var s=this.getBBox(1);return r=null==r?s.x+s.width/2:r,o=null==o?s.y+s.height/2:o,this.transform(this._.transform.concat([["s",t,e,r,o]])),this._.dirtyT=1,this},P.hide=function(){return!this.removed&&(this.node.style.display="none"),this},P.show=function(){return!this.removed&&(this.node.style.display=f),this},P._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}
},P.remove=function(){if(!this.removed&&this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),t.eve.unbind("raphael.*.*."+this.id),t._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null;this.removed=!0}},P.attr=function(n,i){if(this.removed)return this;if(null==n){var r={};for(var o in this.attrs)this.attrs[e](o)&&(r[o]=this.attrs[o]);return r.gradient&&"none"==r.fill&&(r.fill=r.gradient)&&delete r.gradient,r.transform=this._.transform,r}if(null==i&&t.is(n,"string")){if(n==c&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var s=n.split(u),a={},l=0,d=s.length;d>l;l++)n=s[l],a[n]=n in this.attrs?this.attrs[n]:t.is(this.paper.customAttributes[n],"function")?this.paper.customAttributes[n].def:t._availableAttrs[n];return d-1?a:a[s[0]]}if(this.attrs&&null==i&&t.is(n,"array")){for(a={},l=0,d=n.length;d>l;l++)a[n[l]]=this.attr(n[l]);return a}var p;null!=i&&(p={},p[n]=i),null==i&&t.is(n,"object")&&(p=n);for(var f in p)h("raphael.attr."+f+"."+this.id,this,p[f]);if(p){for(f in this.paper.customAttributes)if(this.paper.customAttributes[e](f)&&p[e](f)&&t.is(this.paper.customAttributes[f],"function")){var m=this.paper.customAttributes[f].apply(this,[].concat(p[f]));this.attrs[f]=p[f];for(var g in m)m[e](g)&&(p[g]=m[g])}p.text&&"text"==this.type&&(this.textpath.string=p.text),T(this,p)}return this},P.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&t._tofront(this,this.paper),this},P.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),t._toback(this,this.paper)),this)},P.insertAfter=function(e){return this.removed?this:(e.constructor==t.st.constructor&&(e=e[e.length-1]),e.node.nextSibling?e.node.parentNode.insertBefore(this.node,e.node.nextSibling):e.node.parentNode.appendChild(this.node),t._insertafter(this,e,this.paper),this)},P.insertBefore=function(e){return this.removed?this:(e.constructor==t.st.constructor&&(e=e[0]),e.node.parentNode.insertBefore(this.node,e.node),t._insertbefore(this,e,this.paper),this)},P.blur=function(e){var n=this.node.runtimeStyle,i=n.filter;i=i.replace(v,f),0!==+e?(this.attrs.blur=e,n.filter=i+p+d+".Blur(pixelradius="+(+e||1.5)+")",n.margin=t.format("-{0}px 0 0 -{0}px",o(+e||1.5))):(n.filter=i,n.margin=0,delete this.attrs.blur)},t._engine.path=function(t,e){var n=N("shape");n.style.cssText=b,n.coordsize=_+p+_,n.coordorigin=e.coordorigin;var i=new E(n,e),r={fill:"none",stroke:"#000"};t&&(r.path=t),i.type="path",i.path=[],i.Path=f,T(i,r),e.canvas.appendChild(n);var o=N("skew");return o.on=!0,n.appendChild(o),i.skew=o,i.transform(f),i},t._engine.rect=function(e,n,i,r,o,s){var a=t._rectPath(n,i,r,o,s),l=e.path(a),c=l.attrs;return l.X=c.x=n,l.Y=c.y=i,l.W=c.width=r,l.H=c.height=o,c.r=s,c.path=a,l.type="rect",l},t._engine.ellipse=function(t,e,n,i,r){var o=t.path(),s=o.attrs;return o.X=e-i,o.Y=n-r,o.W=2*i,o.H=2*r,o.type="ellipse",T(o,{cx:e,cy:n,rx:i,ry:r}),o},t._engine.circle=function(t,e,n,i){var r=t.path(),o=r.attrs;return r.X=e-i,r.Y=n-i,r.W=r.H=2*i,r.type="circle",T(r,{cx:e,cy:n,r:i}),r},t._engine.image=function(e,n,i,r,o,s){var a=t._rectPath(i,r,o,s),l=e.path(a).attr({stroke:"none"}),u=l.attrs,h=l.node,d=h.getElementsByTagName(c)[0];return u.src=n,l.X=u.x=i,l.Y=u.y=r,l.W=u.width=o,l.H=u.height=s,u.path=a,l.type="image",d.parentNode==h&&h.removeChild(d),d.rotate=!0,d.src=n,d.type="tile",l._.fillpos=[i,r],l._.fillsize=[o,s],h.appendChild(d),C(l,1,1,0,0,0),l},t._engine.text=function(e,i,r,s){var a=N("shape"),l=N("path"),c=N("textpath");i=i||0,r=r||0,s=s||"",l.v=t.format("m{0},{1}l{2},{1}",o(i*_),o(r*_),o(i*_)+1),l.textpathok=!0,c.string=n(s),c.on=!0,a.style.cssText=b,a.coordsize=_+p+_,a.coordorigin="0 0";var u=new E(a,e),h={fill:"#000",stroke:"none",font:t._availableAttrs.font,text:s};u.shape=a,u.path=l,u.textpath=c,u.type="text",u.attrs.text=n(s),u.attrs.x=i,u.attrs.y=r,u.attrs.w=1,u.attrs.h=1,T(u,h),a.appendChild(c),a.appendChild(l),e.canvas.appendChild(a);var d=N("skew");return d.on=!0,a.appendChild(d),u.skew=d,u.transform(f),u},t._engine.setSize=function(e,n){var i=this.canvas.style;return this.width=e,this.height=n,e==+e&&(e+="px"),n==+n&&(n+="px"),i.width=e,i.height=n,i.clip="rect(0 "+e+" "+n+" 0)",this._viewBox&&t._engine.setViewBox.apply(this,this._viewBox),this},t._engine.setViewBox=function(e,n,i,r,o){t.eve("raphael.setViewBox",this,this._viewBox,[e,n,i,r,o]);var a=this.width,l=this.height,c=1/s(i/a,r/l),u,h;return o&&(u=l/r,h=a/i,a>i*u&&(e-=(a-i*u)/2/u),l>r*h&&(n-=(l-r*h)/2/h)),this._viewBox=[e,n,i,r,!!o],this._viewBoxShift={dx:-e,dy:-n,scale:c},this.forEach(function(t){t.transform("...")}),this};var N;t._engine.initWin=function(t){var e=t.document;e.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!e.namespaces.rvml&&e.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),N=function(t){return e.createElement("<rvml:"+t+' class="rvml">')}}catch(n){N=function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},t._engine.initWin(t._g.win),t._engine.create=function(){var e=t._getContainer.apply(0,arguments),n=e.container,i=e.height,r,o=e.width,s=e.x,a=e.y;if(!n)throw new Error("VML container not found.");var l=new t._Paper,c=l.canvas=t._g.doc.createElement("div"),u=c.style;return s=s||0,a=a||0,o=o||512,i=i||342,l.width=o,l.height=i,o==+o&&(o+="px"),i==+i&&(i+="px"),l.coordsize=1e3*_+p+1e3*_,l.coordorigin="0 0",l.span=t._g.doc.createElement("span"),l.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",c.appendChild(l.span),u.cssText=t.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",o,i),1==n?(t._g.doc.body.appendChild(c),u.left=s+"px",u.top=a+"px",u.position="absolute"):n.firstChild?n.insertBefore(c,n.firstChild):n.appendChild(c),l.renderfix=function(){},l},t.prototype.clear=function(){t.eve("raphael.clear",this),this.canvas.innerHTML=f,this.span=t._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},t.prototype.remove=function(){t.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var e in this)this[e]="function"==typeof this[e]?t._removedFactory(e):null;return!0};var O=t.st;for(var j in P)P[e](j)&&!O[e](j)&&(O[j]=function(t){return function(){var e=arguments;return this.forEach(function(n){n[t].apply(n,e)})}}(j))}(window.Raphael)),function(t,e,n){"use strict";function i(t){return t&&"number"==typeof t.length?"function"!=typeof t.hasOwnProperty&&"function"!=typeof t.constructor?!0:t instanceof ce||ni&&t instanceof ni||"[object Object]"!==oi.call(t)||"function"==typeof t.callee:!1}function r(t,e,n){var o;if(t)if($(t))for(o in t)"prototype"!=o&&"length"!=o&&"name"!=o&&t.hasOwnProperty(o)&&e.call(n,t[o],o);else if(t.forEach&&t.forEach!==r)t.forEach(e,n);else if(i(t))for(o=0;o<t.length;o++)e.call(n,t[o],o);else for(o in t)t.hasOwnProperty(o)&&e.call(n,t[o],o);return t}function o(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e.sort()}function s(t,e,n){for(var i=o(t),r=0;r<i.length;r++)e.call(n,t[i[r]],i[r]);return i}function a(t){return function(e,n){t(n,e)}}function l(){for(var t=ci.length,e;t;){if(t--,e=ci[t].charCodeAt(0),57==e)return ci[t]="A",ci.join("");if(90!=e)return ci[t]=String.fromCharCode(e+1),ci.join("");ci[t]="0"}return ci.unshift("0"),ci.join("")}function c(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function u(t){var e=t.$$hashKey;return r(arguments,function(e){e!==t&&r(e,function(e,n){t[n]=e})}),c(t,e),t}function h(t){return parseInt(t,10)}function d(t,e){return u(new(u(function(){},{prototype:t})),e)}function p(){}function f(t){return t}function m(t){return function(){return t}}function g(t){return"undefined"==typeof t}function v(t){return"undefined"!=typeof t}function y(t){return null!=t&&"object"==typeof t}function b(t){return"string"==typeof t}function _(t){return"number"==typeof t}function w(t){return"[object Date]"==oi.apply(t)}function x(t){return"[object Array]"==oi.apply(t)}function $(t){return"function"==typeof t}function k(t){return t&&t.document&&t.location&&t.alert&&t.setInterval}function C(t){return t&&t.$evalAsync&&t.$watch}function S(t){return"[object File]"===oi.apply(t)}function T(t){return"boolean"==typeof t}function A(t){return b(t)?t.replace(/^\s*/,"").replace(/\s*$/,""):t}function E(t){return t&&(t.nodeName||t.bind&&t.find)}function P(t){var e={},n=t.split(","),i;for(i=0;i<n.length;i++)e[n[i]]=!0;return e}function N(t,e,n){var i=[];return r(t,function(t,r,o){i.push(e.call(n,t,r,o))}),i}function O(t,e){var n=0,i;if(x(t)||b(t))return t.length;if(y(t))for(i in t)(!e||t.hasOwnProperty(i))&&n++;return n}function j(t,e){return-1!=M(t,e)}function M(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(e===t[n])return n;return-1}function R(t,e){var n=M(t,e);return n>=0&&t.splice(n,1),e}function F(t){if(t)switch(t.nodeName){case"OPTION":case"PRE":case"TITLE":return!0}return!1}function I(t,e){if(k(t)||C(t))throw Error("Can't copy Window or Scope");if(e){if(t===e)throw Error("Can't copy equivalent objects or arrays");if(x(t)){e.length=0;for(var n=0;n<t.length;n++)e.push(I(t[n]))}else{var i=e.$$hashKey;r(e,function(t,n){delete e[n]});for(var o in t)e[o]=I(t[o]);c(e,i)}}else e=t,t&&(x(t)?e=I(t,[]):w(t)?e=new Date(t.getTime()):y(t)&&(e=I(t,{})));return e}function D(t,e){e=e||{};for(var n in t)t.hasOwnProperty(n)&&"$$"!==n.substr(0,2)&&(e[n]=t[n]);return e}function B(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!==t&&e!==e)return!0;var i=typeof t,r=typeof e,o,s,a;if(i==r&&"object"==i){if(!x(t)){if(w(t))return w(e)&&t.getTime()==e.getTime();if(C(t)||C(e)||k(t)||k(e))return!1;a={};for(s in t)if("$"!==s.charAt(0)&&!$(t[s])){if(!B(t[s],e[s]))return!1;a[s]=!0}for(s in e)if(!a[s]&&"$"!==s.charAt(0)&&e[s]!==n&&!$(e[s]))return!1;return!0}if((o=t.length)==e.length){for(s=0;o>s;s++)if(!B(t[s],e[s]))return!1;return!0}}return!1}function z(t,e,n){return t.concat(ii.call(e,n))}function L(t,e){return ii.call(t,e||0)}function q(t,e){var n=arguments.length>2?L(arguments,2):[];return!$(e)||e instanceof RegExp?e:n.length?function(){return arguments.length?e.apply(t,n.concat(ii.call(arguments,0))):e.apply(t,n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function H(t,i){var r=i;return/^\$+/.test(t)?r=n:k(i)?r="$WINDOW":i&&e===i?r="$DOCUMENT":C(i)&&(r="$SCOPE"),r}function Q(t,e){return JSON.stringify(t,H,e?"  ":null)}function V(t){return b(t)?JSON.parse(t):t}function U(t){if(t&&0!==t.length){var e=Xn(""+t);t=!("f"==e||"0"==e||"false"==e||"no"==e||"n"==e||"[]"==e)}else t=!1;return t}function W(t){t=ei(t).clone();try{t.html("")}catch(e){}var n=3,i=ei("<div>").append(t).html();try{return t[0].nodeType===n?Xn(i):i.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(t,e){return"<"+Xn(e)})}catch(e){return Xn(i)}}function J(t){var e={},n,i;return r((t||"").split("&"),function(t){t&&(n=t.split("="),i=decodeURIComponent(n[0]),e[i]=v(n[1])?decodeURIComponent(n[1]):!0)}),e}function G(t){var e=[];return r(t,function(t,n){e.push(K(n,!0)+(t===!0?"":"="+K(t,!0)))}),e.length?e.join("&"):""}function X(t){return K(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function K(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,e?"%20":"+")}function Y(t,n){function i(t){t&&o.push(t)}var o=[t],s,a,l=["ng:app","ng-app","x-ng-app","data-ng-app"],c=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;r(l,function(n){l[n]=!0,i(e.getElementById(n)),n=n.replace(":","\\:"),t.querySelectorAll&&(r(t.querySelectorAll("."+n),i),r(t.querySelectorAll("."+n+"\\:"),i),r(t.querySelectorAll("["+n+"]"),i))}),r(o,function(t){if(!s){var e=" "+t.className+" ",n=c.exec(e);n?(s=t,a=(n[2]||"").replace(/\s+/g,",")):r(t.attributes,function(e){!s&&l[e.name]&&(s=t,a=e.value)})}}),s&&n(s,a?[a]:[])}function Z(e,n){var i=function(){e=ei(e),n=n||[],n.unshift(["$provide",function(t){t.value("$rootElement",e)}]),n.unshift("ng");var t=Ae(n);return t.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,n,i){t.$apply(function(){e.data("$injector",i),n(e)(t)})}]),t},o=/^NG_DEFER_BOOTSTRAP!/;return t&&!o.test(t.name)?i():(t.name=t.name.replace(o,""),void(si.resumeBootstrap=function(t){r(t,function(t){n.push(t)}),i()}))}function te(t,e){return e=e||"_",t.replace(ui,function(t,n){return(n?e:"")+t.toLowerCase()})}function ee(){ni=t.jQuery,ni?(ei=ni,u(ni.fn,{scope:bi.scope,controller:bi.controller,injector:bi.injector,inheritedData:bi.inheritedData}),le("remove",!0),le("empty"),le("html")):ei=ce,si.element=ei}function ne(t,e,n){if(!t)throw new Error("Argument '"+(e||"?")+"' is "+(n||"required"));return t}function ie(t,e,n){return n&&x(t)&&(t=t[t.length-1]),ne($(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function re(t){function e(t,e,n){return t[e]||(t[e]=n())}return e(e(t,"angular",Object),"module",function(){var t={};return function n(i,r,o){return r&&t.hasOwnProperty(i)&&(t[i]=null),e(t,i,function(){function t(t,n,i){return function(){return e[i||"push"]([t,n,arguments]),a}}if(!r)throw Error("No module: "+i);var e=[],n=[],s=t("$injector","invoke"),a={_invokeQueue:e,_runBlocks:n,requires:r,name:i,provider:t("$provide","provider"),factory:t("$provide","factory"),service:t("$provide","service"),value:t("$provide","value"),constant:t("$provide","constant","unshift"),filter:t("$filterProvider","register"),controller:t("$controllerProvider","register"),directive:t("$compileProvider","directive"),config:s,run:function(t){return n.push(t),this}};return o&&s(o),a})}})}function oe(e){u(e,{bootstrap:Z,copy:I,extend:u,equals:B,element:ei,forEach:r,injector:Ae,noop:p,bind:q,toJson:Q,fromJson:V,identity:f,isUndefined:g,isDefined:v,isString:b,isFunction:$,isObject:y,isNumber:_,isElement:E,isArray:x,version:hi,isDate:w,lowercase:Xn,uppercase:Kn,callbacks:{counter:0}}),ai=re(t);try{ai("ngLocale")}catch(n){ai("ngLocale",[]).provider("$locale",kn)}ai("ng",["ngLocale"],["$provide",function i(t){t.provider("$compile",Me).directive({a:qi,input:Yi,textarea:Yi,form:Ui,script:Rr,select:Ir,style:Br,option:Dr,ngBind:ur,ngBindHtmlUnsafe:dr,ngBindTemplate:hr,ngClass:pr,ngClassEven:mr,ngClassOdd:fr,ngCsp:yr,ngCloak:gr,ngController:vr,ngForm:Wi,ngHide:Tr,ngInclude:wr,ngInit:xr,ngNonBindable:$r,ngPluralize:kr,ngRepeat:Cr,ngShow:Sr,ngSubmit:_r,ngStyle:Ar,ngSwitch:Pr,ngSwitchWhen:Nr,ngSwitchDefault:Or,ngOptions:Fr,ngView:Mr,ngTransclude:jr,ngModel:rr,ngList:ar,ngChange:or,required:sr,ngRequired:sr,ngValue:cr}).directive(Hi).directive(br),t.provider({$anchorScroll:Ee,$browser:Ne,$cacheFactory:Oe,$controller:De,$document:Be,$exceptionHandler:ze,$filter:Sn,$interpolate:Le,$http:wn,$httpBackend:xn,$location:tn,$log:en,$parse:cn,$route:dn,$routeParams:pn,$rootScope:fn,$q:un,$sniffer:mn,$templateCache:je,$timeout:Cn,$window:gn})}])}function se(){return++fi}function ae(t){return t.replace(vi,function(t,e,n,i){return i?n.toUpperCase():n}).replace(yi,"Moz$1")}function le(t,e){function n(){for(var t=[this],n=e,r,o,s,a,l,c,u,h,d;t.length;)for(r=t.shift(),o=0,s=r.length;s>o;o++)for(a=ei(r[o]),n?a.triggerHandler("$destroy"):n=!n,l=0,c=(u=a.children()).length;c>l;l++)t.push(ni(u[l]));return i.apply(this,arguments)}var i=ni.fn[t];i=i.$original||i,n.$original=i,ni.fn[t]=n}function ce(t){if(t instanceof ce)return t;if(!(this instanceof ce)){if(b(t)&&"<"!=t.charAt(0))throw Error("selectors not implemented");return new ce(t)}if(b(t)){var n=e.createElement("div");n.innerHTML="<div>&#160;</div>"+t,n.removeChild(n.firstChild),be(this,n.childNodes),this.remove()}else be(this,t)}function ue(t){return t.cloneNode(!0)}function he(t){pe(t);for(var e=0,n=t.childNodes||[];e<n.length;e++)he(n[e])}function de(t,e,n){var i=fe(t,"events"),o=fe(t,"handle");o&&(g(e)?r(i,function(e,n){gi(t,n,e),delete i[n]}):g(n)?(gi(t,e,i[e]),delete i[e]):R(i[e],n))}function pe(t){var e=t[pi],i=di[e];i&&(i.handle&&(i.events.$destroy&&i.handle({},"$destroy"),de(t)),delete di[e],t[pi]=n)}function fe(t,e,n){var i=t[pi],r=di[i||-1];return v(n)?(r||(t[pi]=i=se(),r=di[i]={}),void(r[e]=n)):r&&r[e]}function me(t,e,n){var i=fe(t,"data"),r=v(n),o=!r&&v(e),s=o&&!y(e);if(i||s||fe(t,"data",i={}),r)i[e]=n;else{if(!o)return i;if(s)return i&&i[e];u(i,e)}}function ge(t,e){return(" "+t.className+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1}function ve(t,e){e&&r(e.split(" "),function(e){t.className=A((" "+t.className+" ").replace(/[\n\t]/g," ").replace(" "+A(e)+" "," "))})}function ye(t,e){e&&r(e.split(" "),function(e){ge(t,e)||(t.className=A(t.className+" "+A(e)))})}function be(t,e){if(e){e=e.nodeName||!v(e.length)||k(e)?[e]:e;for(var n=0;n<e.length;n++)t.push(e[n])}}function _e(t,e){return we(t,"$"+(e||"ngController")+"Controller")}function we(t,e,n){for(t=ei(t),9==t[0].nodeType&&(t=t.find("html"));t.length;){if(n=t.data(e))return n;t=t.parent()}}function xe(t,e){var n=_i[e.toLowerCase()];return n&&wi[t.nodeName]&&n}function $e(t,n){var i=function(i,o){if(i.preventDefault||(i.preventDefault=function(){i.returnValue=!1}),i.stopPropagation||(i.stopPropagation=function(){i.cancelBubble=!0}),i.target||(i.target=i.srcElement||e),g(i.defaultPrevented)){var s=i.preventDefault;i.preventDefault=function(){i.defaultPrevented=!0,s.call(i)},i.defaultPrevented=!1}i.isDefaultPrevented=function(){return i.defaultPrevented},r(n[o||i.type],function(e){e.call(t,i)}),8>=ti?(i.preventDefault=null,i.stopPropagation=null,i.isDefaultPrevented=null):(delete i.preventDefault,delete i.stopPropagation,delete i.isDefaultPrevented)};return i.elem=t,i}function ke(t){var e=typeof t,i;return"object"==e&&null!==t?"function"==typeof(i=t.$$hashKey)?i=t.$$hashKey():i===n&&(i=t.$$hashKey=l()):i=t,e+":"+i}function Ce(t){r(t,this.put,this)}function Se(){}function Te(t){var e,n,i,o;return"function"==typeof t?(e=t.$inject)||(e=[],n=t.toString().replace(Ci,""),i=n.match(xi),r(i[1].split($i),function(t){t.replace(ki,function(t,n,i){e.push(i)})}),t.$inject=e):x(t)?(o=t.length-1,ie(t[o],"fn"),e=t.slice(0,o)):ie(t,"fn",!0),e}function Ae(t){function e(t){return function(e,n){return y(e)?void r(e,a(t)):t(e,n)}}function n(t,e){if(($(e)||x(e))&&(e=w.instantiate(e)),!e.$get)throw Error("Provider "+t+" must define $get factory method.");return _[t+f]=e}function i(t,e){return n(t,{$get:e})}function o(t,e){return i(t,["$injector",function(t){return t.instantiate(e)}])}function s(t,e){return i(t,m(e))}function l(t,e){_[t]=e,k[t]=e}function c(t,e){var n=w.get(t+f),i=n.$get;n.$get=function(){var t=C.invoke(i,n);return C.invoke(e,null,{$delegate:t})}}function u(t){var e=[];return r(t,function(t){if(!v.get(t))if(v.put(t,!0),b(t)){var n=ai(t);e=e.concat(u(n.requires)).concat(n._runBlocks);try{for(var i=n._invokeQueue,r=0,o=i.length;o>r;r++){var s=i[r],a="$injector"==s[0]?w:w.get(s[0]);a[s[1]].apply(a,s[2])}}catch(l){throw l.message&&(l.message+=" from "+t),l}}else if($(t))try{e.push(w.invoke(t))}catch(l){throw l.message&&(l.message+=" from "+t),l}else if(x(t))try{e.push(w.invoke(t))}catch(l){throw l.message&&(l.message+=" from "+String(t[t.length-1])),l}else ie(t,"module")}),e}function h(t,e){function n(n){if("string"!=typeof n)throw Error("Service name expected");if(t.hasOwnProperty(n)){if(t[n]===d)throw Error("Circular dependency: "+g.join(" <- "));return t[n]}try{return g.unshift(n),t[n]=d,t[n]=e(n)}finally{g.shift()}}function i(t,e,i){var r=[],o=Te(t),s,a,l;for(a=0,s=o.length;s>a;a++)l=o[a],r.push(i&&i.hasOwnProperty(l)?i[l]:n(l));switch(t.$inject||(t=t[s]),e?-1:r.length){case 0:return t();case 1:return t(r[0]);case 2:return t(r[0],r[1]);case 3:return t(r[0],r[1],r[2]);case 4:return t(r[0],r[1],r[2],r[3]);case 5:return t(r[0],r[1],r[2],r[3],r[4]);case 6:return t(r[0],r[1],r[2],r[3],r[4],r[5]);case 7:return t(r[0],r[1],r[2],r[3],r[4],r[5],r[6]);case 8:return t(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]);case 9:return t(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8]);case 10:return t(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9]);default:return t.apply(e,r)}}function r(t,e){var n=function(){},r,o;return n.prototype=(x(t)?t[t.length-1]:t).prototype,r=new n,o=i(t,r,e),y(o)?o:r}return{invoke:i,instantiate:r,get:n,annotate:Te}}var d={},f="Provider",g=[],v=new Ce,_={$provide:{provider:e(n),factory:e(i),service:e(o),value:e(s),constant:e(l),decorator:c}},w=h(_,function(){throw Error("Unknown provider: "+g.join(" <- "))}),k={},C=k.$injector=h(k,function(t){var e=w.get(t+f);return C.invoke(e.$get,e)});return r(u(t),function(t){C.invoke(t||p)}),C}function Ee(){var t=!0;this.disableAutoScrolling=function(){t=!1},this.$get=["$window","$location","$rootScope",function(e,n,i){function o(t){var e=null;return r(t,function(t){e||"a"!==Xn(t.nodeName)||(e=t)}),e}function s(){var t=n.hash(),i;t?(i=a.getElementById(t))?i.scrollIntoView():(i=o(a.getElementsByName(t)))?i.scrollIntoView():"top"===t&&e.scrollTo(0,0):e.scrollTo(0,0)}var a=e.document;return t&&i.$watch(function l(){return n.hash()},function c(){i.$evalAsync(s)}),s}]}function Pe(t,e,i,o){function s(t){try{t.apply(null,L(arguments,1))}finally{if(y--,0===y)for(;_.length;)try{_.pop()()}catch(e){i.error(e)}}}function a(t,e){!function n(){r(w,function(t){t()}),x=e(n,t)}()}function l(){$!=c.url()&&($=c.url(),r(C,function(t){t(c.url())}))}var c=this,u=e[0],h=t.location,d=t.history,f=t.setTimeout,m=t.clearTimeout,v={};c.isMock=!1;var y=0,_=[];c.$$completeOutstandingRequest=s,c.$$incOutstandingRequestCount=function(){y++},c.notifyWhenNoOutstandingRequests=function(t){r(w,function(t){t()}),0===y?t():_.push(t)};var w=[],x;c.addPollFn=function(t){return g(x)&&a(100,f),w.push(t),t};var $=h.href,k=e.find("base");c.url=function(t,e){if(t){if($==t)return;return $=t,o.history?e?d.replaceState(null,"",t):(d.pushState(null,"",t),k.attr("href",k.attr("href"))):e?h.replace(t):h.href=t,c}return h.href.replace(/%27/g,"'")};var C=[],S=!1;c.onUrlChange=function(e){return S||(o.history&&ei(t).bind("popstate",l),o.hashchange?ei(t).bind("hashchange",l):c.addPollFn(l),S=!0),C.push(e),e},c.baseHref=function(){var t=k.attr("href");return t?t.replace(/^https?\:\/\/[^\/]*/,""):""};var T={},A="",E=c.baseHref();c.cookies=function(t,e){var r,o,s,a,l;if(!t){if(u.cookie!==A)for(A=u.cookie,o=A.split("; "),T={},a=0;a<o.length;a++)if(s=o[a],l=s.indexOf("="),l>0){var t=unescape(s.substring(0,l));T[t]===n&&(T[t]=unescape(s.substring(l+1)))}return T}e===n?u.cookie=escape(t)+"=;path="+E+";expires=Thu, 01 Jan 1970 00:00:00 GMT":b(e)&&(r=(u.cookie=escape(t)+"="+escape(e)+";path="+E).length+1,r>4096&&i.warn("Cookie '"+t+"' possibly not set or overflowed because it was too large ("+r+" > 4096 bytes)!"))},c.defer=function(t,e){var n;return y++,n=f(function(){delete v[n],s(t)},e||0),v[n]=!0,n},c.defer.cancel=function(t){return v[t]?(delete v[t],m(t),s(p),!0):!1}}function Ne(){this.$get=["$window","$log","$sniffer","$document",function(t,e,n,i){return new Pe(t,i,e,n)}]}function Oe(){this.$get=function(){function t(t,n){function i(t){t!=h&&(d?d==t&&(d=t.n):d=t,r(t.n,t.p),r(t,h),h=t,h.n=null)}function r(t,e){t!=e&&(t&&(t.p=e),e&&(e.n=t))}if(t in e)throw Error("cacheId "+t+" taken");var o=0,s=u({},n,{id:t}),a={},l=n&&n.capacity||Number.MAX_VALUE,c={},h=null,d=null;return e[t]={put:function(t,e){var n=c[t]||(c[t]={key:t});i(n),g(e)||(t in a||o++,a[t]=e,o>l&&this.remove(d.key))},get:function(t){var e=c[t];if(e)return i(e),a[t]},remove:function(t){var e=c[t];e&&(e==h&&(h=e.p),e==d&&(d=e.n),r(e.n,e.p),delete c[t],delete a[t],o--)},removeAll:function(){a={},o=0,c={},h=d=null},destroy:function(){a=null,s=null,c=null,delete e[t]},info:function(){return u({},s,{size:o})}}}var e={};return t.info=function(){var t={};return r(e,function(e,n){t[n]=e.info()}),t},t.get=function(t){return e[t]},t}}function je(){this.$get=["$cacheFactory",function(t){return t("templates")}]}function Me(t){var i={},o="Directive",s=/^\s*directive\:\s*([\d\w\-_]+)\s+(.*)$/,l=/(([\d\w\-_]+)(?:\:([^;]+))?;?)/,c="Template must have exactly one root element. was: ",h=/^\s*(https?|ftp|mailto|file):/;this.directive=function d(e,n){return b(e)?(ne(n,"directive"),i.hasOwnProperty(e)||(i[e]=[],t.factory(e+o,["$injector","$exceptionHandler",function(t,n){var o=[];return r(i[e],function(i){try{var r=t.invoke(i);$(r)?r={compile:m(r)}:!r.compile&&r.link&&(r.compile=m(r.link)),r.priority=r.priority||0,r.name=r.name||e,r.require=r.require||r.controller&&r.name,r.restrict=r.restrict||"A",o.push(r)}catch(s){n(s)}}),o}])),i[e].push(n)):r(e,a(d)),this},this.urlSanitizationWhitelist=function(t){return v(t)?(h=t,this):h},this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document",function(t,a,d,p,g,v,_,w,k){function C(t,e,n){t instanceof ei||(t=ei(t)),r(t,function(e,n){3==e.nodeType&&e.nodeValue.match(/\S+/)&&(t[n]=ei(e).wrap("<span></span>").parent()[0])});var i=E(t,e,t,n);return function o(e,n){ne(e,"scope");for(var r=n?bi.clone.call(t):t,o=0,s=r.length;s>o;o++){var a=r[o];(1==a.nodeType||9==a.nodeType)&&r.eq(o).data("$scope",e)}return T(r,"ng-scope"),n&&n(r,e),i&&i(e,r,r),r}}function S(t,e){throw Error("Unsupported '"+e+"' for '"+t+"'.")}function T(t,e){try{t.addClass(e)}catch(n){}}function E(t,e,i,r){function o(t,i,r,o){var a,l,c,u,h,d,p,f,m=[];for(d=0,p=i.length;p>d;d++)m.push(i[d]);for(d=0,f=0,p=s.length;p>d;f++)c=m[f],a=s[d++],l=s[d++],a?(a.scope?(u=t.$new(y(a.scope)),ei(c).data("$scope",u)):u=t,h=a.transclude,h||!o&&e?a(l,u,c,r,function(e){return function(n){var i=t.$new();return i.$$transcluded=!0,e(i,n).bind("$destroy",q(i,i.$destroy))}}(h||e)):a(l,u,c,n,o)):l&&l(t,c.childNodes,n,o)}for(var s=[],a,l,c,u,h,d=0;d<t.length;d++)u=new L,c=P(t[d],[],u,r),a=c.length?N(c,t[d],u,e,i):null,l=a&&a.terminal||!t[d].childNodes||!t[d].childNodes.length?null:E(t[d].childNodes,a?a.transclude:e),s.push(a),s.push(l),h=h||a||l;return h?o:null}function P(t,e,n,i){var r=t.nodeType,o=n.$attr,a,c;switch(r){case 1:O(e,Re(li(t).toLowerCase()),"E",i);for(var u,h,d,p,f=t.attributes,m=0,g=f&&f.length;g>m;m++)u=f[m],u.specified&&(h=u.name,d=Re(h.toLowerCase()),o[d]=h,n[d]=p=A(ti&&"href"==h?decodeURIComponent(t.getAttribute(h,2)):u.value),xe(t,d)&&(n[d]=!0),B(t,e,p,d),O(e,d,"A",i));if(c=t.className,b(c)&&""!==c)for(;a=l.exec(c);)d=Re(a[2]),O(e,d,"C",i)&&(n[d]=A(a[3])),c=c.substr(a.index+a[0].length);break;case 3:I(e,t.nodeValue);break;case 8:try{a=s.exec(t.nodeValue),a&&(d=Re(a[1]),O(e,d,"M",i)&&(n[d]=A(a[2])))}catch(v){}}return e.sort(R),e}function N(t,i,o,s,a){function l(t,e){t&&(t.require=E.require,f.push(t)),e&&(e.require=E.require,m.push(e))}function u(t,e){var n,i="data",o=!1;if(b(t)){for(;"^"==(n=t.charAt(0))||"?"==n;)t=t.substr(1),"^"==n&&(i="inheritedData"),o=o||"?"==n;if(n=e[i]("$"+t+"Controller"),!n&&!o)throw Error("No controller: "+t);return n}return x(t)&&(n=[],r(t,function(t){n.push(u(t,e))})),n}function h(t,e,s,a,l){var c,h,p,g,y,b;if(c=i===s?o:D(o,new L(ei(s),o.$attr)),h=c.$$element,w){var x=/^\s*([@=&])\s*(\w*)\s*$/,$=e.$parent||e;r(w.scope,function(t,n){var i=t.match(x)||[],r=i[2]||n,o=i[1],s,a,l;switch(e.$$isolateBindings[n]=o+r,o){case"@":c.$observe(r,function(t){e[n]=t}),c.$$observers[r].$$scope=$;break;case"=":a=v(c[r]),l=a.assign||function(){throw s=e[n]=a($),Error(Si+c[r]+" (directive: "+w.name+")")},s=e[n]=a($),e.$watch(function u(){var t=a($);return t!==e[n]&&(t!==s?s=e[n]=t:l($,t=s=e[n])),t});break;case"&":a=v(c[r]),e[n]=function(t){return a($,t)};break;default:throw Error("Invalid isolate scope definition for directive "+w.name+": "+t)}})}for(B&&r(B,function(t){var n={$scope:e,$element:h,$attrs:c,$transclude:l};b=t.controller,"@"==b&&(b=c[t.name]),h.data("$"+t.name+"Controller",_(b,n))}),p=0,g=f.length;g>p;p++)try{y=f[p],y(e,h,c,y.require&&u(y.require,h))}catch(k){d(k,W(h))}for(t&&t(e,s.childNodes,n,l),p=0,g=m.length;g>p;p++)try{y=m[p],y(e,h,c,y.require&&u(y.require,h))}catch(k){d(k,W(h))}}for(var p=-Number.MAX_VALUE,f=[],m=[],g=null,w=null,k=null,S=o.$$element=ei(i),E,N,O,R,I=s,B,q,H,Q=0,V=t.length;V>Q&&(E=t[Q],O=n,!(p>E.priority));Q++){if((H=E.scope)&&(F("isolated scope",w,E,S),y(H)&&(T(S,"ng-isolate-scope"),w=E),T(S,"ng-scope"),g=g||E),N=E.name,(H=E.controller)&&(B=B||{},F("'"+N+"' controller",B[N],E,S),B[N]=E),(H=E.transclude)&&(F("transclusion",R,E,S),R=E,p=E.priority,"element"==H?(O=ei(i),S=o.$$element=ei(e.createComment(" "+N+": "+o[N]+" ")),i=S[0],z(a,ei(O[0]),i),I=C(O,s,p)):(O=ei(ue(i)).contents(),S.html(""),I=C(O,s))),H=E.template)if(F("template",k,E,S),k=E,H=U(H),E.replace){if(O=ei("<div>"+A(H)+"</div>").contents(),i=O[0],1!=O.length||1!==i.nodeType)throw new Error(c+H);z(a,S,i);var J={$attr:{}};t=t.concat(P(i,t.splice(Q+1,t.length-(Q+1)),J)),j(o,J),V=t.length}else S.html(H);if(E.templateUrl)F("template",k,E,S),k=E,h=M(t.splice(Q,t.length-Q),h,S,o,a,E.replace,I),V=t.length;else if(E.compile)try{q=E.compile(S,o,I),$(q)?l(null,q):q&&l(q.pre,q.post)}catch(G){d(G,W(S))}E.terminal&&(h.terminal=!0,p=Math.max(p,E.priority))}return h.scope=g&&g.scope,h.transclude=R&&I,h}function O(e,r,s,a){var l=!1;if(i.hasOwnProperty(r))for(var c,u=t.get(r+o),h=0,p=u.length;p>h;h++)try{c=u[h],(a===n||a>c.priority)&&-1!=c.restrict.indexOf(s)&&(e.push(c),l=!0)}catch(f){d(f)}return l}function j(t,e){var n=e.$attr,i=t.$attr,o=t.$$element;r(t,function(i,r){"$"!=r.charAt(0)&&(e[r]&&(i+=("style"===r?";":" ")+e[r]),t.$set(r,i,!0,n[r]))}),r(e,function(e,r){"class"==r?(T(o,e),t["class"]=(t["class"]?t["class"]+" ":"")+e):"style"==r?o.attr("style",o.attr("style")+";"+e):"$"==r.charAt(0)||t.hasOwnProperty(r)||(t[r]=e,i[r]=n[r])})}function M(t,e,n,i,r,o,s){var a=[],l,h,d=n[0],f=t.shift(),m=u({},f,{controller:null,templateUrl:null,transclude:null,scope:null});return n.html(""),p.get(f.templateUrl,{cache:g}).success(function(u){var p,f,g;if(u=U(u),o){if(g=ei("<div>"+A(u)+"</div>").contents(),p=g[0],1!=g.length||1!==p.nodeType)throw new Error(c+u);f={$attr:{}},z(r,n,p),P(p,t,f),j(i,f)}else p=d,n.html(u);for(t.unshift(m),l=N(t,p,i,s),h=E(n[0].childNodes,s);a.length;){var v=a.pop(),y=a.pop(),b=a.pop(),_=a.pop(),w=p;b!==d&&(w=ue(p),z(y,ei(b),w)),l(function(){e(h,_,w,r,v)},_,w,r,v)}a=null}).error(function(t,e,n,i){throw Error("Failed to load template: "+i.url)}),function v(t,n,i,r,o){a?(a.push(n),a.push(i),a.push(r),a.push(o)):l(function(){e(h,n,i,r,o)},n,i,r,o)}}function R(t,e){return e.priority-t.priority}function F(t,e,n,i){if(e)throw Error("Multiple directives ["+e.name+", "+n.name+"] asking for "+t+" on: "+W(i))}function I(t,e){var n=a(e,!0);n&&t.push({priority:0,compile:m(function i(t,e){var i=e.parent(),r=i.data("$binding")||[];r.push(n),T(i.data("$binding",r),"ng-binding"),t.$watch(n,function o(t){e[0].nodeValue=t})})})}function B(t,e,i,r){var o=a(i,!0);o&&e.push({priority:100,compile:m(function s(t,e,i){var s=i.$$observers||(i.$$observers={});"class"===r&&(o=a(i[r],!0)),i[r]=n,(s[r]||(s[r]=[])).$$inter=!0,(i.$$observers&&i.$$observers[r].$$scope||t).$watch(o,function l(t){i.$set(r,t)})})})}function z(t,e,n){var i=e[0],r=i.parentNode,o,s;if(t)for(o=0,s=t.length;s>o;o++)if(t[o]==i){t[o]=n;break}r&&r.replaceChild(n,i),n[ei.expando]=i[ei.expando],e[0]=n}var L=function(t,e){this.$$element=t,this.$attr=e||{}};L.prototype={$normalize:Re,$set:function(t,e,i,o){var s=xe(this.$$element[0],t),a=this.$$observers,l;s&&(this.$$element.prop(t,e),o=s),this[t]=e,o?this.$attr[t]=o:(o=this.$attr[t],o||(this.$attr[t]=o=te(t,"-"))),"A"===li(this.$$element[0])&&"href"===t&&(H.setAttribute("href",e),l=H.href,l.match(h)||(this[t]=e="unsafe:"+l)),i!==!1&&(null===e||e===n?this.$$element.removeAttr(o):this.$$element.attr(o,e)),a&&r(a[t],function(t){try{t(e)}catch(n){d(n)}})},$observe:function(t,e){var n=this,i=n.$$observers||(n.$$observers={}),r=i[t]||(i[t]=[]);return r.push(e),w.$evalAsync(function(){r.$$inter||e(n[t])}),e}};var H=k[0].createElement("a"),Q=a.startSymbol(),V=a.endSymbol(),U="{{"==Q||"}}"==V?f:function J(t){return t.replace(/\{\{/g,Q).replace(/}}/g,V)};return C}]}function Re(t){return ae(t.replace(Ti,""))}function Fe(t,e,n,i){}function Ie(t,e,n,i,r){}function De(){var t={};this.register=function(e,n){y(e)?u(t,e):t[e]=n},this.$get=["$injector","$window",function(e,n){return function(i,r){if(b(i)){var o=i;i=t.hasOwnProperty(o)?t[o]:sn(r.$scope,o,!0)||sn(n,o,!0),ie(i,o,!0)}return e.instantiate(i,r)}}]}function Be(){this.$get=["$window",function(t){return ei(t.document)}]}function ze(){this.$get=["$log",function(t){return function(e,n){t.error.apply(t,arguments)}}]}function Le(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t
},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse",function(i){function r(r,a){for(var l,c,u=0,h=[],d=r.length,p=!1,f,m,g=[];d>u;)-1!=(l=r.indexOf(t,u))&&-1!=(c=r.indexOf(e,l+o))?(u!=l&&h.push(r.substring(u,l)),h.push(f=i(m=r.substring(l+o,c))),f.exp=m,u=c+s,p=!0):(u!=d&&h.push(r.substring(u)),u=d);return(d=h.length)||(h.push(""),d=1),!a||p?(g.length=d,f=function(t){for(var e=0,i=d,r;i>e;e++)"function"==typeof(r=h[e])&&(r=r(t),null==r||r==n?r="":"string"!=typeof r&&(r=Q(r))),g[e]=r;return g.join("")},f.exp=r,f.parts=h,f):void 0}var o=t.length,s=e.length;return r.startSymbol=function(){return t},r.endSymbol=function(){return e},r}]}function qe(t){for(var e=t.split("/"),n=e.length;n--;)e[n]=X(e[n]);return e.join("/")}function He(t){return t.split("#")[0]}function Qe(t,e){var n=Ai.exec(t);return n={protocol:n[1],host:n[3],port:h(n[5])||Ni[n[1]]||null,path:n[6]||"/",search:n[8],hash:n[10]},e&&(e.$$protocol=n.protocol,e.$$host=n.host,e.$$port=n.port),n}function Ve(t,e,n){return t+"://"+e+(n==Ni[t]?"":":"+n)}function Ue(t){return t.substr(0,t.lastIndexOf("/"))}function We(t,e,n){var i=Qe(t);return decodeURIComponent(i.path)!=e||g(i.hash)||0!==i.hash.indexOf(n)?t:Ve(i.protocol,i.host,i.port)+Ue(e)+i.hash.substr(n.length)}function Je(t,e,n){var i=Qe(t);if(decodeURIComponent(i.path)!=e||g(i.hash)||0!==i.hash.indexOf(n)){var r=i.search&&"?"+i.search||"",o=i.hash&&"#"+i.hash||"",s=Ue(e),a=i.path.substr(s.length);if(0!==i.path.indexOf(s))throw Error('Invalid url "'+t+'", missing path prefix "'+s+'" !');return Ve(i.protocol,i.host,i.port)+e+"#"+n+a+r+o}return t}function Ge(t,e,n){e=e||"",this.$$parse=function(t){var n=Qe(t,this);if(0!==n.path.indexOf(e))throw Error('Invalid url "'+t+'", missing path prefix "'+e+'" !');this.$$path=decodeURIComponent(n.path.substr(e.length)),this.$$search=J(n.search),this.$$hash=n.hash&&decodeURIComponent(n.hash)||"",this.$$compose()},this.$$compose=function(){var t=G(this.$$search),n=this.$$hash?"#"+X(this.$$hash):"";this.$$url=qe(this.$$path)+(t?"?"+t:"")+n,this.$$absUrl=Ve(this.$$protocol,this.$$host,this.$$port)+e+this.$$url},this.$$rewriteAppUrl=function(t){return 0==t.indexOf(n)?t:void 0},this.$$parse(t)}function Xe(t,e,n){var i;this.$$parse=function(t){var n=Qe(t,this);if(n.hash&&0!==n.hash.indexOf(e))throw Error('Invalid url "'+t+'", missing hash prefix "'+e+'" !');i=n.path+(n.search?"?"+n.search:""),n=Pi.exec((n.hash||"").substr(e.length)),this.$$path=n[1]?("/"==n[1].charAt(0)?"":"/")+decodeURIComponent(n[1]):"",this.$$search=J(n[3]),this.$$hash=n[5]&&decodeURIComponent(n[5])||"",this.$$compose()},this.$$compose=function(){var t=G(this.$$search),n=this.$$hash?"#"+X(this.$$hash):"";this.$$url=qe(this.$$path)+(t?"?"+t:"")+n,this.$$absUrl=Ve(this.$$protocol,this.$$host,this.$$port)+i+(this.$$url?"#"+e+this.$$url:"")},this.$$rewriteAppUrl=function(t){return 0==t.indexOf(n)?t:void 0},this.$$parse(t)}function Ke(t,e,n,i){Xe.apply(this,arguments),this.$$rewriteAppUrl=function(t){return 0==t.indexOf(n)?n+i+"#"+e+t.substr(n.length):void 0}}function Ye(t){return function(){return this[t]}}function Ze(t,e){return function(n){return g(n)?this[t]:(this[t]=e(n),this.$$compose(),this)}}function tn(){var e="",n=!1;this.hashPrefix=function(t){return v(t)?(e=t,this):e},this.html5Mode=function(t){return v(t)?(n=t,this):n},this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(i,r,o,s){function a(t){i.$broadcast("$locationChangeSuccess",l.absUrl(),t)}var l,c,u,h=r.url(),d=Qe(h),p;n?(c=r.baseHref()||"/",u=Ue(c),p=Ve(d.protocol,d.host,d.port)+u+"/",l=o.history?new Ge(We(h,c,e),u,p):new Ke(Je(h,c,e),e,p,c.substr(u.length+1))):(p=Ve(d.protocol,d.host,d.port)+(d.path||"")+(d.search?"?"+d.search:"")+"#"+e+"/",l=new Xe(h,e,p)),s.bind("click",function(e){if(!e.ctrlKey&&!e.metaKey&&2!=e.which){for(var n=ei(e.target);"a"!==Xn(n[0].nodeName);)if(n[0]===s[0]||!(n=n.parent())[0])return;var r=n.prop("href"),o=l.$$rewriteAppUrl(r);r&&!n.attr("target")&&o&&(l.$$parse(o),i.$apply(),e.preventDefault(),t.angular["ff-684208-preventDefault"]=!0)}}),l.absUrl()!=h&&r.url(l.absUrl(),!0),r.onUrlChange(function(t){if(l.absUrl()!=t){if(i.$broadcast("$locationChangeStart",t,l.absUrl()).defaultPrevented)return void r.url(l.absUrl());i.$evalAsync(function(){var e=l.absUrl();l.$$parse(t),a(e)}),i.$$phase||i.$digest()}});var f=0;return i.$watch(function m(){var t=r.url(),e=l.$$replace;return f&&t==l.absUrl()||(f++,i.$evalAsync(function(){i.$broadcast("$locationChangeStart",l.absUrl(),t).defaultPrevented?l.$$parse(t):(r.url(l.absUrl(),e),a(t))})),l.$$replace=!1,f}),l}]}function en(){this.$get=["$window",function(t){function e(t){return t instanceof Error&&(t.stack?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}function n(n){var i=t.console||{},o=i[n]||i.log||p;return o.apply?function(){var t=[];return r(arguments,function(n){t.push(e(n))}),o.apply(i,t)}:function(t,e){o(t,e)}}return{log:n("log"),warn:n("warn"),info:n("info"),error:n("error")}}]}function nn(t,e){function n(t){return-1!=t.indexOf(b)}function i(t){return-1!=t.indexOf(_)}function r(){return g+1<t.length?t.charAt(g+1):!1}function o(t){return t>="0"&&"9">=t}function s(t){return" "==t||"\r"==t||"	"==t||"\n"==t||""==t||"\xa0"==t}function a(t){return t>="a"&&"z">=t||t>="A"&&"Z">=t||"_"==t||"$"==t}function l(t){return"-"==t||"+"==t||o(t)}function c(e,n,i){throw i=i||g,Error("Lexer Error: "+e+" at column"+(v(n)?"s "+n+"-"+g+" ["+t.substring(n,i)+"]":" "+i)+" in expression ["+t+"].")}function h(){for(var e="",n=g;g<t.length;){var i=Xn(t.charAt(g));if("."==i||o(i))e+=i;else{var s=r();if("e"==i&&l(s))e+=i;else if(l(i)&&s&&o(s)&&"e"==e.charAt(e.length-1))e+=i;else{if(!l(i)||s&&o(s)||"e"!=e.charAt(e.length-1))break;c("Invalid exponent")}}g++}e=1*e,f.push({index:n,text:e,json:!0,fn:function(){return e}})}function d(){for(var n="",i=g,r,l,c,h;g<t.length&&(h=t.charAt(g),"."==h||a(h)||o(h));)"."==h&&(r=g),n+=h,g++;if(r)for(l=g;l<t.length;){if(h=t.charAt(l),"("==h){c=n.substr(r-i+1),n=n.substr(0,r-i),g=l;break}if(!s(h))break;l++}var d={index:i,text:n};if(Oi.hasOwnProperty(n))d.fn=d.json=Oi[n];else{var p=ln(n,e);d.fn=u(function(t,e){return p(t,e)},{assign:function(t,e){return on(t,n,e)}})}f.push(d),c&&(f.push({index:r,text:".",json:!1}),f.push({index:r+1,text:c,json:!1}))}function p(e){var n=g;g++;for(var i="",r=e,o=!1;g<t.length;){var s=t.charAt(g);if(r+=s,o){if("u"==s){var a=t.substring(g+1,g+5);a.match(/[\da-f]{4}/i)||c("Invalid unicode escape [\\u"+a+"]"),g+=4,i+=String.fromCharCode(parseInt(a,16))}else{var l=ji[s];i+=l?l:s}o=!1}else if("\\"==s)o=!0;else{if(s==e)return g++,void f.push({index:n,text:r,string:i,json:!0,fn:function(){return i}});i+=s}g++}c("Unterminated quote",n)}for(var f=[],m,g=0,y=[],b,_=":";g<t.length;){if(b=t.charAt(g),n("\"'"))p(b);else if(o(b)||n(".")&&o(r()))h();else if(a(b))d(),i("{,")&&"{"==y[0]&&(m=f[f.length-1])&&(m.json=-1==m.text.indexOf("."));else if(n("(){}[].,;:"))f.push({index:g,text:b,json:i(":[,")&&n("{[")||n("}]:,")}),n("{[")&&y.unshift(b),n("}]")&&y.shift(),g++;else{if(s(b)){g++;continue}var w=b+r(),x=Oi[b],$=Oi[w];$?(f.push({index:g,text:w,fn:$}),g+=2):x?(f.push({index:g,text:b,fn:x,json:i("[,:")&&n("+-")}),g+=1):c("Unexpected next character ",g,g+1)}_=b}return f}function rn(t,e,i,r){function o(e,n){throw Error("Syntax Error: Token '"+n.text+"' "+e+" at column "+(n.index+1)+" of the expression ["+t+"] starting at ["+t.substring(n.index)+"].")}function s(){if(0===R.length)throw Error("Unexpected end of expression: "+t);return R[0]}function a(t,e,n,i){if(R.length>0){var r=R[0],o=r.text;if(o==t||o==e||o==n||o==i||!t&&!e&&!n&&!i)return r}return!1}function l(t,n,i,r){var s=a(t,n,i,r);return s?(e&&!s.json&&o("is not valid json",s),R.shift(),s):!1}function c(t){l(t)||o("is unexpected, expecting ["+t+"]",a())}function h(t,e){return function(n,i){return t(n,i,e)}}function d(t,e,n){return function(i,r){return e(i,r,t,n)}}function f(){for(var t=[];;)if(R.length>0&&!a("}",")",";","]")&&t.push(z()),!l(";"))return 1==t.length?t[0]:function(e,n){for(var i,r=0;r<t.length;r++){var o=t[r];o&&(i=o(e,n))}return i}}function g(){for(var t=y(),e;;){if(!(e=l("|")))return t;t=d(t,e.fn,v())}}function v(){for(var t=l(),e=i(t.text),n=[];;){if(!(t=l(":"))){var r=function(t,i,r){for(var o=[r],s=0;s<n.length;s++)o.push(n[s](t,i));return e.apply(t,o)};return function(){return r}}n.push(y())}}function y(){return F()}function b(){var e=_(),n,i;return(i=l("="))?(e.assign||o("implies assignment but ["+t.substring(0,i.index)+"] can not be assigned to",i),n=_(),function(t,i){return e.assign(t,n(t,i),i)}):e}function _(){for(var t=w(),e;;){if(!(e=l("||")))return t;t=d(t,e.fn,w())}}function w(){var t=x(),e;return(e=l("&&"))&&(t=d(t,e.fn,w())),t}function x(){var t=$(),e;return(e=l("==","!="))&&(t=d(t,e.fn,x())),t}function $(){var t=k(),e;return(e=l("<",">","<=",">="))&&(t=d(t,e.fn,$())),t}function k(){for(var t=C(),e;e=l("+","-");)t=d(t,e.fn,C());return t}function C(){for(var t=S(),e;e=l("*","/","%");)t=d(t,e.fn,S());return t}function S(){var t;return l("+")?T():(t=l("-"))?d(j,t.fn,S()):(t=l("!"))?h(t.fn,S()):T()}function T(){var t;if(l("("))t=z(),c(")");else if(l("["))t=N();else if(l("{"))t=O();else{var e=l();t=e.fn,t||o("not a primary expression",e)}for(var n,i;n=l("(","[",".");)"("===n.text?(t=I(t,i),i=null):"["===n.text?(i=t,t=B(t)):"."===n.text?(i=t,t=D(t)):o("IMPOSSIBLE");return t}function A(t){var e=l().text,n=ln(e,r);return u(function(e,i,r){return n(r||t(e,i),i)},{assign:function(n,i,r){return on(t(n,r),e,i)}})}function E(t){var e=y();return c("]"),u(function(i,r){var o=t(i,r),s=e(i,r),a,l;return o?(a=o[s],a&&a.then&&(l=a,"$$v"in a||(l.$$v=n,l.then(function(t){l.$$v=t})),a=a.$$v),a):n},{assign:function(n,i,r){return t(n,r)[e(n,r)]=i}})}function P(t,e){var n=[];if(")"!=s().text)do n.push(y());while(l(","));return c(")"),function(i,r){for(var o=[],s=e?e(i,r):i,a=0;a<n.length;a++)o.push(n[a](i,r));var l=t(i,r,s)||p;return l.apply?l.apply(s,o):l(o[0],o[1],o[2],o[3],o[4])}}function N(){var t=[];if("]"!=s().text)do t.push(y());while(l(","));return c("]"),function(e,n){for(var i=[],r=0;r<t.length;r++)i.push(t[r](e,n));return i}}function O(){var t=[];if("}"!=s().text)do{var e=l(),n=e.string||e.text;c(":");var i=y();t.push({key:n,value:i})}while(l(","));return c("}"),function(e,n){for(var i={},r=0;r<t.length;r++){var o=t[r];i[o.key]=o.value(e,n)}return i}}var j=m(0),M,R=nn(t,r),F=b,I=P,D=A,B=E,z=g;return e?(F=_,I=D=B=z=function(){o("is not valid json",{text:t,index:0})},M=T()):M=f(),0!==R.length&&o("is an unexpected token",R[0]),M}function on(t,e,n){for(var i=e.split("."),r=0;i.length>1;r++){var o=i.shift(),s=t[o];s||(s={},t[o]=s),t=s}return t[i.shift()]=n,n}function sn(t,e,n){if(!e)return t;for(var i=e.split("."),r,o=t,s=i.length,a=0;s>a;a++)r=i[a],t&&(t=(o=t)[r]);return!n&&$(t)?q(o,t):t}function an(t,e,i,r,o){return function(s,a){var l=a&&a.hasOwnProperty(t)?a:s,c;return null===l||l===n?l:(l=l[t],l&&l.then&&("$$v"in l||(c=l,c.$$v=n,c.then(function(t){c.$$v=t})),l=l.$$v),e&&null!==l&&l!==n?(l=l[e],l&&l.then&&("$$v"in l||(c=l,c.$$v=n,c.then(function(t){c.$$v=t})),l=l.$$v),i&&null!==l&&l!==n?(l=l[i],l&&l.then&&("$$v"in l||(c=l,c.$$v=n,c.then(function(t){c.$$v=t})),l=l.$$v),r&&null!==l&&l!==n?(l=l[r],l&&l.then&&("$$v"in l||(c=l,c.$$v=n,c.then(function(t){c.$$v=t})),l=l.$$v),o&&null!==l&&l!==n?(l=l[o],l&&l.then&&("$$v"in l||(c=l,c.$$v=n,c.then(function(t){c.$$v=t})),l=l.$$v),l):l):l):l):l)}}function ln(t,e){if(Mi.hasOwnProperty(t))return Mi[t];var i=t.split("."),o=i.length,s;if(e)s=6>o?an(i[0],i[1],i[2],i[3],i[4]):function(t,e){var r=0,s;do s=an(i[r++],i[r++],i[r++],i[r++],i[r++])(t,e),e=n,t=s;while(o>r);return s};else{var a="var l, fn, p;\n";r(i,function(t,e){a+="if(s === null || s === undefined) return s;\nl=s;\ns="+(e?"s":'((k&&k.hasOwnProperty("'+t+'"))?k:s)')+'["'+t+'"];\nif (s && s.then) {\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v=v;});\n}\n s=s.$$v\n}\n'}),a+="return s;",s=Function("s","k",a),s.toString=function(){return a}}return Mi[t]=s}function cn(){var t={};this.$get=["$filter","$sniffer",function(e,n){return function(i){switch(typeof i){case"string":return t.hasOwnProperty(i)?t[i]:t[i]=rn(i,!1,e,n.csp);case"function":return i;default:return p}}}]}function un(){this.$get=["$rootScope","$exceptionHandler",function(t,e){return hn(function(e){t.$evalAsync(e)},e)}]}function hn(t,e){function i(t){return t}function o(t){return c(t)}function s(t){var e=a(),n=t.length,i=[];return n?r(t,function(t,r){l(t).then(function(t){r in i||(i[r]=t,--n||e.resolve(i))},function(t){r in i||e.reject(t)})}):e.resolve(i),e.promise}var a=function(){var r=[],s,u;return u={resolve:function(e){if(r){var i=r;r=n,s=l(e),i.length&&t(function(){for(var t,e=0,n=i.length;n>e;e++)t=i[e],s.then(t[0],t[1])})}},reject:function(t){u.resolve(c(t))},promise:{then:function(t,n){var l=a(),c=function(n){try{l.resolve((t||i)(n))}catch(r){e(r),l.reject(r)}},u=function(t){try{l.resolve((n||o)(t))}catch(i){e(i),l.reject(i)}};return r?r.push([c,u]):s.then(c,u),l.promise}}}},l=function(e){return e&&e.then?e:{then:function(n){var i=a();return t(function(){i.resolve(n(e))}),i.promise}}},c=function(e){return{then:function(n,i){var r=a();return t(function(){r.resolve((i||o)(e))}),r.promise}}},u=function(n,r,s){var u=a(),h,d=function(t){try{return(r||i)(t)}catch(n){return e(n),c(n)}},p=function(t){try{return(s||o)(t)}catch(n){return e(n),c(n)}};return t(function(){l(n).then(function(t){h||(h=!0,u.resolve(l(t).then(d,p)))},function(t){h||(h=!0,u.resolve(p(t)))})}),u.promise};return{defer:a,reject:c,when:u,all:s}}function dn(){var t={};this.when=function(e,n){if(t[e]=u({reloadOnSearch:!0},n),e){var i="/"==e[e.length-1]?e.substr(0,e.length-1):e+"/";t[i]={redirectTo:e}}return this},this.otherwise=function(t){return this.when(null,t),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$http","$templateCache",function(e,n,i,o,s,a,l){function c(t,e){e="^"+e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"$";for(var n="",i=[],o={},s=/:(\w+)/g,a,l=0;null!==(a=s.exec(e));)n+=e.slice(l,a.index),n+="([^\\/]*)",i.push(a[1]),l=s.lastIndex;n+=e.substr(l);var c=t.match(new RegExp(n));return c&&r(i,function(t,e){o[t]=c[e+1]}),c?o:null}function h(){var t=p(),c=g.current;t&&c&&t.$$route===c.$$route&&B(t.pathParams,c.pathParams)&&!t.reloadOnSearch&&!m?(c.params=t.params,I(c.params,i),e.$broadcast("$routeUpdate",c)):(t||c)&&(m=!1,e.$broadcast("$routeChangeStart",t,c),g.current=t,t&&t.redirectTo&&(b(t.redirectTo)?n.path(f(t.redirectTo,t.params)).search(t.params).replace():n.url(t.redirectTo(t.pathParams,n.path(),n.search())).replace()),o.when(t).then(function(){if(t){var e=[],n=[],i;return r(t.resolve||{},function(t,i){e.push(i),n.push(b(t)?s.get(t):s.invoke(t))}),v(i=t.template)||v(i=t.templateUrl)&&(i=a.get(i,{cache:l}).then(function(t){return t.data})),v(i)&&(e.push("$template"),n.push(i)),o.all(n).then(function(t){var n={};return r(t,function(t,i){n[e[i]]=t}),n})}}).then(function(n){t==g.current&&(t&&(t.locals=n,I(t.params,i)),e.$broadcast("$routeChangeSuccess",t,c))},function(n){t==g.current&&e.$broadcast("$routeChangeError",t,c,n)}))}function p(){var e,i;return r(t,function(t,r){!i&&(e=c(n.path(),r))&&(i=d(t,{params:u({},n.search(),e),pathParams:e}),i.$$route=t)}),i||t[null]&&d(t[null],{params:{},pathParams:{}})}function f(t,e){var n=[];return r((t||"").split(":"),function(t,i){if(0==i)n.push(t);else{var r=t.match(/(\w+)(.*)/),o=r[1];n.push(e[o]),n.push(r[2]||""),delete e[o]}}),n.join("")}var m=!1,g={routes:t,reload:function(){m=!0,e.$evalAsync(h)}};return e.$on("$locationChangeSuccess",h),g}]}function pn(){this.$get=m({})}function fn(){var t=10;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$injector","$exceptionHandler","$parse",function(e,n,i){function r(){this.$id=l(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this["this"]=this.$root=this,this.$$destroyed=!1,this.$$asyncQueue=[],this.$$listeners={},this.$$isolateBindings={}}function o(t){if(u.$$phase)throw Error(u.$$phase+" already in progress");u.$$phase=t}function s(){u.$$phase=null}function a(t,e){var n=i(t);return ie(n,e),n}function c(){}r.prototype={$new:function(t){var e,n;if($(t))throw Error("API-CHANGE: Use $controller to instantiate controllers.");return t?(n=new r,n.$root=this.$root):(e=function(){},e.prototype=this,n=new e,n.$id=l()),n["this"]=n,n.$$listeners={},n.$parent=this,n.$$asyncQueue=[],n.$$watchers=n.$$nextSibling=n.$$childHead=n.$$childTail=null,n.$$prevSibling=this.$$childTail,this.$$childHead?(this.$$childTail.$$nextSibling=n,this.$$childTail=n):this.$$childHead=this.$$childTail=n,n},$watch:function(t,e,n){var i=this,r=a(t,"watch"),o=i.$$watchers,s={fn:e,last:c,get:r,exp:t,eq:!!n};if(!$(e)){var l=a(e||p,"listener");s.fn=function(t,e,n){l(n)}}return o||(o=i.$$watchers=[]),o.unshift(s),function(){R(o,s)}},$digest:function(){var e,i,r,a,l,u,h,d=t,p,f,m=this,g=[],v,y;o("$digest");do{h=!1,f=m;do{for(l=f.$$asyncQueue;l.length;)try{f.$eval(l.shift())}catch(b){n(b)}if(a=f.$$watchers)for(u=a.length;u--;)try{e=a[u],(i=e.get(f))===(r=e.last)||(e.eq?B(i,r):"number"==typeof i&&"number"==typeof r&&isNaN(i)&&isNaN(r))||(h=!0,e.last=e.eq?I(i):i,e.fn(i,r===c?i:r,f),5>d&&(v=4-d,g[v]||(g[v]=[]),y=$(e.exp)?"fn: "+(e.exp.name||e.exp.toString()):e.exp,y+="; newVal: "+Q(i)+"; oldVal: "+Q(r),g[v].push(y)))}catch(b){n(b)}if(!(p=f.$$childHead||f!==m&&f.$$nextSibling))for(;f!==m&&!(p=f.$$nextSibling);)f=f.$parent}while(f=p);if(h&&!d--)throw s(),Error(t+" $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: "+Q(g))}while(h||l.length);s()},$destroy:function(){if(u!=this&&!this.$$destroyed){var t=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,t.$$childHead==this&&(t.$$childHead=this.$$nextSibling),t.$$childTail==this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null}},$eval:function(t,e){return i(t)(this,e)},$evalAsync:function(t){this.$$asyncQueue.push(t)},$apply:function(t){try{return o("$apply"),this.$eval(t)}catch(e){n(e)}finally{s();try{u.$digest()}catch(e){throw n(e),e}}},$on:function(t,e){var n=this.$$listeners[t];return n||(this.$$listeners[t]=n=[]),n.push(e),function(){n[M(n,e)]=null}},$emit:function(t,e){var i=[],r,o=this,s=!1,a={name:t,targetScope:o,stopPropagation:function(){s=!0},preventDefault:function(){a.defaultPrevented=!0},defaultPrevented:!1},l=z([a],arguments,1),c,u;do{for(r=o.$$listeners[t]||i,a.currentScope=o,c=0,u=r.length;u>c;c++)if(r[c])try{if(r[c].apply(null,l),s)return a}catch(h){n(h)}else r.splice(c,1),c--,u--;o=o.$parent}while(o);return a},$broadcast:function(t,e){var i=this,r=i,o=i,s={name:t,targetScope:i,preventDefault:function(){s.defaultPrevented=!0},defaultPrevented:!1},a=z([s],arguments,1),l,c,u;do{for(r=o,s.currentScope=r,l=r.$$listeners[t]||[],c=0,u=l.length;u>c;c++)if(l[c])try{l[c].apply(null,a)}catch(h){n(h)}else l.splice(c,1),c--,u--;if(!(o=r.$$childHead||r!==i&&r.$$nextSibling))for(;r!==i&&!(o=r.$$nextSibling);)r=r.$parent}while(r=o);return s}};var u=new r;return u}]}function mn(){this.$get=["$window",function(t){var e={},n=h((/android (\d+)/.exec(Xn(t.navigator.userAgent))||[])[1]);return{history:!(!t.history||!t.history.pushState||4>n),hashchange:"onhashchange"in t&&(!t.document.documentMode||t.document.documentMode>7),hasEvent:function(n){if("input"==n&&9==ti)return!1;if(g(e[n])){var i=t.document.createElement("div");e[n]="on"+n in i}return e[n]},csp:!1}}]}function gn(){this.$get=m(t)}function vn(t){var e={},n,i,o;return t?(r(t.split("\n"),function(t){o=t.indexOf(":"),n=Xn(A(t.substr(0,o))),i=A(t.substr(o+1)),n&&(e[n]?e[n]+=", "+i:e[n]=i)}),e):e}function yn(t){var e=y(t)?t:n;return function(n){return e||(e=vn(t)),n?e[Xn(n)]||null:e}}function bn(t,e,n){return $(n)?n(t,e):(r(n,function(n){t=n(t,e)}),t)}function _n(t){return t>=200&&300>t}function wn(){var t=/^\s*(\[|\{[^\{])/,e=/[\}\]]\s*$/,i=/^\)\]\}',?\n/,o=this.defaults={transformResponse:[function(n){return b(n)&&(n=n.replace(i,""),t.test(n)&&e.test(n)&&(n=V(n,!0))),n}],transformRequest:[function(t){return y(t)&&!S(t)?Q(t):t}],headers:{common:{Accept:"application/json, text/plain, */*","X-Requested-With":"XMLHttpRequest"},post:{"Content-Type":"application/json;charset=utf-8"},put:{"Content-Type":"application/json;charset=utf-8"}}},a=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(t,e,i,l,c,h){function d(t){function n(t){var e=u({},t,{data:bn(t.data,t.headers,s)});return _n(t.status)?e:c.reject(e)}t.method=Kn(t.method);var i=t.transformRequest||o.transformRequest,s=t.transformResponse||o.transformResponse,a=o.headers,l=u({"X-XSRF-TOKEN":e.cookies()["XSRF-TOKEN"]},a.common,a[Xn(t.method)],t.headers),h=bn(t.data,yn(l),i),d;return g(t.data)&&delete l["Content-Type"],d=m(t,h,l),d=d.then(n,n),r(w,function(t){d=t(d)}),d.success=function(e){return d.then(function(n){e(n.data,n.status,n.headers,t)}),d},d.error=function(e){return d.then(null,function(n){e(n.data,n.status,n.headers,t)}),d},d}function p(t){r(arguments,function(t){d[t]=function(e,n){return d(u(n||{},{method:t,url:e}))}})}function f(t){r(arguments,function(t){d[t]=function(e,n,i){return d(u(i||{},{method:t,url:e,data:n}))}})}function m(e,n,i){function r(t,e,n){h&&(_n(t)?h.put(f,[t,e,vn(n)]):h.remove(f)),o(e,t,n),l.$apply()}function o(t,n,i){n=Math.max(n,0),(_n(n)?a.resolve:a.reject)({data:t,status:n,headers:yn(i),config:e})}function s(){var t=M(d.pendingRequests,e);-1!==t&&d.pendingRequests.splice(t,1)}var a=c.defer(),u=a.promise,h,p,f=v(e.url,e.params);if(d.pendingRequests.push(e),u.then(s,s),e.cache&&"GET"==e.method&&(h=y(e.cache)?e.cache:_),h)if(p=h.get(f)){if(p.then)return p.then(s,s),p;x(p)?o(p[1],p[0],I(p[2])):o(p,200,{})}else h.put(f,u);return p||t(e.method,f,n,r,i,e.timeout,e.withCredentials),u}function v(t,e){if(!e)return t;var i=[];return s(e,function(t,e){null!=t&&t!=n&&(y(t)&&(t=Q(t)),i.push(encodeURIComponent(e)+"="+encodeURIComponent(t)))}),t+(-1==t.indexOf("?")?"?":"&")+i.join("&")}var _=i("$http"),w=[];return r(a,function(t){w.push(b(t)?h.get(t):h.invoke(t))}),d.pendingRequests=[],p("get","delete","head","jsonp"),f("post","put"),d.defaults=o,d}]}function xn(){this.$get=["$browser","$window","$document",function(t,e,n){return $n(t,Ri,t.defer,e.angular.callbacks,n[0],e.location.protocol.replace(":",""))}]}function $n(t,e,n,i,o,s){function a(t,e){var n=o.createElement("script"),i=function(){o.body.removeChild(n),e&&e()};n.type="text/javascript",n.src=t,ti?n.onreadystatechange=function(){/loaded|complete/.test(n.readyState)&&i()}:n.onload=n.onerror=i,o.body.appendChild(n)}return function(o,l,c,u,h,d,f){function m(e,n,i,r){var o=(l.match(Ai)||["",s])[1];n="file"==o?i?200:404:n,n=1223==n?204:n,e(n,i,r),t.$$completeOutstandingRequest(p)}if(t.$$incOutstandingRequestCount(),l=l||t.url(),"jsonp"==Xn(o)){var g="_"+(i.counter++).toString(36);i[g]=function(t){i[g].data=t},a(l.replace("JSON_CALLBACK","angular.callbacks."+g),function(){i[g].data?m(u,200,i[g].data):m(u,-2),delete i[g]})}else{var v=new e;v.open(o,l,!0),r(h,function(t,e){t&&v.setRequestHeader(e,t)});var y;v.onreadystatechange=function(){if(4==v.readyState){var t=v.getAllResponseHeaders(),e,n=["Cache-Control","Content-Language","Content-Type","Expires","Last-Modified","Pragma"];t||(t="",r(n,function(e){var n=v.getResponseHeader(e);n&&(t+=e+": "+n+"\n")})),m(u,y||v.status,v.responseText,t)}},f&&(v.withCredentials=!0),v.send(c||""),d>0&&n(function(){y=-1,v.abort()},d)}}}function kn(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"\xa4",posSuf:"",negPre:"(\xa4",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(t){return 1===t?"one":"other"}}}}function Cn(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function(t,e,n,i){function r(r,s,a){var l=n.defer(),c=l.promise,u=v(a)&&!a,h,d;return h=e.defer(function(){try{l.resolve(r())}catch(e){l.reject(e),i(e)}u||t.$apply()},s),d=function(){delete o[c.$$timeoutId]},c.$$timeoutId=h,o[h]=l,c.then(d,d),c}var o={};return r.cancel=function(t){return t&&t.$$timeoutId in o?(o[t.$$timeoutId].reject("canceled"),e.defer.cancel(t.$$timeoutId)):!1},r}]}function Sn(t){function e(e,i){return t.factory(e+n,i)}var n="Filter";this.register=e,this.$get=["$injector",function(t){return function(e){return t.get(e+n)}}],e("currency",An),e("date",Fn),e("filter",Tn),e("json",In),e("limitTo",Dn),e("lowercase",zi),e("number",En),e("orderBy",Bn),e("uppercase",Li)}function Tn(){return function(t,e){if(!x(t))return t;var n=[];n.check=function(t){for(var e=0;e<n.length;e++)if(!n[e](t))return!1;return!0};var i=function(t,e){if("!"===e.charAt(0))return!i(t,e.substr(1));switch(typeof t){case"boolean":case"number":case"string":return(""+t).toLowerCase().indexOf(e)>-1;case"object":for(var n in t)if("$"!==n.charAt(0)&&i(t[n],e))return!0;return!1;case"array":for(var r=0;r<t.length;r++)if(i(t[r],e))return!0;return!1;default:return!1}};switch(typeof e){case"boolean":case"number":case"string":e={$:e};case"object":for(var r in e)"$"==r?!function(){var t=(""+e[r]).toLowerCase();t&&n.push(function(e){return i(e,t)})}():!function(){var t=r,o=(""+e[r]).toLowerCase();o&&n.push(function(e){return i(sn(e,t),o)})}();break;case"function":n.push(e);break;default:return t}for(var o=[],s=0;s<t.length;s++){var a=t[s];n.check(a)&&o.push(a)}return o}}function An(t){var e=t.NUMBER_FORMATS;return function(t,n){return g(n)&&(n=e.CURRENCY_SYM),Pn(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,2).replace(/\u00A4/g,n)}}function En(t){var e=t.NUMBER_FORMATS;return function(t,n){return Pn(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,n)}}function Pn(t,e,n,i,r){if(isNaN(t)||!isFinite(t))return"";var o=0>t;t=Math.abs(t);var s=t+"",a="",l=[],c=!1;if(-1!==s.indexOf("e")){var u=s.match(/([\d\.]+)e(-?)(\d+)/);u&&"-"==u[2]&&u[3]>r+1?s="0":(a=s,c=!0)}if(!c){var h=(s.split(Fi)[1]||"").length;g(r)&&(r=Math.min(Math.max(e.minFrac,h),e.maxFrac));var d=Math.pow(10,r);t=Math.round(t*d)/d;var p=(""+t).split(Fi),f=p[0];p=p[1]||"";var m=0,v=e.lgSize,y=e.gSize;if(f.length>=v+y){m=f.length-v;for(var b=0;m>b;b++)(m-b)%y===0&&0!==b&&(a+=n),a+=f.charAt(b)}for(b=m;b<f.length;b++)(f.length-b)%v===0&&0!==b&&(a+=n),a+=f.charAt(b);for(;p.length<r;)p+="0";r&&"0"!==r&&(a+=i+p.substr(0,r))}return l.push(o?e.negPre:e.posPre),l.push(a),l.push(o?e.negSuf:e.posSuf),l.join("")}function Nn(t,e,n){var i="";for(0>t&&(i="-",t=-t),t=""+t;t.length<e;)t="0"+t;return n&&(t=t.substr(t.length-e)),i+t}function On(t,e,n,i){return n=n||0,function(r){var o=r["get"+t]();return(n>0||o>-n)&&(o+=n),0===o&&-12==n&&(o=12),Nn(o,e,i)}}function jn(t,e){return function(n,i){var r=n["get"+t](),o=Kn(e?"SHORT"+t:t);return i[o][r]}}function Mn(t){var e=-1*t.getTimezoneOffset(),n=e>=0?"+":"";return n+=Nn(Math[e>0?"floor":"ceil"](e/60),2)+Nn(Math.abs(e%60),2)}function Rn(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]}function Fn(t){function e(t){var e;if(e=t.match(n)){var i=new Date(0),r=0,o=0;return e[9]&&(r=h(e[9]+e[10]),o=h(e[9]+e[11])),i.setUTCFullYear(h(e[1]),h(e[2])-1,h(e[3])),i.setUTCHours(h(e[4]||0)-r,h(e[5]||0)-o,h(e[6]||0),h(e[7]||0)),i}return t}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,i){var o="",s=[],a,l;if(i=i||"mediumDate",i=t.DATETIME_FORMATS[i]||i,b(n)&&(n=Bi.test(n)?h(n):e(n)),_(n)&&(n=new Date(n)),!w(n))return n;for(;i;)l=Di.exec(i),l?(s=z(s,l,1),i=s.pop()):(s.push(i),i=null);return r(s,function(e){a=Ii[e],o+=a?a(n,t.DATETIME_FORMATS):e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),o}}function In(){return function(t){return Q(t,!0)}}function Dn(){return function(t,e){if(!(t instanceof Array))return t;e=h(e);var n=[],i,r;if(!(t&&t instanceof Array))return n;for(e>t.length?e=t.length:e<-t.length&&(e=-t.length),e>0?(i=0,r=e):(i=t.length+e,r=t.length);r>i;i++)n.push(t[i]);return n}}function Bn(t){return function(e,n,i){function r(t,e){for(var i=0;i<n.length;i++){var r=n[i](t,e);if(0!==r)return r}return 0}function o(t,e){return U(e)?function(e,n){return t(n,e)}:t}function s(t,e){var n=typeof t,i=typeof e;return n==i?("string"==n&&(t=t.toLowerCase()),"string"==n&&(e=e.toLowerCase()),t===e?0:e>t?-1:1):i>n?-1:1}if(!x(e))return e;if(!n)return e;n=x(n)?n:[n],n=N(n,function(e){var n=!1,i=e||f;return b(e)&&(("+"==e.charAt(0)||"-"==e.charAt(0))&&(n="-"==e.charAt(0),e=e.substring(1)),i=t(e)),o(function(t,e){return s(i(t),i(e))},n)});for(var a=[],l=0;l<e.length;l++)a.push(e[l]);return a.sort(o(r,i))}}function zn(t){return $(t)&&(t={link:t}),t.restrict=t.restrict||"AC",m(t)}function Ln(t,e){function n(e,n){n=n?"-"+te(n,"-"):"",t.removeClass((e?tr:Zi)+n).addClass((e?Zi:tr)+n)}var i=this,o=t.parent().controller("form")||Qi,s=0,a=i.$error={};i.$name=e.name,i.$dirty=!1,i.$pristine=!0,i.$valid=!0,i.$invalid=!1,o.$addControl(i),t.addClass(er),n(!0),i.$addControl=function(t){t.$name&&!i.hasOwnProperty(t.$name)&&(i[t.$name]=t)},i.$removeControl=function(t){t.$name&&i[t.$name]===t&&delete i[t.$name],r(a,function(e,n){i.$setValidity(n,!0,t)})},i.$setValidity=function(t,e,r){var l=a[t];if(e)l&&(R(l,r),l.length||(s--,s||(n(e),i.$valid=!0,i.$invalid=!1),a[t]=!1,n(!0,t),o.$setValidity(t,!0,i)));else{if(s||n(e),l){if(j(l,r))return}else a[t]=l=[],s++,n(!1,t),o.$setValidity(t,!1,i);l.push(r),i.$valid=!1,i.$invalid=!0}},i.$setDirty=function(){t.removeClass(er).addClass(nr),i.$dirty=!0,i.$pristine=!1,o.$setDirty()}}function qn(t){return g(t)||""===t||null===t||t!==t}function Hn(t,e,i,r,o,s){var a=function(){var n=A(e.val());r.$viewValue!==n&&t.$apply(function(){r.$setViewValue(n)})};if(o.hasEvent("input"))e.bind("input",a);else{var l,c=function(){l||(l=s.defer(function(){a(),l=null}))};e.bind("keydown",function(t){var e=t.keyCode;91===e||e>15&&19>e||e>=37&&40>=e||c()}),e.bind("change",a),o.hasEvent("paste")&&e.bind("paste cut",c)}r.$render=function(){e.val(qn(r.$viewValue)?"":r.$viewValue)};var u=i.ngPattern,d,p=function(t,e){return qn(e)||t.test(e)?(r.$setValidity("pattern",!0),e):(r.$setValidity("pattern",!1),n)};if(u&&(u.match(/^\/(.*)\/$/)?(u=new RegExp(u.substr(1,u.length-2)),d=function(t){return p(u,t)}):d=function(e){var n=t.$eval(u);if(!n||!n.test)throw new Error("Expected "+u+" to be a RegExp but was "+n);return p(n,e)},r.$formatters.push(d),r.$parsers.push(d)),i.ngMinlength){var f=h(i.ngMinlength),m=function(t){return!qn(t)&&t.length<f?(r.$setValidity("minlength",!1),n):(r.$setValidity("minlength",!0),t)};r.$parsers.push(m),r.$formatters.push(m)}if(i.ngMaxlength){var g=h(i.ngMaxlength),v=function(t){return!qn(t)&&t.length>g?(r.$setValidity("maxlength",!1),n):(r.$setValidity("maxlength",!0),t)};r.$parsers.push(v),r.$formatters.push(v)}}function Qn(t,e,i,r,o,s){if(Hn(t,e,i,r,o,s),r.$parsers.push(function(t){var e=qn(t);return e||Xi.test(t)?(r.$setValidity("number",!0),""===t?null:e?t:parseFloat(t)):(r.$setValidity("number",!1),n)}),r.$formatters.push(function(t){return qn(t)?"":""+t}),i.min){var a=parseFloat(i.min),l=function(t){return!qn(t)&&a>t?(r.$setValidity("min",!1),n):(r.$setValidity("min",!0),t)};r.$parsers.push(l),r.$formatters.push(l)}if(i.max){var c=parseFloat(i.max),u=function(t){return!qn(t)&&t>c?(r.$setValidity("max",!1),n):(r.$setValidity("max",!0),t)};r.$parsers.push(u),r.$formatters.push(u)}r.$formatters.push(function(t){return qn(t)||_(t)?(r.$setValidity("number",!0),t):(r.$setValidity("number",!1),n)})}function Vn(t,e,i,r,o,s){Hn(t,e,i,r,o,s);var a=function(t){return qn(t)||Ji.test(t)?(r.$setValidity("url",!0),t):(r.$setValidity("url",!1),n)};r.$formatters.push(a),r.$parsers.push(a)}function Un(t,e,i,r,o,s){Hn(t,e,i,r,o,s);var a=function(t){return qn(t)||Gi.test(t)?(r.$setValidity("email",!0),t):(r.$setValidity("email",!1),n)};r.$formatters.push(a),r.$parsers.push(a)}function Wn(t,e,n,i){g(n.name)&&e.attr("name",l()),e.bind("click",function(){e[0].checked&&t.$apply(function(){i.$setViewValue(n.value)
})}),i.$render=function(){var t=n.value;e[0].checked=t==i.$viewValue},n.$observe("value",i.$render)}function Jn(t,e,n,i){var r=n.ngTrueValue,o=n.ngFalseValue;b(r)||(r=!0),b(o)||(o=!1),e.bind("click",function(){t.$apply(function(){i.$setViewValue(e[0].checked)})}),i.$render=function(){e[0].checked=i.$viewValue},i.$formatters.push(function(t){return t===r}),i.$parsers.push(function(t){return t?r:o})}function Gn(t,e){return t="ngClass"+t,zn(function(i,r,o){function s(t){(e===!0||i.$index%2===e)&&(c&&!B(t,c)&&a(c),l(t)),c=I(t)}function a(t){y(t)&&!x(t)&&(t=N(t,function(t,e){return t?e:void 0})),r.removeClass(x(t)?t.join(" "):t)}function l(t){y(t)&&!x(t)&&(t=N(t,function(t,e){return t?e:void 0})),t&&r.addClass(x(t)?t.join(" "):t)}var c=n;i.$watch(o[t],s,!0),o.$observe("class",function(e){var n=i.$eval(o[t]);s(n,n)}),"ngClass"!==t&&i.$watch("$index",function(n,r){var s=1&n;s!==r&1&&(s===e?l(i.$eval(o[t])):a(i.$eval(o[t])))})})}var Xn=function(t){return b(t)?t.toLowerCase():t},Kn=function(t){return b(t)?t.toUpperCase():t},Yn=function(t){return b(t)?t.replace(/[A-Z]/g,function(t){return String.fromCharCode(32|t.charCodeAt(0))}):t},Zn=function(t){return b(t)?t.replace(/[a-z]/g,function(t){return String.fromCharCode(-33&t.charCodeAt(0))}):t};"i"!=="I".toLowerCase()&&(Xn=Yn,Kn=Zn);var ti=h((/msie (\d+)/.exec(Xn(navigator.userAgent))||[])[1]),ei,ni,ii=[].slice,ri=[].push,oi=Object.prototype.toString,si=t.angular||(t.angular={}),ai,li,ci=["0","0","0"];p.$inject=[],f.$inject=[],li=9>ti?function(t){return t=t.nodeName?t:t[0],t.scopeName&&"HTML"!=t.scopeName?Kn(t.scopeName+":"+t.nodeName):t.nodeName}:function(t){return t.nodeName?t.nodeName:t[0].nodeName};var ui=/[A-Z]/g,hi={full:"1.0.7",major:1,minor:0,dot:7,codeName:"monochromatic-rainbow"},di=ce.cache={},pi=ce.expando="ng-"+(new Date).getTime(),fi=1,mi=t.document.addEventListener?function(t,e,n){t.addEventListener(e,n,!1)}:function(t,e,n){t.attachEvent("on"+e,n)},gi=t.document.removeEventListener?function(t,e,n){t.removeEventListener(e,n,!1)}:function(t,e,n){t.detachEvent("on"+e,n)},vi=/([\:\-\_]+(.))/g,yi=/^moz([A-Z])/,bi=ce.prototype={ready:function(e){function n(){i||(i=!0,e())}var i=!1;this.bind("DOMContentLoaded",n),ce(t).bind("load",n)},toString:function(){var t=[];return r(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(t){return ei(t>=0?this[t]:this[this.length+t])},length:0,push:ri,sort:[].sort,splice:[].splice},_i={};r("multiple,selected,checked,disabled,readOnly,required".split(","),function(t){_i[Xn(t)]=t});var wi={};r("input,select,option,textarea,button,form".split(","),function(t){wi[Kn(t)]=!0}),r({data:me,inheritedData:we,scope:function(t){return we(t,"$scope")},controller:_e,injector:function(t){return we(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:ge,css:function(t,e,i){if(e=ae(e),!v(i)){var r;return 8>=ti&&(r=t.currentStyle&&t.currentStyle[e],""===r&&(r="auto")),r=r||t.style[e],8>=ti&&(r=""===r?n:r),r}t.style[e]=i},attr:function(t,e,i){var r=Xn(e);if(_i[r]){if(!v(i))return t[e]||(t.attributes.getNamedItem(e)||p).specified?r:n;i?(t[e]=!0,t.setAttribute(e,r)):(t[e]=!1,t.removeAttribute(r))}else if(v(i))t.setAttribute(e,i);else if(t.getAttribute){var o=t.getAttribute(e,2);return null===o?n:o}},prop:function(t,e,n){return v(n)?void(t[e]=n):t[e]},text:u(9>ti?function(t,e){if(1==t.nodeType){if(g(e))return t.innerText;t.innerText=e}else{if(g(e))return t.nodeValue;t.nodeValue=e}}:function(t,e){return g(e)?t.textContent:void(t.textContent=e)},{$dv:""}),val:function(t,e){return g(e)?t.value:void(t.value=e)},html:function(t,e){if(g(e))return t.innerHTML;for(var n=0,i=t.childNodes;n<i.length;n++)he(i[n]);t.innerHTML=e}},function(t,e){ce.prototype[e]=function(e,i){var r,o;if((2==t.length&&t!==ge&&t!==_e?e:i)!==n){for(r=0;r<this.length;r++)t(this[r],e,i);return this}if(y(e)){for(r=0;r<this.length;r++)if(t===me)t(this[r],e);else for(o in e)t(this[r],o,e[o]);return this}return this.length?t(this[0],e,i):t.$dv}}),r({removeData:pe,dealoc:he,bind:function zr(t,n,i){var o=fe(t,"events"),s=fe(t,"handle");o||fe(t,"events",o={}),s||fe(t,"handle",s=$e(t,o)),r(n.split(" "),function(n){var r=o[n];if(!r){if("mouseenter"==n||"mouseleave"==n){var a=e.body.contains||e.body.compareDocumentPosition?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1};o[n]=[];var l={mouseleave:"mouseout",mouseenter:"mouseover"};zr(t,l[n],function(t){var e,i=this,r=t.relatedTarget;(!r||r!==i&&!a(i,r))&&s(t,n)})}else mi(t,n,s),o[n]=[];r=o[n]}r.push(i)})},unbind:de,replaceWith:function(t,e){var n,i=t.parentNode;he(t),r(new ce(e),function(e){n?i.insertBefore(e,n.nextSibling):i.replaceChild(e,t),n=e})},children:function(t){var e=[];return r(t.childNodes,function(t){1===t.nodeType&&e.push(t)}),e},contents:function(t){return t.childNodes||[]},append:function(t,e){r(new ce(e),function(e){1===t.nodeType&&t.appendChild(e)})},prepend:function(t,e){if(1===t.nodeType){var n=t.firstChild;r(new ce(e),function(e){n?t.insertBefore(e,n):(t.appendChild(e),n=e)})}},wrap:function(t,e){e=ei(e)[0];var n=t.parentNode;n&&n.replaceChild(e,t),e.appendChild(t)},remove:function(t){he(t);var e=t.parentNode;e&&e.removeChild(t)},after:function(t,e){var n=t,i=t.parentNode;r(new ce(e),function(t){i.insertBefore(t,n.nextSibling),n=t})},addClass:ye,removeClass:ve,toggleClass:function(t,e,n){g(n)&&(n=!ge(t,e)),(n?ye:ve)(t,e)},parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},next:function(t){if(t.nextElementSibling)return t.nextElementSibling;for(var e=t.nextSibling;null!=e&&1!==e.nodeType;)e=e.nextSibling;return e},find:function(t,e){return t.getElementsByTagName(e)},clone:ue,triggerHandler:function(t,e){var n=(fe(t,"events")||{})[e];r(n,function(e){e.call(t,null)})}},function(t,e){ce.prototype[e]=function(e,i){for(var r,o=0;o<this.length;o++)r==n?(r=t(this[o],e,i),r!==n&&(r=ei(r))):be(r,t(this[o],e,i));return r==n?this:r}}),Ce.prototype={put:function(t,e){this[ke(t)]=e},get:function(t){return this[ke(t)]},remove:function(t){var e=this[t=ke(t)];return delete this[t],e}},Se.prototype={push:function(t,e){var n=this[t=ke(t)];n?n.push(e):this[t]=[e]},shift:function(t){var e=this[t=ke(t)];return e?1==e.length?(delete this[t],e[0]):e.shift():void 0},peek:function(t){var e=this[ke(t)];return e?e[0]:void 0}};var xi=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,$i=/,/,ki=/^\s*(_?)(\S+?)\1\s*$/,Ci=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Si="Non-assignable model expression: ";Me.$inject=["$provide"];var Ti=/^(x[\:\-_]|data[\:\-_])/i,Ai=/^([^:]+):\/\/(\w+:{0,1}\w*@)?(\{?[\w\.-]*\}?)(:([0-9]+))?(\/[^\?#]*)?(\?([^#]*))?(#(.*))?$/,Ei=/^([^\?#]*)?(\?([^#]*))?(#(.*))?$/,Pi=Ei,Ni={http:80,https:443,ftp:21};Ge.prototype={$$replace:!1,absUrl:Ye("$$absUrl"),url:function(t,e){if(g(t))return this.$$url;var n=Ei.exec(t);return n[1]&&this.path(decodeURIComponent(n[1])),(n[2]||n[1])&&this.search(n[3]||""),this.hash(n[5]||"",e),this},protocol:Ye("$$protocol"),host:Ye("$$host"),port:Ye("$$port"),path:Ze("$$path",function(t){return"/"==t.charAt(0)?t:"/"+t}),search:function(t,e){return g(t)?this.$$search:(v(e)?null===e?delete this.$$search[t]:this.$$search[t]=e:this.$$search=b(t)?J(t):t,this.$$compose(),this)},hash:Ze("$$hash",f),replace:function(){return this.$$replace=!0,this}},Xe.prototype=d(Ge.prototype),Ke.prototype=d(Xe.prototype);var Oi={"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:p,"+":function(t,e,i,r){return i=i(t,e),r=r(t,e),v(i)?v(r)?i+r:i:v(r)?r:n},"-":function(t,e,n,i){return n=n(t,e),i=i(t,e),(v(n)?n:0)-(v(i)?i:0)},"*":function(t,e,n,i){return n(t,e)*i(t,e)},"/":function(t,e,n,i){return n(t,e)/i(t,e)},"%":function(t,e,n,i){return n(t,e)%i(t,e)},"^":function(t,e,n,i){return n(t,e)^i(t,e)},"=":p,"==":function(t,e,n,i){return n(t,e)==i(t,e)},"!=":function(t,e,n,i){return n(t,e)!=i(t,e)},"<":function(t,e,n,i){return n(t,e)<i(t,e)},">":function(t,e,n,i){return n(t,e)>i(t,e)},"<=":function(t,e,n,i){return n(t,e)<=i(t,e)},">=":function(t,e,n,i){return n(t,e)>=i(t,e)},"&&":function(t,e,n,i){return n(t,e)&&i(t,e)},"||":function(t,e,n,i){return n(t,e)||i(t,e)},"&":function(t,e,n,i){return n(t,e)&i(t,e)},"|":function(t,e,n,i){return i(t,e)(t,e,n(t,e))},"!":function(t,e,n){return!n(t,e)}},ji={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},Mi={},Ri=t.XMLHttpRequest||function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(n){}throw new Error("This browser does not support XMLHttpRequest.")};Sn.$inject=["$provide"],An.$inject=["$locale"],En.$inject=["$locale"];var Fi=".",Ii={yyyy:On("FullYear",4),yy:On("FullYear",2,0,!0),y:On("FullYear",1),MMMM:jn("Month"),MMM:jn("Month",!0),MM:On("Month",2,1),M:On("Month",1,1),dd:On("Date",2),d:On("Date",1),HH:On("Hours",2),H:On("Hours",1),hh:On("Hours",2,-12),h:On("Hours",1,-12),mm:On("Minutes",2),m:On("Minutes",1),ss:On("Seconds",2),s:On("Seconds",1),EEEE:jn("Day"),EEE:jn("Day",!0),a:Rn,Z:Mn},Di=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,Bi=/^\d+$/;Fn.$inject=["$locale"];var zi=m(Xn),Li=m(Kn);Bn.$inject=["$parse"];var qi=m({restrict:"E",compile:function(t,n){return 8>=ti&&(n.href||n.name||n.$set("href",""),t.append(e.createComment("IE fix"))),function(t,e){e.bind("click",function(t){e.attr("href")||t.preventDefault()})}}}),Hi={};r(_i,function(t,e){var n=Re("ng-"+e);Hi[n]=function(){return{priority:100,compile:function(){return function(t,i,r){t.$watch(r[n],function o(t){r.$set(e,!!t)})}}}}}),r(["src","href"],function(t){var e=Re("ng-"+t);Hi[e]=function(){return{priority:99,link:function(n,i,r){r.$observe(e,function(e){e&&(r.$set(t,e),ti&&i.prop(t,r[t]))})}}}});var Qi={$addControl:p,$removeControl:p,$setValidity:p,$setDirty:p};Ln.$inject=["$element","$attrs","$scope"];var Vi=function(t){return["$timeout",function(e){var i={name:"form",restrict:"E",controller:Ln,compile:function(){return{pre:function(t,i,r,o){if(!r.action){var s=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1};mi(i[0],"submit",s),i.bind("$destroy",function(){e(function(){gi(i[0],"submit",s)},0,!1)})}var a=i.parent().controller("form"),l=r.name||r.ngForm;l&&(t[l]=o),a&&i.bind("$destroy",function(){a.$removeControl(o),l&&(t[l]=n),u(o,Qi)})}}}};return t?u(I(i),{restrict:"EAC"}):i}]},Ui=Vi(),Wi=Vi(!0),Ji=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,Gi=/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/,Xi=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,Ki={text:Hn,number:Qn,url:Vn,email:Un,radio:Wn,checkbox:Jn,hidden:p,button:p,submit:p,reset:p},Yi=["$browser","$sniffer",function(t,e){return{restrict:"E",require:"?ngModel",link:function(n,i,r,o){o&&(Ki[Xn(r.type)]||Ki.text)(n,i,r,o,e,t)}}}],Zi="ng-valid",tr="ng-invalid",er="ng-pristine",nr="ng-dirty",ir=["$scope","$exceptionHandler","$attrs","$element","$parse",function(t,e,n,i,o){function s(t,e){e=e?"-"+te(e,"-"):"",i.removeClass((t?tr:Zi)+e).addClass((t?Zi:tr)+e)}this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$name=n.name;var a=o(n.ngModel),l=a.assign;if(!l)throw Error(Si+n.ngModel+" ("+W(i)+")");this.$render=p;var c=i.inheritedData("$formController")||Qi,u=0,h=this.$error={};i.addClass(er),s(!0),this.$setValidity=function(t,e){h[t]!==!e&&(e?(h[t]&&u--,u||(s(!0),this.$valid=!0,this.$invalid=!1)):(s(!1),this.$invalid=!0,this.$valid=!1,u++),h[t]=!e,s(e,t),c.$setValidity(t,e,this))},this.$setViewValue=function(n){this.$viewValue=n,this.$pristine&&(this.$dirty=!0,this.$pristine=!1,i.removeClass(er).addClass(nr),c.$setDirty()),r(this.$parsers,function(t){n=t(n)}),this.$modelValue!==n&&(this.$modelValue=n,l(t,n),r(this.$viewChangeListeners,function(t){try{t()}catch(n){e(n)}}))};var d=this;t.$watch(function f(){var e=a(t);if(d.$modelValue!==e){var n=d.$formatters,i=n.length;for(d.$modelValue=e;i--;)e=n[i](e);d.$viewValue!==e&&(d.$viewValue=e,d.$render())}})}],rr=function(){return{require:["ngModel","^?form"],controller:ir,link:function(t,e,n,i){var r=i[0],o=i[1]||Qi;o.$addControl(r),e.bind("$destroy",function(){o.$removeControl(r)})}}},or=m({require:"ngModel",link:function(t,e,n,i){i.$viewChangeListeners.push(function(){t.$eval(n.ngChange)})}}),sr=function(){return{require:"?ngModel",link:function(t,e,n,i){if(i){n.required=!0;var r=function(t){return n.required&&(qn(t)||t===!1)?void i.$setValidity("required",!1):(i.$setValidity("required",!0),t)};i.$formatters.push(r),i.$parsers.unshift(r),n.$observe("required",function(){r(i.$viewValue)})}}}},ar=function(){return{require:"ngModel",link:function(t,e,i,o){var s=/\/(.*)\//.exec(i.ngList),a=s&&new RegExp(s[1])||i.ngList||",",l=function(t){var e=[];return t&&r(t.split(a),function(t){t&&e.push(A(t))}),e};o.$parsers.push(l),o.$formatters.push(function(t){return x(t)?t.join(", "):n})}}},lr=/^(true|false|\d+)$/,cr=function(){return{priority:100,compile:function(t,e){return lr.test(e.ngValue)?function(t,e,n){n.$set("value",t.$eval(n.ngValue))}:function(t,e,n){t.$watch(n.ngValue,function i(t){n.$set("value",t,!1)})}}}},ur=zn(function(t,e,i){e.addClass("ng-binding").data("$binding",i.ngBind),t.$watch(i.ngBind,function r(t){e.text(t==n?"":t)})}),hr=["$interpolate",function(t){return function(e,n,i){var r=t(n.attr(i.$attr.ngBindTemplate));n.addClass("ng-binding").data("$binding",r),i.$observe("ngBindTemplate",function(t){n.text(t)})}}],dr=[function(){return function(t,e,n){e.addClass("ng-binding").data("$binding",n.ngBindHtmlUnsafe),t.$watch(n.ngBindHtmlUnsafe,function i(t){e.html(t||"")})}}],pr=Gn("",!0),fr=Gn("Odd",0),mr=Gn("Even",1),gr=zn({compile:function(t,e){e.$set("ngCloak",n),t.removeClass("ng-cloak")}}),vr=[function(){return{scope:!0,controller:"@"}}],yr=["$sniffer",function(t){return{priority:1e3,compile:function(){t.csp=!0}}}],br={};r("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave".split(" "),function(t){var e=Re("ng-"+t);br[e]=["$parse",function(n){return function(i,r,o){var s=n(o[e]);r.bind(Xn(t),function(t){i.$apply(function(){s(i,{$event:t})})})}}]});var _r=zn(function(t,e,n){e.bind("submit",function(){t.$apply(n.ngSubmit)})}),wr=["$http","$templateCache","$anchorScroll","$compile",function(t,e,n,i){return{restrict:"ECA",terminal:!0,compile:function(r,o){var s=o.ngInclude||o.src,a=o.onload||"",l=o.autoscroll;return function(r,o){var c=0,u,h=function(){u&&(u.$destroy(),u=null),o.html("")};r.$watch(s,function d(s){var d=++c;s?t.get(s,{cache:e}).success(function(t){d===c&&(u&&u.$destroy(),u=r.$new(),o.html(t),i(o.contents())(u),!v(l)||l&&!r.$eval(l)||n(),u.$emit("$includeContentLoaded"),r.$eval(a))}).error(function(){d===c&&h()}):h()})}}}}],xr=zn({compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),$r=zn({terminal:!0,priority:1e3}),kr=["$locale","$interpolate",function(t,e){var n=/{}/g;return{restrict:"EA",link:function(i,o,s){var a=s.count,l=o.attr(s.$attr.when),c=s.offset||0,u=i.$eval(l),h={},d=e.startSymbol(),p=e.endSymbol();r(u,function(t,i){h[i]=e(t.replace(n,d+a+"-"+c+p))}),i.$watch(function f(){var e=parseFloat(i.$eval(a));return isNaN(e)?"":(e in u||(e=t.pluralCat(e-c)),h[e](i,o,!0))},function m(t){o.text(t)})}}}],Cr=zn({transclude:"element",priority:1e3,terminal:!0,compile:function(t,e,n){return function(t,e,i){var r=i.ngRepeat,o=r.match(/^\s*(.+)\s+in\s+(.*)\s*$/),s,a,l,c;if(!o)throw Error("Expected ngRepeat in form of '_item_ in _collection_' but got '"+r+"'.");if(s=o[1],a=o[2],o=s.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/),!o)throw Error("'item' in 'item in collection' should be identifier or (key, value) but got '"+s+"'.");l=o[3]||o[1],c=o[2];var u=new Se;t.$watch(function h(t){var i,r,o=t.$eval(a),s=e,h=new Se,d,p,f,m,g,v;if(x(o))g=o||[];else{g=[];for(f in o)o.hasOwnProperty(f)&&"$"!=f.charAt(0)&&g.push(f);g.sort()}for(d=g.length-1,i=0,r=g.length;r>i;i++)f=o===g?i:g[i],m=o[f],v=u.shift(m),v?(p=v.scope,h.push(m,v),i===v.index?s=v.element:(v.index=i,s.after(v.element),s=v.element)):p=t.$new(),p[l]=m,c&&(p[c]=f),p.$index=i,p.$first=0===i,p.$last=i===d,p.$middle=!(p.$first||p.$last),v||n(p,function(t){s.after(t),v={scope:p,element:s=t,index:i},h.push(m,v)});for(f in u)if(u.hasOwnProperty(f))for(g=u[f];g.length;)m=g.pop(),m.element.remove(),m.scope.$destroy();u=h})}}}),Sr=zn(function(t,e,n){t.$watch(n.ngShow,function i(t){e.css("display",U(t)?"":"none")})}),Tr=zn(function(t,e,n){t.$watch(n.ngHide,function i(t){e.css("display",U(t)?"none":"")})}),Ar=zn(function(t,e,n){t.$watch(n.ngStyle,function i(t,n){n&&t!==n&&r(n,function(t,n){e.css(n,"")}),t&&e.css(t)},!0)}),Er="ng-switch",Pr=m({restrict:"EA",require:"ngSwitch",controller:["$scope",function Lr(){this.cases={}}],link:function(t,e,n,i){var r=n.ngSwitch||n.on,o,s,a;t.$watch(r,function l(r){s&&(a.$destroy(),s.remove(),s=a=null),(o=i.cases["!"+r]||i.cases["?"])&&(t.$eval(n.change),a=t.$new(),o(a,function(t){s=t,e.append(t)}))})}}),Nr=zn({transclude:"element",priority:500,require:"^ngSwitch",compile:function(t,e,n){return function(t,i,r,o){o.cases["!"+e.ngSwitchWhen]=n}}}),Or=zn({transclude:"element",priority:500,require:"^ngSwitch",compile:function(t,e,n){return function(t,e,i,r){r.cases["?"]=n}}}),jr=zn({controller:["$transclude","$element",function(t,e){t(function(t){e.append(t)})}]}),Mr=["$http","$templateCache","$route","$anchorScroll","$compile","$controller",function(t,e,n,i,r,o){return{restrict:"ECA",terminal:!0,link:function(t,e,s){function a(){u&&(u.$destroy(),u=null)}function l(){e.html(""),a()}function c(){var s=n.current&&n.current.locals,c=s&&s.$template;if(c){e.html(c),a();var d=r(e.contents()),p=n.current,f;u=p.scope=t.$new(),p.controller&&(s.$scope=u,f=o(p.controller,s),e.children().data("$ngControllerController",f)),d(u),u.$emit("$viewContentLoaded"),u.$eval(h),i()}else l()}var u,h=s.onload||"";t.$on("$routeChangeSuccess",c),c()}}}],Rr=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,n){if("text/ng-template"==n.type){var i=n.id,r=e[0].text;t.put(i,r)}}}}],Fr=m({terminal:!0}),Ir=["$compile","$parse",function(t,i){var s=/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w\d]*)|(?:\(\s*([\$\w][\$\w\d]*)\s*,\s*([\$\w][\$\w\d]*)\s*\)))\s+in\s+(.*)$/,a={$setViewValue:p};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(t,e,n){var i=this,r={},o=a,s,l;i.databound=n.ngModel,i.init=function(t,e,n){o=t,s=e,l=n},i.addOption=function(e){r[e]=!0,o.$viewValue==e&&(t.val(e),l.parent()&&l.remove())},i.removeOption=function(t){this.hasOption(t)&&(delete r[t],o.$viewValue==t&&this.renderUnknownOption(t))},i.renderUnknownOption=function(e){var n="? "+ke(e)+" ?";l.val(n),t.prepend(l),t.val(n),l.prop("selected",!0)},i.hasOption=function(t){return r.hasOwnProperty(t)},e.$on("$destroy",function(){i.renderUnknownOption=p})}],link:function(a,l,c,u){function h(t,e,n,i){n.$render=function(){var t=n.$viewValue;i.hasOption(t)?(k.parent()&&k.remove(),e.val(t),""===t&&w.prop("selected",!0)):g(t)&&w?e.val(""):i.renderUnknownOption(t)},e.bind("change",function(){t.$apply(function(){k.parent()&&k.remove(),n.$setViewValue(e.val())})})}function d(t,e,n){var i;n.$render=function(){var t=new Ce(n.$viewValue);r(e.find("option"),function(e){e.selected=v(t.get(e.value))})},t.$watch(function o(){B(i,n.$viewValue)||(i=I(n.$viewValue),n.$render())}),e.bind("change",function(){t.$apply(function(){var t=[];r(e.find("option"),function(e){e.selected&&t.push(e.value)}),n.$setViewValue(t)})})}function p(e,r,a){function l(){var t={"":[]},i=[""],s,l,c,v,b,w,k=a.$modelValue,C=m(e)||[],S=d?o(C):C,T,A,E,P,N={},O,j=!1,M,R,F;for(y&&(j=new Ce(k)),P=0;A=S.length,A>P;P++)N[h]=C[d?N[d]=S[P]:P],s=p(e,N)||"",(l=t[s])||(l=t[s]=[],i.push(s)),y?O=j.remove(f(e,N))!=n:(O=k===f(e,N),j=j||O),F=u(e,N),F=F===n?"":F,l.push({id:d?S[P]:P,label:F,selected:O});for(y||(_||null===k?t[""].unshift({id:"",label:"",selected:!j}):j||t[""].unshift({id:"?",label:"",selected:!0})),E=0,T=i.length;T>E;E++){for(s=i[E],l=t[s],g.length<=E?(v={element:$.clone().attr("label",s),label:l.label},b=[v],g.push(b),r.append(v.element)):(b=g[E],v=b[0],v.label!=s&&v.element.attr("label",v.label=s)),M=null,P=0,A=l.length;A>P;P++)c=l[P],(w=b[P+1])?(M=w.element,w.label!==c.label&&M.text(w.label=c.label),w.id!==c.id&&M.val(w.id=c.id),M[0].selected!==c.selected&&M.prop("selected",w.selected=c.selected)):(""===c.id&&_?R=_:(R=x.clone()).val(c.id).attr("selected",c.selected).text(c.label),b.push(w={element:R,label:c.label,id:c.id,selected:c.selected}),M?M.after(R):v.element.append(R),M=R);for(P++;b.length>P;)b.pop().element.remove()}for(;g.length>E;)g.pop()[0].element.remove()}var c;if(!(c=b.match(s)))throw Error("Expected ngOptions in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '"+b+"'.");var u=i(c[2]||c[1]),h=c[4]||c[6],d=c[5],p=i(c[3]||""),f=i(c[2]?c[1]:h),m=i(c[7]),g=[[{element:r,label:""}]];_&&(t(_)(e),_.removeClass("ng-scope"),_.remove()),r.html(""),r.bind("change",function(){e.$apply(function(){var t,i=m(e)||[],o={},s,l,c,u,p,v,b;if(y)for(l=[],p=0,b=g.length;b>p;p++)for(t=g[p],u=1,v=t.length;v>u;u++)(c=t[u].element)[0].selected&&(s=c.val(),d&&(o[d]=s),o[h]=i[s],l.push(f(e,o)));else s=r.val(),"?"==s?l=n:""==s?l=null:(o[h]=i[s],d&&(o[d]=s),l=f(e,o));a.$setViewValue(l)})}),a.$render=l,e.$watch(l)}if(u[1]){for(var f=u[0],m=u[1],y=c.multiple,b=c.ngOptions,_=!1,w,x=ei(e.createElement("option")),$=ei(e.createElement("optgroup")),k=x.clone(),C=0,S=l.children(),T=S.length;T>C;C++)if(""==S[C].value){w=_=S.eq(C);break}if(f.init(m,_,k),y&&(c.required||c.ngRequired)){var A=function(t){return m.$setValidity("required",!c.required||t&&t.length),t};m.$parsers.push(A),m.$formatters.unshift(A),c.$observe("required",function(){A(m.$viewValue)})}b?p(a,l,m):y?d(a,l,m):h(a,l,m,f)}}}}],Dr=["$interpolate",function(t){var e={addOption:p,removeOption:p};return{restrict:"E",priority:100,compile:function(n,i){if(g(i.value)){var r=t(n.text(),!0);r||i.$set("value",n.text())}return function(t,n,i){var o="$selectController",s=n.parent(),a=s.data(o)||s.parent().data(o);a&&a.databound?n.prop("selected",!1):a=e,r?t.$watch(r,function l(t,e){i.$set("value",t),t!==e&&a.removeOption(e),a.addOption(t)}):a.addOption(i.value),n.bind("$destroy",function(){a.removeOption(i.value)})}}}}],Br=m({restrict:"E",terminal:!0});ee(),oe(si),ei(e).ready(function(){Y(e,Z)})}(window,document),angular.element(document).find("head").append('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak{display:none;}ng\\:form{display:block;}</style>'),function(t){angular.module("rails",["ng"])}(),function(t){angular.module("rails").factory("RailsInflector",function(){function t(t){return angular.isString(t)?t.replace(/_[\w\d]/g,function(t,e,n){return 0===e?t:n.charAt(e+1).toUpperCase()}):t}function e(t){return angular.isString(t)?t.replace(/[A-Z]/g,function(t,e){return 0===e?t:"_"+t.toLowerCase()}):t}function n(t){return t+"s"}return{camelize:t,underscore:e,pluralize:n}})}(),function(t){angular.module("rails").factory("RailsResourceInjector",["$injector",function(e){function n(n){return n?angular.isString(n)?e.get(n):n:t}function i(i){return i?e.instantiate(n(i)):t}return{createService:i,getDependency:n}}])}(),function(t){angular.module("rails").factory("railsUrlBuilder",["$interpolate",function(t){return function(e){var n;return angular.isFunction(e)?e:(-1===e.indexOf(t.startSymbol())&&(e=e+"/"+t.startSymbol()+"id"+t.endSymbol()),n=t(e),function(t){return e=n(t),"/"===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),e})}}])}(),function(t){angular.module("rails").provider("railsSerializer",function(){var e={underscore:t,camelize:t,pluralize:t,exclusionMatchers:[]};this.underscore=function(t){return e.underscore=t,this},this.camelize=function(t){return e.camelize=t,this},this.pluralize=function(t){return e.pluralize=t,this},this.exclusionMatchers=function(t){return e.exclusionMatchers=t,this},this.$get=["$injector","RailsInflector","RailsResourceInjector",function(n,i,r){function o(n,i){function o(){angular.isFunction(n)&&(i=n,n={}),this.exclusions={},this.inclusions={},this.serializeMappings={},this.deserializeMappings={},this.customSerializedAttributes={},this.preservedAttributes={},this.customSerializers={},this.nestedResources={},this.options=angular.extend({excludeByDefault:!1},e,n||{}),i&&i.call(this,this)}return o.prototype.exclude=function(){var t=this.exclusions;return angular.forEach(arguments,function(e){t[e]=!1}),this},o.prototype.only=function(){var t=this.inclusions;return this.options.excludeByDefault=!0,angular.forEach(arguments,function(e){t[e]=!0}),this},o.prototype.nestedAttribute=function(){var t=this;return angular.forEach(arguments,function(e){t.rename(e,e+"_attributes")}),this},o.prototype.resource=function(t,e,n){return this.nestedResources[t]=e,n&&this.serializeWith(t,n),this},o.prototype.rename=function(e,n,i){return this.serializeMappings[e]=n,(i||i===t)&&(this.deserializeMappings[n]=e),this},o.prototype.add=function(t,e){return this.customSerializedAttributes[t]=e,this},o.prototype.preserve=function(t){return this.preservedAttributes[t]=!0,this},o.prototype.serializeWith=function(t,e){return this.customSerializers[t]=e,this},o.prototype.isExcludedFromSerialization=function(e){if(this.options.excludeByDefault&&!this.inclusions.hasOwnProperty(e)||this.exclusions.hasOwnProperty(e))return!0;if(this.options.exclusionMatchers){var n=!1;return angular.forEach(this.options.exclusionMatchers,function(i){angular.isString(i)?n=n||0===e.indexOf(i):angular.isFunction(i)?n=n||i.call(t,e):i instanceof RegExp&&(n=n||i.test(e))}),n}return!1},o.prototype.getSerializedAttributeName=function(e){var n=this.serializeMappings[e]||e;return this.isExcludedFromSerialization(e)||this.isExcludedFromSerialization(n)?t:this.underscore(n)},o.prototype.isExcludedFromDeserialization=function(t){return!1},o.prototype.getDeserializedAttributeName=function(e){var n=this.camelize(e);return n=this.deserializeMappings[e]||this.deserializeMappings[n]||n,this.isExcludedFromDeserialization(e)||this.isExcludedFromDeserialization(n)?t:n},o.prototype.getNestedResource=function(t){return r.getDependency(this.nestedResources[t])},o.prototype.getAttributeSerializer=function(e){var n=this.getNestedResource(e),i=this.customSerializers[e];return i?r.createService(i):n?n.serializer:t},o.prototype.serializeValue=function(t){var e=t,n=this;if(angular.isArray(t))e=[],angular.forEach(t,function(t){e.push(n.serializeValue(t))});else if(angular.isObject(t)){if(angular.isDate(t))return t;e={},angular.forEach(t,function(t,i){angular.isFunction(t)||n.serializeAttribute(e,i,t)})}return e},o.prototype.serializeAttribute=function(e,n,i){var r=this.getAttributeSerializer(n),o=this.getSerializedAttributeName(n);o!==t&&(e[o]=r?r.serialize(i):this.serializeValue(i))},o.prototype.serialize=function(t){var e=this.serializeValue(t),n=this;return angular.isObject(e)&&angular.forEach(this.customSerializedAttributes,function(i,r){angular.isFunction(i)&&(i=i.call(t,t)),n.serializeAttribute(e,r,i)}),e},o.prototype.deserializeValue=function(t,e){var n=t,i=this;return angular.isArray(t)?(n=[],angular.forEach(t,function(t){n.push(i.deserializeValue(t,e))})):angular.isObject(t)&&(n={},e&&(n=new e),angular.forEach(t,function(t,e){i.deserializeAttribute(n,e,t)})),n},o.prototype.deserializeAttribute=function(e,n,i){var r,o,s=this.getDeserializedAttributeName(n);s!==t&&(r=this.getAttributeSerializer(s),o=this.getNestedResource(s),e[s]=this.preservedAttributes[s]?i:r?r.deserialize(i,o):this.deserializeValue(i,o))},o.prototype.deserialize=function(t,e){return this.deserializeValue(t,e)},o.prototype.pluralize=function(t){return this.options.pluralize?this.options.pluralize(t):t},o.prototype.underscore=function(t){return this.options.underscore?this.options.underscore(t):t},o.prototype.camelize=function(t){return this.options.camelize?this.options.camelize(t):t},o}return e.underscore=e.underscore||i.underscore,e.camelize=e.camelize||i.camelize,e.pluralize=e.pluralize||i.pluralize,o.defaultOptions=e,o}]})}(),function(t){angular.module("rails").factory("railsRootWrappingTransformer",function(){return function(t,e){var n={};return n[angular.isArray(t)?e.rootPluralName:e.rootName]=t,n}}),angular.module("rails").factory("railsRootWrappingInterceptor",function(){return function(t){var e=t.resource;return e?t.then(function(t){return t.data&&t.data.hasOwnProperty(e.rootName)?t.data=t.data[e.rootName]:t.data&&t.data.hasOwnProperty(e.rootPluralName)&&(t.data=t.data[e.rootPluralName]),t}):t}}),angular.module("rails").provider("railsResourceFactory",function(){var e={enableRootWrapping:!0,updateMethod:"put",httpConfig:{},defaultParams:t};this.enableRootWrapping=function(t){return e.enableRootWrapping=t,this},this.updateMethod=function(t){return e.updateMethod=t,this},this.httpConfig=function(t){return e.httpConfig=t,this},this.defaultParams=function(t){return e.defaultParams=t,this},this.$get=["$http","$q","railsUrlBuilder","railsSerializer","railsRootWrappingTransformer","railsRootWrappingInterceptor","RailsResourceInjector",function(n,i,r,o,s,a,l){function c(i){function c(t,e){return e&&("/"!==e[0]&&(t+="/"),t+=e),t}function u(t){var e=this;if(t){var n=function(t){return{resource:u,context:e,response:t,then:function(t){return this.response=t(this.response,this.resource,this.context),n(this.response)}}},i=u.callInterceptors(n({data:t}),this).response.data;angular.extend(this,i)}}var h=i.requestTransformers,d=i.responseInterceptors,p=i.afterResponseInterceptors;return u.setUrl=function(t){u.url=r(t)},u.setUrl(i.url),u.enableRootWrapping=i.wrapData===t?e.enableRootWrapping:i.wrapData,u.httpConfig=i.httpConfig||e.httpConfig,u.httpConfig.headers=angular.extend({Accept:"application/json","Content-Type":"application/json"},u.httpConfig.headers||{}),u.defaultParams=i.defaultParams||e.defaultParams,u.updateMethod=(i.updateMethod||e.updateMethod).toLowerCase(),u.requestTransformers=[],u.responseInterceptors=[],u.afterResponseInterceptors=[],u.serializer=l.createService(i.serializer||o()),u.rootName=u.serializer.underscore(i.name),u.rootPluralName=u.serializer.underscore(i.pluralName||u.serializer.pluralize(i.name)),u.beforeResponse=function(t){t=l.getDependency(t),u.responseInterceptors.push(function(e){return e.then(function(n){return t(n.data,e.resource,e.context),n})})},u.afterResponse=function(t){t=l.getDependency(t),u.afterResponseInterceptors.push(function(e){return e.then(function(n){return t(n,e.resource),n})})},u.beforeRequest=function(t){t=l.getDependency(t),u.requestTransformers.push(function(e,n){return t(e,n)||e})},angular.forEach(d,function(t){u.responseInterceptors.push(l.getDependency(t))}),angular.forEach(p,function(t){u.afterResponseInterceptors.push(l.getDependency(t))}),angular.forEach(h,function(t){u.requestTransformers.push(l.getDependency(t))}),u.transformData=function(t){return t=u.serializer.serialize(t),angular.forEach(u.requestTransformers,function(e){t=e(t,u)}),u.enableRootWrapping&&(t=s(t,u)),t},u.callInterceptors=function(t,e){return t=t.then(function(t){return t.originalData=t.data,t}),u.enableRootWrapping&&(t.resource=u,t=a(t)),t.then(function(t){return t.data=u.serializer.deserialize(t.data,u),t}),angular.forEach(u.responseInterceptors,function(n){t.resource=u,t.context=e,t=n(t)}),t},u.callAfterInterceptors=function(t){return angular.forEach(u.afterResponseInterceptors,function(e){t.resource=u,t=e(t)}),t},u.processResponse=function(t){return t=u.callInterceptors(t).then(function(t){return t.data}),u.callAfterInterceptors(t)},u.getParameters=function(t){var e;return u.defaultParams&&(e=u.defaultParams),angular.isObject(t)&&(e=angular.extend(e||{},t)),e},u.getHttpConfig=function(t){var e=u.getParameters(t);return e?angular.extend({params:e},u.httpConfig):angular.copy(u.httpConfig)},u.$url=u.resourceUrl=function(t,e){return angular.isObject(t)||(t={id:t}),c(u.url(t||{}),e)},u.$get=function(t,e){return u.processResponse(n.get(t,u.getHttpConfig(e)))},u.query=function(t,e){return u.$get(u.resourceUrl(e),t)},u.get=function(t,e){return u.$get(u.resourceUrl(t),e)},u.prototype.$url=function(t){return c(u.resourceUrl(this),t)},u.prototype.processResponse=function(t){return t=u.callInterceptors(t,this),t=t.then(angular.bind(this,function(t){return t.hasOwnProperty("data")&&angular.isObject(t.data)&&angular.extend(this,t.data),this})),u.callAfterInterceptors(t)},angular.forEach(["post","put","patch"],function(t){u["$"+t]=function(e,i){var r;
return i=u.transformData(angular.copy(i,{})),r=angular.extend({method:t,url:e,data:i},u.getHttpConfig()),u.processResponse(n(r))},u.prototype["$"+t]=function(e){var i,r;return i=u.transformData(angular.copy(this,{})),r=angular.extend({method:t,url:e,data:i},u.getHttpConfig()),this.processResponse(n(r))}}),u.prototype.create=function(){return this.$post(this.$url(),this)},u.prototype.update=function(){return this["$"+u.updateMethod](this.$url(),this)},u.prototype.isNew=function(){return null==this.id},u.prototype.save=function(){return this.isNew()?this.create():this.update()},u.$delete=function(t){return u.processResponse(n["delete"](t,u.getHttpConfig()))},u.prototype.$delete=function(t){return this.processResponse(n["delete"](t,u.getHttpConfig()))},u.prototype.remove=u.prototype["delete"]=function(){return this.$delete(this.$url())},u}return c}]})}(),function(){var t=this,e=t.Backbone,n=Array.prototype.slice,i=Array.prototype.splice,r;r="undefined"!=typeof exports?exports:t.Backbone={},r.VERSION="0.9.2";var o=t._;o||"undefined"==typeof require||(o=require("underscore"));var s=t.jQuery||t.Zepto||t.ender;r.setDomLibrary=function(t){s=t},r.noConflict=function(){return t.Backbone=e,this},r.emulateHTTP=!1,r.emulateJSON=!1;var a=/\s+/,l=r.Events={on:function(t,e,n){var i,r,o,s,l;if(!e)return this;for(t=t.split(a),i=this._callbacks||(this._callbacks={});r=t.shift();)l=i[r],o=l?l.tail:{},o.next=s={},o.context=n,o.callback=e,i[r]={tail:s,next:l?l.next:o};return this},off:function(t,e,n){var i,r,s,l,c,u;if(r=this._callbacks){if(!(t||e||n))return delete this._callbacks,this;for(t=t?t.split(a):o.keys(r);i=t.shift();)if(s=r[i],delete r[i],s&&(e||n))for(l=s.tail;(s=s.next)!==l;)c=s.callback,u=s.context,(e&&c!==e||n&&u!==n)&&this.on(i,c,u);return this}},trigger:function(t){var e,i,r,o,s,l,c;if(!(r=this._callbacks))return this;for(l=r.all,t=t.split(a),c=n.call(arguments,1);e=t.shift();){if(i=r[e])for(o=i.tail;(i=i.next)!==o;)i.callback.apply(i.context||this,c);if(i=l)for(o=i.tail,s=[e].concat(c);(i=i.next)!==o;)i.callback.apply(i.context||this,s)}return this}};l.bind=l.on,l.unbind=l.off;var c=r.Model=function(t,e){var n;t||(t={}),e&&e.parse&&(t=this.parse(t)),(n=S(this,"defaults"))&&(t=o.extend({},n,t)),e&&e.collection&&(this.collection=e.collection),this.attributes={},this._escapedAttributes={},this.cid=o.uniqueId("c"),this.changed={},this._silent={},this._pending={},this.set(t,{silent:!0}),this.changed={},this._silent={},this._pending={},this._previousAttributes=o.clone(this.attributes),this.initialize.apply(this,arguments)};o.extend(c.prototype,l,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return o.clone(this.attributes)},get:function(t){return this.attributes[t]},escape:function(t){var e;if(e=this._escapedAttributes[t])return e;var n=this.get(t);return this._escapedAttributes[t]=o.escape(null==n?"":""+n)},has:function(t){return null!=this.get(t)},set:function(t,e,n){var i,r,s;if(o.isObject(t)||null==t?(i=t,n=e):(i={},i[t]=e),n||(n={}),!i)return this;if(i instanceof c&&(i=i.attributes),n.unset)for(r in i)i[r]=void 0;if(!this._validate(i,n))return!1;this.idAttribute in i&&(this.id=i[this.idAttribute]);var a=n.changes={},l=this.attributes,u=this._escapedAttributes,h=this._previousAttributes||{};for(r in i)s=i[r],(!o.isEqual(l[r],s)||n.unset&&o.has(l,r))&&(delete u[r],(n.silent?this._silent:a)[r]=!0),n.unset?delete l[r]:l[r]=s,o.isEqual(h[r],s)&&o.has(l,r)==o.has(h,r)?(delete this.changed[r],delete this._pending[r]):(this.changed[r]=s,n.silent||(this._pending[r]=!0));return n.silent||this.change(n),this},unset:function(t,e){return(e||(e={})).unset=!0,this.set(t,null,e)},clear:function(t){return(t||(t={})).unset=!0,this.set(o.clone(this.attributes),t)},fetch:function(t){t=t?o.clone(t):{};var e=this,n=t.success;return t.success=function(i,r,o){return e.set(e.parse(i,o),t)?void(n&&n(e,i)):!1},t.error=r.wrapError(t.error,e,t),(this.sync||r.sync).call(this,"read",this,t)},save:function(t,e,n){var i,s;if(o.isObject(t)||null==t?(i=t,n=e):(i={},i[t]=e),n=n?o.clone(n):{},n.wait){if(!this._validate(i,n))return!1;s=o.clone(this.attributes)}var a=o.extend({},n,{silent:!0});if(i&&!this.set(i,n.wait?a:n))return!1;var l=this,c=n.success;n.success=function(t,e,r){var s=l.parse(t,r);return n.wait&&(delete n.wait,s=o.extend(i||{},s)),l.set(s,n)?void(c?c(l,t):l.trigger("sync",l,t,n)):!1},n.error=r.wrapError(n.error,l,n);var u=this.isNew()?"create":"update",h=(this.sync||r.sync).call(this,u,this,n);return n.wait&&this.set(s,a),h},destroy:function(t){t=t?o.clone(t):{};var e=this,n=t.success,i=function(){e.trigger("destroy",e,e.collection,t)};if(this.isNew())return i(),!1;t.success=function(r){t.wait&&i(),n?n(e,r):e.trigger("sync",e,r,t)},t.error=r.wrapError(t.error,e,t);var s=(this.sync||r.sync).call(this,"delete",this,t);return t.wait||i(),s},url:function(){var t=S(this,"urlRoot")||S(this.collection,"url")||T();return this.isNew()?t:t+("/"==t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(t){t||(t={});var e=this._changing;this._changing=!0;for(var n in this._silent)this._pending[n]=!0;var i=o.extend({},t.changes,this._silent);this._silent={};for(var n in i)this.trigger("change:"+n,this,this.get(n),t);if(e)return this;for(;!o.isEmpty(this._pending);){this._pending={},this.trigger("change",this,t);for(var n in this.changed)this._pending[n]||this._silent[n]||delete this.changed[n];this._previousAttributes=o.clone(this.attributes)}return this._changing=!1,this},hasChanged:function(t){return arguments.length?o.has(this.changed,t):!o.isEmpty(this.changed)},changedAttributes:function(t){if(!t)return this.hasChanged()?o.clone(this.changed):!1;var e,n=!1,i=this._previousAttributes;for(var r in t)o.isEqual(i[r],e=t[r])||((n||(n={}))[r]=e);return n},previous:function(t){return arguments.length&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return o.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(t,e){if(e.silent||!this.validate)return!0;t=o.extend({},this.attributes,t);var n=this.validate(t,e);return n?(e&&e.error?e.error(this,n,e):this.trigger("error",this,n,e),!1):!0}});var u=r.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,{silent:!0,parse:e.parse})};o.extend(u.prototype,l,{model:c,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},add:function(t,e){var n,r,s,a,l,c,u={},h={},d=[];for(e||(e={}),t=o.isArray(t)?t.slice():[t],n=0,s=t.length;s>n;n++){if(!(a=t[n]=this._prepareModel(t[n],e)))throw new Error("Can't add an invalid model to a collection");l=a.cid,c=a.id,u[l]||this._byCid[l]||null!=c&&(h[c]||this._byId[c])?d.push(n):u[l]=h[c]=a}for(n=d.length;n--;)t.splice(d[n],1);for(n=0,s=t.length;s>n;n++)(a=t[n]).on("all",this._onModelEvent,this),this._byCid[a.cid]=a,null!=a.id&&(this._byId[a.id]=a);if(this.length+=s,r=null!=e.at?e.at:this.models.length,i.apply(this.models,[r,0].concat(t)),this.comparator&&this.sort({silent:!0}),e.silent)return this;for(n=0,s=this.models.length;s>n;n++)u[(a=this.models[n]).cid]&&(e.index=n,a.trigger("add",a,this,e));return this},remove:function(t,e){var n,i,r,s;for(e||(e={}),t=o.isArray(t)?t.slice():[t],n=0,i=t.length;i>n;n++)s=this.getByCid(t[n])||this.get(t[n]),s&&(delete this._byId[s.id],delete this._byCid[s.cid],r=this.indexOf(s),this.models.splice(r,1),this.length--,e.silent||(e.index=r,s.trigger("remove",s,this,e)),this._removeReference(s));return this},push:function(t,e){return t=this._prepareModel(t,e),this.add(t,e),t},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return t=this._prepareModel(t,e),this.add(t,o.extend({at:0},e)),t},shift:function(t){var e=this.at(0);return this.remove(e,t),e},get:function(t){return null==t?void 0:this._byId[null!=t.id?t.id:t]},getByCid:function(t){return t&&this._byCid[t.cid||t]},at:function(t){return this.models[t]},where:function(t){return o.isEmpty(t)?[]:this.filter(function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},sort:function(t){if(t||(t={}),!this.comparator)throw new Error("Cannot sort a set without a comparator");var e=o.bind(this.comparator,this);return 1==this.comparator.length?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("reset",this,t),this},pluck:function(t){return o.map(this.models,function(e){return e.get(t)})},reset:function(t,e){t||(t=[]),e||(e={});for(var n=0,i=this.models.length;i>n;n++)this._removeReference(this.models[n]);return this._reset(),this.add(t,o.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),this},fetch:function(t){t=t?o.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i,r,o){e[t.add?"add":"reset"](e.parse(i,o),t),n&&n(e,i)},t.error=r.wrapError(t.error,e,t),(this.sync||r.sync).call(this,"read",this,t)},create:function(t,e){var n=this;if(e=e?o.clone(e):{},t=this._prepareModel(t,e),!t)return!1;e.wait||n.add(t,e);var i=e.success;return e.success=function(r,o,s){e.wait&&n.add(r,e),i?i(r,o):r.trigger("sync",t,o,e)},t.save(null,e),t},parse:function(t,e){return t},chain:function(){return o(this.models).chain()},_reset:function(t){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(t,e){if(e||(e={}),t instanceof c)t.collection||(t.collection=this);else{var n=t;e.collection=this,t=new this.model(n,e),t._validate(t.attributes,e)||(t=!1)}return t},_removeReference:function(t){this==t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){("add"!=t&&"remove"!=t||n==this)&&("destroy"==t&&this.remove(e,i),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],this._byId[e.id]=e),this.trigger.apply(this,arguments))}});var h=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];o.each(h,function(t){u.prototype[t]=function(){return o[t].apply(o,[this.models].concat(o.toArray(arguments)))}});var d=r.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},p=/:\w+/g,f=/\*\w+/g,m=/[-[\]{}()+?.,\\^$|#\s]/g;o.extend(d.prototype,l,{initialize:function(){},route:function(t,e,n){return r.history||(r.history=new g),o.isRegExp(t)||(t=this._routeToRegExp(t)),n||(n=this[e]),r.history.route(t,o.bind(function(i){var o=this._extractParameters(t,i);n&&n.apply(this,o),this.trigger.apply(this,["route:"+e].concat(o)),r.history.trigger("route",this,e,o)},this)),this},navigate:function(t,e){r.history.navigate(t,e)},_bindRoutes:function(){if(this.routes){var t=[];for(var e in this.routes)t.unshift([e,this.routes[e]]);for(var n=0,i=t.length;i>n;n++)this.route(t[n][0],t[n][1],this[t[n][1]])}},_routeToRegExp:function(t){return t=t.replace(m,"\\$&").replace(p,"([^/]+)").replace(f,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){return t.exec(e).slice(1)}});var g=r.History=function(){this.handlers=[],o.bindAll(this,"checkUrl")},v=/^[#\/]/,y=/msie [\w.]+/;g.started=!1,o.extend(g.prototype,l,{interval:50,getHash:function(t){var e=t?t.location:window.location,n=e.href.match(/#(.*)$/);return n?n[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||e){t=window.location.pathname;var n=window.location.search;n&&(t+=n)}else t=this.getHash();return t.indexOf(this.options.root)||(t=t.substr(this.options.root.length)),t.replace(v,"")},start:function(t){if(g.started)throw new Error("Backbone.history has already been started");g.started=!0,this.options=o.extend({},{root:"/"},this.options,t),this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var e=this.getFragment(),n=document.documentMode,i=y.exec(navigator.userAgent.toLowerCase())&&(!n||7>=n);i&&(this.iframe=s('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(e)),this._hasPushState?s(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!i?s(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=e;var r=window.location,a=r.pathname==this.options.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!a?(this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&a&&r.hash&&(this.fragment=this.getHash().replace(v,""),window.history.replaceState({},document.title,r.protocol+"//"+r.host+this.options.root+this.fragment)),this.options.silent?void 0:this.loadUrl())},stop:function(){s(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),g.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e==this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e==this.fragment?!1:(this.iframe&&this.navigate(e),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(t){var e=this.fragment=this.getFragment(t),n=o.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0});return n},navigate:function(t,e){if(!g.started)return!1;e&&e!==!0||(e={trigger:e});var n=(t||"").replace(v,"");this.fragment!=n&&(this._hasPushState?(0!=n.indexOf(this.options.root)&&(n=this.options.root+n),this.fragment=n,window.history[e.replace?"replaceState":"pushState"]({},document.title,n)):this._wantsHashChange?(this.fragment=n,this._updateHash(window.location,n,e.replace),this.iframe&&n!=this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,n,e.replace))):window.location.assign(this.options.root+t),e.trigger&&this.loadUrl(t))},_updateHash:function(t,e,n){n?t.replace(t.toString().replace(/(javascript:|#).*$/,"")+"#"+e):t.hash=e}});var b=r.View=function(t){this.cid=o.uniqueId("view"),this._configure(t||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},_=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName"];o.extend(b.prototype,l,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this},make:function(t,e,n){var i=document.createElement(t);return e&&s(i).attr(e),n&&s(i).html(n),i},setElement:function(t,e){return this.$el&&this.undelegateEvents(),this.$el=t instanceof s?t:s(t),this.el=this.$el[0],e!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(t||(t=S(this,"events"))){this.undelegateEvents();for(var e in t){var n=t[e];if(o.isFunction(n)||(n=this[t[e]]),!n)throw new Error('Method "'+t[e]+'" does not exist');var i=e.match(_),r=i[1],s=i[2];n=o.bind(n,this),r+=".delegateEvents"+this.cid,""===s?this.$el.bind(r,n):this.$el.delegate(s,r,n)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(t){this.options&&(t=o.extend({},this.options,t));for(var e=0,n=w.length;n>e;e++){var i=w[e];t[i]&&(this[i]=t[i])}this.options=t},_ensureElement:function(){if(this.el)this.setElement(this.el,!1);else{var t=S(this,"attributes")||{};this.id&&(t.id=this.id),this.className&&(t["class"]=this.className),this.setElement(this.make(this.tagName,t),!1)}}});var x=function(t,e){var n=C(this,t,e);return n.extend=this.extend,n};c.extend=u.extend=d.extend=b.extend=x;var $={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};r.sync=function(t,e,n){var i=$[t];n||(n={});var a={type:i,dataType:"json"};return n.url||(a.url=S(e,"url")||T()),n.data||!e||"create"!=t&&"update"!=t||(a.contentType="application/json",a.data=JSON.stringify(e.toJSON())),r.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),r.emulateHTTP&&("PUT"===i||"DELETE"===i)&&(r.emulateJSON&&(a.data._method=i),a.type="POST",a.beforeSend=function(t){t.setRequestHeader("X-HTTP-Method-Override",i)}),"GET"===a.type||r.emulateJSON||(a.processData=!1),s.ajax(o.extend(a,n))},r.wrapError=function(t,e,n){return function(i,r){r=i===e?r:i,t?t(e,r,n):e.trigger("error",e,r,n)}};var k=function(){},C=function(t,e,n){var i;return i=e&&e.hasOwnProperty("constructor")?e.constructor:function(){t.apply(this,arguments)},o.extend(i,t),k.prototype=t.prototype,i.prototype=new k,e&&o.extend(i.prototype,e),n&&o.extend(i,n),i.prototype.constructor=i,i.__super__=t.prototype,i},S=function(t,e){return t&&t[e]?o.isFunction(t[e])?t[e]():t[e]:null},T=function(){throw new Error('A "url" property or function must be specified')}}.call(this),function(t){var e={create:"POST",update:"PUT","delete":"DELETE",read:"GET"},n=function(t){return t&&t.url?_.isFunction(t.url)?t.url():t.url:null},i=function(){throw new Error("A 'url' property or function must be specified")};Backbone.sync=function(r,o,s){var a=e[r],l=_.extend({type:a,dataType:"json",beforeSend:function(e){if(!s.noCSRF){var n=t('meta[name="csrf-token"]').attr("content");n&&e.setRequestHeader("X-CSRF-Token",n)}o.trigger("sync:start")}},s);if(l.url||(l.url=n(o)||i()),!l.data&&o&&("create"==r||"update"==r)){l.contentType="application/json";var c={};o.paramRoot?c[o.paramRoot]=o.toJSON():c=o.toJSON(),l.data=JSON.stringify(c)}"GET"!==l.type&&(l.processData=!1);var u=s.complete;return l.complete=function(t,e){o.trigger("sync:end"),u&&u(t,e)},t.ajax(l)}}(jQuery),function(){window.Quotes={Models:{},Collections:{},Routers:{},Views:{},views:{},vars:{},functions:{}}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/areas/area-drop-placeholder"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="help-placeholder droppable alert">\r\n  You can drag new elements here.\r\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/areas/area-edit-html"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="area-edit">\r\n<div class="area-header">\r\n  <input type="text" name="name" value="',name,'"/>\r\n</div>\r\n\r\n<div class="area-content">\r\n  If you don\'t know what HTML code is, you probably want to use "text area" instead.<br/>\r\n  <textarea name="content">',content,'</textarea>\r\n</div>\r\n\r\n<div class="area-actions">\r\n  <a href="" class="btn btn-primary save-button">Save</a> <a href="" class="btn cancel-button">Cancel</a>\r\n</div>\r\n\r\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/areas/area-edit-text"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="area-edit">\r\n<div class="area-header">\r\n  <input type="text" name="name" value="',name,'"/>\r\n</div>\r\n\r\n<div class="area-content">\r\n  <textarea name="content" class="editor">',content,'</textarea>\r\n</div>\r\n\r\n<div class="area-actions">\r\n  <a href="" class="btn btn-primary save-button">Save</a> <a href="" class="btn cancel-button">Cancel</a>\r\n</div>\r\n\r\n</div>\r\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/areas/area-html"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="sortable-handler-container">\r\n<div class="sortable-handler">\r\n  <a href="" class="delete-area pull-right" title="Delete area"><i class="icon icon-remove"></i>delete</a>\r\n  <a href="" class="edit-area pull-right" title="Edit area"><i class="icon icon-edit"></i>edit</a>\r\n  <a href="" class="pull-right" onclick="return false;" title="Reorder area"><i class="icon icon-move"></i>move</a>\r\n</div>\r\n</div>\r\n<div class="area-edit-placeholder"></div>\r\n<div class="area">\r\n<div class="area-header">\r\n  <h3 class="xname">',name,'</h3>\r\n</div>\r\n\r\n<div class="area-content xcontent">\r\n  ',content,"\r\n</div>\r\n\r\n</div>\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/areas/area-list"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<h2 class="section-name">',name,'</h2>\r\n\r\n\r\n\r\n<div class="area-list"></div>\r\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/areas/area-price-table"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="sortable-handler-container">\r\n<div class="sortable-handler">\r\n  <a href="" class="btn btn-mini pull-left move-cursor" onclick="return false;"><i class="icon icon-move"></i> move</a>\r\n  <a href="" class="btn btn-mini delete-area pull-right"><i class="icon icon-remove"></i> delete</a>\r\n</div>\r\n</div>\r\n<div class="area-edit-placeholder"></div>\r\n<div class="area area-price-table">\r\n<div class="area-content">\r\n  <div class="alert alert-info">A placeholder for a price table. The real content will be inserted automatically.<br/>\r\n  There can be only one price table in a proposal.</div>\r\n</div>\r\n\r\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/areas/area-text"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="sortable-handler-container">\r\n<div class="sortable-handler">\r\n  <a href="" class="btn btn-mini btn-primary edit-area pull-left" title="Edit area"><i class="icon icon-edit icon-white"></i> edit</a>\r\n  <a href="" class="btn btn-mini move-cursor pull-left" onclick="return false;" title="Reorder area"><i class="icon icon-move"></i> move</a>\r\n  <a href="" class="btn btn-mini delete-area pull-right" title="Delete area"><i class="icon icon-remove"></i> delete</a>\r\n</div>\r\n</div>\r\n<div class="area-edit-placeholder"></div>\r\n<div class="area">\r\n<div class="area-header">\r\n  <h3 class="xname">',name,'</h3>\r\n</div>\r\n\r\n<div class="empty-area-notice alert alert-info center" style="display: none">No content yet. Double click this area or click the edit area button.</div>\r\n<div class="area-content xcontent">\r\n  ',content,"\r\n</div>\r\n\r\n</div>\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/items/item-bottom-summary"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="items-table-header items-table-bottom items-table-bottom-total period-summary',key," items-summary-",kind,'">\r\n  <div class="actions">\r\n  </div>\r\n  <div class="name">\r\n    <div>\r\n    \r\n    </div>\r\n  </div>\r\n  <div class="quantity">\r\n    <div>\r\n    \r\n    </div>\r\n  </div>\r\n  <div class="price">\r\n    <div>\r\n    \r\n    </div>\r\n  </div>\r\n  <div class="unit">\r\n    <div>\r\n    \r\n    </div>\r\n  </div>\r\n  <div class="vat">\r\n    <div>\r\n    \r\n    </div>\r\n  </div>\r\n  <div class="price-vat">\r\n    <div>\r\n    \r\n    </div>\r\n  </div>\r\n  <div class="period">\r\n    <div>\r\n    '),"grandtotal"==kind?__p.push("\r\n    ",""==value?"Grand total":"Grand total per "+value,"\r\n    "):__p.push("\r\n    ",""==value?"Total":"per "+value,"\r\n    "),__p.push('\r\n    </div>\r\n  </div>\r\n  <div class="total">\r\n      <div class="super-total"></div>\r\n  </div>\r\n  <div class="total-vat">\r\n    <div class="super-total-vat"></div>\r\n  </div>\r\n</div>\r\n<div class="items-table-header items-table-bottom items-table-bottom-profit period-profit-summary',key," items-summary-",kind,'"">\r\n  <div class="actions">\r\n  </div>\r\n  <div class="name">\r\n    <div>\r\n    \r\n    </div>\r\n  </div>\r\n  <div class="quantity">\r\n    <div>\r\n    \r\n    </div>\r\n  </div>\r\n  <div class="price">\r\n    <div>\r\n    \r\n    </div>\r\n  </div>\r\n  <div class="unit">\r\n    <div>\r\n    \r\n    </div>\r\n  </div>\r\n\r\n  <div class="vat">\r\n    <div>\r\n    \r\n    </div>\r\n  </div>\r\n  <div class="price-vat">\r\n    <div>\r\n    \r\n    </div>\r\n  </div>\r\n  <div class="period">\r\n    <div>\r\n    ',""==value?"Profit":"Profit per "+value,'\r\n    </div>\r\n  </div>\r\n  <div class="total">\r\n      <div class="super-total-profit"></div>\r\n  </div>\r\n  <div class="total-vat">\r\n    <div class="super-total-vat"></div>\r\n  </div>\r\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/items/item-list"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('\r\n<div class="pull-right">\r\n  '),export_csv_enabled&&__p.push('\r\n  <a href="" class="btn btn-small" id="export-csv-button" title="Download saved quote as CSV file."><i class="fa fa-arrow-circle-o-down"></i> Export to .csv</a>\r\n  '),__p.push('\r\n  <a href="" class="btn btn-small" id="show-taxes-checkbox">Edit tax</a>\r\n  <a href="" class="btn btn-small" id="clear-items-button"><i class="fa fa-times"></i> Clear list</a>\r\n</div>\r\n\r\n<div style="height: 18px;">\r\n<div class="add-buttons-container">\r\n<a href="" class="btn btn-small" id="add-item-button"><i class="fa fa-plus"></i> Add item</a>\r\n<a href="/service_templates?dialog=1" class="btn btn-small" id="add-service-template-button"><i class="fa fa-plus"></i> Add service/product template</a>\r\n\r\n    <div class="btn-group">\r\n    <a class="btn btn-small dropdown-toggle" data-toggle="dropdown" href="#">\r\n    <i class="fa fa-plus"></i> Add other...\r\n    <span class="caret"></span>\r\n    </a>\r\n    <ul class="dropdown-menu">\r\n      <li><a href="" class="" id="add-discount-button">Discount row</a></li>\r\n      <li><a href="" class="" id="add-group-header-button">Group header</a></li>\r\n      '),payments_enabled&&__p.push('\r\n      <li><a href="" class="" id="add-payment-button">Payment option</a></li>\r\n      '),__p.push("\r\n    </ul>\r\n    </div>\r\n    "),import_product_catalog&&__p.push('\r\n    <a href="" class="btn btn-small" id="import-from-spreadsheet-button"><i class="fa fa-arrow-circle-o-up"></i> Import from .csv</a>\r\n    '),__p.push('\r\n</div>\r\n</div>\r\n\r\n<div class="no-items-help left-arrow-help floating-help"><div class="help-text">start by adding new rows here</div></div>\r\n\r\n<div class="items-table">\r\n\r\n<div class="items-table-header">\r\n  <div class="actions">\r\n  </div>\r\n  <div class="name">\r\n    <div>\r\n    Name<br/>Description\r\n    </div>\r\n  </div>\r\n  <div class="quantity">\r\n    <div>\r\n    Quantity<br/>\r\n    Period\r\n    </div>\r\n  </div>\r\n  <div class="price">\r\n    <div>\r\n    Price<span class="purchase-header"><br>\r\n    Purchase</span>\r\n    </div>\r\n  </div>\r\n  <div class="unit">\r\n    <div>\r\n    Unit\r\n    </div>\r\n  </div>\r\n  <div class="vat">\r\n    <div>\r\n      Tax\r\n    </div>\r\n  </div>\r\n  <div class="price-vat">\r\n    <div>\r\n    Price + Tax\r\n    </div>\r\n  </div>\r\n  <div class="discount">\r\n    <div>\r\n    Unit discount\r\n    </div>\r\n  </div>\r\n  <div class="total">\r\n    <div>\r\n      Total\r\n    </div>\r\n  </div>\r\n  <div class="total-vat">\r\n    <div>\r\n    Total + Tax\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n<div id="item-list"></div>\r\n\r\n\r\n<div class="cleaner"></div>\r\n\r\n</div>\r\n\r\n<div id="no-items-found" style="display: none;">\r\n  <br/>\r\n  <br/>\r\n  <br/>\r\n  <div class="row">\r\n    <div class="span4 offset4">\r\n      <div class="alert alert-info center">No items.</div>\r\n    </div>\r\n  </div>\r\n</div>\r\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/items/item"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("<table>\r\n<tbody>\r\n<tr>\r\n<td class='actions' rowspan=\""),__p.push("payment"==kind?"3":"3"),__p.push('">\r\n  <div class="onmousein">\r\n    <i class="icon icon-move" title="Reorder"></i>\r\n    <a href="" class="show-second-row" title="Edit additional info"><i class="icon icon-edit"></i></a>\r\n  </div>\r\n</td>\r\n<td class="name">\r\n  <input type="text" name="name" value="',(""+name).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"),'" placeholder="name"/>\r\n</td>\r\n'),"item"==kind?(__p.push('\r\n<td class="quantity">\r\n  <input type="text" name="quantity" value="',quantity,'"/>\r\n</td>\r\n<td class="price">\r\n  <input type="text" name="price" value="',price,'" title="Price"/>\r\n</td>\r\n<td class="unit">\r\n'),"item"==kind&&__p.push('\r\n  <input type="text" name="unit" value="',unit,'" title="Unit"/>\r\n'),__p.push('\r\n</td>\r\n<td class="vat">\r\n  <select name="vat">\r\n  </select>\r\n</td>\r\n<td class="price_vat">\r\n  <input type="text" name="price_vat" value="',price_vat,'"/>\r\n</td>\r\n')):"discount"==kind?__p.push('\r\n<td class="quantity">\r\n</td>\r\n<td class="price" style="text-align: right;">\r\n</td>\r\n<td class="unit">\r\n</td>\r\n<td class="vat">\r\n  <select name="vat">\r\n  </select>\r\n</td>\r\n<td class="price_vat">\r\n</td>\r\n'):"payment"==kind&&__p.push("\r\n"),__p.push("\r\n"),("item"==kind||"discount"==kind)&&__p.push('\r\n<td class="discount">\r\n  <input type="text" name="discount" value="',discount,'"/><select name="discount_type"></select>\r\n</td>\r\n<td class="total">\r\n  <input type="text" name="total" value="" readonly />\r\n</td>\r\n<td class="total_vat">\r\n  <input type="text" name="total_vat" value="" readonly />\r\n</td>\r\n'),__p.push('\r\n<td class="actions-end" rowspan="3" '),__p.push("item"==kind||"discount"==kind?"":' style="text-align: right;width: auto;padding-right: 7px;"'),__p.push('>\r\n  <div class="onmousein">\r\n    <a href="" class="delete-item"><i class="icon icon-remove"></i></a>\r\n  </div>\r\n</td>\r\n</tr>\r\n'),"payment"==kind&&(__p.push('\r\n<tr>\r\n<td class="quantityx" colspan="6">\r\n  Selected: <input type="radio" name="payment_option" '),1==optional_checked&&__p.push('checked="checked"'),__p.push('/>\r\n  &nbsp;&nbsp;Deposit:\r\n  <span class="price">\r\n  <input type="text" name="price" value="',price,'"/><select name="deposit_amount"></select>\r\n  </span>\r\n  &nbsp;Installments:\r\n  <span class="quantity">\r\n  <input type="text" name="quantity" value="',quantity,'"/>\r\n  </span>\r\n  <span class="vat">\r\n  &nbsp;Tax:\r\n  <select name="vat">\r\n  </select>\r\n  </span>\r\n  <span class="discount">\r\n  &nbsp;Discount:\r\n  <input type="text" name="discount" value="',discount,'"/><select name="discount_type"></select>\r\n  </span>\r\n  <span class="total_prices">\r\n  <span class="total">\r\n  <i class="icon icon-info-sign" rel="popover" data-content="You can add multiple payment rows and your clients will be able to choose one of them, you\'ll then see which option they\'ve selected on this page.<br><br>This feature is not compatible with Xero, QuickBooks, Freshbooks and Harvest integrations.<br><br>You need to place payment options <b>at the bottom of a table</b>! You also need to insert all payment options <b>into a single table</b>." data-original-title=""></i>\r\n  <input type="text" name="total" value="" readonly />\r\n  </span>\r\n  <span class="total_vat">\r\n  <input type="text" name="total_vat" value="" readonly />\r\n  </span>\r\n  </span>\r\n</tr>\r\n')),__p.push('\r\n<tr class="second-row">\r\n<td class="description" colspan="1">\r\n<div>\r\n  <textarea name="description" title="Description" placeholder="description">',description,"</textarea>\r\n</div>\r\n</td>\r\n"),("item"==kind||"discount"==kind)&&__p.push('\r\n<td class="period" colspan="1">\r\n<div>\r\n  <select name="period" title="Period"></select>\r\n</div>\r\n</td>\r\n'),__p.push("\r\n"),"item"==kind&&(__p.push('\r\n<td colspan="6">\r\n<div>\r\n  <input type="text" title="Purchase price. Blank = no profit. Use if you want to calculate profits." class="purchase-price" name="purchase_price" value="',purchase_price,'"/>\r\n  Optional: <input type="checkbox" name="optional" '),1==optional&&__p.push('checked="checked"'),__p.push('/>\r\n  <div class="optional-checked">\r\n    Selected: <input type="checkbox" name="optional_checked"  '),1==optional_checked&&__p.push('checked="checked"'),__p.push('/>\r\n    Editable qty: <input title="Editable quantity" type="checkbox" name="editable_quantity"  '),1==editable_quantity&&__p.push('checked="checked"'),__p.push("/>\r\n  </div>\r\n</div>\r\n</td>\r\n  ")),__p.push("\r\n</tr>\r\n"),"payment"!=kind&&"group"!=kind&&"discount"!=kind&&__p.push('\r\n<tr class="third-row">\r\n<td colspan="7">\r\n  <div>\r\n  <input type="text" name="code" value="',code,'" placeholder="product code" title="Product code"/>\r\n  <div class="image-selector">\r\n  <input type="hidden" class="image-please" name="image_url" value="',image_url,'"/>\r\n  <a href="" class="choose-image-button" title="Select image"><i class="fa fa-picture-o"></i></a>\r\n  </div>\r\n  </div>\r\n</td>\r\n</tr>\r\n'),__p.push("\r\n</tbody>\r\n</table>\r\n");
return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/proposals/basic_edit"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('\n<table class="proposal-basic-row" data-intro="<b>Proposal name & Client</b><br/>Edit the proposal name and select a client here.<br/>You can either select an existing client or use the \'create new\' button to create a new user right here. Hover over the area to see these action buttons." data-step="1">\n<tr class="inline proposal-name-row">\n  <td>\n  <label class="">Proposal name</label>\n  </td>\n  <td>\n  <div class="controls"><input class="hiddeninput autoresize" type="text" name="name" value="',(""+name).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"),'"/></div>\n  </td>\n</tr>\n<tr class="inline client-edit">\n  <td>\n  <label class="">Client\n  <div class="inside-label">\n  <a href="#" class="btn btn-mini" id="add-client">Add existing</a>\n  <a href="/clients/new" class="btn btn-mini" id="create-new-client">Create new</a>\n  </div>\n  </label>\n  </td>\n  <td>\n  <div class="controls">\n\n<div class="inline proposal-emails-edit">\n<div class="proposal-emails-list"></div>\n\n</div>\n</div>\n</td>\n\n\n  </tr>\n</table>\n\n\n<div style="display:none">\n<div id="dialog"></div>\n<div id="dialog2"></div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/proposals/proposal_email"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('\r\n<input type="hidden" class="client-id-select" name="client_id" value="'),client_id&&__p.push("",client_id,""),__p.push('"/>\r\n\r\n<a href="#" class="show-client" title="Open in new window"><i class="icon icon-share"></i></a>\r\n\r\n<a href="#" class="delete-proposal-email" title="Remove person"><i class="icon icon-remove"></i></a>\r\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/sections/edit"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('\r\n<div class="section">\r\n  <div class="actions">\r\n    <span class="onmousein" style="display: none;">\r\n      <a href="" class="delete-section" title="Delete section"><i class="icon icon-remove"></i></a>\r\n      <a href="" class="edit-section" title="Edit section name"><i class="icon icon-edit"></i></a>\r\n    </span>\r\n    &nbsp;\r\n  <span class="onmousein" style="display: none;">\r\n    <i class="icon icon-move sortable-handler" title="Reorder section"></i>\r\n  </span>\r\n  </div>\r\n\r\n  <span class="edit-mode" style="display: none;">\r\n    <input type="text" name="name" value="',name,'"/>\r\n    <a href="" class="ok-section"><i class="icon icon-ok-sign"></i></a>\r\n  </span>\r\n  <span class="show-mode">\r\n    <a href="" class="select-section"><span class="xname">',name,'</span></a>\r\n  </span>\r\n</div>\r\n<div class="cleaner"></div>\r\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/themes/css"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push("\r\n.proposal-area.ui-sortable-helper div,\r\n.proposal-area.ui-sortable-helper p,\r\n.proposal-area.ui-sortable-helper table,\r\n.proposal-area.ui-sortable-helper span,\r\n.proposal-area.ui-sortable-helper ul,\r\n.proposal-area.ui-sortable-helper ol,\r\n.proposal-preview-container .tab-content div,\r\n.proposal-preview-container .tab-content p,\r\n.proposal-preview-container .tab-content table,\r\n.proposal-preview-container .tab-content span,\r\n.proposal-preview-container .tab-content ul,\r\n.proposal-preview-container .tab-content ol\r\n{\r\n  font-size: ",text_size,"pt;\r\n  color: ",text_color,";\r\n  "),""!=text_font&&__p.push("font-family: ",text_font,";"),__p.push("\r\n}\r\n\r\n.proposal-preview-container .tab-content .section-heading,\r\n.proposal-preview-container .tab-content h1{\r\n  font-size: ",heading_size,"pt;\r\n  color: ",heading_color,";\r\n  "),""!=heading_font&&__p.push("font-family: ",heading_font,";"),__p.push("\r\n}\r\n\r\n.proposal-area.ui-sortable-helper .area-heading,\r\n.proposal-area.ui-sortable-helper h2,\r\n.proposal-preview-container .tab-content .area-heading,\r\n.proposal-preview-container .tab-content h2{\r\n  font-size: ",area_heading_size,"pt;\r\n  color: ",area_heading_color,";\r\n  "),""!=area_heading_font&&__p.push("font-family: ",area_heading_font,";"),__p.push("\r\n}\r\n\r\n.proposal-preview-container .tab-content h3 span,\r\n.proposal-preview-container .tab-content h3,\r\n.proposal-preview-container .tab-content h5{\r\n  color: ",heading_color,";\r\n}\r\n\r\n.proposal-preview-container .tab-content h4,\r\n.proposal-preview-container .tab-content h6{\r\n    color: ",area_heading_color,";\r\n}\r\n\r\n.proposal-preview-container .cover-page .proposal-name{\r\n  font-size: ",proposal_name_size,"pt;\r\n  line-height: ",proposal_name_size,"pt;\r\n  color: ",proposal_name_color,";\r\n  "),""!=proposal_name_font&&__p.push("font-family: ",proposal_name_font,";"),__p.push("\r\n}\r\n\r\n.proposal-preview-container .cover-page .proposal-code,\r\n.proposal-preview-container .cover-page .proposal-code span{\r\n  color: ",proposal_name_color,";\r\n}\r\n\r\n.proposal-preview-container .cover-page .proposal-info,\r\n.proposal-preview-container .cover-page .proposal-info *{\r\n  font-size: ",proposal_info_size,"pt;\r\n  color: ",proposal_info_color,";\r\n  "),""!=proposal_info_font&&__p.push("font-family: ",proposal_info_font,";"),__p.push("\r\n}\r\n\r\n.proposal-preview-container .price-table .description-body{\r\n  font-size: ",item_description_size,"pt !important;\r\n}\r\n\r\n.proposal-html .proposal-content > .tab-content\r\n{\r\n  width: 210mm;\r\n  "),"Letter"==page_size&&__p.push("\r\n  width: 215.9mm;\r\n  width: 8.5in;\r\n  "),__p.push("\r\n}\r\n\r\n.pdf-html, .pdf-container .tab-pane, .pdf-html .tab-content, .pdf-html .row-fluid, .pdf-html .container, .pdf-html body{\r\n  width: 210mm;\r\n  "),"Letter"==page_size&&__p.push("\r\n  width: 215.9mm;\r\n  "),__p.push("\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n.pdf-container .tab-pane{\r\n  background-image: url('",background_image_recolored,"');\r\n  /*background-repeat: no-repeat;*/\r\n  background-repeat: repeat-y;\r\n\r\n  /*height: 297mm;*/\r\n  min-height: 297mm;\r\n  "),"Letter"==page_size&&__p.push("\r\n  min-height: 279.4mm;\r\n  "),__p.push("\r\n\r\n  /* letter 215.9 mm \xd7 279.4 mm */\r\n\r\n  display: inline-block;\r\n\r\n  background-size: 210mm 297mm;\r\n  "),"Letter"==page_size&&__p.push("\r\n  background-size: 215.9mm 279.4mm;\r\n  "),__p.push("\r\n}\r\n\r\n.pdf-container .tab-pane.cover-page{\r\n  background-image: url('",cover_background_image_recolored,"');\r\n}\r\n\r\n.proposal-preview-container .proposal-html .tab-content .inner-slide{\r\n  background-repeat: no-repeat;\r\n\r\n  width: 210mm;\r\n  background-size: 210mm 8.5cm, 210mm 297mm;\r\n  "),"Letter"==page_size&&__p.push("\r\n  width: 8.5in;\r\n  background-size: 8.5in 3.5in, 8.5in 11in;\r\n  "),__p.push("\r\n\r\n  "),"A4"==real_page_size&&__p.push("\r\n  background-size: 8.5in 4.5in, 8.5in 12.02in;\r\n  "),__p.push('\r\n\r\n  height: 100%;\r\n  position: relative;\r\n  z-index: 1;\r\n\r\n  background-image: url("',MyAssets.gradient_from_bottom,'"), url("',background_image_recolored,'");\r\n  background-position: center 8in, center top;\r\n}\r\n\r\n.proposal-pageless .proposal-html .proposal-content.scrollable-layout > .tab-content > .tab-pane.first-section .inner-slide,\r\n.proposal-preview-container .proposal-html .tab-content .cover-page .inner-slide{\r\n  background-image: url("',MyAssets.gradient_from_bottom,'"), url("',cover_background_image_recolored,'");\r\n}\r\n\r\n.proposal-pageless .proposal-html .proposal-content.scrollable-layout > .tab-content > .tab-pane.last-section .inner-slide:before,\r\n.proposal-preview-container .proposal-html .tab-content .inner-slide:before{\r\n  content:"";\r\n  position:absolute;\r\n  z-index:-1;\r\n  bottom:0px;\r\n  right:0px;\r\n  height: 8.5cm;\r\n\r\n  width: 210mm;\r\n  background-size: 26cm 3cm, 210mm 297mm;\r\n  \r\n  '),"Letter"==page_size&&__p.push("\r\n  width: 8.5in;\r\n  background-size: 26cm 3cm, 8.5in 11in;\r\n  "),__p.push("\r\n\r\n  "),"A4"==real_page_size&&__p.push("\r\n  background-size: 26cm 3cm, 8.5in 12.02in;\r\n  "),__p.push('\r\n\r\n  background-image: url("',MyAssets.gradient_from_top,'"), url("',background_image_recolored,'");\r\n  background-position: center 0cm, center bottom;\r\n  background-repeat: no-repeat;\r\n}\r\n\r\n.proposal-pageless .proposal-html .proposal-content.scrollable-layout > .tab-content > .tab-pane.first-section:not(.last-section) .inner-slide:before{\r\n  background-size: 26cm 6cm;\r\n  background-position: center bottom;\r\n  background-image: url("',MyAssets.gradient_from_bottom,'");\r\n}\r\n\r\n.proposal-preview-container .proposal-html .tab-content .cover-page .inner-slide:before{\r\n  background-image: url("',MyAssets.gradient_from_top,'"), url("',cover_background_image_recolored,'");\r\n}\r\n\r\n.proposal-preview-container .proposal-html .tab-content .inner-slide:after{\r\n  content:"";\r\n  position:absolute;\r\n  z-index:-2;\r\n  bottom:0px;\r\n  right:0px;\r\n  width: 210mm;\r\n  '),"Letter"==page_size&&__p.push("\r\n  width: 215.9mm;\r\n  width: 8.5in;\r\n  "),__p.push('\r\n  height: 10cm;\r\n\r\n  background-size: 26cm 5.5cm;\r\n  background-repeat: no-repeat;\r\n}\r\n\r\n.proposal-pageless .proposal-html .proposal-content.scrollable-layout > .tab-content > .tab-pane.first-section.last-section .inner-slide:after,\r\n.proposal-preview-container .proposal-html .tab-content .inner-slide:after{\r\n  background-image: url("',MyAssets.gradient_from_bottom,'");  \r\n}\r\n\r\n'),(1==show_cover_whole_image||1==show_cover_whole_image_height)&&__p.push('\r\n.proposal-pageless .proposal-html .proposal-content.scrollable-layout > .tab-content > .tab-pane.first-section:not(.last-section) .inner-slide:before,\r\n.proposal-preview-container .proposal-html .tab-content .cover-page .inner-slide:before,\r\n.proposal-preview-container .proposal-html .tab-content .cover-page .inner-slide:after{\r\n  background-image: none;\r\n}\r\n.proposal-pageless .proposal-html .proposal-content.scrollable-layout > .tab-content > .tab-pane.first-section .inner-slide,\r\n.proposal-preview-container .proposal-html .tab-content .cover-page .inner-slide{\r\n  background-image: none, url("',cover_background_image_recolored,'");\r\n}\r\n'),__p.push("\r\n\r\n"),1==text_justify&&__p.push("\r\n.proposal-preview-container .tab-content p{\r\n  text-align: justify;\r\n}\r\n"),__p.push("\r\n\r\n"),1==hide_approve_button&&__p.push("\r\n.proposal-html .sidebar-left .approve-proposal-button{\r\n  display: none !important;\r\n}\r\n"),__p.push("\r\n\r\n"),1==hide_reject_button&&__p.push("\r\n.proposal-html .sidebar-left .reject-proposal-button{\r\n  display: none !important;\r\n}\r\n"),__p.push("\r\n\r\n"),1==hide_discuss_button&&__p.push("\r\n.proposal-html .sidebar-left .discuss-proposal-button{\r\n  display: none !important;\r\n}\r\n"),__p.push("\r\n\r\n"),1==hide_quantity_column&&__p.push("\r\nth.quantity, td.quantity{\r\ndisplay:none;\r\n}\r\n"),__p.push("\r\n\r\n"),1==hide_price_column&&__p.push("\r\nth.price, td.price{\r\ndisplay:none;\r\n}\r\n"),__p.push("\r\n\r\n"),1==hide_vat_column&&__p.push("\r\nth.vat, td.vat{\r\ndisplay:none;\r\n}\r\n"),__p.push("\r\n\r\n"),1==hide_total_vat_column&&__p.push("\r\nth.total-vat, td.total-vat{\r\ndisplay:none;\r\n}\r\n"),__p.push("\r\n\r\n"),1==hide_total_column&&__p.push("\r\nth.total, td.total{\r\ndisplay:none;\r\n}\r\ntr.payment-row td.total{\r\n  display: table-cell;\r\n}\r\n"),__p.push("\r\n\r\n"),1==hide_total_column&&1==hide_total_vat_column&&__p.push("\r\ntr.subtotal-row th.total, tr.subtotal-row td.total,\r\ntr.total-row th.total, tr.total-row td.total{\r\n  display: table-cell;\r\n}\r\n"),__p.push("\r\n\r\n"),1==hide_total_rows&&__p.push("\r\ntr.total-row:not(.total-row-with-tax), tr.subtotal-row{\r\n  display: none;\r\n}\r\n"),__p.push("\r\n\r\n"),1==show_total_with_tax_summary&&__p.push("\r\n.total-row-with-tax{\r\n  display: table-row;\r\n}\r\n"),__p.push("\r\n\r\n"),1==hide_total_column&&1!=hide_total_vat_column&&1==show_total_with_tax_summary&&__p.push("\r\n.total-row-with-tax td.total{\r\n  display: table-cell;\r\n}\r\n\r\n.total-row-with-tax td.total-vat{\r\n  display: none;\r\n}\r\n"),__p.push("\r\n\r\n"),1==show_proposal_code&&__p.push("\r\n.proposal-preview-container .cover-page .proposal-code{\r\n  display: block;\r\n}\r\n"),__p.push("\r\n\r\n"),1==show_client_address&&__p.push("\r\n.proposal-preview-container .cover-page .pi-client-address{\r\n  display: block;\r\n}\r\n"),__p.push("\r\n\r\n"),1==hide_proposal_info&&__p.push("\r\n.proposal-preview-container .cover-page .proposal-info{\r\n  visibility: hidden;\r\n}\r\n"),__p.push("\r\n\r\n"),1==hide_product_codes&&__p.push("\r\n.price-table .product-code{\r\n  display: none !important;\r\n}\r\n"),__p.push("\r\n\r\n"),1!=show_left_pane_logo&&__p.push("\r\n.proposal-html .sidebar-left .logo-container{\r\n  display: none !important;\r\n}\r\n"),__p.push("\r\n\r\n"),1!=show_cover_page_logo&&__p.push("\r\n.proposal-preview .company-logo{\r\n  display: none;\r\n}\r\n"),__p.push("\r\n\r\n",custom_css,"\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/themes/theme-edit"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('\r\n<div>\r\n<input type="text" name="name" value="',name,'"/>\r\n</div>\r\n\r\n<ul class="nav nav-tabs">\r\n  <li class="active"><a href="#general" data-toggle="tab">General</a></li>\r\n  <li><a href="#cover-page" data-toggle="tab">Cover page</a></li>\r\n  <li><a href="#inner-page" data-toggle="tab">Inner page</a></li>\r\n  <li><a href="#pricing-table" data-toggle="tab">Pricing table</a></li>\r\n  <li><a href="#recolor" data-toggle="tab">Recolor</a></li>\r\n  <li><a href="#custom-css" data-toggle="tab">Custom CSS</a></li>\r\n</ul>\r\n\r\n<div class="tab-content">\r\n<div id="inner-page" class="tab-pane">\r\n\r\n<div>\r\n<span class="theme-edit-header">Section heading</span>\r\n<input type="text" class="color-please" name="heading_color" value="',heading_color,'"/>\r\n<select class="font-please" name="heading_font"></select>\r\n<input type="text" class="spinner-please" name="heading_size" value="',heading_size,'"/>pt\r\n</div>\r\n\r\n<div>\r\n<span class="theme-edit-header">Area heading</span>\r\n<input type="text" class="color-please" name="area_heading_color" value="',area_heading_color,'"/>\r\n<select class="font-please" name="area_heading_font"></select>\r\n<input type="text" class="spinner-please" name="area_heading_size" value="',area_heading_size,'"/>pt\r\n</div>\r\n\r\n<div>\r\n<span class="theme-edit-header">Text</span>\r\n<input type="text" class="color-please" name="text_color" value="',text_color,'"/>\r\n<select class="font-please" name="text_font"></select>\r\n<input type="text" class="spinner-please" name="text_size" value="',text_size,'"/>pt\r\n</div>\r\n\r\n<div>\r\n<span class="theme-edit-header">Background image</span>\r\n<input type="hidden" name="background_image_id" value="',background_image_id,'"/>\r\n<input type="hidden" class="image-please" name="background_image" value="',background_image,'"/>\r\n<a href="#" class="btn btn-small">select or upload</a>\r\n</div>\r\n\r\n</div>\r\n\r\n<div id="general" class="tab-pane active">\r\n  <div>\r\n  <span class="theme-edit-header theme-edit-header-wide">Pageless web layout</span>\r\n  <input type="checkbox" name="pageless_layout" value="1" '),1==pageless_layout&&__p.push('checked="checked"'),__p.push('/>\r\n  </div>\r\n\r\n  <div style="margin-top: 10px;">\r\n  <span class="theme-edit-header theme-edit-header-wide">Background style</span>\r\n  <select name="web_background_style" style="width: 100px;">\r\n    <option '),"light"==web_background_style&&__p.push("selected"),__p.push(' value="light">White</option>\r\n    <option '),"gray"==web_background_style&&__p.push("selected"),__p.push(' value="gray">Gray</option>\r\n    <option '),"dark"==web_background_style&&__p.push("selected"),__p.push(' value="dark">Dark</option>\r\n    <option '),(""==web_background_style||"classic"==web_background_style)&&__p.push("selected"),__p.push(' value="classic">Noise</option>\r\n  </select>\r\n  </div>\r\n\r\n  <div style="margin-bottom: 10px;">\r\n  <span class="theme-edit-header theme-edit-header-wide">Left panel style</span>\r\n  <select name="left_side_style" style="width: 100px;">\r\n    <option '),"style2"==left_side_style&&__p.push("selected"),__p.push(' value="style2">style #1</option>\r\n    <option '),"style1"==left_side_style&&__p.push("selected"),__p.push(' value="style1">style #2</option>\r\n    <option '),"style3"==left_side_style&&__p.push("selected"),__p.push(' value="style3">style #3</option>\r\n    <option '),(""==left_side_style||"classic"==left_side_style)&&__p.push("selected"),__p.push(' value="classic">style #4</option>\r\n  </select>\r\n  </div>\r\n\r\n  <div>\r\n  <span class="theme-edit-header theme-edit-header-wide">Justify text</span>\r\n  <input type="checkbox" name="text_justify" value="1" '),1==text_justify&&__p.push('checked="checked"'),__p.push('/>\r\n  </div>\r\n\r\n  <div>\r\n  <span class="theme-edit-header theme-edit-header-wide" style="width: 230px;">Show page numbers in footer in PDFs?</span>\r\n  <input type="checkbox" name="show_pdf_page_numbers" value="1" '),1==show_pdf_page_numbers&&__p.push('checked="checked"'),__p.push('/>\r\n  </div>\r\n\r\n  <div>\r\n  <span class="theme-edit-header theme-edit-header-wide">Hide approve button</span>\r\n  <input type="checkbox" name="hide_approve_button" value="1" '),1==hide_approve_button&&__p.push('checked="checked"'),__p.push('/>\r\n  </div>\r\n\r\n  <div>\r\n  <span class="theme-edit-header theme-edit-header-wide">Hide reject button</span>\r\n  <input type="checkbox" name="hide_reject_button" value="1" '),1==hide_reject_button&&__p.push('checked="checked"'),__p.push('/>\r\n  </div>\r\n\r\n  <div>\r\n  <span class="theme-edit-header theme-edit-header-wide">Hide discuss button</span>\r\n  <input type="checkbox" name="hide_discuss_button" value="1" '),1==hide_discuss_button&&__p.push('checked="checked"'),__p.push('/>\r\n  </div>\r\n\r\n  <div>\r\n  <span class="theme-edit-header theme-edit-header-wide">Show proposal code</span>\r\n  <input type="checkbox" name="show_proposal_code" value="1" '),1==show_proposal_code&&__p.push('checked="checked"'),__p.push('/>\r\n  </div>\r\n\r\n  <div>\r\n  <span class="theme-edit-header theme-edit-header-wide">Show client\'s address</span>\r\n  <input type="checkbox" name="show_client_address" value="1" '),1==show_client_address&&__p.push('checked="checked"'),__p.push('/>\r\n  </div>\r\n\r\n</div>\r\n\r\n<div id="cover-page" class="tab-pane">\r\n  <div>\r\n  <span class="theme-edit-header theme-edit-header-wide">Show cover page</span>\r\n  <input type="checkbox" name="show_cover_page_html" value="1" '),1==show_cover_page_html&&__p.push('checked="checked"'),__p.push('/>\r\n  </div>\r\n  <div>\r\n  <span class="theme-edit-header theme-edit-header-wide">Show cover page in PDF</span>\r\n  <input type="checkbox" name="show_cover_page_pdf" value="1" '),1==show_cover_page_pdf&&__p.push('checked="checked"'),__p.push('/>\r\n  </div>\r\n\r\n  <div>\r\n  <span class="theme-edit-header theme-edit-header-wide">Show logo in left pane</span>\r\n  <input type="checkbox" name="show_left_pane_logo" value="1" '),1==show_left_pane_logo&&__p.push('checked="checked"'),__p.push('/>\r\n  </div>\r\n\r\n  <div>\r\n  <span class="theme-edit-header theme-edit-header-wide">Show logo on cover page</span>\r\n  <input type="checkbox" name="show_cover_page_logo" value="1" '),1==show_cover_page_logo&&__p.push('checked="checked"'),__p.push('/>\r\n  </div>\r\n\r\n  <div>\r\n  <span class="theme-edit-header theme-edit-header-wide">Hide logo in PDF</span>\r\n  <input type="checkbox" name="hide_cover_page_pdf_logo" value="1" '),1==hide_cover_page_pdf_logo&&__p.push('checked="checked"'),__p.push('/>\r\n  </div>\r\n\r\n  <div>\r\n  <span class="theme-edit-header">Proposal name</span>\r\n  <input type="text" class="color-please" name="proposal_name_color" value="',proposal_name_color,'"/>\r\n  <select class="font-please" name="proposal_name_font"></select>\r\n  <input type="text" class="spinner-please" name="proposal_name_size" value="',proposal_name_size,'"/> \r\n  </div>\r\n\r\n  <div>\r\n  <span class="theme-edit-header">Proposal info</span>\r\n  <input type="text" class="color-please" name="proposal_info_color" value="',proposal_info_color,'"/>\r\n  <select class="font-please" name="proposal_info_font"></select>\r\n  <input type="text" class="spinner-please" name="proposal_info_size" value="',proposal_info_size,'"/>\r\n  <span>Hide: <input type="checkbox" name="hide_proposal_info" value="1" '),1==hide_proposal_info&&__p.push('checked="checked"'),__p.push('/></span>\r\n  \r\n  </div>\r\n\r\n  <div>\r\n  <span class="theme-edit-header theme-edit-header-wide" style="width: 185px;">Don\'t split background image</span>\r\n  <input type="checkbox" name="show_cover_whole_image" value="1" '),1==show_cover_whole_image&&__p.push('checked="checked"'),__p.push('/>\r\n  </div>\r\n\r\n  <div>\r\n  <span class="theme-edit-header theme-edit-header-wide">Show whole image</span>\r\n  <input type="checkbox" name="show_cover_whole_image_height" value="1" '),1==show_cover_whole_image_height&&__p.push('checked="checked"'),__p.push('/>\r\n  </div>\r\n\r\n  <div>\r\n  <span class="theme-edit-header">Background image</span>\r\n  <input type="hidden" name="cover_background_image_id" value="',cover_background_image_id,'"/>\r\n  <input type="hidden" class="image-please" name="cover_background_image" value="',cover_background_image,'"/>\r\n  <a href="#" class="btn btn-small">select or upload</a>\r\n  <div style="font-size: 11px;">Recommended image size: Letter format - 1224x1584px, A4 - 1440x2036px. Actual sizes can vary, but it is important to keep the suggested aspect ratio!</div>\r\n  </div>\r\n</div>\r\n\r\n<div id="pricing-table" class="tab-pane">\r\n\r\n  <div style="margin-top: 5px;">\r\n  <span class="theme-edit-header theme-edit-header-wide">Hide product codes</span>\r\n  <input type="checkbox" name="hide_product_codes" value="1" '),1==hide_product_codes&&__p.push('checked="checked"'),__p.push('/>\r\n  </div>\r\n\r\n  <div style="margin-top: 5px;">\r\n  <span class="theme-edit-header" style="width: 160px;">Item description size</span>\r\n  <input type="text" class="spinner-please" name="item_description_size" value="',item_description_size,'"/>pt\r\n  </div>\r\n\r\n  <div style="margin-top: 5px;">\r\n  <span class="theme-edit-header theme-edit-header-wide">Description in the first row</span>\r\n  <input type="checkbox" name="description_inside_first_row" value="1" '),1==description_inside_first_row&&__p.push('checked="checked"'),__p.push('/>\r\n  </div>\r\n\r\n  <div style="margin-top: 5px;">\r\n  <span class="theme-edit-header theme-edit-header-wide">Hide quantity column</span>\r\n  <input type="checkbox" name="hide_quantity_column" value="1" '),1==hide_quantity_column&&__p.push('checked="checked"'),__p.push('/>\r\n  </div>\r\n\r\n  <div style="margin-top: 5px;">\r\n  <span class="theme-edit-header theme-edit-header-wide">Hide price column</span>\r\n  <input type="checkbox" name="hide_price_column" value="1" '),1==hide_price_column&&__p.push('checked="checked"'),__p.push('/>\r\n  </div>\r\n\r\n  <div style="margin-top: 5px;">\r\n  <span class="theme-edit-header theme-edit-header-wide">Hide tax column</span>\r\n  <input type="checkbox" name="hide_vat_column" value="1" '),1==hide_vat_column&&__p.push('checked="checked"'),__p.push('/>\r\n  </div>\r\n\r\n  <div style="margin-top: 5px;">\r\n  <span class="theme-edit-header theme-edit-header-wide">Hide total column</span>\r\n  <input type="checkbox" name="hide_total_column" value="1" '),1==hide_total_column&&__p.push('checked="checked"'),__p.push('/>\r\n  </div>\r\n\r\n  <div style="margin-top: 5px;">\r\n  <span class="theme-edit-header theme-edit-header-wide">Hide total with tax column</span>\r\n  <input type="checkbox" name="hide_total_vat_column" value="1" '),1==hide_total_vat_column&&__p.push('checked="checked"'),__p.push('/>\r\n  </div>\r\n\r\n  <div style="margin-top: 5px;">\r\n  <span class="theme-edit-header theme-edit-header-wide">Hide total & subtotal rows</span>\r\n  <input type="checkbox" name="hide_total_rows" value="1" '),1==hide_total_rows&&__p.push('checked="checked"'),__p.push('/>\r\n  </div>\r\n\r\n  <div style="margin-top: 5px;">\r\n  <span class="theme-edit-header theme-edit-header-wide">Show total with tax row</span>\r\n  <input type="checkbox" name="show_total_with_tax_summary" value="1" '),1==show_total_with_tax_summary&&__p.push('checked="checked"'),__p.push('/>\r\n  </div>\r\n</div>\r\n\r\n<div id="recolor" class="tab-pane">\r\n  <div>\r\n  <span class="theme-edit-header">Choose color:</span>\r\n  <input type="text" class="color-please" name="recolor_color" value="',recolor_color,'"/>\r\n  <a href="" class="btn reset-colors">Reset all colors</a>\r\n  </div>\r\n</div>\r\n\r\n<div id="custom-css" class="tab-pane">\r\n  <div style="font-size: 11px;">\r\n  <b>This feature is for advanced users only!</b> - It can be used to further customize the look of your proposals.<br/>\r\n  Tip: save this page, use Firebug or similar tool, customize css locally then paste your css here. The class which contains proposal content is ".proposal-section". To override default settings you might need to use !important keyword.<br/>\r\n  <b>Styling PDFs:</b> add ?debug=true parameter to the PDF URL (i.e. .../proposals/10710.pdf?debug=true ) and you\'ll see the HTML that goes into the HTML-to-PDF converter. There are different CSS classes (html element has ".pdf-html" class instead of ".proposal-preview" class), so you can add rules only for the PDF version.<br/>\r\n\r\n  <textarea name="custom_css" class="noresize editor" style="height: 160px; width: 355px;">',custom_css,'</textarea>\r\n  </div>\r\n</div>\r\n\r\n</div>\r\n\r\n<div class="pull-right">\r\n  '),__p.push("\r\n  "),__p.push(window.Quotes.vars.template.get("editable")?'\r\n  <a class="btn btn-primary select-theme">Save and select theme</a>  \r\n  ':'\r\n  <a class="btn btn-primary select-theme disabled" rel="popover" title="Notice" data-content="To change theme of this template you must save the template first.">Save and select theme</a>\r\n  '),__p.push("\r\n</div>\r\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/themes/theme-list"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('\r\n<div class="theme-list-container">\r\n  <a href="#" class="btn btn-primary add-theme-button"><i class="icon icon-plus icon-white"></i> New theme</a>\r\n  <div class="theme-list"></div>\r\n</div>\r\n\r\n<div class="theme-edit"></div>\r\n\r\n<div class="cleaner"></div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["backbone/templates/themes/theme"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('\r\n  <a href="#" class="delete-theme" title="Delete theme"><i class="icon icon-remove"></i></a>\r\n  <div class="theme-status"></div>\r\n  <div class="theme-name">\r\n    ',name,'\r\n  </div>\r\n\r\n  <div class="theme-img">\r\n  <img class="" alt=""/>\r\n  </div>\n');return __p.join("")}}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};jQuery(function(){return Quotes.Models.Item=function(e){function i(){return this.toJSON=t(this.toJSON,this),this.recountPrices=t(this.recountPrices,this),this.applyDiscount=t(this.applyDiscount,this),this.changedPriceVAT=t(this.changedPriceVAT,this),this.remove=t(this.remove,this),this.getDecimals=t(this.getDecimals,this),this.initialize=t(this.initialize,this),i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.defaults={name:"",description:"",quantity:1,price:"",price_vat:"",unit:"",purchase_price:"",discount:"",discount_type:"relative",deposit_amount:!1,kind:"item",vat:"",period:null,optional:!1,optional_checked:!1,editable_quantity:!1,image_url:null,code:""},i.prototype.urlRoot="/items",i.prototype.pricing_table=null,i.prototype.initialize=function(){return this.on("change:quantity change:vat change:price change:purchase_price change:discount change:discount_type change:deposit_amount",this.recountPrices),this.on("change:period change:optional change:optional_checked",function(t){return function(){return t.trigger("recountDiscounts")}}(this)),this.on("nifty:change_price_vat",this.changedPriceVAT)},i.prototype.getDecimals=function(){return window.Quotes.vars.decimals?window.Quotes.vars.decimals:2},i.prototype.remove=function(){return this.isNew()===!1&&(this.attributes._destroy=1),this.trigger("remove",this),window.Quotes.vars.dont_recount_discounts!==!0?this.trigger("recountDiscounts"):void 0},i.prototype.changedPriceVAT=function(){var t,e,n,i,r,o;if(this.innerChange!==!0)return this.innerChange=!0,t={},e=this.getDecimals(),r=parseFloat(this.get("price_vat")).toFixed(e),o=parseFloat(this.get("quantity")).toFixed(e),n=r/(1+this.get("vat")/100),isNaN(r)&&(r=""),isNaN(n)&&(n=""),t.price=""===n?"":parseFloat(n).toFixed(2),i=n,n=this.applyDiscount(n),n!==i&&(r=n*(1+this.get("vat")/100),isNaN(r)&&(r="")),t.total=$.formatCurrency.myRound(o*n,2),t.total_vat=$.formatCurrency.myRound(o*r,2),t.total=$.formatCurrency.toMoney(t.total.toString()),t.total_vat=$.formatCurrency.toMoney(t.total_vat.toString()),this.set(t,{silent:!0}),this.trigger("change:total"),this.trigger("change:total_vat"),this.trigger("change:price"),this.innerChange=!1},i.prototype.applyDiscount=function(t){var e;return e=t,this.get("discount")>0&&("relative"===this.get("discount_type")?e*=(100-this.get("discount"))/100:e-=this.get("discount")),e},i.prototype.recountPrices=function(){var t,e,n,i,r,o;if(window.Quotes.vars.reloading_whole_price_table!==!0&&this.innerChange!==!0)return this.innerChange=!0,t={},e=this.getDecimals(),o=parseFloat(this.get("quantity")).toFixed(e),n=parseFloat(this.get("price")).toFixed(e),r=parseFloat(this.get("purchase_price")).toFixed(e),"discount"===this.get("kind")&&"absolute"===this.get("discount_type")&&(o=1,n=0,r=0),i=n*(1+this.get("vat")/100),isNaN(i)&&(i=""),t.price_vat=""===i?"":$.formatCurrency.myRound(parseFloat(i),e),n=this.applyDiscount(n),i=n*(1+this.get("vat")/100),isNaN(i)&&(i=""),t.total=$.formatCurrency.myRound(o*n,2),t.total_vat=$.formatCurrency.myRound(o*i,2),t.total_purchase=o*r,isNaN(o)&&(t.total=0,t.total_vat=0,t.total_purchase=""),t.total=$.formatCurrency.toMoney(t.total.toString()),t.total_vat=$.formatCurrency.toMoney(t.total_vat.toString()),t.total_purchase=null!==this.get("purchase_price")&&""!==this.get("purchase_price")?$.formatCurrency.toMoney(t.total_purchase.toString()):"",this.attributes.total=t.total,this.attributes.total_vat=t.total_vat,this.attributes.price_vat=t.price_vat,this.attributes.total_purchase=t.total_purchase,this.trigger("change:price_vat"),this.trigger("change:total"),this.trigger("change:total_vat"),window.Quotes.vars.recounting_all_items!==!0&&(this.trigger("recountDiscounts"),this.trigger("formatNumbers")),this.innerChange=!1},i.prototype.toJSON=function(){var t;return t=i.__super__.toJSON.apply(this,arguments),delete t.total,delete t.total_vat,delete t.total_purchase,delete t.image_url_set,t},i}(Backbone.Model),Quotes.Collections.ItemCollection=function(e){function i(){return this.getDecimals=t(this.getDecimals,this),this.changedOrder=t(this.changedOrder,this),this.set_pricing_table=t(this.set_pricing_table,this),this.changingOrder=t(this.changingOrder,this),this.onAddModel=t(this.onAddModel,this),this.recountDiscounts=t(this.recountDiscounts,this),this.recountPaymentRow=t(this.recountPaymentRow,this),this.recountDiscountRow=t(this.recountDiscountRow,this),this.bindEventsOnSection=t(this.bindEventsOnSection,this),this.onReset=t(this.onReset,this),this.initialize=t(this.initialize,this),i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.model=Quotes.Models.Item,i.prototype.initialize=function(){return _.bindAll(this),this.bind("add",this.onAddModel),this.bind("reset",this.onReset)
},i.prototype.comparator=function(t){return t.get("position")},i.prototype.onReset=function(){return this.each(function(t){return function(e,n){return t.bindEventsOnSection(e)}}(this))},i.prototype.bindEventsOnSection=function(t){return t.on("remove",this.removedSection),t.on("change",function(t){return function(){return t.trigger("change",t)}}(this)),t.on("formatNumbers",function(t){return function(){return t.trigger("formatNumbers")}}(this)),t.on("recountDiscounts",function(t){return function(){return t.recountDiscounts()}}(this))},i.prototype.recountDiscountRow=function(t){var e,n,i,r;if("absolute"!==t.get("discount_type"))return e="relative-all"===t.get("discount_type"),r=this.getTotalsForPeriod(t.get("period"),this.pricing_table,e,!1),n=r.totalPrice,n=-n*(t.get("discount")/100),i=n*(1+t.get("vat")/100),n=$.formatCurrency.toMoney(n.toString()),i=$.formatCurrency.toMoney(i.toString()),t.attributes.total!==n&&(t.attributes.total=n,t.trigger("change:total")),t.attributes.total_vat!==i?(t.attributes.total_vat=i,t.trigger("change:total_vat")):void 0},i.prototype.recountPaymentRow=function(t){var e,n,i,r,o,s,a,l,c,u;return s="",l="",c=this.getTotalsForPeriod(t.get("period"),this.pricing_table,!0,!0),o=c.grandtotalPrice,a=c.grandtotalPriceVAT,0===window.Quotes.vars.pricing_tables.length&&(o=c.totalPrice,a=c.totalPriceVAT),u=1+t.get("vat")/100,n=t.get("price"),i=t.get("deposit_amount")!==!0&&"true"!==t.get("deposit_amount"),""!==t.get("discount")&&("relative"===t.get("discount_type")?(o*=(100-t.get("discount"))/100,a*=(100-t.get("discount"))/100):"absolute"===t.get("discount_type")&&(o-=t.get("discount"),a-=t.get("discount")*u)),null!=n&&""!==n&&0!==n&&"0"!==n&&(i===!0?(e=n,n=o*(e/100),r=a*(e/100)):(e=n,n=e,r=e*u),s+=formatCurrencyNiceRounding(n),l+=formatCurrencyNiceRounding(r),o-=n,a-=r),""!==t.get("quantity")&&t.get("quantity")>0?(""!==s&&(s+=" + ",l+=" + "),t.get("quantity")>0&&(s+=Math.round(t.get("quantity"))+" x ",l+=Math.round(t.get("quantity"))+" x "),s+=formatCurrencyNiceRounding(o/t.get("quantity")),l+=formatCurrencyNiceRounding(a/t.get("quantity"))):(""!==s&&(s+=" + ",l+=" + "),s+=formatCurrencyNiceRounding(o),l+=formatCurrencyNiceRounding(a)),t.set("total",s),t.set("total_vat",l)},i.prototype.recountDiscounts=function(){return this.each(function(t){return function(e,n){return"discount"===e.get("kind")||"payment"===e.get("kind")?t.recountDiscountRow(e):void 0}}(this)),this.each(function(t){return function(e,n){return"payment"===e.get("kind")?t.recountPaymentRow(e):void 0}}(this)),window.Quotes.vars.recounting_all_discounts!==!0?this.trigger("change_prices"):void 0},i.prototype.onAddModel=function(t){return this.recountDiscounts(),this.bindEventsOnSection(t)},i.prototype.removedSection=function(t){return this.each(function(e){return function(e,n){var i;return 1!==e.get("_destroy")&&(i=e.get("position"),i>t.get("position"))?e.attributes.position=i-1:void 0}}(this)),t.isNew()&&this.remove(t,{silent:!0}),this.trigger("remove",this)},i.prototype.changingOrder=function(t){return this.sortingStart=t.index()},i.prototype.getNewPosHelper=function(t,e,n){return e>t?n>t&&e>=n?n-=1:n===t&&(n=e):t>e&&(n>=e&&t>n?n+=1:n===t&&(n=e)),n},i.prototype.set_pricing_table=function(t){return this.pricing_table=t},i.prototype.changedOrder=function(t,e,n){var i;return null==e&&(e=null),null==n&&(n=null),null!=e&&(this.sortingStart=e),null==n&&(n=t.index()),i=this.getActive(),_.each(i,function(t){return function(e,i){var r;return r=e.get("position"),r=t.getNewPosHelper(t.sortingStart,n,r),e.set("position",r)}}(this))},i.prototype.getActive=function(){return this.filter(function(t){return 1!==t.get("_destroy")})},i.prototype.getDecimals=function(){return window.Quotes.vars.decimals?window.Quotes.vars.decimals:2},i.prototype.getTotalsForPeriod=function(t,e,n,i,r){var o,s,a,l,c,u,h,d,p,f,m,g,v;return null==e&&(e=null),null==n&&(n=!0),null==i&&(i=!0),null==r&&(r=!1),null===t&&(t=""),h=0,f=0,m=0,l=0,c=0,v=0,d=!1,g=0,u=0,null===e&&window.Quotes.vars.pricing_tables.length>0?{totalPrice:f,totalPriceVAT:m,totalProfit:g,grandtotalPrice:l,grandtotalPriceVAT:c,grandtotalProfit:u,grandtotal_decimals:h}:(o=this.getActive(),o.length>0&&_.each(o,function(e){return("item"===e.get("kind")||i===!0&&"discount"===e.get("kind"))&&((""===t||null===t)&&null===e.get("period")||null!==e.get("period")&&null!==t&&t.toString()===e.get("period").toString())&&(e.get("optional")===!1||n===!0&&e.get("optional")===!0&&e.get("optional_checked")===!0)&&(f+=$.formatCurrency.asNumber(e.get("total")),m+=$.formatCurrency.asNumber(e.get("total_vat")),"discount"!==e.get("kind"))?""===e.get("total_purchase")?v+=$.formatCurrency.asNumber(e.get("total")):(v+=$.formatCurrency.asNumber(e.get("total_purchase")),d=!0):void 0}),d&&(g=f-v),a=null,p=null,s=null,_.each(window.Quotes.vars.pricing_tables,function(t){return function(t){return t.id!==e.id&&"radio"===t.kind&&null===a&&(a=t.id),t.id!==e.id&&"radio"===t.kind&&t.selected===!0&&null===p?p=t.id:void 0}}(this)),e&&"radio"===e.kind&&e.id<a&&(a=e.id),s=a,null!==p&&(s=p),e&&"radio"===e.kind&&e.selected===!0&&(s=e.id),_.each(window.Quotes.vars.pricing_tables,function(n){return function(i){var r;return i.id!==e.id&&(r=!0,"checkbox"===i.kind&&i.selected===!1&&(r=!1),"radio"===i.kind&&("radio"===e.kind&&e.selected===!0?r=!1:s!==i.id&&(r=!1)),r===!0)?_.each(i.totals,function(e){var i;return null===t&&(t=""),(0===e.period||null===e.period)&&(e.period=""),e.period.toString()===t.toString()?(i=parseFloat(e.total_no_payments),i%1!==0&&isNaN(i)===!1&&(h=n.getDecimals()),l+=i,c+=parseFloat(e.total_no_payments_with_vat),u+=parseFloat(e.total_profit)):void 0}):void 0}}(this)),e&&("default"===e.kind||"checkbox"===e.kind&&e.selected===!0||"radio"===e.kind&&(e.selected===!0||s===e.id))&&(f%1!==0&&isNaN(f)===!1&&(h=this.getDecimals()),l+=f,c+=m,u+=g),{totalPrice:f,totalPriceVAT:m,totalProfit:g,grandtotalPrice:l,grandtotalPriceVAT:c,grandtotalProfit:u,grandtotal_decimals:h})},i}(Backbone.Collection)})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};jQuery(function(){return Quotes.Models.ProposalEmail=function(e){function i(){return this.toJSON=t(this.toJSON,this),this.remove=t(this.remove,this),i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.defaults={client_id:null},i.prototype.allowedAttrs=["id","client_id","_destroy"],i.prototype.rootElementJSON="",i.prototype.remove=function(){return this.isNew()===!1&&this.set("_destroy",1),this.trigger("change",this),this.trigger("remove",this)},i.prototype.toJSON=function(){var t,e;e=_.clone(this.attributes);for(t in e)_.include(this.allowedAttrs,t)||delete e[t];return e},i}(Backbone.Model),Quotes.Collections.ProposalEmailCollection=function(e){function i(){return this.onReset=t(this.onReset,this),this.onAddModel=t(this.onAddModel,this),this.bindEventsOnSection=t(this.bindEventsOnSection,this),this.initialize=t(this.initialize,this),i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.model=Quotes.Models.ProposalEmail,i.prototype.initialize=function(){return _.bindAll(this),this.bind("add",this.onAddModel),this.bind("reset",this.onReset)},i.prototype.bindEventsOnSection=function(t){return t.on("remove",this.removedSection)},i.prototype.onAddModel=function(t){return this.bindEventsOnSection(t)},i.prototype.onReset=function(){return this.each(function(t){return function(e,n){return t.bindEventsOnSection(e)}}(this))},i.prototype.removedSection=function(t){return t.isNew()&&this.remove(t,{silent:!0}),this.trigger("remove",this)},i}(Backbone.Collection)})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};jQuery(function(){return Quotes.Models.ProposalItems=function(e){function i(){return this.toJSON=t(this.toJSON,this),this.onSync=t(this.onSync,this),this.parse=t(this.parse,this),i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.allowedAttrs=["id","items","name","client_id","template_id","reload_template","proposal_emails","new_state","append_template","append_template_id","new_owner","pricing_table_id","pricing_table"],i.prototype.rootElementJSON="proposal",i.prototype.urlRoot="/proposals",i.prototype.initialize=function(){return _.bindAll(this),this.enable_parsing=!0,this.onSync()},i.prototype.parse=function(t){var e,n,r,o,s,a,l;this.enable_parsing===!0&&window.Quotes.vars.proposalModel&&window.Quotes.vars.proposalModel.parse(t),a=_.clone(t),delete a.items;for(e in a)_.include(this.allowedAttrs,e)||delete a[e];if(!this.get("items")instanceof Quotes.Collections.ItemCollection&&(o=_.clone(this.get("items")),n=new Quotes.Collections.ItemCollection,this.set("items",n)),l=i.__super__.parse.call(this,a),window.Quotes.vars.current_pricing_table_id&&this.enable_parsing===!0){s=[];for(r in t.items)parseInt(t.items[r].pricing_table_id)===window.Quotes.vars.current_pricing_table_id&&s.push(t.items[r]);this.get("items").reset(s)}else this.get("items").reset(t.items);return this.get("items").set_pricing_table(this.get("pricing_table")),l},i.prototype.onSync=function(){var t,e;if(!(this.get("items")instanceof Quotes.Collections.ItemCollection))return e=_.clone(this.get("items")),t=new Quotes.Collections.ItemCollection,this.set("items",t),this.get("items").reset(e),this.get("items").set_pricing_table(this.get("pricing_table"))},i.prototype.toJSON=function(){var t,e,n;e=i.__super__.toJSON.apply(this,arguments);for(t in e)_.include(this.allowedAttrs,t)||delete e[t];return window.Quotes.vars.current_pricing_table_id&&(e.pricing_table_id=window.Quotes.vars.current_pricing_table_id),n={},n[this.rootElementJSON]=e,n},i}(Backbone.Model),Quotes.Models.ServiceTemplateItems=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.allowedAttrs=["id","name","items"],e.prototype.rootElementJSON="service_template",e.prototype.urlRoot="/service_templates",e}(Quotes.Models.ProposalItems)})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};jQuery(function(){return Quotes.Models.Proposal=function(e){function i(){return this.onSync=t(this.onSync,this),this.parse=t(this.parse,this),this.save=t(this.save,this),this.isDirty=t(this.isDirty,this),this.onChange=t(this.onChange,this),this.toJSON=t(this.toJSON,this),this.rendertoJSON=t(this.rendertoJSON,this),i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.allowedAttrs=["id","name","client_id","template_id","reload_template","proposal_emails","new_state","new_owner","currency_id","rejection_reasons","append_template","append_template_id","code","email_subject","email_body","tag_list","expires_on","language_id","approval_field_template_id","approval_fields","note","amount_paid","attach_pdf"],i.prototype.rootElementJSON="proposal",i.prototype.urlRoot="/proposals",i.prototype.initialize=function(){return _.bindAll(this),this.on("change",this.onChange),this.onSync(),this.dirty=!1,this.get("proposal_emails").on("change",this.onChange),this.get("proposal_emails").on("add",this.onChange),this.get("proposal_emails").on("remove",this.onChange)},i.prototype.rendertoJSON=function(){var t;return t={},t[this.rootElementJSON]=_.clone(this.attributes),t},i.prototype.toJSON=function(){var t,e,n;e=i.__super__.toJSON.apply(this,arguments);for(t in e)_.include(this.allowedAttrs,t)||delete e[t];return n={},n[this.rootElementJSON]=e,n},i.prototype.onChange=function(){return this.dirty=!0},i.prototype.isDirty=function(){return this.dirty},i.prototype.save=function(t,e){var n;return n=Backbone.Model.prototype.save.call(this,t,e),this.set("new_owner",null),this.set("new_state",null),this.set("rejection_reasons",null),this.set("approval_fields",null),this.dirty=!1,n},i.prototype.parse=function(t){var e,n,r;return n=_.clone(t),e=n.proposal_emails,delete n.proposal_emails,r=i.__super__.parse.call(this,n),this.get("proposal_emails").reset(t.proposal_emails),r},i.prototype.onSync=function(){var t,e;if(!(this.get("proposal_emails")instanceof Quotes.Collections.ProposalEmailCollection))return e=_.clone(this.get("proposal_emails")),t=new Quotes.Collections.ProposalEmailCollection,this.set("proposal_emails",t),this.get("proposal_emails").reset(e)},i}(Backbone.Model)})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};jQuery(function(){return Quotes.Models.Tax=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n}(Backbone.Model)})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};jQuery(function(){return Quotes.Collections.Taxes=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.model=Quotes.Models.Tax,n}(Backbone.Collection)})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};jQuery(function(){return Quotes.Models.Template=function(e){function i(){return this.toJSON=t(this.toJSON,this),this.onSync=t(this.onSync,this),this.parse=t(this.parse,this),i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.allowedAttrs=["id","name"],i.prototype.rootElementJSON="template",i.prototype.defaults={name:"new",editable:!0},i.prototype.urlRoot="/templates",i.prototype.initialize=function(){return _.bindAll(this),this.onSync()},i.prototype.parseAreas=function(){},i.prototype.parse=function(t){var e,n;return window.Quotes.vars.proposalModel&&window.Quotes.vars.proposalModel.parse(t),e=_.clone(t),delete e.sections,n=i.__super__.parse.call(this,e)},i.prototype.onSync=function(){},i.prototype.toJSON=function(){var t,e,n;e=_.clone(this.attributes);for(t in e)_.include(this.allowedAttrs,t)||delete e[t];return n={},n[this.rootElementJSON]=e,n},i}(Backbone.Model)})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};jQuery(function(){return Quotes.Models.Theme=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.defaults={name:"",heading_size:"24",heading_color:"#000000",heading_font:"",item_description_size:"10",description_inside_first_row:!1,area_heading_size:"15",area_heading_color:"#000000",area_heading_font:"",text_size:"10",text_color:"#000000",text_font:"",text_justify:!1,background_image:"",background_image_id:null,background_image_recolored:null,cover_background_image:"",cover_background_image_id:null,cover_background_image_recolored:null,proposal_name_size:"33",proposal_name_color:"#000000",proposal_name_font:"",proposal_info_size:"11",proposal_info_color:"#000000",proposal_info_font:"",recolor_color:"",custom_css:"",show_cover_page_html:!0,show_cover_page_pdf:!0,pageless_layout:!0,page_size:"Letter",real_page_size:"Letter",selected:!1,editable:!0,hide_approve_button:!1,hide_reject_button:!1,hide_discuss_button:!1,show_pdf_page_numbers:!1,web_background_style:"gray",left_side_style:"style2",show_proposal_code:!1,show_client_address:!1,hide_quantity_column:!1,hide_price_column:!1,hide_vat_column:!1,hide_total_vat_column:!1,hide_total_column:!1,hide_total_rows:!1,show_total_with_tax_summary:!1,show_cover_whole_image:!1,show_left_pane_logo:!0,show_cover_page_logo:!1,hide_cover_page_pdf_logo:!1,show_cover_whole_image_height:!1,hide_proposal_info:!1,hide_product_codes:!1},n.prototype.urlRoot="/themes",n}(Backbone.Model)})}.call(this),function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};t=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},jQuery(function(){return Quotes.Collections.Themes=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.model=Quotes.Models.Theme,e.prototype.comparator=function(t,e){var n;return n=0,t.get("editable")&&!e.get("editable")&&(n=1),!t.get("editable")&&e.get("editable")&&(n=-1),0===n&&(n=t.get("position")-e.get("position")),n},e.prototype.getEditable=function(){var t;return t=this.filter(function(t){return t.get("editable")===!0})},e.prototype.getPositionForNewModel=function(){var t;return t=0,_.each(this.getEditable(),function(e){return function(e,n){var i;return i=e.get("position"),i>t?t=i:void 0}}(this)),t+=1},e.prototype.unselectAll=function(){return this.each(function(t){return t.set("selected",!1)})},e}(Backbone.Collection)})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};jQuery(function(){return Quotes.Views.ProposalBasicEditView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.el=$("div.proposal-basic-view"),n.prototype.template_path="backbone/templates/proposals/basic_edit",n.prototype.events={"keyup input":"keyUp",mouseenter:"mouseIn",mouseleave:"mouseOut","blur input":"lostFocus"},n.prototype.initialize=function(){return _.bindAll(this),this.render(),"overview"===window.Quotes.vars.proposalScreen?$("form.proposal").on("submit",this.update):void 0},n.prototype.mouseIn=function(){return $(this.el).find(".onmouseout").hide(),$(this.el).find(".onmousein").show()},n.prototype.mouseOut=function(){return $(this.el).find(":focus").length>0?void 0:($(this.el).find(".onmousein").hide(),$(this.el).find(".onmouseout").show())},n.prototype.lostFocus=function(){return $(this.el).hasClass("hovered")?void 0:(this.mouseOut(),$(this.el).addClass("unhovered"))},n.prototype.keyUp=function(t){return this.model.set($(t.target).attr("name"),$(t.target).val())},n.prototype.render=function(){var t;return $(this.el).html(JST[this.template_path](this.model.rendertoJSON().proposal)),$(this.el).find("input.autoresize").autoGrowInput(),$(this.el).find("input.autoresize").trigger("blur"),$(this.el).addClass("unhovered"),t=this.el,$(this.el).hover(function(){return $(this).removeClass("unhovered"),$(this).addClass("hovered")},function(){return $(this).removeClass("hovered"),0===$(t).find(":focus").length?$(this).addClass("unhovered"):void 0}),this.mouseOut(),this.model.get("proposal_emails").on("reset",this.renderEmails),this.renderEmails(),$(this.el).find("#add-client").on("click",function(t){return function(e){return e.preventDefault(),e.stopPropagation(),t.addClient()}}(this)),0===this.model.get("proposal_emails").length&&$(this.el).find("#add-client").click(),$(this.el).find("#create-new-client").on("click",function(){return window.Quotes.functions.newDialog($(this).attr("href"),"form#new_client","Create new client"),!1}),$("#proposals th a, #proposals .pagination a").live("click",function(){return $.getScript(this.href),!1}),$("#proposals_search").submit(function(){return $.get($("#proposals_search").attr("action"),$("#proposals_search").serialize(),null,"script"),!1})},n.prototype.renderEmails=function(){return $(this.el).find(".proposal-emails-list").html(""),this.model.get("proposal_emails").each(function(t){return function(e){var n;return t.model.get("proposal_emails").add(e),n=new Quotes.Views.ProposalEmailView({model:e}),e.on("remove",function(){return n.remove()}),$(t.el).find(".proposal-emails-list").append(n.el)}}(this))},n.prototype.addClient=function(t){var e,n,i;return n=new Quotes.Models.ProposalEmail({}),t&&n.set("client_id",t),e=null,this.model.get("proposal_emails")&&(e=this.model.get("proposal_emails").filter(function(t){return 1!==t.get("_destroy")})),t&&e&&1===e.length&&_.first(e)&&null===_.first(e).get("client_id")&&_.first(e).destroy(),this.model.get("proposal_emails").add(n),i=new Quotes.Views.ProposalEmailView({model:n}),n.on("remove",function(){return i.remove()}),$(this.el).find(".proposal-emails-list").append(i.el),$(".ui-dialog-content").dialog("close")},n.prototype.reloadPage=function(){return"overview"!==window.Quotes.vars.proposalScreen||window.Quotes.vars.proposalTabChange||window.Quotes.vars.proposalSendingEmail?void 0:$.get($("form.proposal").attr("action"))},n.prototype.update=function(t){var e;if(t.preventDefault(),t.stopPropagation(),"undefined"!=typeof CKEDITOR&&null!==CKEDITOR&&null!=CKEDITOR.instances){for(e in CKEDITOR.instances)CKEDITOR.instances[e].updateElement();$("#email_body").trigger("change")}return this.model.isDirty()===!1&&window.Quotes.vars.proposalSendingEmail?void $("form.email-form").trigger("submit"):this.model.isDirty()===!1&&window.Quotes.vars.proposalTabChange?void(window.location=window.Quotes.vars.proposalTabHref):this.model.save(null,{success:function(t){return function(e){return noty({text:"Proposal successfully saved.",dismissQueue:!0}),t.reloadPage()}}(this)})},n}(Backbone.View)})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};jQuery(function(){return Quotes.Views.ProposalItemsEditView=function(e){function i(){return this.getDecimals=t(this.getDecimals,this),i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.viewKind="proposal",i.prototype.el=$("div.proposal-items-view"),i.prototype.template=JST["backbone/templates/items/item-list"],i.prototype.firsttime=!0,i.prototype.events={"submit form":"update","click #fetch":"fetch","click #add-item-button":"addModel","click #add-discount-button":"addDiscount","click #add-group-header-button":"addGroupHeader","click #add-payment-button":"addPaymentOption","click #import-from-spreadsheet-button":"importFromSpreadsheet","click #clear-items-button":"clearList","click #export-csv-button":"exportCsv","click #show-taxes-checkbox":"toggleShowTaxes"},i.prototype.initialize=function(){var t;return this.initialized=!1,this.hideTaxes=!0,this.decimalsFor={},this.decimalsFor.total=2,this.decimalsFor.total_vat=2,this.periods=[],this.periods=window.Quotes.vars.periods,_.bindAll(this),$("form.proposal").on("submit",this.update),$("form.service_template").on("submit",this.update),this.render(),this.model.bind("change",this.changeRecount),this.model.bind("sync",this.onSync),this.renderCollection(),this.checkCollectionCount(),this.initialized=!0,"servicetemplate"!==this.viewKind?(t=this,$(document).on("click","#service-templates .pick_from_service_template",function(){var e;return e=$(this).data("service-template-id"),window.Quotes.functions.newDialog("/service_templates/"+e+"/items",null,"Select services or products",function(e){return e.find(".dialog-content").find("a.pick-item").click(function(e){var n,i;return e.preventDefault(),e.stopPropagation(),i=$(this).data("item-id"),n=new Quotes.Models.Item({id:i}),n.fetch({success:function(e,n){var i;return e.set("id",null),i=e.get("quantity"),t.addModel(null,e,!1),e.set("quantity",i+1),e.set("quantity",parseFloat(i)),t.formatNumbers()}})})}),!1}),$(document).on("click","#service-templates .select_service_template",function(){var e,n;return n=$(this).data("service-template-id"),e=new Quotes.Models.ServiceTemplateItems({id:n}),e.enable_parsing=!1,e.fetch({success:function(e,n){return e.get("items").each(function(e){return e.set("id",null),t.addModel(null,e,!0)})}}),$(".ui-dialog-content").dialog("close"),!1}),$(document).on("change keyup",".dialog-content #service_search",function(){return $.getScript($("#add-service-template-button").attr("href")+"&page=1&service_search="+$(this).val()),!1}),$(document).on("click","#service-templates .pagination a",function(){return $.getScript(this.href),!1})):void 0},i.prototype.toggleShowTaxes=function(t){return t&&(t.preventDefault(),t.stopPropagation()),this.hideTaxes=!this.hideTaxes,this.checkShowTaxes()},i.prototype.checkShowTaxes=function(){return this.hideTaxes?($("#show-taxes-checkbox").text("Edit tax"),$(".items-table").addClass("hide-taxes")):($("#show-taxes-checkbox").text("Hide tax"),$(".items-table").removeClass("hide-taxes"))},i.prototype.getCollection=function(){return this.model.get("items")},i.prototype.onSync=function(){return noty("servicetemplate"===this.viewKind?{text:"Template successfully saved.",dismissQueue:!0}:{text:"Proposal successfully saved.",dismissQueue:!0}),$(window).off("beforeunload",this.leavingAlert),this.render(),this.renderCollection(),this.firsttime=!0,this.checkCollectionCount()},i.prototype.leavingAlert=function(){return"Do you really want to leave this page? There are some unsaved changes."},i.prototype.setLeaveAlert=function(){},i.prototype.exportCsv=function(t){var e;return t.preventDefault(),t.stopPropagation(),e=$(".download-csv-hidden-button").attr("href"),null==e&&this.model.get("id")&&(e="/service_templates/"+this.model.get("id")+".csv"),window.location.href=e},i.prototype.clearList=function(t){var e;return t.preventDefault(),t.stopPropagation(),confirm("Are you sure?")?(e=this.getActive(),window.Quotes.vars.dont_recount_discounts=!0,_.each(e,function(t){return t.remove()}),window.Quotes.vars.dont_recount_discounts=!1,this.checkCollectionCount()):void 0},i.prototype.getDecimals=function(){return window.Quotes.vars.decimals?window.Quotes.vars.decimals:2},i.prototype.renderCollection=function(){var t,e;return this.initialized===!1&&this.getCollection().each(function(t){return function(e,n){var i;return i=e.get("vat"),null!==i&&0!==i&&0!==i&&"0"!==i&&"0.0"!==i?t.hideTaxes=!1:void 0}}(this)),this.getCollection().each(function(t){return function(t,e){var n,i;return i=t.get("vat"),null===i&&(i=0),n={name:i,percent:i},!1===window.Quotes.vars.taxes.any(function(t){return parseFloat(t.get("percent"))===parseFloat(n.percent)})?window.Quotes.vars.taxes.add(n):void 0}}(this)),e=this.getCollection().length,window.Quotes.vars.reloading_whole_price_table=!0,t=!0,this.getActive().length>30&&(t=!1),this.getCollection().each(function(n){return function(i,r){var o;return o=new Quotes.Views.ItemEditView({model:i}),o.setPeriods(n.periods),o.setListView(n["this"]),o.render(),t===!0&&n.bindSectionEditWindow(o),n.insertNewRow(i,o.el),40>e?o.afterAppend():void 0}}(this)),window.Quotes.vars.reloading_whole_price_table=!1,window.Quotes.vars.recounting_all_items=!0,this.getCollection().each(function(t){return function(t,e){return t.recountPrices()}}(this)),window.Quotes.vars.recounting_all_items=!1,window.Quotes.vars.recounting_all_discounts=!0,this.getCollection().recountDiscounts(),window.Quotes.vars.recounting_all_discounts=!1,this.getCollection().on("change_prices",this.changeRecount),this.getCollection().on("formatNumbers",this.formatNumbers),t===!0&&this.getCollection().on("add",this.formatNumbers),this.getCollection().on("add",this.checkCollectionCount),this.getCollection().on("remove",this.checkCollectionCount),this.formatNumbers(),this.changeRecount(),this.checkShowTaxes()},i.prototype.formatNumbers=function(){var t,e,n,i,r;if(!(this.getActive().length>30)){for(e=["quantity","price","vat","price_vat","total","total_vat","purchase_price"],r=[],n=0,i=e.length;i>n;n++)t=e[n],this.niceNumbersPlease(t,"div:not(.payment-row)"),r.push("total"!==t&&"total_vat"!==t?this.niceNumbersPlease(t,"div.payment-row"):void 0);return r}},i.prototype.niceNumbersPlease=function(t,e){var n,i;return null==e&&(e=""),"name"!==t&&"code"!==t&&"description"!==t&&"image_url"!==t&&"unit"!==t?(i=!1,$(this.el).find("#item-list "+e+" input[name="+t+"]").each(function(){var e;return e="total"===t||"total_vat"===t?$.formatCurrency.asNumber($(this).val()):parseFloat($(this).val()),e%1!==0&&isNaN(e)===!1?i=!0:void 0}),n=i===!0?this.getDecimals():0,("total"===t||"total_vat"===t)&&(this.decimalsFor[t]=n),$(this.el).find("#item-list "+e+" input[name="+t+"]").each(function(){var e,i;return i="total"===t||"total_vat"===t?$.formatCurrency.asNumber($(this).val()):parseFloat($(this).val()),e=i.toFixed(n),"total"===t||"total_vat"===t?e=$.formatCurrency.toMoney(e,{roundToDecimalPlace:n}):isNaN(e)&&(e=""),$(this).is(":focus")===!1?$(this).val(e):void 0})):void 0},i.prototype.bindSectionEditWindow=function(t){return this.getActive().length>30?void 0:t.on("blur",function(t){return function(e){return t.niceNumbersPlease($(e).attr("name"),"div:not(.payment-row)"),"total"!==$(e).attr("name")&&"total_vat"!==$(e).attr("name")?t.niceNumbersPlease($(e).attr("name"),"div.payment-row"):void 0}}(this))},i.prototype.removedSection=function(t){},i.prototype.getActive=function(){return this.getCollection().getActive()},i.prototype.change=function(){},i.prototype.changeRecount=function(){return this.recountTotalPrices()},i.prototype.recountTotalPrices=function(){var t,e,n,i,r,o,s;for(o=this.periods,s=[],i=0,r=o.length;r>i;i++)e=o[i],s.push(function(){var i;i=[];for(t in e)n=e[t],i.push(this.countTotalPricesForPeriod(t));return i}.call(this));return s},i.prototype.checkCollectionCount=function(){if(window.Quotes.vars.dont_recount_discounts!==!0)if(this.firsttime===!0){if(this.firsttime=!1,0===this.getActive().length)return $(this.el).find("#clear-items-button, #show-taxes-checkbox, #export-csv-button").hide(),$(this.el).find(".items-table").hide(),$(this.el).find(".no-items-help").show();if("none"===$(this.el).find(".items-table").css("display"))return $(this.el).find("#clear-items-button, #show-taxes-checkbox, #export-csv-button").show(),$(this.el).find(".items-table").show(),$(this.el).find(".no-items-help").hide()}else{if(0===this.getActive().length)return $(this.el).find("#clear-items-button, #show-taxes-checkbox, #export-csv-button").fadeOut(),$(this.el).find(".items-table").fadeOut(),$(this.el).find(".no-items-help").fadeIn();if("none"===$(this.el).find(".items-table").css("display"))return $(this.el).find("#clear-items-button, #show-taxes-checkbox, #export-csv-button").fadeIn(),$(this.el).find(".items-table").fadeIn(),$(this.el).find(".no-items-help").fadeOut()}},i.prototype.countTotalPricesForPeriod=function(t){var e,n,i,r,o,s,a,l,c,u,h,d,p,f,m,g,v,y,b,_,w,x;if(p=this.getCollection().getTotalsForPeriod(t,this.model.get("pricing_table")),m=p.totalPrice,g=p.totalPriceVAT,v=p.totalProfit,r=p.grandtotalPrice,o=p.grandtotalPriceVAT,s=p.grandtotalProfit,l=p.grandtotal_decimals,window.Quotes.vars.pricing_tables.length<=1&&(r=0,o=0,s=0),d=$(this.el).find(".items-summary-total.period-summary"+t),n=$(this.el).find(".items-summary-grandtotal.period-summary"+t),f=d.find(".super-total"),y=d.find(".super-total-vat"),i=n.find(".super-total"),a=n.find(".super-total-vat"),b="",w="",c="",u="",e=0,isNaN(m)===!1&&m.toFixed(2)%1!==0&&(e=2),isNaN(g)===!1&&g.toFixed(2)%1!==0&&(e=2),b=$.formatCurrency.toMoney(m.toString(),{roundToDecimalPlace:e}),w=$.formatCurrency.toMoney(g.toString(),{roundToDecimalPlace:e}),e=0,isNaN(r)===!1&&r.toFixed(2)%1!==0&&(e=2),isNaN(o)===!1&&o.toFixed(2)%1!==0&&(e=2),c=$.formatCurrency.toMoney(r.toString(),{roundToDecimalPlace:e}),u=$.formatCurrency.toMoney(o.toString(),{roundToDecimalPlace:e}),f.text(b),y.text(w),i.text(c),a.text(u),x=$(this.el).find(".items-summary-total.period-profit-summary"+t),0!==v&&(e=2,isNaN(v)===!1&&v.toFixed(e)%1===0&&(e=0),_=$.formatCurrency.toMoney(v.toString(),{roundToDecimalPlace:e}),x.find(".super-total-profit").text(_),0>v?x.find(".super-total-profit").addClass("profit-negative"):x.find(".super-total-profit").removeClass("profit-negative")),h=$(this.el).find(".items-summary-grandtotal.period-profit-summary"+t),0!==s&&(e=2,isNaN(s)===!1&&s.toFixed(e)%1===0&&(e=0),_=$.formatCurrency.toMoney(s.toString(),{roundToDecimalPlace:e}),h.find(".super-total-profit").text(_),0>s?h.find(".super-total-profit").addClass("profit-negative"):h.find(".super-total-profit").removeClass("profit-negative")),m>0||""===t?"none"===d.css("display")&&d.show():"none"!==d.css("display")&&d.hide(),r>0?"none"===n.css("display")&&n.show():"none"!==n.css("display")&&n.hide(),0!==v?"none"===x.css("display")&&x.show():"none"!==x.css("display")&&x.hide(),0!==s){if("none"===h.css("display"))return h.show()
}else if("none"!==h.css("display"))return h.hide()},i.prototype.render=function(){var t,e,n,i,r,o,s,a,l,c,u,h,d;for(window.Quotes.vars.import_spreadsheet_dialog_created===!0&&$(".upload-spreadsheet-dialog").dialog("destroy").remove(),window.Quotes.vars.import_spreadsheet_dialog_created=!1,i=this.model.toJSON(),i.export_csv_enabled=!0,i.service_template&&!i.service_template.id&&(i.export_csv_enabled=!1),i.payments_enabled=!1,null!=window.Quotes.vars.payments_enabled&&window.Quotes.vars.payments_enabled===!0&&(i.payments_enabled=!0),i.import_product_catalog=!1,null!=window.Quotes.vars.import_product_catalog&&window.Quotes.vars.import_product_catalog===!0&&(i.import_product_catalog=!0),$(this.el).html(this.template(i)),t=290,i.import_product_catalog&&(t=160),$(this.el).find(".add-buttons-container").affix({offset:{top:function(e){return function(){return t}}(this)}}),"servicetemplate"===this.viewKind?$(this.el).find("#add-service-template-button").hide():$(this.el).find("#add-service-template-button").on("click",function(){return window.Quotes.functions.newDialog($(this).attr("href"),null,"Choose service/product template"),!1}),e=$(this.el).find("#item-list").next(),i.service_template&&!i.service_template.id?$(".clone-button").hide():i.service_template&&($(".clone-button").show(),$(".clone-button").attr("href","/service_templates/"+this.model.get("id")+"/clone")),h=this.periods,a=0,c=h.length;c>a;a++){r=h[a];for(n in r)o=r[n],e.before(JST["backbone/templates/items/item-bottom-summary"]({key:n,value:o,kind:"total"}))}for(d=this.periods,l=0,u=d.length;u>l;l++){r=d[l];for(n in r)o=r[n],e.before(JST["backbone/templates/items/item-bottom-summary"]({key:n,value:o,kind:"grandtotal"}))}return $(this.el).find("#item-list").sortable({containment:"parent",helper:function(t,e){return e.children().each(function(){return $(this).width($(this).width())}),e},tolerance:"pointer",axis:"y",start:function(t){return function(e,n){return t.getCollection().changingOrder(n.item)}}(this),update:function(t){return function(e,n){return t.getCollection().changedOrder(n.item)}}(this)}),0===$(".image-browser-dialog").length&&$("body").append('<div class="image-browser-dialog" style="display: none;"></div>'),window.EDITOR={},window.EDITOR.config={},window.EDITOR.config.filebrowserImageUploadUrl="/ckeditor/pictures",this.$("form").backboneLink(this.model),s=this,this.model.get("pricing_table")&&($(".pricing-table-edit input[name=pricing_table_name]").val(this.model.get("pricing_table").name),$(".pricing-table-edit input[name=pricing_table_name]").on("change keyup",function(){return $(".pricing-tables-tabs li.active a").text($(this).val()),s.model.get("pricing_table").name=$(this).val()}),$('.pricing-table-edit select[name=pricing_table_kind] option[value="'+this.model.get("pricing_table").kind+'"]').prop("selected",!0),$(".pricing-table-edit select[name=pricing_table_kind]").on("change",function(){return s.model.get("pricing_table").kind=$(this).val(),s.changeRecount(),"default"===$(this).val()?$(".pricing-table-edit .pricing_table_selected_container").hide():$(".pricing-table-edit .pricing_table_selected_container").show()}),$(".pricing-table-edit select[name=pricing_table_kind]").trigger("change"),$(".pricing-table-edit input[name=pricing_table_selected]").prop("checked",this.model.get("pricing_table").selected),$(".pricing-table-edit input[name=pricing_table_selected]").on("change",function(){return s.model.get("pricing_table").selected=$(this).prop("checked"),s.changeRecount()}),$(".pricing-table-edit input[name=pricing_table_show_totals]").prop("checked",this.model.get("pricing_table").show_totals),$(".pricing-table-edit input[name=pricing_table_show_totals]").on("change",function(){return s.model.get("pricing_table").show_totals=$(this).prop("checked")}),$(".pricing-table-edit input[name=pricing_table_show_grandtotals]").prop("checked",this.model.get("pricing_table").show_grandtotals),$(".pricing-table-edit input[name=pricing_table_show_grandtotals]").on("change",function(){return s.model.get("pricing_table").show_grandtotals=$(this).prop("checked")})),window.Quotes.vars.last_focused_input=null,this.$(".add-buttons-container").on("mouseenter",function(){return window.Quotes.vars.last_focused_input=$(".item-row *:focus").get(0)}),this.$(".add-buttons-container").on("mouseleave",function(){return null!=window.Quotes.vars.last_focused_input?$(window.Quotes.vars.last_focused_input).trigger("focus"):void 0})},i.prototype.addDiscount=function(t,e){var n;return null==e&&(e=null),t&&(t.preventDefault(),t.stopPropagation()),e=new Quotes.Models.Item({name:"Discount"}),e.set("kind","discount"),e.set("discount","10"),null!=window.Quotes.vars.account_id&&(window.Quotes.vars.account_id<5||2664===window.Quotes.vars.account_id||window.Quotes.vars.account_id>3020)&&e.set("discount_type","relative-all"),n=this.getDefaultVAT(),n&&e.set("vat",n),this.addModel(null,e)},i.prototype.importFromSpreadsheet=function(t,e){return null==e&&(e=null),t&&(t.preventDefault(),t.stopPropagation()),window.Quotes.vars.import_spreadsheet_dialog_created!==!0?($(".upload-spreadsheet-dialog").dialog({minWidth:880,minHeight:80,zIndex:1030,title:"Import .CSV",modal:!0,draggable:!0},{resizable:!1,position:["middle",50],dialogClass:"nifty-dialog nifty-dialog-header",open:function(t,e){return window.Quotes.vars.import_spreadsheet_dialog_created=!0}}),$("input[name='spreadsheet_file']").off("change"),$("input[name='spreadsheet_file']").change(function(){return $("#import-proceed-button").show()}),$("#import-proceed-button").click(function(t){return function(e){return e.preventDefault(),e.stopPropagation(),"Import in progress..."!==$("#import-proceed-button").text()?($("#import-proceed-button").text("Import in progress..."),noty({text:"Importing file ...",dismissQueue:!0}),t.update(null,function(t){var e;return e={},e._method="PUT",$(".upload-spreadsheet-dialog form").ajaxSubmit({url:t.urlRoot+"/"+t.get("id"),dataType:"json",data:e,error:function(){return $("#import-proceed-button").text("Import file"),noty({text:"Import failed. Probably due to bad file format.",dismissQueue:!0,type:"error"})},success:function(e){return window.location=t.urlRoot+"/"+t.get("id")+"/edit"}})})):void 0}}(this))):$(".upload-spreadsheet-dialog").dialog("open")},i.prototype.addPaymentOption=function(t,e){var n;return null==e&&(e=null),t&&(t.preventDefault(),t.stopPropagation()),e=new Quotes.Models.Item({name:"Payment"}),e.set("kind","payment"),e.set("price",""),e.set("quantity",""),n=this.getDefaultVAT(),n&&e.set("vat",n),this.addModel(null,e)},i.prototype.addGroupHeader=function(t,e){return null==e&&(e=null),t&&(t.preventDefault(),t.stopPropagation()),e=new Quotes.Models.Item({name:"Group"}),e.set("kind","group"),this.addModel(null,e)},i.prototype.getDefaultVAT=function(){var t;return t=null,window.Quotes.vars.taxes.each(function(e){return function(e,n){return e.get("default")===!0?t=e.get("percent"):void 0}}(this)),t},i.prototype.addModel=function(t,e,n){var i,r,o,s,a,l,c;return null==e&&(e=null),null==n&&(n=!0),t&&(t.preventDefault(),t.stopPropagation()),a=0,i=this.getActive(),i.length>0&&(a=1+_.max(i,function(t){return t.get("position")}).get("position")),s=a,null!=window.Quotes.vars.last_focused_input&&(r=$(window.Quotes.vars.last_focused_input).parents(".item-row").index()+1,null!=r&&-1!==r&&(a=r,s>a&&this.model.get("items").each(function(t){var e;return 1!==t.get("_destroy")&&(e=t.get("position"),e>=a)?t.attributes.position=e+1:void 0}))),null===e?(l=new Quotes.Models.Item({name:"",price:0,position:a}),o=this.getDefaultVAT(),null!=window.Quotes.vars.editable_quantity_default&&window.Quotes.vars.editable_quantity_default===!0&&l.set("editable_quantity",!0),o&&(l.set("vat",o),this.hideTaxes===!0&&null!==o&&0!==o&&0!==o&&"0"!==o&&"0.0"!==o&&this.toggleShowTaxes())):(l=e,l.set("position",a)),c=new Quotes.Views.ItemEditView({model:l}),c.setPeriods(this.periods),c.setListView(this),c.render(),$(c.el).find("select").change(),this.bindSectionEditWindow(c),this.insertNewRow(l,c.el,!(s>a)),c.afterAppend(),n===!0&&($(c.el).find("input[name=name]").focus(),window.Quotes.vars.last_focused_input=$(c.el).find("input[name=name]")),this.getCollection().add(l),null!==e?(this.formatNumbers(),this.changeRecount()):void 0},i.prototype.fetch=function(t){return t.preventDefault(),t.stopPropagation(),this.model.fetch({success:function(t){return function(){return t.render()}}(this)})},i.prototype.beforeUpdate=function(){},i.prototype.insertNewRow=function(t,e,n){return null==n&&(n=!0),n===!0||0===t.get("position")?this.$("#item-list").append(e):this.$("#item-list .item-row:eq("+(t.get("position")-1)+")").after(e)},i.prototype.update=function(t,e){var n,i,r,o,s,a;if(null==e&&(e=null),t&&(t.preventDefault(),t.stopPropagation()),this.beforeUpdate(),null!=Quotes.views.areaListView&&(this.getCollection().sort(),n=this.getCollection().filter(function(t){return 1!==t.get("_destroy")}),r=_.indexOf(n,Quotes.views.areaListView.model),r%1===0&&(Quotes.vars.selectedSection=r)),"servicetemplate"!==this.viewKind){i=window.Quotes.vars.proposalModel,a=i.attributes;for(o in a)s=a[o],"sections"!==o&&"items"!==o&&this.model.set(o,s,{silent:!0})}return"function"==typeof e?this.model.save(null,{success:function(t){return function(t){return e(t)}}(this)}):this.model.save(null)},i}(Backbone.View),Quotes.Views.ServiceTemplateEditView=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.viewKind="servicetemplate",e.prototype.beforeUpdate=function(){return this.model.set("name",$('form.service_template input[name="name"]').val())},e}(Quotes.Views.ProposalItemsEditView)})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};jQuery(function(){return Quotes.Views.ItemEditView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.tagName="div",n.prototype.template_path="backbone/templates/items/item",n.prototype.events={"click .delete-item":"removeModel","click .show-second-row":"showSecondRow","keyup input":"keyUp"},n.prototype.initialize=function(){return _.bindAll(this),this.model.bind("remove",this.remove)},n.prototype.setListView=function(t){return this.listView=t},n.prototype.remove=function(){return $(this.el).remove()},n.prototype.removeModel=function(t){return t.preventDefault(),t.stopPropagation(),this.model.remove()},n.prototype.showSecondRow=function(t){var e,n,i;return t.preventDefault(),t.stopPropagation(),n=$(this.el).find(".second-row"),i=$(this.el).find(".third-row"),e="hide_all",i.hasClass("third-row-visible")||(e="show_all"),"hide_all"===e?(n.find("td > div").slideUp(400,function(){return n.removeClass("second-row-visible")}),i.find("td > div").slideUp(400,function(){return i.removeClass("third-row-visible")})):(n.hasClass("second-row-visible")||n.addClass("second-row-visible").find("td > div").hide().slideDown(),i.addClass("third-row-visible").find("td > div").hide().slideDown())},n.prototype.keyUp=function(t){return this.model.set($(t.target).attr("name"),$(t.target).val())},n.prototype.setPeriods=function(t){return this.periods=t},n.prototype.afterAppend=function(){return $(this.el).find("textarea").autoResize({extraSpace:0,minHeight:20,maxHeight:250,animate:{duration:0}})},n.prototype.render=function(){var t,e,n,i,r,o,s,a,l,c,u,h,d,p;if($(this.el).html(JST[this.template_path](this.model.toJSON())),e=$(this.el).find("select[name=discount_type]")[0],e&&("discount"===this.model.get("kind")?(r=new Option("% from all items in this table","relative-all"),"relative-all"===this.model.get("discount_type")&&(r.selected=!0),e.options.add(r),r=new Option("% from non-optional items in this table","relative"),"relative"===this.model.get("discount_type")&&(r.selected=!0),e.options.add(r)):(r=new Option("%","relative"),"relative"===this.model.get("discount_type")&&(r.selected=!0),e.options.add(r)),r=new Option($.formatCurrency.regions[""].symbol,"absolute"),"absolute"===this.model.get("discount_type")&&(r.selected=!0),e.options.add(r)),t=$(this.el).find("select[name=deposit_amount]")[0],t&&(r=new Option("%","false"),this.model.get("deposit_amount")===!1&&(r.selected=!0),t.options.add(r),r=new Option($.formatCurrency.regions[""].symbol,"true"),this.model.get("deposit_amount")===!0&&(r.selected=!0),t.options.add(r)),s=$(this.el).find("select[name=period]")[0])for(p=this.periods,h=0,d=p.length;d>h;h++){o=p[h];for(i in o)c=o[i],r=new Option(c,i),this.model.get("period")===parseInt(i)&&(r.selected=!0),s.options.add(r)}return a=$(this.el).find("select[name=vat]")[0],a&&window.Quotes.vars.taxes.each(function(t){return function(e,n){return r=new Option($.formatCurrency.asNumber(e.get("percent"),{decimalSymbol:"."})+"%",e.get("percent")),t.model.get("vat")===e.get("percent")&&(r.selected=!0),a.options.add(r)}}(this)),$(this.el).backboneLink(this.model),u=this,$(this.el).find("input[name=payment_option]").on("nifty:update_state",function(){return u.model.set("optional_checked",$(this).is(":checked")===!0)}),$(this.el).find("input[name=payment_option]").on("change",function(){var t;return t=$(this),$(this).closest(".item-row").siblings().find("input[name=payment_option]").each(function(){return $(this).trigger("nifty:update_state")}),u.model.set("optional_checked",$(this).is(":checked")===!0)}),$(this.el).find("input[name=optional]").on("change",function(){var t;return t=$(this).is(":checked"),u.model.get("optional")!==t&&u.model.set("optional",t),t===!0?$(u.el).addClass("optional-row"):$(u.el).removeClass("optional-row")}),$(this.el).find("input[name=optional_checked]").on("change",function(){var t;return t=$(this).is(":checked"),u.model.get("optional_checked")!==t?u.model.set("optional_checked",t===!0):void 0}),$(this.el).find("input[name=editable_quantity]").on("change",function(){var t;return t=$(this).is(":checked"),u.model.get("editable_quantity")!==t?u.model.set("editable_quantity",t===!0):void 0}),u.model.get("optional")===!0&&$(u.el).addClass("optional-row"),$(this.el).find("input[name=price_vat]").on("change keyup",function(){return u.model.trigger("nifty:change_price_vat")}),$(this.el).find("input").attr("autocomplete","off"),n=$(this.el).find(":input"),n.on("blur",function(){return u.trigger("blur",this)}),"item"===this.model.get("kind")&&(this.timerUnit=null,$(this.el).find(":input[name=unit]").typeahead({items:10,minLength:0,source:window.Quotes.vars.item_units})),"item"===this.model.get("kind")&&window.Quotes.vars.disable_items_autocomplete!==!0&&(this.timer=null,$(this.el).find(":input[name=name]").typeahead({items:10,minLength:3,source:function(t,e){return 0===t.length||t.length>10?void 0:(null!=this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){return $.get("/items/search",{name:t},function(t){return window.Quotes.vars.typeahead_labels=[],$.each(t,function(t,e){return window.Quotes.vars.typeahead_labels.push(e)}),e(window.Quotes.vars.typeahead_labels)},"json")},500))},updater:function(t){var e;return e=_.find(window.Quotes.vars.typeahead_labels,function(e){return e.id.toString()===t}),u.model.set("name",e.name),(null!=window.Quotes.vars.account_id==!1||null!=window.Quotes.vars.account_id&&172!==window.Quotes.vars.account_id)&&u.model.set("description",e.description),u.model.set("quantity",e.quantity),u.model.set("discount",e.discount),u.model.set("discount_type",e.discount_type),u.model.set("deposit_amount",e.deposit_amount),u.model.set("vat",e.vat),u.model.set("unit",e.unit),u.model.set("price_vat",e.price_vat),u.model.set("price",e.price),u.model.set("purchase_price",e.purchase_price),u.model.set("period",e.period),u.model.set("code",e.code),u.model.set("image_url",e.image_url),u.listView&&u.listView.formatNumbers(),$(u.el).find("textarea").trigger("keyup"),$(u.el).find(".image-please").trigger("change"),e.name},render:function(t){var e;return e=this,t=$(t).map(function(t,n){return t=$(e.options.item).attr("data-value",n.id),t.find("a").html(e.highlighter(n)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},matcher:function(t){return~t.name.toLowerCase().indexOf(this.query.toLowerCase())||t.code&&~t.code.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(t){var e,n,i,r;for(e=[],i=[],n=[],r=null;r=t.shift();)r.name.toLowerCase().indexOf(this.query.toLowerCase())?~r.name.indexOf(this.query)?i.push(r):n.push(r):e.push(r);return e.concat(i,n)},highlighter:function(t){var e,n,i,r;return i=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),e=t.name.replace(new RegExp("("+i+")","ig"),function(t,e){return"<strong>"+e+"</strong>"}),r='<span style="display: inline-block;min-width: 340px;">'+e,t.code&&t.code.length>0&&(r+="  &nbsp;&nbsp;|&nbsp;&nbsp;  "+t.code),r+="</span>",n=t.price,n>0&&(n=$.formatCurrency.toMoney(t.price,{roundToDecimalPlace:0}),r+='  &nbsp;&nbsp;&nbsp;&nbsp;  <i style="display: inline-block;min-width: 50px;text-align:right;">'+n+"</i>"),t.service_template_name&&(r+=" &nbsp;&nbsp;|&nbsp;&nbsp;  "+t.service_template_name),r}})),this.model.recountPrices(),$(this.el).addClass("item-row"),$(this.el).find("[rel=popover]").popover({trigger:"hover",placement:"left",html:!0}),l=!1,l=null!==this.model.get("image_url")&&this.model.get("image_url").length>0||null!==this.model.get("code")&&this.model.get("code").length>0,(null!==this.model.get("description")&&this.model.get("description").length>0||null!==this.model.get("period")&&this.model.get("period")>0||this.model.get("optional")===!0||null!==this.model.get("purchase_price")&&""!==this.model.get("purchase_price")||l)&&$(this.el).find(".second-row").addClass("second-row-visible"),l===!0&&$(this.el).find(".third-row").addClass("third-row-visible"),"group"===this.model.get("kind")&&$(this.el).addClass("group-header-row"),"payment"===this.model.get("kind")&&$(this.el).addClass("payment-row"),$(this.el).find(".image-please").each(function(){var t,e,n,i;return t=$(this),t.next().click(function(e){return function(){return t.attr("id","image_url_set"),$(".image-browser-dialog").html('<iframe src="/ckeditor/pictures?InputId='+t.attr("id")+'"></iframe>'),$(".image-browser-dialog").dialog({minWidth:720,minHeight:400,title:"Image browser",resizable:!1,modal:!0,position:["middle","middle"],dialogClass:"nifty-dialog nifty-dialog-header",close:function(){return t.attr("id","")}}),!1}}(this)),i=$('<div class="image-thumb-container"></div>'),n=$('<img class="image-thumb"/>'),i.append(n),e=$('<a href="#" class="unselect-image-btn" title="Remove image"><i class="fa fa-times"></i></a>'),e.click(function(e){return function(){return t.val(""),t.trigger("change"),!1}}(this)),i.append(e),t.next().after(i),t.on("change reload",function(i){return function(){return""!==t.val()?(n.attr("src",t.val()),n.show(),e.show()):(n.hide(),e.hide())}}(this)),t.trigger("reload")})},n}(Backbone.View)})}.call(this),function(){var t,e,n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};jQuery(function(){return Quotes.Views.ProposalEmailView=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return i(r,n),r.prototype.tagName="div",r.prototype.attributes={"class":"proposal-email"},r.prototype.template_path="backbone/templates/proposals/proposal_email",r.prototype.events={"click .delete-proposal-email":"destroy","click .show-client":"showClient"},r.prototype.initialize=function(){return _.bindAll(this),this.render()},r.prototype.destroy=function(t){return t.preventDefault(),t.stopPropagation(),null===this.model.get("client_id")||confirm("Are you sure? This user will no longer be able to access the proposal using his secret link (even if you add him later again his new link will be different).")?this.model.remove():void 0},r.prototype.showClient=function(t){return t.preventDefault(),t.stopPropagation(),this.model.get("client_id")?window.open("/clients/"+this.model.get("client_id")+"/edit","_blank"):void 0},r.prototype.render=function(){return $(this.el).html(JST[this.template_path](this.model.toJSON())),$(this.el).find(".client-id-select").select2({placeholder:"Select client",minimumInputLength:1,ajax:{url:"/clients",dataType:"json",quietMillis:700,data:function(t,e){return{search:t,show_all:!0}},results:function(t,e){return{results:t}}},formatResult:t,formatSelection:e,dropdownCssClass:"bigdrop",initSelection:function(t){return function(e,n){return n(t.model.get("client"))}}(this)}),$(this.el).on("change",function(t){return function(e){return e.val?t.model.set("client_id",e.val):void 0}}(this)),this.model.get("client_id")&&!this.model.get("client")?$.ajax({url:"/clients/"+this.model.get("client_id"),dataType:"json",success:function(t){return function(e){return t.model.set("client",e),$(t.el).find(".client-id-select").trigger("change")}}(this)}):void 0},r}(Backbone.View)}),t=function(t){var e,n;return e="<table class='client-result'><tr>",n="",t.is_company?n+=t.business_name:(t.title&&""!==t.title&&(n+=t.title+" "),t.first_name&&""!==t.first_name&&(n+=t.first_name),t.last_name&&""!==t.last_name&&(""!==n&&(n+=" "),n+=t.last_name)),t.company_id&&(n+=", "+t.business_name),t.email&&(n+=" - "+t.email),e+="<td class='client-info'><div class='movie-title'>"+n+"</div>",e+="</td></tr></table>"},e=function(t){var e;return e="",t.is_company?e+=t.business_name:(t.title&&""!==t.title&&(e+=t.title+" "),t.first_name&&""!==t.first_name&&(e+=t.first_name),t.last_name&&""!==t.last_name&&(""!==e&&(e+=" "),e+=t.last_name)),t.company_id&&(e+=", "+t.business_name),t.email&&(e+=" - "+t.email),e}}.call(this),window.Quotes.vars.google_web_fonts={kind:"webfonts#webfontList",items:[{kind:"webfonts#webfont",family:"PT Sans",variants:["regular","italic","700"],subsets:["latin","latin-ext"]},{kind:"webfonts#webfont",family:"Roboto",variants:["100","300","400","500","700","900"],subsets:["latin","latin-ext"]},{kind:"webfonts#webfont",family:"Open Sans",variants:["300","300italic","regular","italic","600","600italic","700","700italic","800","800italic"],subsets:["latin","latin-ext"]},{kind:"webfonts#webfont",family:"Open Sans Condensed",variants:["300","300italic","700"],subsets:["latin","latin-ext"]},{kind:"webfonts#webfont",family:"Chivo",variants:["regular","900"],subsets:["latin"]},{kind:"webfonts#webfont",family:"Allerta Stencil",variants:["regular"],subsets:["latin"]},{kind:"webfonts#webfont",family:"Amarante",variants:["regular"],subsets:["latin","latin-ext"]},{kind:"webfonts#webfont",family:"Audiowide",variants:["regular"],subsets:["latin","latin-ext"]},{kind:"webfonts#webfont",family:"Average",variants:["regular"],subsets:["latin","latin-ext"]},{kind:"webfonts#webfont",family:"Bangers",variants:["regular"],subsets:["latin"]},{kind:"webfonts#webfont",family:"Bree Serif",variants:["regular"],subsets:["latin","latin-ext"]},{kind:"webfonts#webfont",family:"Cabin Sketch",variants:["regular","700"],subsets:["latin"]},{kind:"webfonts#webfont",family:"Capriola",variants:["regular"],subsets:["latin","latin-ext"]},{kind:"webfonts#webfont",family:"Droid Serif",variants:["regular","italic","700","700italic"],subsets:["latin"]},{kind:"webfonts#webfont",family:"Eagle Lake",variants:["regular"],subsets:["latin","latin-ext"]},{kind:"webfonts#webfont",family:"Electrolize",variants:["regular"],subsets:["latin"]},{kind:"webfonts#webfont",family:"Fredericka the Great",variants:["regular"],subsets:["latin"]},{kind:"webfonts#webfont",family:"Fresca",variants:["regular"],subsets:["latin","latin-ext"]},{kind:"webfonts#webfont",family:"Fugaz One",variants:["regular"],subsets:["latin"]},{kind:"webfonts#webfont",family:"Italianno",variants:["regular"],subsets:["latin","latin-ext"]},{kind:"webfonts#webfont",family:"Lusitana",variants:["regular","700"],subsets:["latin"]},{kind:"webfonts#webfont",family:"Michroma",variants:["regular"],subsets:["latin"]},{kind:"webfonts#webfont",family:"Nova Round",variants:["regular"],subsets:["latin"]},{kind:"webfonts#webfont",family:"Poiret One",variants:["regular"],subsets:["latin","latin-ext"]},{kind:"webfonts#webfont",family:"Port Lligat Sans",variants:["regular"],subsets:["latin"]},{kind:"webfonts#webfont",family:"Raleway",variants:["100"],subsets:["latin"]},{kind:"webfonts#webfont",family:"Ropa Sans",variants:["regular"],subsets:["latin","latin-ext"]}]},function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};jQuery(function(){return Quotes.Views.ThemeEditView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.tagName="div",n.prototype.template_path="backbone/templates/themes/theme-edit",n.prototype.initialize=function(){return _.bindAll(this),this.canvas=[],this.background_image=[],this.save_button_text="Save and select theme",window.Quotes.vars.sample_proposal_editing===!0&&(this.save_button_text="Save theme"),this.originalModelAttributes=this.model.toJSON(),this.model.on("destroy",function(t){return function(){return t.off(),t.unbindall(),t.remove(),window.Quotes.vars.theme_list_view.selectFirstTheme()}}(this)),this.model.on("change",this.changed),this.changed},n.prototype.events={"click .save-theme":"save","click .select-theme":"select"},n.prototype.select=function(){var t;if(t=null,window.Quotes.vars.sample_proposal_editing)t=function(t){return function(e){return $(window.Quotes.vars.theme_edit_view.el).find(".select-theme").text(t.save_button_text).removeClass("disabled")}}(this);else{if(!window.Quotes.vars.template.get("editable"))return;t=function(t){return function(e){return $(window.Quotes.vars.theme_edit_view.el).find(".select-theme").text(t.save_button_text).removeClass("disabled"),window.Quotes.vars.theme_list_view.collection.unselectAll(),e.set("selected",!0),window.Quotes.vars.template.set("theme_id",e.get("id")),window.Quotes.vars.template.allowedAttrs=["id","theme_id"],window.Quotes.vars.template.save()}}(this)}return this.save(t)},n.prototype.save=function(t){var e,n,i,r;if($(this.el).find(".select-theme").hasClass("disabled"))return void $(this.el).find(".select-theme").text("Uploading images, this may take a while...");if(this.model.get("editable")===!1){if(i=prompt("Name of your new theme",this.model.get("name")+" custom"),null===i||""===i)return;return r=window.Quotes.vars.theme_list_view.collection.getPositionForNewModel(),e=new Quotes.Models.Theme(this.model.attributes),e.set("id",null),e.set("name",i),e.set("position",r),e.set("editable",!0),"function"==typeof t?e.save({},{success:function(n){return function(){return t(e)}}(this)}):e.save(),n=window.Quotes.vars.theme_list_view.addModel(e),n.selectTheme(),$(window.Quotes.vars.theme_edit_view.el).find(".select-theme").text("Saving theme, this may take a few seconds...").addClass("disabled"),e}return $(this.el).find(".select-theme").text("Saving theme, this may take a few seconds...").addClass("disabled"),"function"==typeof t?this.model.save({},{success:function(e){return function(){return t(e.model)}}(this)}):this.model.save(),this.model},n.prototype.unbindall=function(){this.model.off("change",this.changed),this.model.off("destroy");try{return $(this.el).find(".spinner-please").spinner("destroy"),$(this.el).find(".color-please").jacolorwheel("destroy"),$(this.el).find(".font-please").fontSelector("destroy")}catch(t){}},n.prototype.render=function(){var t;return $(this.el).html(JST[this.template_path](this.model.toJSON())),$(this.el).find(".select-theme").text(this.save_button_text),$(this.el).backboneLink(this.model),$(this.el).find("input[type=checkbox]").off(),t=this,$(this.el).find("input[type=checkbox]").on("change",function(){return $(this).is(":checked")?t.model.set($(this).attr("name"),!0):t.model.set($(this).attr("name"),!1)}),$(".theme-edit").html(this.el),this.model.get("editable")===!1&&$(this.el).find('input[name="name"]').attr("disabled","disabled"),$(this.el).find(".spinner-please").spinner({min:0,stop:function(){return $(this).trigger("change")}}),$(this.el).find(".color-please").jacolorwheel(),$(this.el).find("a[rel=popover]").popover(),0===$(".image-browser-dialog").length&&$("body").append('<div class="image-browser-dialog" style="display: none;"></div>'),window.EDITOR={},window.EDITOR.config={},window.EDITOR.config.filebrowserImageUploadUrl="/ckeditor/pictures",$(this.el).find(".image-please").each(function(){var e,n,i,r,o;return e=$(this),n=e.prev(),e.next().click(function(t){return function(){return $(".image-browser-dialog").html('<iframe src="/ckeditor/pictures?Input='+e.attr("name")+"&InputForId="+e.attr("name")+'_id"></iframe>'),$(".image-browser-dialog").dialog({minWidth:570,minHeight:400,title:"Image browser",resizable:!1,modal:!0,position:["middle","middle"],dialogClass:"nifty-dialog nifty-dialog-header"}),!1}}(this)),o=$('<div class="image-thumb-container"></div>'),r=$('<img class="image-thumb"/>'),o.append(r),i=$('<a href="#" class="unselect-image-btn"><i class="icon icon-remove"></i></a>'),i.click(function(t){return function(){return e.val(""),n.val(""),e.trigger("change"),!1}}(this)),o.append(i),e.next().after(o),e.on("change",function(n){return function(){return t.model.set(e.attr("name")+"_recolored",e.val())}}(this)),e.on("change reload",function(t){return function(){return""!==e.val()?(r.attr("src",e.val()),r.show(),i.show()):(r.hide(),i.hide())}}(this)),e.trigger("reload")}),$(this.el).find(".reset-colors").click(function(t){return function(e){return e.preventDefault(),t.model.set("recolor_color",""),t.model.set("heading_color",t.originalModelAttributes.heading_color),t.model.set("area_heading_color",t.originalModelAttributes.area_heading_color),t.model.set("text_color",t.originalModelAttributes.text_color),t.model.set("proposal_name_color",t.originalModelAttributes.proposal_name_color),t.model.set("proposal_info_color",t.originalModelAttributes.proposal_info_color),$(t.el).find("input.color-please").trigger("change"),$(t.el).find("input[name=recolor_color]").css({background:"#fff"})}}(this)),$(".font-please").each(function(t){return function(e,n){var i,r;return i={},i.family="inherit",r=new Option(i.family,i.family),r.selected=!1,t.model.get($(n).attr("name"))===i.family&&(r.selected=!0),n.options.add(r),_.each(window.Quotes.vars.google_web_fonts.items,function(e){return r=new Option(e.family,e.family),r.selected=!1,t.model.get($(n).attr("name"))===e.family&&(r.selected=!0),n.options.add(r)}),$(n).fontSelector({options:{inSpeed:500,outSpeed:500},fontChange:function(t,e){return $(n).val(e.font),$(n).change()},styleChange:function(t,e){}})}}(this))},n.prototype.recolorColor=function(t,e){var n,i,r,o,s,a,l,c,u;return t=tinycolor(t),o=t.toRgb(),r=fast_rgbToHsl(o.r,o.g,o.b),n=r[0],c=r[1],i=r[2],e=tinycolor(e),l=e.toRgb(),a=fast_rgbToHsl(l.r,l.g,l.b),s=a[2],u=fast_hslToRgb(n,c,s),tinycolor({r:u[0],g:u[1],b:u[2]}).toHexString()},n.prototype.recolorImage=function(t,e,n){var i,r,o,s,a,l,c,u,h,d,p,f,m,g,v,y,b,_,w,x,$,k,C,S,T,A,E,P,N;for(C=(new Date).getTime(),T=t.width,l=t.height,u=e.getImageData(0,0,T,l),n=tinycolor(n),v=n.toRgb(),g=fast_rgbToHsl(v.r,v.g,v.b),c=g[0],k=g[1],m=g[2],r={},o={},_=0,E=P=0;l>=0?l>P:P>l;E=l>=0?++P:--P)for($=E*T*4,A=N=0;T>=0?T>N:N>T;A=T>=0?++N:--N)w=4*A+$,x=u.data[w+0],a=u.data[w+1],i=u.data[w+2],(255!==x||255!==a||255!==i)&&(0!==x||0!==a||0!==i)&&("undefined"==typeof d||null===d||f!==x||p!==a||h!==i?(b=fast_rgbToHsl(x,a,i),r[b[2]]?S=r[b[2]]:(y=b[2],y*=1+(m-.5),0>y&&(y=0),y>1&&(y=1),S=fast_hslToRgb(c,k,y),r[b[2]]=S),u.data[w+0]=S[0],u.data[w+1]=S[1],u.data[w+2]=S[2],d=S,f=x,p=a,h=i):(u.data[w+0]=d[0],u.data[w+1]=d[1],u.data[w+2]=d[2]));return e.putImageData(u,0,0),s=(new Date).getTime()},n.prototype.changed=function(){var t,e,n;return t=this.model.attributes,n=this,null!=this.lastCssAttrs==!1&&(this.loadedImagesCount=0,this.loadedImagesTotalCount=0),e=!0,null!=this.lastCssAttrs==!0&&this.lastCssAttrs.recolor_color!==t.recolor_color&&""!==t.recolor_color&&($(this.el).find(".color-please").each(function(){var e,i;return e=$(this),"recolor_color"!==e.attr("name")?(i=n.recolorColor(t.recolor_color,e.val()),n.model.set(e.attr("name"),i,{silent:!0}),e.val(i),e.trigger("refreshcolorwheel")):void 0}),this.loadedImagesTotalCount=$(this.el).find(".image-please").length,$(this.el).find(".image-please").each(function(){var i,r,o,s,a,l;return l=$(this),a=l.attr("name"),i=t[a],i="/proxy/"+i,null!=n.canvas[a]==!1?(s=new Image,r=document.createElement("canvas"),$(r).hide(),n.background_image[a]=s,n.canvas[a]=r,$(r).appendTo("body"),e=!1,s.onload=function(e){return function(){var e;return r.width=s.width,r.height=s.height,e=r.getContext("2d"),e.drawImage(s,0,0),n.recolorImage(r,e,t.recolor_color),t[a+"_recolored"]=n.canvas[a].toDataURL("image/png"),n.imagesLoaded(t)
}}(this),s.src=i):(window.Quotes.vars.sss=n,o=n.canvas[a].getContext("2d"),o.drawImage(n.background_image[a],0,0),n.recolorImage(n.canvas[a],o,t.recolor_color),t[a+"_recolored"]=n.canvas[a].toDataURL("image/png"))})),null!=this.lastCssAttrs==!0&&this.lastCssAttrs.recolor_color!==t.recolor_color&&""===t.recolor_color&&(this.model.set("cover_background_image_recolored",this.model.get("cover_background_image")),this.model.set("background_image_recolored",this.model.get("background_image"))),e===!0?this.updateCss(t):void 0},n.prototype.imagesLoaded=function(t){return this.loadedImagesCount++,this.loadedImagesCount<this.loadedImagesTotalCount?void 0:this.updateCss(t)},n.prototype.updateCss=function(t){var e,n,i,r,o,s,a;return null==t||null==t.custom_css||-1===t.custom_css.indexOf("[cover_background_image]")&&-1===t.custom_css.indexOf("[inner_background_image]")||(t.custom_css=t.custom_css.replace(new RegExp("\\[cover_background_image\\]","ig"),this.model.get("cover_background_image_recolored")),t.custom_css=t.custom_css.replace(new RegExp("\\[inner_background_image\\]","ig"),this.model.get("background_image_recolored"))),null!=t&&("inherit"===t.proposal_name_font&&(t.proposal_name_font="Arial"),"inherit"===t.proposal_info_font&&(t.proposal_info_font="Arial"),"inherit"===t.heading_font&&(t.heading_font="Arial"),"inherit"===t.area_heading_font&&(t.area_heading_font="Arial")),n=JST["backbone/templates/themes/css"](t),(null!=this.lastCssAttrs==!0&&this.lastCssAttrs.web_background_style!==t.web_background_style||null!=this.lastCssAttrs==!1)&&(a="gray",a=null!=t.web_background_style==!1||""===t.web_background_style?"classic":t.web_background_style,o=function(t,e){return(e.match(/\bproposal-background-\S+/g)||[]).join(" ")},$("html.proposal-preview").removeClass(o).addClass("proposal-background-"+a)),$("table.price-table").each(function(){var e,n,i,r;return r=$(this),i=r.data("tax"),n=1,i!==!0&&(n=3),null!=t.hide_quantity_column!=!1&&t.hide_quantity_column!==!1&&""!==t.hide_quantity_column&&(n+=1),null!=t.hide_price_column!=!1&&t.hide_price_column!==!1&&""!==t.hide_price_column&&(n+=1),null!=t.hide_vat_column!=!1&&t.hide_vat_column!==!1&&""!==t.hide_vat_column&&i===!0&&(n+=1),e=4,i!==!0&&(e=5),null!=t.hide_total_column!=!1&&t.hide_total_column!==!1&&""!==t.hide_total_column&&null!=t.hide_total_vat_column!=!1&&t.hide_total_vat_column!==!1&&""!==t.hide_total_vat_column&&(e-=1),r.find("tr .name").each(function(){var t;return t=$(this),"group-header"!==t.parent().attr("class")?t.attr("colspan",n):void 0}),r.find("tr td.overview-title").each(function(){var t;return t=$(this),t.attr("colspan",e)})}),(null!=this.lastCssAttrs==!0&&this.lastCssAttrs.left_side_style!==t.left_side_style||null!=this.lastCssAttrs==!1)&&(i="gray",i=null!=t.left_side_style==!1||""===t.left_side_style?"classic":t.left_side_style,o=function(t,e){return(e.match(/\bleft-side-\S+/g)||[]).join(" ")},$("html.proposal-preview").removeClass(o).addClass("left-side-"+i)),(null!=this.lastCssAttrs==!0&&this.lastCssAttrs.show_cover_whole_image_height!==t.show_cover_whole_image_height||null!=this.lastCssAttrs==!1)&&(null!=t.show_cover_whole_image_height==!1||t.show_cover_whole_image_height===!1||""===t.show_cover_whole_image_height?$("html.proposal-preview").removeClass("cover-full-height"):$("html.proposal-preview").addClass("cover-full-height")),(null!=this.lastCssAttrs==!0&&this.lastCssAttrs.pageless_layout!==t.pageless_layout||null!=this.lastCssAttrs==!1)&&(null!=t.pageless_layout==!1||t.pageless_layout===!1||""===t.pageless_layout?$("html.proposal-preview").removeClass("proposal-pageless").addClass("proposal-pages"):$("html.proposal-preview").removeClass("proposal-pages").addClass("proposal-pageless")),(null!=this.lastCssAttrs==!0&&this.lastCssAttrs.description_inside_first_row!==t.description_inside_first_row||null!=this.lastCssAttrs==!1)&&(null!=t.description_inside_first_row==!1||t.description_inside_first_row===!1||""===t.description_inside_first_row?$(".price-table").removeClass("no-second-row"):$(".price-table").addClass("no-second-row")),(null!=this.lastCssAttrs==!0&&this.lastCssAttrs.show_cover_page_html!==t.show_cover_page_html||null!=this.lastCssAttrs==!1)&&(s=!1,e=$(".proposal-html .cover-page"),null!=t.show_cover_page_html==!1||t.show_cover_page_html===!1||""===t.show_cover_page_html?($(".proposal-html .tabs-left .nav-tabs li:first").hide(),e.is(":visible")&&(s=!0,e.removeClass("first-section"),1===e.next(".tab-pane").length&&e.next(".tab-pane").addClass("first-section"),1===$(".scrollable-layout").length&&e.hide(),1===$(".btn.preview-button").length&&$(".proposal-info-container").show(),$(".proposal-html .tabs-left .nav-tabs li:eq(1) a").click())):(e.is(":visible")||(s=!0),1===e.next(".tab-pane").length&&e.next(".tab-pane").removeClass("first-section"),e.addClass("first-section"),$(".proposal-html .tabs-left .nav-tabs li:first").show(),1===$(".scrollable-layout").length&&e.show(),1===$(".btn.preview-button").length&&$(".proposal-info-container").hide()),s===!0&&1===$(".scrollable-layout").length&&$('[data-spy="scroll"]').each(function(){return $(this).scrollspy("refresh")})),$("style#custom_style").remove(),$("<style type='text/css' id='custom_style'>"+n+"</style>").appendTo("head"),0===$(".scrollable-layout").length&&(r=0,$(".proposal-html .span10 > .tab-content > div:visible").each(function(){var t;return t=$(this).height(),t>r?r=t:void 0}),$(".proposal-html .span10 > .tab-content").height(r)),$(window).resize(),this.lastCssAttrs=jQuery.extend({},t)},n}(Backbone.View)})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};jQuery(function(){return Quotes.Views.ThemeListView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.el=$("div.theme-view"),n.prototype.template=JST["backbone/templates/themes/theme-list"],n.prototype.initialize=function(){return window.Quotes.vars.theme_list_view=this,this.initialized=!1,_.bindAll(this),this.render(),this.collection.each(function(t){return function(e){return t.addModel(e)}}(this)),this.initialized=!0,$(this.el).find(".theme.selected").length>0&&$(this.el).find(".theme-list").scrollTo($(this.el).find(".theme.selected")),window.Quotes.vars.sample_proposal_editing===!0&&$(this.el).find(".theme.active").length>0?setTimeout(function(t){return function(){return $(t.el).find(".theme-list").scrollTo($(t.el).find(".theme.active"),500)}}(this),1e3):void 0},n.prototype.onSync=function(){return $(window).off("beforeunload",this.leavingAlert),this.render()},n.prototype.leavingAlert=function(){return"Do you really want to leave this page? There are some unsaved changes."},n.prototype.setLeaveAlert=function(){},n.prototype.change=function(){return this.initialized===!0?this.setLeaveAlert():void 0},n.prototype.render=function(){return $(this.el).html(this.template(this.collection.toJSON())),$(this.el).find(".add-theme-button").on("click",this.addNewModel),this.firstTimeOpen=!0,$(".edit-theme-dialog-content").on("dialogopen",function(t){return function(){return t.firstTimeOpen===!0?($(t.el).find(".theme.selected").length>0&&$(t.el).find(".theme-list").scrollTo($(t.el).find(".theme.selected")),t.firstTimeOpen=!1):void 0}}(this))},n.prototype.selectFirstTheme=function(){return this.collection.on("remove",function(t){return function(){return t.collection.off("remove"),t.collection.last().trigger("select")}}(this))},n.prototype.addNewModel=function(t){var e,n,i;return t&&(t.preventDefault(),t.stopPropagation()),i=this.collection.getPositionForNewModel(),e=new Quotes.Models.Theme({name:"New theme #"+(this.collection.getEditable().length+1),position:i}),e.set("editable",!0),n=this.addModel(e),n.selectTheme()},n.prototype.addModel=function(t){var e;return this.collection.add(t),e=new Quotes.Views.ThemeView({model:t}),e.render(),this.$(".theme-list").prepend(e.el),this.initialized===!0&&$(this.el).find(".theme-list").scrollTo($(e.el),500),e},n}(Backbone.View)})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};jQuery(function(){return Quotes.Views.ThemeView=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.tagName="div",n.prototype.attributes={"class":"theme"},n.prototype.template_path="backbone/templates/themes/theme",n.prototype.events={"click .delete-theme":"destroy",mouseenter:"mouseIn",mouseleave:"mouseOut"},n.prototype.initialize=function(){return _.bindAll(this),this.model.on("change:name",function(t){return function(){return $(t.el).find(".theme-name").text(t.model.get("name"))}}(this)),this.model.on("change:cover_background_image_recolored change:background_image_recolored",function(t){return function(){var e;return e=t.model.get("cover_background_image_recolored"),(null===e||""===e)&&(e=t.model.get("background_image_recolored")),null!==e&&""!==e?$(t.el).find(".theme-img").removeClass("image-placeholder").find("img").attr("src",e).show():$(t.el).find(".theme-img").addClass("image-placeholder").find("img").removeAttr("src").hide()}}(this)),this.model.on("change:selected",this.updateHtml)},n.prototype.updateHtml=function(){return this.model.trigger("change:background_image_recolored"),this.model.get("selected")&&!window.Quotes.vars.sample_proposal_editing?($(this.el).addClass("selected"),$(this.el).find(".theme-status").text("current theme")):($(this.el).removeClass("selected"),$(this.el).find(".theme-status").text(""))},n.prototype.destroy=function(t){return t.preventDefault(),t.stopPropagation(),this.model.get("editable")!==!1&&confirm("Are you sure?")?(this.remove(),this.model.destroy()):void 0},n.prototype.mouseIn=function(){return $(this.el).addClass("mouseover")},n.prototype.mouseOut=function(){return $(this.el).removeClass("mouseover")},n.prototype.render=function(){return $(this.el).html(JST[this.template_path](this.model.toJSON())),$(this.el).attr("themeid",this.model.get("id")),$(this.el).on("click",this.selectTheme),this.model.get("editable")===!1&&$(this.el).addClass("uneditable"),this.model.on("select",this.selectTheme),this.updateHtml(),this.model.get("selected")?this.selectTheme():void 0},n.prototype.selectTheme=function(t){var e;if(null!=window.Quotes.vars.theme_edit_view){if(window.Quotes.vars.theme_edit_view.model===this.model)return;window.Quotes.vars.theme_edit_view.off(),window.Quotes.vars.theme_edit_view.unbindall(),window.Quotes.vars.theme_edit_view.remove()}return $(this.el).siblings().removeClass("active"),$(this.el).addClass("active"),e=new Quotes.Views.ThemeEditView({model:this.model}),e.render(),e.changed(),window.Quotes.vars.theme_edit_view=e},n}(Backbone.View)})}.call(this),/**
 * Timeago is a jQuery plugin that makes it easy to support automatically
 * updating fuzzy timestamps (e.g. "4 minutes ago" or "about 1 day ago").
 *
 * @name timeago
 * @version 1.4.1
 * @requires jQuery v1.2.3+
 * @author Ryan McGeary
 * @license MIT License - http://www.opensource.org/licenses/mit-license.php
 *
 * For usage and examples, visit:
 * http://timeago.yarp.com/
 *
 * Copyright (c) 2008-2013, Ryan McGeary (ryan -[at]- mcgeary [*dot*] org)
 */
function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(){if(!t.contains(document.documentElement,this))return t(this).timeago("dispose"),this;var e=n(this),s=o.settings;return isNaN(e.datetime)||(0==s.cutoff||Math.abs(r(e.datetime))<s.cutoff)&&t(this).text(i(e.datetime,t(this).attr("lang")?t(this).attr("lang"):o.settings.lang)),this}function n(e){if(e=t(e),!e.data("timeago")){e.data("timeago",{datetime:o.datetime(e)});var n=t.trim(e.text());o.settings.localeTitle?e.attr("title",e.data("timeago").datetime.toLocaleString()):!(n.length>0)||o.isTime(e)&&e.attr("title")||e.attr("title",n)}return e.data("timeago")}function i(t,e){return o.inWords(r(t),e)}function r(t){return(new Date).getTime()-t.getTime()}t.timeago=function(e){return i(e instanceof Date?e:"string"==typeof e?t.timeago.parse(e):"number"==typeof e?new Date(e):t.timeago.datetime(e))};var o=t.timeago;t.extend(t.timeago,{settings:{refreshMillis:6e4,allowPast:!0,allowFuture:!1,localeTitle:!1,cutoff:0,lang:"en",strings:{en:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",inPast:"any moment now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}}},inWords:function(e,n){function i(n,i){var o=t.isFunction(n)?n(i,e):n,s=r.numbers&&r.numbers[i]||i;return o.replace(/%d/i,s)}if(!this.settings.allowPast&&!this.settings.allowFuture)throw"timeago allowPast and allowFuture settings can not both be set to false.";var r=this.settings.strings[n]||this.settings.strings[this.settings.lang]||this.settings.strings.en,o=r.prefixAgo,s=r.suffixAgo;if(this.settings.allowFuture&&0>e&&(o=r.prefixFromNow,s=r.suffixFromNow),!this.settings.allowPast&&e>=0)return this.settings.strings[n].inPast;var a=Math.abs(e)/1e3,l=a/60,c=l/60,u=c/24,h=u/365,d=45>a&&i(r.seconds,Math.round(a))||90>a&&i(r.minute,1)||45>l&&i(r.minutes,Math.round(l))||90>l&&i(r.hour,1)||24>c&&i(r.hours,Math.round(c))||42>c&&i(r.day,1)||30>u&&i(r.days,Math.round(u))||45>u&&i(r.month,1)||365>u&&i(r.months,Math.round(u/30))||1.5>h&&i(r.year,1)||i(r.years,Math.round(h)),p=r.wordSeparator||"";return void 0===r.wordSeparator&&(p=" "),t.trim([o,d,s].join(p))},parse:function(e){var n=t.trim(e);return n=n.replace(/\.\d+/,""),n=n.replace(/-/,"/").replace(/-/,"/"),n=n.replace(/T/," ").replace(/Z/," UTC"),n=n.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),n=n.replace(/([\+\-]\d\d)$/," $100"),new Date(n)},datetime:function(e){var n=t(e).attr(o.isTime(e)?"datetime":"title");return o.parse(n)},isTime:function(e){return"time"===t(e).get(0).tagName.toLowerCase()}});var s={init:function(){var n=t.proxy(e,this);n();var i=o.settings;i.refreshMillis>0&&(this._timeagoInterval=setInterval(n,i.refreshMillis))},update:function(n){var i=o.parse(n);t(this).data("timeago",{datetime:i}),o.settings.localeTitle&&t(this).attr("title",i.toLocaleString()),e.apply(this)},updateFromDOM:function(){t(this).data("timeago",{datetime:o.parse(t(this).attr(o.isTime(this)?"datetime":"title"))}),e.apply(this)},dispose:function(){this._timeagoInterval&&(window.clearInterval(this._timeagoInterval),this._timeagoInterval=null)}};t.fn.timeago=function(t,e){var n=t?s[t]:s.init;if(!n)throw new Error("Unknown function name '"+t+"' for timeago");return this.each(function(){n.call(this,e)}),this},document.createElement("abbr"),document.createElement("time")}),function(t){t(document).on("ready page:load",function(){t("time[data-time-ago]").timeago()})}(jQuery),function(){function t(t,e){return e[plural=0==t?0:1==t?1:2==t?2:t%100>=3&&10>=t%100?3:t%100>=11?4:5]}jQuery.timeago.settings.strings.ar={prefixAgo:"\u0645\u0646\u0630",prefixFromNow:"\u0628\u0639\u062f",suffixAgo:null,suffixFromNow:null,second:function(e){return t(e,["\u0623\u0642\u0644 \u0645\u0646 \u062b\u0627\u0646\u064a\u0629","\u062b\u0627\u0646\u064a\u0629 \u0648\u0627\u062d\u062f\u0629","\u062b\u0627\u0646\u064a\u062a\u064a\u0646","%d \u062b\u0648\u0627\u0646\u064d","%d \u062b\u0627\u0646\u064a\u0629","%d \u062b\u0627\u0646\u064a\u0629"])},seconds:function(e){return t(e,["\u0623\u0642\u0644 \u0645\u0646 \u062b\u0627\u0646\u064a\u0629","\u062b\u0627\u0646\u064a\u0629 \u0648\u0627\u062d\u062f\u0629","\u062b\u0627\u0646\u064a\u062a\u064a\u0646","%d \u062b\u0648\u0627\u0646\u064d","%d \u062b\u0627\u0646\u064a\u0629","%d \u062b\u0627\u0646\u064a\u0629"])},minute:function(e){return t(e,["\u0623\u0642\u0644 \u0645\u0646 \u062f\u0642\u064a\u0642\u0629","\u062f\u0642\u064a\u0642\u0629 \u0648\u0627\u062d\u062f\u0629","\u062f\u0642\u064a\u0642\u062a\u064a\u0646","%d \u062f\u0642\u0627\u0626\u0642","%d \u062f\u0642\u064a\u0642\u0629","\u062f\u0642\u064a\u0642\u0629"])},minutes:function(e){return t(e,["\u0623\u0642\u0644 \u0645\u0646 \u062f\u0642\u064a\u0642\u0629","\u062f\u0642\u064a\u0642\u0629 \u0648\u0627\u062d\u062f\u0629","\u062f\u0642\u064a\u0642\u062a\u064a\u0646","%d \u062f\u0642\u0627\u0626\u0642","%d \u062f\u0642\u064a\u0642\u0629","\u062f\u0642\u064a\u0642\u0629"])},hour:function(e){return t(e,["\u0623\u0642\u0644 \u0645\u0646 \u0633\u0627\u0639\u0629","\u0633\u0627\u0639\u0629 \u0648\u0627\u062d\u062f\u0629","\u0633\u0627\u0639\u062a\u064a\u0646","%d \u0633\u0627\u0639\u0627\u062a","%d \u0633\u0627\u0639\u0629","%d \u0633\u0627\u0639\u0629"])},hours:function(e){return t(e,["\u0623\u0642\u0644 \u0645\u0646 \u0633\u0627\u0639\u0629","\u0633\u0627\u0639\u0629 \u0648\u0627\u062d\u062f\u0629","\u0633\u0627\u0639\u062a\u064a\u0646","%d \u0633\u0627\u0639\u0627\u062a","%d \u0633\u0627\u0639\u0629","%d \u0633\u0627\u0639\u0629"])},day:function(e){return t(e,["\u0623\u0642\u0644 \u0645\u0646 \u064a\u0648\u0645","\u064a\u0648\u0645 \u0648\u0627\u062d\u062f","\u064a\u0648\u0645\u064a\u0646","%d \u0623\u064a\u0627\u0645","%d \u064a\u0648\u0645\u064b\u0627","%d \u064a\u0648\u0645"])},days:function(e){return t(e,["\u0623\u0642\u0644 \u0645\u0646 \u064a\u0648\u0645","\u064a\u0648\u0645 \u0648\u0627\u062d\u062f","\u064a\u0648\u0645\u064a\u0646","%d \u0623\u064a\u0627\u0645","%d \u064a\u0648\u0645\u064b\u0627","%d \u064a\u0648\u0645"])},month:function(e){return t(e,["\u0623\u0642\u0644 \u0645\u0646 \u0634\u0647\u0631","\u0634\u0647\u0631 \u0648\u0627\u062d\u062f","\u0634\u0647\u0631\u064a\u0646","%d \u0623\u0634\u0647\u0631","%d \u0634\u0647\u0631\u064b\u0627","%d \u0634\u0647\u0631"])},months:function(e){return t(e,["\u0623\u0642\u0644 \u0645\u0646 \u0634\u0647\u0631","\u0634\u0647\u0631 \u0648\u0627\u062d\u062f","\u0634\u0647\u0631\u064a\u0646","%d \u0623\u0634\u0647\u0631","%d \u0634\u0647\u0631\u064b\u0627","%d \u0634\u0647\u0631"])},year:function(e){return t(e,["\u0623\u0642\u0644 \u0645\u0646 \u0639\u0627\u0645","\u0639\u0627\u0645 \u0648\u0627\u062d\u062f","%d \u0639\u0627\u0645\u064a\u0646","%d \u0623\u0639\u0648\u0627\u0645","%d \u0639\u0627\u0645\u064b\u0627"])},years:function(e){return t(e,["\u0623\u0642\u0644 \u0645\u0646 \u0639\u0627\u0645","\u0639\u0627\u0645 \u0648\u0627\u062d\u062f","\u0639\u0627\u0645\u064a\u0646","%d \u0623\u0639\u0648\u0627\u0645","%d \u0639\u0627\u0645\u064b\u0627","%d \u0639\u0627\u0645"])}}}(),jQuery.timeago.settings.strings.bg={prefixAgo:"\u043f\u0440\u0435\u0434\u0438",prefixFromNow:"\u0441\u043b\u0435\u0434",suffixAgo:null,suffixFromNow:null,seconds:"\u043f\u043e-\u043c\u0430\u043b\u043a\u043e \u043e\u0442 \u043c\u0438\u043d\u0443\u0442\u0430",minute:"\u0435\u0434\u043d\u0430 \u043c\u0438\u043d\u0443\u0442\u0430",minutes:"%d \u043c\u0438\u043d\u0443\u0442\u0438",hour:"\u0435\u0434\u0438\u043d \u0447\u0430\u0441",hours:"%d \u0447\u0430\u0441\u0430",day:"\u0435\u0434\u0438\u043d \u0434\u0435\u043d",days:"%d \u0434\u043d\u0438",month:"\u0435\u0434\u0438\u043d \u043c\u0435\u0441\u0435\u0446",months:"%d \u043c\u0435\u0441\u0435\u0446\u0430",year:"\u0435\u0434\u043d\u0430 \u0433\u043e\u0434\u0438\u043d\u0430",years:"%d \u0433\u043e\u0434\u0438\u043d\u0438"},function(){var t;t=function(t,e,n,i){var r;return r=t%10,1===r&&(1===t||t>20)?e:r>1&&5>r&&(t>20||10>t)?n:i},jQuery.timeago.settings.strings.bs={prefixAgo:"prije",prefixFromNow:"za",suffixAgo:null,suffixFromNow:null,second:"sekund",seconds:function(e){return t(e,"%d sekund","%d sekunde","%d sekundi")},minute:"oko minut",minutes:function(e){return t(e,"%d minut","%d minute","%d minuta")},hour:"oko sat",hours:function(e){return t(e,"%d sat","%d sata","%d sati")},day:"oko jednog dana",days:function(e){return t(e,"%d dan","%d dana","%d dana")},month:"mjesec dana",months:function(e){return t(e,"%d mjesec","%d mjeseca","%d mjeseci")},year:"prije godinu dana ",years:function(e){return t(e,"%d godinu","%d godine","%d godina")},wordSeparator:" "}}.call(this),jQuery.timeago.settings.strings.ca={prefixAgo:"fa",prefixFromNow:"d'aqui a",suffixAgo:null,suffixFromNow:null,seconds:"menys d'1 minut",minute:"1 minut",minutes:"uns %d minuts",hour:"1 hora",hours:"unes %d hores",day:"1 dia",days:"%d dies",month:"aproximadament un mes",months:"%d mesos",year:"aproximadament un any",years:"%d anys"},function(){function t(t,e,n){return n[e>=0?0:2==n.length||5>t?1:2]}jQuery.timeago.settings.strings.cs={prefixAgo:"p\u0159ed",prefixFromNow:"za",suffixAgo:null,suffixFromNow:null,seconds:function(e,n){return t(e,n,["m\xe9n\u011b ne\u017e minutou","m\xe9n\u011b ne\u017e minutu"])},minute:function(e,n){return t(e,n,["minutou","minutu"])},minutes:function(e,n){return t(e,n,["%d minutami","%d minuty","%d minut"])},hour:function(e,n){return t(e,n,["hodinou","hodinu"])},hours:function(e,n){return t(e,n,["%d hodinami","%d hodiny","%d hodin"])},day:function(e,n){return t(e,n,["%d dnem","%d den"])},days:function(e,n){return t(e,n,["%d dny","%d dny","%d dn\xed"])},month:function(e,n){return t(e,n,["%d m\u011bs\xedcem","%d m\u011bs\xedc"])},months:function(e,n){return t(e,n,["%d m\u011bs\xedc\xed","%d m\u011bs\xedce","%d m\u011bs\xedc\u016f"])},year:function(e,n){return t(e,n,["%d rokem","%d rok"])},years:function(e,n){return t(e,n,["%d lety","%d roky","%d let"])}}}(),jQuery.timeago.settings.strings.cy={prefixAgo:null,prefixFromNow:null,suffixAgo:"yn \xf4l",suffixFromNow:"o hyn",seconds:"llai na munud",minute:"am funud",minutes:"%d munud",hour:"tua awr",hours:"am %d awr",day:"y dydd",days:"%d diwrnod",month:"tua mis",months:"%d mis",year:"am y flwyddyn",years:"%d blynedd",wordSeparator:" ",numbers:[]},jQuery.timeago.settings.strings.da={prefixAgo:"for",prefixFromNow:"om",suffixAgo:"siden",suffixFromNow:"",seconds:"mindre end et minut",minute:"ca. et minut",minutes:"%d minutter",hour:"ca. en time",hours:"ca. %d timer",day:"en dag",days:"%d dage",month:"ca. en m\xe5ned",months:"%d m\xe5neder",year:"ca. et \xe5r",years:"%d \xe5r"},jQuery.timeago.settings.strings.de={prefixAgo:"vor",prefixFromNow:"in",suffixAgo:"",suffixFromNow:"",seconds:"wenigen Sekunden",minute:"etwa einer Minute",minutes:"%d Minuten",hour:"etwa einer Stunde",hours:"%d Stunden",day:"etwa einem Tag",days:"%d Tagen",month:"etwa einem Monat",months:"%d Monaten",year:"etwa einem Jahr",years:"%d Jahren"},jQuery.timeago.settings.strings.el={prefixAgo:"\u03c0\u03c1\u03b9\u03bd",prefixFromNow:"\u03c3\u03b5",suffixAgo:"",suffixFromNow:"",seconds:"\u03bb\u03b9\u03b3\u03cc\u03c4\u03b5\u03c1\u03bf \u03b1\u03c0\u03cc \u03ad\u03bd\u03b1 \u03bb\u03b5\u03c0\u03c4\u03cc",minute:"\u03c0\u03b5\u03c1\u03af\u03c0\u03bf\u03c5 \u03ad\u03bd\u03b1 \u03bb\u03b5\u03c0\u03c4\u03cc",minutes:"%d \u03bb\u03b5\u03c0\u03c4\u03ac",hour:"\u03c0\u03b5\u03c1\u03af\u03c0\u03bf\u03c5 \u03bc\u03af\u03b1 \u03ce\u03c1\u03b1",hours:"\u03c0\u03b5\u03c1\u03af\u03c0\u03bf\u03c5 %d \u03ce\u03c1\u03b5\u03c2",day:"\u03bc\u03af\u03b1 \u03bc\u03ad\u03c1\u03b1",days:"%d \u03bc\u03ad\u03c1\u03b5\u03c2",month:"\u03c0\u03b5\u03c1\u03af\u03c0\u03bf\u03c5 \u03ad\u03bd\u03b1 \u03bc\u03ae\u03bd\u03b1",months:"%d \u03bc\u03ae\u03bd\u03b5\u03c2",year:"\u03c0\u03b5\u03c1\u03af\u03c0\u03bf\u03c5 \u03ad\u03bd\u03b1 \u03c7\u03c1\u03cc\u03bd\u03bf",years:"%d \u03c7\u03c1\u03cc\u03bd\u03b9\u03b1"},jQuery.timeago.settings.strings["en-short"]={prefixAgo:null,prefixFromNow:null,suffixAgo:"",suffixFromNow:"",seconds:"1m",minute:"1m",minutes:"%dm",hour:"1h",hours:"%dh",day:"1d",days:"%dd",month:"1mo",months:"%dmo",year:"1yr",years:"%dyr",wordSeparator:" ",numbers:[]},jQuery.timeago.settings.strings["es-short"]={prefixAgo:null,prefixFromNow:null,suffixAgo:"",suffixFromNow:"",seconds:"1m",minute:"1m",minutes:"%dm",hour:"1h",hours:"%dh",day:"1d",days:"%dd",month:"1me",months:"%dme",year:"1a",years:"%da",wordSeparator:" ",numbers:[]},jQuery.timeago.settings.strings.es={prefixAgo:"hace",prefixFromNow:"dentro de",suffixAgo:"",suffixFromNow:"",seconds:"menos de un minuto",minute:"un minuto",minutes:"unos %d minutos",hour:"una hora",hours:"%d horas",day:"un d\xeda",days:"%d d\xedas",month:"un mes",months:"%d meses",year:"un a\xf1o",years:"%d a\xf1os"},jQuery.timeago.settings.strings.et={prefixAgo:null,prefixFromNow:null,suffixAgo:"tagasi",suffixFromNow:"p\xe4rast",seconds:function(t,e){return 0>e?"v\xe4hem kui minuti aja":"v\xe4hem kui minut aega"},minute:function(t,e){return 0>e?"umbes minuti aja":"umbes minut aega"},minutes:function(t,e){return 0>e?"%d minuti":"%d minutit"},hour:function(t,e){return 0>e?"umbes tunni aja":"umbes tund aega"},hours:function(t,e){return 0>e?"%d tunni":"%d tundi"},day:function(t,e){return 0>e?"umbes p\xe4eva":"umbes p\xe4ev"},days:function(t,e){return 0>e?"%d p\xe4eva":"%d p\xe4eva"},month:function(t,e){return 0>e?"umbes kuu aja":"umbes kuu aega"},months:function(t,e){return 0>e?"%d kuu":"%d kuud"},year:function(t,e){return 0>e?"umbes aasta aja":"umbes aasta aega"},years:function(t,e){return 0>e?"%d aasta":"%d aastat"}},jQuery.timeago.settings.strings.fa={prefixAgo:null,prefixFromNow:null,suffixAgo:"\u067e\u06cc\u0634",suffixFromNow:"\u0627\u0632 \u062d\u0627\u0644",seconds:"\u06a9\u0645\u062a\u0631 \u0627\u0632 \u06cc\u06a9 \u062f\u0642\u06cc\u0642\u0647",minute:"\u062d\u062f\u0648\u062f \u06cc\u06a9 \u062f\u0642\u06cc\u0642\u0647",minutes:"%d \u062f\u0642\u06cc\u0642\u0647",hour:"\u062d\u062f\u0648\u062f \u06cc\u06a9 \u0633\u0627\u0639\u062a",hours:"\u062d\u062f\u0648\u062f %d \u0633\u0627\u0639\u062a",day:"\u06cc\u06a9 \u0631\u0648\u0632",days:"%d \u0631\u0648\u0632",month:"\u062d\u062f\u0648\u062f \u06cc\u06a9 \u0645\u0627\u0647",months:"%d \u0645\u0627\u0647",year:"\u062d\u062f\u0648\u062f \u06cc\u06a9 \u0633\u0627\u0644",years:"%d \u0633\u0627\u0644",wordSeparator:" "},jQuery.timeago.settings.strings.fi={prefixAgo:null,prefixFromNow:null,suffixAgo:"sitten",suffixFromNow:"tulevaisuudessa",seconds:"alle minuutti",minute:"minuutti",minutes:"%d minuuttia",hour:"tunti",hours:"%d tuntia",day:"p\xe4iv\xe4",days:"%d p\xe4iv\xe4\xe4",month:"kuukausi",months:"%d kuukautta",year:"vuosi",years:"%d vuotta"},jQuery.timeago.settings.strings["fr-short"]={prefixAgo:"il y a",prefixFromNow:"d'ici",seconds:"moins d'une minute",minute:"une minute",minutes:"%d minutes",hour:"une heure",hours:"%d heures",day:"un jour",days:"%d jours",month:"un mois",months:"%d mois",year:"un an",years:"%d ans"},jQuery.timeago.settings.strings.fr={prefixAgo:"il y a",prefixFromNow:"d'ici",seconds:"moins d'une minute",minute:"environ une minute",minutes:"environ %d minutes",hour:"environ une heure",hours:"environ %d heures",day:"environ un jour",days:"environ %d jours",month:"environ un mois",months:"environ %d mois",year:"un an",years:"%d ans"},jQuery.timeago.settings.strings.gl={prefixAgo:"hai",prefixFromNow:"dentro de",suffixAgo:"",suffixFromNow:"",seconds:"menos dun minuto",minute:"un minuto",minutes:"uns %d minutos",hour:"unha hora",hours:"%d horas",day:"un d\xeda",days:"%d d\xedas",month:"un mes",months:"%d meses",year:"un ano",years:"%d anos"},jQuery.timeago.settings.strings.he={prefixAgo:"\u05dc\u05e4\u05e0\u05d9",prefixFromNow:"\u05e2\u05d5\u05d3",seconds:"\u05e4\u05d7\u05d5\u05ea \u05de\u05d3\u05e7\u05d4",minute:"\u05d3\u05e7\u05d4",minutes:"%d \u05d3\u05e7\u05d5\u05ea",hour:"\u05e9\u05e2\u05d4",hours:function(t){return 2==t?"\u05e9\u05e2\u05ea\u05d9\u05d9\u05dd":"%d \u05e9\u05e2\u05d5\u05ea"},day:"\u05d9\u05d5\u05dd",days:function(t){return 2==t?"\u05d9\u05d5\u05de\u05d9\u05d9\u05dd":"%d \u05d9\u05de\u05d9\u05dd"},month:"\u05d7\u05d5\u05d3\u05e9",months:function(t){return 2==t?"\u05d7\u05d5\u05d3\u05e9\u05d9\u05d9\u05dd":"%d \u05d7\u05d5\u05d3\u05e9\u05d9\u05dd"},year:"\u05e9\u05e0\u05d4",years:function(t){return 2==t?"\u05e9\u05e0\u05ea\u05d9\u05d9\u05dd":"%d \u05e9\u05e0\u05d9\u05dd"}},function(){var t;t=function(t,e,n,i){var r;return r=t%10,1===r&&(1===t||t>20)?e:r>1&&5>r&&(t>20||10>t)?n:i},jQuery.timeago.settings.strings.hr={prefixAgo:"prije",prefixFromNow:"za",suffixAgo:null,suffixFromNow:null,second:"sekundu",seconds:function(e){return t(e,"%d sekundu","%d sekunde","%d sekundi")},minute:"oko minutu",minutes:function(e){return t(e,"%d minutu","%d minute","%d minuta")},hour:"oko jedan sat",hours:function(e){return t(e,"%d sat","%d sata","%d sati")},day:"jedan dan",days:function(e){return t(e,"%d dan","%d dana","%d dana")},month:"mjesec dana",months:function(e){return t(e,"%d mjesec","%d mjeseca","%d mjeseci")},year:"prije godinu dana",years:function(e){return t(e,"%d godinu","%d godine","%d godina")},wordSeparator:" "}}.call(this),jQuery.timeago.settings.strings.hu={prefixAgo:null,prefixFromNow:null,suffixAgo:null,suffixFromNow:null,seconds:"kevesebb mint egy perce",minute:"k\xf6r\xfclbel\xfcl egy perce",minutes:"%d perce",hour:"k\xf6r\xfclbel\xfcl egy \xf3r\xe1ja",hours:"k\xf6r\xfclbel\xfcl %d \xf3r\xe1ja",day:"k\xf6r\xfclbel\xfcl egy napja",days:"%d napja",month:"k\xf6r\xfclbel\xfcl egy h\xf3napja",months:"%d h\xf3napja",year:"k\xf6r\xfclbel\xfcl egy \xe9ve",years:"%d \xe9ve"},jQuery.timeago.settings.strings.hy={prefixAgo:null,prefixFromNow:null,suffixAgo:"\u0561\u057c\u0561\u057b",suffixFromNow:"\u0570\u0565\u057f\u0578",seconds:"\u057e\u0561\u0575\u0580\u056f\u0575\u0561\u0576\u0576\u0565\u0580",minute:"\u0574\u0565\u056f \u0580\u0578\u057a\u0565",minutes:"%d \u0580\u0578\u057a\u0565",hour:"\u0574\u0565\u056f \u056a\u0561\u0574",hours:"%d \u056a\u0561\u0574",day:"\u0574\u0565\u056f \u0585\u0580",days:"%d \u0585\u0580",month:"\u0574\u0565\u056f \u0561\u0574\u056b\u057d",months:"%d \u0561\u0574\u056b\u057d",year:"\u0574\u0565\u056f \u057f\u0561\u0580\u056b",years:"%d \u057f\u0561\u0580\u056b"},jQuery.timeago.settings.strings.id={prefixAgo:null,prefixFromNow:null,suffixAgo:"yang lalu",suffixFromNow:"dari sekarang",seconds:"kurang dari semenit",minute:"sekitar satu menit",minutes:"%d menit",hour:"sekitar sejam",hours:"sekitar %d jam",day:"sehari",days:"%d hari",month:"sekitar sebulan",months:"%d bulan",year:"sekitar setahun",years:"%d tahun"},jQuery.timeago.settings.strings.is={prefixAgo:"fyrir",prefixFromNow:"eftir",suffixAgo:"s\xed\xf0an",suffixFromNow:null,seconds:"minna en m\xedn\xfatu",minute:"m\xedn\xfatu",minutes:"%d m\xedn\xfatum",hour:"klukkut\xedma",hours:"um %d klukkut\xedmum",day:"degi",days:"%d d\xf6gum",month:"m\xe1nu\xf0i",months:"%d m\xe1nu\xf0um",year:"\xe1ri",years:"%d \xe1rum",wordSeparator:" ",numbers:[]},jQuery.timeago.settings.strings.it={suffixAgo:"fa",suffixFromNow:"da ora",seconds:"meno di un minuto",minute:"circa un minuto",minutes:"%d minuti",hour:"circa un'ora",hours:"circa %d ore",day:"un giorno",days:"%d giorni",month:"circa un mese",months:"%d mesi",year:"circa un anno",years:"%d anni"},jQuery.timeago.settings.strings.ja={prefixAgo:"",prefixFromNow:"\u4eca\u304b\u3089",suffixAgo:"\u524d",suffixFromNow:"\u5f8c",seconds:"1 \u5206\u672a\u6e80",minute:"\u7d04 1 \u5206",minutes:"%d \u5206",hour:"\u7d04 1 \u6642\u9593",hours:"\u7d04 %d \u6642\u9593",day:"\u7d04 1 \u65e5",days:"\u7d04 %d \u65e5",month:"\u7d04 1 \u6708",months:"\u7d04 %d \u6708",year:"\u7d04 1 \u5e74",years:"\u7d04 %d \u5e74",wordSeparator:""},jQuery.timeago.settings.strings.jv={prefixAgo:null,prefixFromNow:null,suffixAgo:"kepungkur",suffixFromNow:"seko saiki",seconds:"kurang seko sakmenit",minute:"kurang luwih sakmenit",minutes:"%d menit",hour:"kurang luwih sakjam",hours:"kurang luwih %d jam",day:"sedina",days:"%d dina",month:"kurang luwih sewulan",months:"%d wulan",year:"kurang luwih setahun",years:"%d tahun"},jQuery.timeago.settings.strings.ko={suffixAgo:"\uc804",suffixFromNow:"\ud6c4",seconds:"1\ubd84 \uc774\ub0b4",minute:"1\ubd84",minutes:"%d\ubd84",hour:"1\uc2dc\uac04",hours:"%d\uc2dc\uac04",day:"\ud558\ub8e8",days:"%d\uc77c",month:"\ud55c \ub2ec",months:"%d\ub2ec",year:"1\ub144",years:"%d\ub144",wordSeparator:" "},jQuery.timeago.settings.strings.lt={prefixAgo:"prie\u0161",prefixFromNow:null,suffixAgo:null,suffixFromNow:"nuo dabar",seconds:"%d sek.",minute:"min.",minutes:"%d min.",hour:"val.",hours:"%d val.",day:"1 d.",days:"%d d.",month:"m\u0117n.",months:"%d m\u0117n.",year:"metus",years:"%d metus",wordSeparator:" ",numbers:[]},function(){jQuery.timeago.settings.strings.mk={prefixAgo:"\u043f\u0440\u0435\u0434",prefixFromNow:"\u0437\u0430",suffixAgo:null,suffixFromNow:null,seconds:"%d \u0441\u0435\u043a\u0443\u043d\u0434\u0438",minute:"%d \u043c\u0438\u043d\u0443\u0442\u0430",minutes:"%d \u043c\u0438\u043d\u0443\u0442\u0438",hour:"%d \u0447\u0430\u0441",hours:"%d \u0447\u0430\u0441\u0430",day:"%d \u0434\u0435\u043d",days:"%d \u0434\u0435\u043d\u043e\u0432\u0438",month:"%d \u043c\u0435\u0441\u0435\u0446",months:"%d \u043c\u0435\u0441\u0435\u0446\u0438",year:"%d \u0433\u043e\u0434\u0438\u043d\u0430",years:"%d \u0433\u043e\u0434\u0438\u043d\u0438"}}(),jQuery.timeago.settings.strings.nl={prefixAgo:null,prefixFromNow:"",suffixAgo:"geleden",suffixFromNow:"van nu",seconds:"minder dan een minuut",minute:"ongeveer een minuut",minutes:"%d minuten",hour:"ongeveer een uur",hours:"ongeveer %d uur",day:"een dag",days:"%d dagen",month:"ongeveer een maand",months:"%d maanden",year:"ongeveer een jaar",years:"%d jaar",wordSeparator:" ",numbers:[]},jQuery.timeago.settings.strings.no={prefixAgo:"for",prefixFromNow:"om",suffixAgo:"siden",suffixFromNow:"",seconds:"mindre enn et minutt",minute:"ca. et minutt",minutes:"%d minutter",hour:"ca. en time",hours:"ca. %d timer",day:"en dag",days:"%d dager",month:"ca. en m\xe5ned",months:"%d m\xe5neder",year:"ca. et \xe5r",years:"%d \xe5r"},function(){function t(t,e,n){var i=t%10;return i>1&&5>i&&(t>20||10>t)?e:n}jQuery.timeago.settings.strings.pl={prefixAgo:null,prefixFromNow:"za",suffixAgo:"temu",suffixFromNow:null,seconds:"mniej ni\u017c minut\u0119",minute:"minut\u0119",minutes:function(e){return t(e,"%d minuty","%d minut")},hour:"godzin\u0119",hours:function(e){return t(e,"%d godziny","%d godzin")},day:"dzie\u0144",days:"%d dni",month:"miesi\u0105c",months:function(e){return t(e,"%d miesi\u0105ce","%d miesi\u0119cy")},year:"rok",years:function(e){return t(e,"%d lata","%d lat")}}}(),jQuery.timeago.settings.strings["pt-br"]={prefixAgo:"h\xe1",prefixFromNow:"em",suffixAgo:null,suffixFromNow:null,seconds:"alguns segundos",minute:"um minuto",minutes:"%d minutos",hour:"uma hora",hours:"%d horas",day:"um dia",days:"%d dias",month:"um m\xeas",months:"%d meses",year:"um ano",years:"%d anos"},jQuery.timeago.settings.strings.pt={suffixAgo:"atr\xe1s",suffixFromNow:"a partir de agora",seconds:"menos de um minuto",minute:"cerca de um minuto",minutes:"%d minutos",hour:"cerca de uma hora",hours:"cerca de %d horas",day:"um dia",days:"%d dias",month:"cerca de um m\xeas",months:"%d meses",year:"cerca de um ano",years:"%d anos"},jQuery.timeago.settings.strings.ro={prefixAgo:"acum",prefixFromNow:"in timp de",suffixAgo:"",suffixFromNow:"",seconds:"mai putin de un minut",minute:"un minut",minutes:"%d minute",hour:"o ora",hours:"%d ore",day:"o zi",days:"%d zile",month:"o luna",months:"%d luni",year:"un an",years:"%d ani"},function(){var t;t=function(t,e,n,i){var r;return r=t%10,1===r&&(1===t||t>20)?e:r>1&&5>r&&(t>20||10>t)?n:i},jQuery.timeago.settings.strings.rs={prefixAgo:"pre",prefixFromNow:"za",suffixAgo:null,suffixFromNow:null,second:"sekund",seconds:function(e){return t(e,"%d sekund","%d sekunde","%d sekundi")},minute:"oko minut",minutes:function(e){return t(e,"%d minut","%d minuta","%d minuta")},hour:"oko jedan sat",hours:function(e){return t(e,"%d sat","%d sata","%d sati")},day:"jedan dan",days:function(e){return t(e,"%d dan","%d dana","%d dana")},month:"mesec dana",months:function(e){return t(e,"%d mesec","%d meseca","%d meseci")},year:"godinu dana",years:function(e){return t(e,"%d godinu","%d godine","%d godina")},wordSeparator:" "}}.call(this),function(){function t(t,e,n,i){var r=t%10;return 1==r&&(1==t||t>20)?e:r>1&&5>r&&(t>20||10>t)?n:i}jQuery.timeago.settings.strings.ru={prefixAgo:null,prefixFromNow:"\u0447\u0435\u0440\u0435\u0437",suffixAgo:"\u043d\u0430\u0437\u0430\u0434",suffixFromNow:null,seconds:"\u043c\u0435\u043d\u044c\u0448\u0435 \u043c\u0438\u043d\u0443\u0442\u044b",minute:"\u043c\u0438\u043d\u0443\u0442\u0443",minutes:function(e){return t(e,"%d \u043c\u0438\u043d\u0443\u0442\u0430","%d \u043c\u0438\u043d\u0443\u0442\u044b","%d \u043c\u0438\u043d\u0443\u0442")},hour:"\u0447\u0430\u0441",hours:function(e){return t(e,"%d \u0447\u0430\u0441","%d \u0447\u0430\u0441\u0430","%d \u0447\u0430\u0441\u043e\u0432")},day:"\u0434\u0435\u043d\u044c",days:function(e){return t(e,"%d \u0434\u0435\u043d\u044c","%d \u0434\u043d\u044f","%d \u0434\u043d\u0435\u0439")},month:"\u043c\u0435\u0441\u044f\u0446",months:function(e){return t(e,"%d \u043c\u0435\u0441\u044f\u0446","%d \u043c\u0435\u0441\u044f\u0446\u0430","%d \u043c\u0435\u0441\u044f\u0446\u0435\u0432")},year:"\u0433\u043e\u0434",years:function(e){return t(e,"%d \u0433\u043e\u0434","%d \u0433\u043e\u0434\u0430","%d \u043b\u0435\u0442")}}}(),jQuery.timeago.settings.strings.sk={prefixAgo:"pred",prefixFromNow:null,suffixAgo:null,suffixFromNow:null,seconds:"menej ne\u017e min\xfatou",minute:"min\xfatou",minutes:"%d min\xfatami",hour:"hodinou",hours:"%d hodinami",day:"1 d\u0148om",days:"%d d\u0148ami",month:"1 mesiacom",months:"%d mesiacmi",year:"1 rokom",years:"%d rokmi"},function(){var t;t=function(t,e,n){return 2==t?e:n},jQuery.timeago.settings.strings.sl={prefixAgo:"pred",prefixFromNow:"\u010dez",suffixAgo:null,suffixFromNow:null,second:"sekundo",seconds:function(e){return t(e,"%d sekundama","%d sekundami")},minute:"minuto",minutes:function(e){return t(e,"%d minutama","%d minutami")},hour:"uro",hours:function(e){return t(e,"%d urama","%d urami")},day:"dnevom",days:function(e){return t(e,"%d dnevi","%d dnevi")},month:"enim mescem",months:function(e){return t(e,"%d mesecema","%d meseci")},year:"enim letom",years:function(e){return t(e,"%d letoma","%d leti")},wordSeparator:" "}}.call(this),jQuery.timeago.settings.strings.sv={prefixAgo:"f\xf6r",prefixFromNow:"om",suffixAgo:"sedan",suffixFromNow:"",seconds:"mindre \xe4n en minut",minute:"ungef\xe4r en minut",minutes:"%d minuter",hour:"ungef\xe4r en timme",hours:"ungef\xe4r %d timmar",day:"en dag",days:"%d dagar",month:"ungef\xe4r en m\xe5nad",months:"%d m\xe5nader",year:"ungef\xe4r ett \xe5r",years:"%d \xe5r"},jQuery.timeago.settings.strings.th={prefixAgo:null,prefixFromNow:null,suffixAgo:"\u0e17\u0e35\u0e48\u0e41\u0e25\u0e49\u0e27",suffixFromNow:"\u0e08\u0e32\u0e01\u0e15\u0e2d\u0e19\u0e19\u0e35\u0e49",seconds:"\u0e19\u0e49\u0e2d\u0e22\u0e01\u0e27\u0e48\u0e32\u0e2b\u0e19\u0e36\u0e48\u0e07\u0e19\u0e32\u0e17\u0e35",minute:"\u0e1b\u0e23\u0e30\u0e21\u0e32\u0e13\u0e2b\u0e19\u0e36\u0e48\u0e07\u0e19\u0e32\u0e17\u0e35",minutes:"%d \u0e19\u0e32\u0e17\u0e35",hour:"\u0e1b\u0e23\u0e30\u0e21\u0e32\u0e13\u0e2b\u0e19\u0e36\u0e48\u0e07\u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07",hours:"\u0e1b\u0e23\u0e30\u0e21\u0e32\u0e13 %d \u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07",day:"\u0e2b\u0e19\u0e36\u0e48\u0e07\u0e27\u0e31\u0e19",days:"%d \u0e27\u0e31\u0e19",month:"\u0e1b\u0e23\u0e30\u0e21\u0e32\u0e13\u0e2b\u0e19\u0e36\u0e48\u0e07\u0e40\u0e14\u0e37\u0e2d\u0e19",months:"%d \u0e40\u0e14\u0e37\u0e2d\u0e19",year:"\u0e1b\u0e23\u0e30\u0e21\u0e32\u0e13\u0e2b\u0e19\u0e36\u0e48\u0e07\u0e1b\u0e35",years:"%d \u0e1b\u0e35",wordSeparator:"",numbers:[]},jQuery.timeago.settings.strings.tr={suffixAgo:"\xf6nce",suffixFromNow:null,seconds:"1 dakikadan",minute:"1 dakika",minutes:"%d dakika",hour:"1 saat",hours:"%d saat",day:"1 g\xfcn",days:"%d g\xfcn",month:"1 ay",months:"%d ay",year:"1 y\u0131l",years:"%d y\u0131l"},function(){function t(t,e,n,i){var r=t%10;return 1==r&&(1==t||t>20)?e:r>1&&5>r&&(t>20||10>t)?n:i}jQuery.timeago.settings.strings.uk={prefixAgo:null,prefixFromNow:"\u0447\u0435\u0440\u0435\u0437",suffixAgo:"\u0442\u043e\u043c\u0443",suffixFromNow:null,seconds:"\u043c\u0435\u043d\u0448\u0435 \u0445\u0432\u0438\u043b\u0438\u043d\u0438",minute:"\u0445\u0432\u0438\u043b\u0438\u043d\u0430",minutes:function(e){return t(e,"%d \u0445\u0432\u0438\u043b\u0438\u043d\u0430","%d \u0445\u0432\u0438\u043b\u0438\u043d\u0438","%d \u0445\u0432\u0438\u043b\u0438\u043d")},hour:"\u0433\u043e\u0434\u0438\u043d\u0430",hours:function(e){return t(e,"%d \u0433\u043e\u0434\u0438\u043d\u0430","%d \u0433\u043e\u0434\u0438\u043d\u0438","%d \u0433\u043e\u0434\u0438\u043d")},day:"\u0434\u0435\u043d\u044c",days:function(e){return t(e,"%d \u0434\u0435\u043d\u044c","%d \u0434\u043d\u0456","%d \u0434\u043d\u0456\u0432")},month:"\u043c\u0456\u0441\u044f\u0446\u044c",months:function(e){return t(e,"%d \u043c\u0456\u0441\u044f\u0446\u044c","%d \u043c\u0456\u0441\u044f\u0446\u0456","%d \u043c\u0456\u0441\u044f\u0446\u0456\u0432")},year:"\u0440\u0456\u043a",years:function(e){return t(e,"%d \u0440\u0456\u043a","%d \u0440\u043e\u043a\u0438","%d \u0440\u043e\u043a\u0456\u0432")}}}(),jQuery.timeago.settings.strings.uz={prefixAgo:null,prefixFromNow:"keyin",suffixAgo:"avval",suffixFromNow:null,seconds:"bir necha soniya",minute:"1 daqiqa",minutes:function(t){return"%d daqiqa"},hour:"1 soat",hours:function(t){return"%d soat"},day:"1 kun",days:function(t){return"%d kun"},month:"1 oy",months:function(t){return"%d oy"},year:"1 yil",years:function(t){return"%d yil"},wordSeparator:" "},jQuery.timeago.settings.strings.vi={prefixAgo:"c\xe1ch \u0111\xe2y",prefixFromNow:null,suffixAgo:null,suffixFromNow:"tr\u01b0\u1edbc",seconds:"ch\u01b0a \u0111\u1ebfn m\u1ed9t ph\xfat",minute:"kho\u1ea3ng m\u1ed9t ph\xfat",minutes:"%d ph\xfat",hour:"kho\u1ea3ng m\u1ed9t ti\u1ebfng",hours:"kho\u1ea3ng %d ti\u1ebfng",day:"m\u1ed9t ng\xe0y",days:"%d ng\xe0y",month:"kho\u1ea3ng m\u1ed9t th\xe1ng",months:"%d th\xe1ng",year:"kho\u1ea3ng m\u1ed9t n\u0103m",years:"%d n\u0103m",wordSeparator:" ",numbers:[]},jQuery.timeago.settings.strings["zh-CN"]={prefixAgo:null,prefixFromNow:"\u4ece\u73b0\u5728\u5f00\u59cb",suffixAgo:"\u4e4b\u524d",suffixFromNow:null,seconds:"\u4e0d\u52301\u5206\u949f",minute:"\u5927\u7ea61\u5206\u949f",minutes:"%d\u5206\u949f",hour:"\u5927\u7ea61\u5c0f\u65f6",hours:"\u5927\u7ea6%d\u5c0f\u65f6",day:"1\u5929",days:"%d\u5929",month:"\u5927\u7ea61\u4e2a\u6708",months:"%d\u6708",year:"\u5927\u7ea61\u5e74",years:"%d\u5e74",numbers:[],wordSeparator:""},jQuery.timeago.settings.strings["zh-TW"]={prefixAgo:null,prefixFromNow:"\u5f9e\u73fe\u5728\u958b\u59cb",suffixAgo:"\u4e4b\u524d",suffixFromNow:null,seconds:"\u4e0d\u52301\u5206\u9418",minute:"\u5927\u7d041\u5206\u9418",minutes:"%d\u5206\u9418",hour:"\u5927\u7d041\u5c0f\u6642",hours:"%d\u5c0f\u6642",day:"\u5927\u7d041\u5929",days:"%d\u5929",month:"\u5927\u7d041\u500b\u6708",months:"%d\u500b\u6708",year:"\u5927\u7d041\u5e74",years:"%d\u5e74",numbers:[],wordSeparator:""};var quoteApp=angular.module("quoteClient",["rails"]);quoteApp.controller("itemsClientControllerParent",["$scope",function(t){t.initItems=function(e,n){t.items=e,t.pricing_tables=n,t.pricing_table_ids=jQuery.map(t.pricing_tables,function(t,e){return t.id}),t.miscData={},t.miscData.selected_radio_pricing_table_id=null;var i=!1,r=!1;angular.forEach(t.pricing_tables,function(e,n){"radio"==e.kind&&(r=!0,1==e.selected&&(i=!0,t.miscData.selected_radio_pricing_table_id=e.id))}),1==r&&0==i&&angular.forEach(t.pricing_tables,function(e,n){"radio"==e.kind&&0==e.selected&&0==i&&(e.selected=!0,t.miscData.selected_radio_pricing_table_id=e.id)})}}]),quoteApp.controller("itemsClientController",["$scope",function(t){t.maxDecimals=2,t.maxDecimalsPrice=2,"undefined"!=typeof window.Quotes.vars.decimals&&(t.maxDecimalsPrice=window.Quotes.vars.decimals),"undefined"!=typeof window.Quotes.vars.always_show_two_decimals&&(t.always_show_two_decimals=window.Quotes.vars.always_show_two_decimals),t.initItems=function(e,n){t.pricing_table=n,angular.forEach(t.pricing_tables,function(e,n){e.id==t.pricing_table.id&&(t.pricing_table=t.$parent.pricing_tables[n])}),t.child_items=e,angular.forEach(t.$parent.items,function(e,n){angular.forEach(t.child_items,function(i,r){e.id==i.id&&(t.child_items[r]=t.$parent.items[n])})})},t.getItem=function(e){return _.find(t.items,function(t){t.id==e})},t.changed_quantity=function(e){var n=t.child_items[e];isNaN(n.quantity)&&(n.quantity=1),0==n.optional_checked&&(n.optional_checked=!0)
},t.total_formatted=function(e,n){var i=t.child_items[e],r=0,o=0;return"discount"==i.kind&&"relative-all"==i.discount_type?(r=t.get_price(i,n),isNaN(r)&&(r=0)):(o=n?parseFloat(i.discounted_price)*(1+parseFloat(i.vat)/100):parseFloat(i.discounted_price),r=i.quantity*o,isNaN(r)&&(r=0),0>r&&(r=0)),decimals=0,t.always_show_two_decimals&&1==t.always_show_two_decimals&&(decimals=2),r.toFixed(t.maxDecimals)%1!=0&&0==isNaN(r)&&(decimals=t.maxDecimals),r=t.myRound(r,"total"),r=$.formatCurrency.toMoney(r.toString(),{roundToDecimalPlace:decimals})},t.myRound=function(e,n){var i=t.maxDecimals;"price"==n&&(i=t.maxDecimalsPrice);var r=Math.pow(10,i);return Math.round(e*r)/r},t.get_price=function(e,n){var i;if(1==e.editable_quantity&&"item"==e.kind){var r=parseFloat(e.quantity);0>r&&(r=0),i=n?r*parseFloat(e.discounted_price)*(1+parseFloat(e.vat)/100):r*parseFloat(e.discounted_price),i&&(i=t.myRound(i,"price"))}else if("discount"==e.kind&&"relative-all"==e.discount_type){var o=!1;1==n&&void 0!=window.Quotes.vars.account_id&&2664==window.Quotes.vars.account_id&&void 0!=window.Quotes.vars.proposal_id&&window.Quotes.vars.proposal_id<77e3&&(o=!0),i=-t.totalPrice(e.period,o,!1,"total",!1,e.pricing_table_id)*e.discount/100,i&&(n&&0==o&&(i*=1+parseFloat(e.vat)/100),i=t.myRound(i,"price"))}else i=parseFloat(n?e.total_vat:e.total),i&&(i=t.myRound(i,"price"));return isNaN(i)&&(i=0),i},t.selectedPaymentOption=function(e){angular.forEach(t.child_items,function(t,n){"payment"==t.kind&&n!=e&&1==t.optional_checked&&(t.optional_checked=!1)})},t.selectedThisPricingTable=function(){angular.forEach(t.pricing_tables,function(e,n){"radio"==e.kind&&(e.id==t.pricing_table.id?(t.$parent.miscData.selected_radio_pricing_table_id=e.id,e.selected=!0):e.selected=!1)})},t.getPricingTableForItem=function(e){var n=null;return angular.forEach(t.pricing_tables,function(t,i){t.id==e.pricing_table_id&&(n=t)}),n},t.totalPaymentPrice=function(){var e=!1,n=!1,i=0;angular.forEach(t.items,function(t,e){"payment"==t.kind&&(n=!0)}),angular.forEach(t.child_items,function(t,n){"payment"==t.kind&&(0==e&&(i=n),e=!0)});var r="",o="",s="";if(1==e){var a=0;angular.forEach(t.child_items,function(t,e){return"payment"==t.kind&&1==t.optional_checked?void(a=e):void 0}),0==a&&(a=i),r=t.paymentOption(a,!0,!0,!1),$(".replace_with_payment_name").val($(document).find("title").text()+" - "+t.child_items[a].name),0>=r&&(r=t.totalPrice("",!0,!1,"grandtotal")),o=t.paymentOption(a,!1,!0,!0),total_price_after_discount_with_vat=t.paymentOption(a,!0,!0,!0)}else 0==n&&(r=t.totalPrice("",!0,!1,"grandtotal"),o=t.totalPrice("",!1,!1,"grandtotal"),total_price_after_discount_with_vat=t.totalPrice("",!0,!1,"grandtotal"));return""!==o&&(t.replaceValues(".replace_with_total_cost",formatCurrencyNiceRounding(o)),t.replaceValues(".replace_with_total_cost_with_tax",formatCurrencyNiceRounding(total_price_after_discount_with_vat))),""!==r&&(window.Quotes.vars.stripe_amount=Math.round(100*r),t.replaceValues(".replace_with_amount_to_be_paid_unformatted",t.myRound(r,"total")),t.replaceValues(".replace_with_amount_to_be_paid",formatCurrencyNiceRounding(r))),r},t.replaceValues=function(t,e){$(t).each(function(){"input"==$(this).prop("tagName").toLowerCase()?$(this).val(e):$(this).html(e)})},t.totalPrice=function(e,n,i,r,o,s){"undefined"==typeof i&&(i=!0),"undefined"==typeof o&&(o=!0),"undefined"==typeof s&&(s=null);var a=0;if("grandtotal"==r)angular.forEach(t.$parent.items,function(i,r){var o=t.getPricingTableForItem(i);o&&o.selected&&("discount"==i.kind||"item"==i.kind)&&(i.period==e||null==i.period&&0==e)&&(1!=i.optional||0!=i.optional_checked)&&(a+=t.get_price(i,n))});else{var l=t.child_items;null!=s&&(l=t.$parent.items),angular.forEach(l,function(i,r){(null==s||s==i.pricing_table_id)&&("discount"==i.kind&&1==o||"item"==i.kind)&&(i.period==e||null==i.period&&0==e)&&(1!=i.optional||0!=i.optional_checked)&&(a+=t.get_price(i,n))})}return decimals=0,t.always_show_two_decimals&&1==t.always_show_two_decimals&&(decimals=2),a.toFixed(t.maxDecimals)%1!=0&&0==isNaN(a)&&(decimals=t.maxDecimals),1==i&&(a=$.formatCurrency.toMoney(a.toString(),{roundToDecimalPlace:decimals})),a},t.subtotalPrice=function(e,n,i,r){"undefined"==typeof r&&(r=!0);var o=0,s=t.child_items.slice().reverse(),a=!1;return angular.forEach(s,function(r,l){l=s.length-1-l,e>=l&&(("undefined"==typeof r||"group"==r.kind)&&(a=!0),0==a&&("discount"==r.kind||"item"==r.kind)&&(0==i&&(null==r.period||0==r.period)||0!=i&&r.period==i)&&(1!=r.optional||0!=r.optional_checked)&&(o+=t.get_price(r,n)))}),decimals=0,t.always_show_two_decimals&&1==t.always_show_two_decimals&&(decimals=2),o.toFixed(t.maxDecimals)%1!=0&&0==isNaN(o)&&(decimals=t.maxDecimals),1==r&&(o=$.formatCurrency.toMoney(o.toString(),{roundToDecimalPlace:decimals})),o},t.paymentOption=function(e,n,i,r){"undefined"==typeof i&&(i=!1),decimals=0,t.always_show_two_decimals&&1==t.always_show_two_decimals&&(decimals=2);var o=0,s=t.child_items,a=s[e],l=!1,c="",u="",o=t.totalPrice(0,!1,!1,"grandtotal"),h=t.totalPrice(0,!0,!1,"grandtotal"),d=1+a.vat/100,p=parseFloat(a.price),f=1!=a.deposit_amount;a.discount&&""!=a.discount&&("relative"==a.discount_type?(o*=(100-a.discount)/100,h*=(100-a.discount)/100):"absolute"==a.discount_type&&(o-=a.discount,h-=a.discount*d));var m=o,g=h,v=0;if(p&&""!=p&&0!=p){if(1==f){var y=p;p=o*(y/100),v=h*(y/100)}else{var y=p;p=y,v=y*d}c+=formatCurrencyNiceRounding(p,decimals),u+=formatCurrencyNiceRounding(v,decimals),o-=p,h-=v}return 1==i?0>=p||1==r?1==n?t.myRound(g,"price"):t.myRound(m,"price"):1==n?t.myRound(v,"price"):t.myRound(p,"price"):(""!=a.quantity&&a.quantity>0?(""!=c&&(c+=" + ",u+=" + "),a.quantity>0&&(c+=Math.round(a.quantity)+" x ",u+=Math.round(a.quantity)+" x "),c+=formatCurrencyNiceRounding(o/a.quantity,decimals),u+=formatCurrencyNiceRounding(h/a.quantity,decimals)):(""!=c&&(c+=" + ",u+=" + "),c+=formatCurrencyNiceRounding(o,decimals),u+=formatCurrencyNiceRounding(h,decimals)),""!=a.quantity&&a.quantity>0||p&&""!=p&&0!=p?(c+=" = <b>"+formatCurrencyNiceRounding(m,decimals)+"</b>",u+=" = <b>"+formatCurrencyNiceRounding(g,decimals)+"</b>"):(c="<b>"+c+"</b>",u="<b>"+u+"</b>"),1==n?u:c)},t.testButton=function(){}}]),quoteApp.controller("itemRowClientController",["$scope",function(t){}]);var textTemplateEdit=angular.module("textTemplateEdit",["rails","ui.sortable","ui.bootstrap.modal","ui.bootstrap.typeahead","template/typeahead/typeahead.html","ui.select2","truncate","pasvaz.bindonce","quoteClient"]);textTemplateEdit.config(["$httpProvider",function(t){t.defaults.headers.common["X-CSRF-Token"]=$("meta[name=csrf-token]").attr("content")}]),textTemplateEdit.config(["railsSerializerProvider",function(t){t.underscore(function(t){return t}).camelize(function(t){return t})}]);var beforeRequestContent=function(t){return function(e){var n=t,i=e;if(e={},e[n]=i,delete e[n].theme_id,delete e[n].proposal_emails,delete e[n].items,delete e[n].tokens,delete e[n].pricing_tables,e[n]&&e[n].sections){var r=0;angular.forEach(e[n].sections,function(t,i){if("(blank)"==e[n].sections[i].name&&(e[n].sections[i].name=""),e[n].sections[i].position=r,r++,t.areas){var o=0;angular.forEach(t.areas,function(t,r){delete e[n].sections[i].areas[r].choose_pricing_table,"template"==n&&(e[n].sections[i].areas[r].pricing_table_id=null),"(blank)"==e[n].sections[i].areas[r].name&&(e[n].sections[i].areas[r].name=""),e[n].sections[i].areas[r].position=o,o++})}})}}};textTemplateEdit.factory("Proposal",["railsResourceFactory",function(t){var e=t({url:"/proposals",name:"proposal",enableRootWrapping:!1,defaultParams:{cool_edit:!0}});return e.beforeRequest(beforeRequestContent("proposal")),e}]),textTemplateEdit.factory("Template",["railsResourceFactory",function(t){var e=t({url:"/templates",name:"template",enableRootWrapping:!1,defaultParams:{cool_edit:!0}});return e.beforeRequest(beforeRequestContent("template")),e}]),textTemplateEdit.factory("Block",["railsResourceFactory","railsSerializer",function(t,e){var n=t({url:"/blocks",name:"block",enableRootWrapping:!0,defaultParams:{},serializer:e(function(){this.exclude("created_at","updated_at","id","tags","showname")})});return n.afterResponse(function(t,e,n){"undefined"!=typeof t.name?t.showname=t.internal_name&&t.internal_name||t.name:angular.forEach(t,function(e,n){t[n].showname=e.internal_name&&e.internal_name||e.name})}),n}]),textTemplateEdit.controller("textTemplateEditController",["$scope","$http","Template","Proposal","Block",function(t,e,n,i,r){t.pageSize=80,t.currentPageBlocks=0,t.loadBlocksAutomatically=!0,t.blocks=[],t.numberOfPagesBlocks=function(){return Math.ceil(t.filteredBlocks.length/t.pageSize)},t.$watch("[block_query]",function(){0==t.loadBlocksAutomatically&&t.block_query.length>2&&t.loadBlocks(),0==t.loadBlocksAutomatically&&t.block_query.length<=2&&(t.blocks=[],t.tags=[],t.textBlockLibraryLoaded=!1),t.filteredBlocks=t.blocks.filter(t.blockFilter)},!0),t.$watch("[tags,blocks]",function(){t.filteredBlocks=t.blocks.filter(t.blockFilter)},!0),t.getTemplate=function(e){if(isNaN(e)){var i=e;t.template=new n(i),t.template_original=angular.copy(t.template)}else n.get(e).then(function(e){t.template=e,t.template_original=angular.copy(t.template)});t.is_proposal=!1},t.getProposal=function(e){if(isNaN(e)){var n=e;t.template=new i(n),t.template_original=angular.copy(t.template)}else i.get(e).then(function(e){t.template=e,t.template_original=angular.copy(t.template)});t.is_proposal=!0},t.loadTemplates=function(e){t.templates=e,t.start()},t.start=function(n){t.select2Options={multiple:!0,simple_tags:!0,selectOnBlur:!0,tags:function(){var e=[];return angular.forEach(t.tags,function(t,n){e.push(t.name)}),e}},t.getAvailableCustomTokens=function(t,n){return e.get("/proposals/custom_tokens",{params:{value:t,custom_token:n}}).then(function(t){return t.data.map(function(t){return t})})},t.block_query="",t.blockOrderColumn="showname",t.isEditing=!1,t.textBlockLibrary=!1,t.web_sample_proposal=$(".sample-proposal-container").length>0,0==t.template.sections.length&&(t.added_dummy_section=!0,t.addSection()),t.$on("ngRepeatFinished",function(e){1==t.added_dummy_section&&(1==t.template.sections.length&&(t.template.sections=[]),t.added_dummy_section=!1),init_proposal_show()}),setTimeout(function(){$(window).resize()},1e3)},t.template_click=function(n){if(1==t.web_sample_proposal)return void alert("Sign up to be able to do these actions.");if("append"==t.templates_dialog_kind){if(!n)return;t.template.append_template=!0,t.template.append_template_id=n.id,t.saveContent(),t.templates_dialog_close()}else if("change"==t.templates_dialog_kind){if(!n)return;if(0==t.template.sections.length||confirm("This will discard your current content. Are you sure?")){var i=n.theme_id!=t.template.theme_id;t.template.reload_template=!0,t.template.template_id=n.id,t.saveContent(),t.templates_dialog_close(),1==i&&("undefined"==typeof window.Quotes.views.themes_view?(window.Quotes.vars.close_theme_edit_window=!0,window.Quotes.vars.switch_to_theme_id=n.theme_id,window.Quotes.vars.themes_path="/themes/my_and_public_themes.json?theme_id="+n.theme_id,$(".edit-theme-button").click()):$(".theme-edit-panel .theme-list .theme[themeid='"+n.theme_id+"']").click())}}else if("copy_back"==t.templates_dialog_kind){var r="",o="";if(null==n){var o=prompt("Please enter new template's name","New template");if(null==o||0==o.length)return;r="?template_name="+o}else r="?template_id="+n.id;(o.length>0||confirm("Saved content from this proposal will overwrite the selected template.\nAre you sure?"))&&(e.put("/proposals/"+t.template.id+"/copy_to_template"+r,{}).success(function(){noty({text:"The content has been saved to the selected template.",dismissQueue:!0})}),t.templates_dialog_close())}t.refreshScroll()},t.change_template=function(){t.templates_dialog_open=!0,t.templates_dialog_header="Select a template that will replace the current content",t.templates_dialog_kind="change"},t.append_template=function(){t.templates_dialog_open=!0,t.templates_dialog_header="Select a template that will be appended to the end",t.templates_dialog_kind="append"},t.copy_back_to_template=function(){t.templates_dialog_open=!0,t.templates_dialog_copy_back_open=!0,t.templates_dialog_header="Select to which template you want to save this content",t.templates_dialog_kind="copy_back"},t.templates_dialog_close=function(){1==$(".intro-start").length&&setTimeout(function(){$(".intro-start").animate({top:0},300)},200),"change"==t.templates_dialog_kind&&0==t.template.sections.length&&(t.addSection(),t.template.sections[0].areas.push({kind:"text",name:"New area",content:"Click to edit..."})),t.templates_dialog_open=!1,t.templates_dialog_copy_back_open=!1,setTimeout(function(){initializeGalleryPopup()},2e3)},t.custom_tokens_dialog=function(){t.custom_tokens_dialog_open=!0,void 0==t.template.custom_tokens&&(t.template.custom_tokens=[]);var e=t.get_all_custom_tokens_from_content();angular.forEach(e,function(e,n){var i=!1;angular.forEach(t.template.custom_tokens,function(t,n){t.name==e.name&&(i=!0)}),0==i&&t.template.custom_tokens.push(e)})},t.custom_tokens_dialog_close=function(){t.custom_tokens_dialog_open=!1},t.save_area_dialog_close=function(){t.save_area_dialog_open=!1},t.pricing_table_dialog_close=function(){t.pricing_table_dialog_open=!1},t.get_all_custom_tokens_from_content=function(){var e=[],n=[],i=new RegExp("\\[\\w+\\]","gi");return angular.forEach(t.template.sections,function(t,e){if(t.name&&t.name.length>0){var r=t.name.match(i);null!=r&&(n=n.concat(r))}angular.forEach(t.areas,function(t,e){if("text"==t.kind){if(t.name&&t.name.length>0){var r=t.name.match(i);null!=r&&(n=n.concat(r))}if(t.content&&t.content.length>0){var r=t.content.match(i);null!=r&&(n=n.concat(r))}}})}),null!=n&&angular.forEach(n,function(n,i){var r=!0;angular.forEach(t.template.tokens,function(t,e){return n.toUpperCase()==("["+e+"]").toUpperCase()?void(r=!1):void 0}),n&&1==r&&e.push({name:n,value:""})}),e},t.addButtonClick=function(){alert("Add some sections and then drag me into them.")},t.leavingAlert=function(){var e=!1;return t.template&&t.template_original&&JSON.stringify(angular.copy(t.template))!==JSON.stringify(t.template_original)&&(e=!0),e?"Do you really want to leave this page? There are some unsaved changes.":null},t.saveContent=function(){return 1==t.web_sample_proposal?void alert("Sign up to be able to do these actions."):void(t.template&&($(".proposal-content").each(function(){$(this).css("min-height",$(this).height())}),t.template.update().then(function(){t.template_original=angular.copy(t.template),setTimeout(function(){t.refreshScroll(),noty({text:"Content successfully saved.",dismissQueue:!0}),$(".proposal-content").each(function(){$(this).css("min-height","0")})},1500)}),delete t.template.append_template,delete t.template.append_template_id,delete t.template.reload_template,delete t.template.template_ids))},t.tagToggle=function(t){t.selected=!t.selected},t.toggleTextBlockLibrary=function(){t.textBlockLibrary=!t.textBlockLibrary,1==t.textBlockLibrary?(setTimeout(function(){$(".text-block-input").focus()},200),1!=t.textBlockLibraryFirstTime&&1==t.loadBlocksAutomatically&&t.loadBlocks(),$(".sidebar-left .tabs-left > .tab1").css({left:"0px",opacity:0,visibility:"hidden"}),$(".sidebar-left .tabs-left > .tab2").css({left:"0px",opacity:1,visibility:"visible"})):($(".sidebar-left .tabs-left > .tab1").css({left:"0px",opacity:1,visibility:"visible"}),$(".sidebar-left .tabs-left > .tab2").css({left:"0px",opacity:0,visibility:"hidden"}),t.blocks.length>50&&(t.block_query="",t.textBlockLibraryFirstTime=!1,t.textBlockLibraryLoaded=!1,t.blocks=[],t.tags=[]))},t.toggleEdit=function(){var e=$(window).scrollTop();t.isEditing=!t.isEditing,0==t.isEditing&&1==t.textBlockLibrary&&t.toggleTextBlockLibrary(),t.updateStatus(),t.refreshScroll(),1==$(".intro-start").length&&(0==t.isEditing?$(".intro-start").animate({top:-36},300):$(".intro-start").animate({top:0},300)),setTimeout(function(){$(window).scrollTop(e)},0),setTimeout(function(){$(window).resize()},500),0==t.isEditing&&setTimeout(function(){initializeHelpPopovers()},500)},t.updateStatus=function(){1==window.Quotes.vars.edit_view_first&&($(".logo-container").hide(),t.coverPageHidden()||$(".proposal-info-container").hide(),$(".pdf-buttons-container").hide(),$(".proposal-buttons-client-container").hide(),$(".proposal-state-container").hide(),window.Quotes.vars.edit_view_first=!1),1==t.isEditing?(0==t.web_sample_proposal&&$(window).on("beforeunload",t.leavingAlert),$(".ui-sortable").sortable("enable"),$(".logo-container").slideUp(),t.coverPageHidden()||$(".proposal-info-container").slideUp(),$(".pdf-buttons-container").slideUp(),$(".proposal-buttons-client-container").slideUp(),$(".proposal-state-container").slideUp(),$(".sidebar-left-inner").css({position:"fixed"}),$(".sidebar-left .tabs-left > .scroll-tabs").css({position:"absolute"}),$(".sidebar-left .tabs-left > .tab2").css({display:"block"})):($(".ui-sortable").sortable("disable"),$(".logo-container").slideDown(),t.coverPageHidden()||$(".proposal-info-container").slideDown(),$(".pdf-buttons-container").slideDown(),$(".proposal-buttons-client-container").slideDown(),$(".proposal-state-container").slideDown(),$(".sidebar-left .tabs-left > .scroll-tabs").css({position:"static"}),$(".sidebar-left .tabs-left > .tab2").css({display:"none"}))},t.escapeRegExp=function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},t.process_content=function(e){return null==e?"":(void 0==t.template.custom_tokens&&(t.template.custom_tokens=[]),t.template&&-1!==e.indexOf("[")&&t.template.tokens&&(angular.forEach(t.template.tokens,function(n,i){n.length>0&&(e=e.replace(new RegExp("\\["+t.escapeRegExp(i)+"\\]","ig"),n))}),t.template.custom_tokens.length>0&&angular.forEach(t.template.custom_tokens,function(t,n){if(t.name.length>0&&t.value.length>0){var i=t.name;i=i.substring(1),i=i.substring(0,i.length-1),e=e.replace(new RegExp("\\["+i+"\\]","ig"),t.value)}})),e)},t.left_menu_click_event=function(e){var n=-25,i=$(".sample-proposal-top");return i.length>0&&(n=-i.outerHeight(!0)-10),"cover"==e?void $.scrollTo("#sectionsectioncover",500,{offset:n,axis:"y"}):void angular.forEach(t.template.sections,function(t,i){t.$$hashKey==e.$$hashKey&&$.scrollTo("#section"+e.$$hashKey,500,{offset:n,axis:"y"})})},t.coverPageHidden=function(t){return!$("#sectioncover").is(":visible")},t.addSection=function(){t.template.sections.push({name:"New section",areas:[]}),t.refreshScroll(),setTimeout(function(){$(window).resize()},0)},t.addSectionButton=function(){window.Quotes.vars.automatically_create_text_area?(t.template.sections.push({name:"New section",areas:[{kind:"text",name:"New area",content:"Click to edit..."}]}),t.refreshScroll(),setTimeout(function(){$(window).resize()},10)):t.addSection()},t.refreshScroll=function(){$('[data-spy="scroll"]').each(function(){$(this).scrollspy("refresh")})},t.selectedTags=function(){var e=[];return angular.forEach(t.tags,function(t,n){1==t.selected&&e.push(t)}),e},t.blockFilter=function(e){var n=!0,i=t.selectedTags();return i.length>0&&angular.forEach(i,function(t,i){n=n&&$.grep(e.tags,function(e){return e.id==t.id}).length>0}),-1!==(e.internal_name?e.internal_name:e.name).toLowerCase().indexOf(t.block_query.toLowerCase())&&n},t.isNotDestroyedArea=function(t){return t&&1!=t._destroy},t.isNotDestroyedSection=function(t){return t&&1!=t._destroy},t.modelChanged=function(){},t.arrayUnique=function(t){return t.reduce(function(t,e){return t.indexOf(e)<0&&t.push(e),t},[])},t.areDifferentByIds=function(e,n){var i=t.arrayUnique(e.map(function(t){return t.id})),r=t.arrayUnique(n.map(function(t){return t.id})),o=t.arrayUnique(i.concat(r));return o.length!==i.length},t.loadBlocks=function(e){t.textBlockLibraryFirstTime=!0,r.query({search_query:t.block_query}).then(function(n){var i=!1;0==t.blocks.length?i=!0:n&&(t.blocks.length!=n.length||t.areDifferentByIds(t.blocks,n))&&(i=!0),i&&(t.blocks=n,t.tags=[],angular.forEach(t.blocks,function(e,n){angular.forEach(e.tags,function(e,n){0==$.grep(t.tags,function(t){return t.id==e.id}).length&&t.tags.push(e)})}),void 0!==e&&e()),setTimeout(function(){$(window).resize()},10),t.textBlockLibraryLoaded=!0},function(t){})},t.addBlock=function(e){t.blocks.push(e),t.tags=[],angular.forEach(t.blocks,function(e,n){angular.forEach(e.tags,function(e,n){0==$.grep(t.tags,function(t){return t.id==e.id}).length&&t.tags.push(e)})}),setTimeout(function(){$(window).resize()},10)},t.removeBlock=function(e,n){if(1==t.web_sample_proposal)return void alert("Sign up to be able to do these actions.");if(confirm("Are you sure?")){var i=t.blocks.indexOf(e);e.remove().then(function(){t.blocks.splice(i,1)})}},t.editBlock=function(e,n){if(1==t.web_sample_proposal)return void alert("Sign up to be able to do these actions.");var i=t.blocks.indexOf(e);t.save_area_dialog_block_index=i,t.save_area_dialog_open=!0,t.save_area_dialog_area=e,t.save_area_dialog_area.internal_name=e.internal_name,t.save_area_dialog_area.tag_list=$.map(e.tags,function(t,e){return t.name})},t.removeCustomToken=function(e){if(1==t.web_sample_proposal)return void alert("Sign up to be able to do these actions.");var n=t.template.custom_tokens.indexOf(e);t.template.custom_tokens.splice(n,1)},t.saveAreaDialogOpen=function(e,n,i){t.save_area_dialog_open=!0,t.save_area_dialog_area=angular.copy(e),t.save_area_dialog_area.id=null,t.save_area_dialog_area.internal_name=e.name},t.initializeArea=function(e){1==e.choose_pricing_table&&(e.choose_pricing_table=!1,t.choosePricingTableDialogOpen(e))},t.choosePricingTableDialogOpen=function(e){t.pricing_table_dialog_open=!0,t.pricing_table_dialog_area=e},t.savePricingTable=function(e){t.pricing_table_dialog_open=!1},t.saveArea=function(e){return 1==t.web_sample_proposal?void alert("Sign up to be able to do these actions."):void("undefined"!=typeof e.id&&e.id>0?e.update().then(function(){t.save_area_dialog_close()}):new r({name:e.name,content:e.content,tag_list:e.tag_list,internal_name:e.internal_name}).create().then(function(e){var n=function(){t.addBlock(e)};1!=t.textBlockLibraryFirstTime||n(),t.save_area_dialog_close()},function(t){}))},t.removeArea=function(e,n,i){e._destroy=e.id?1:1,t.refreshScroll()},t.removeSection=function(e,n){confirm("Are you sure?")&&(e._destroy=e.id?1:1,angular.forEach(e.areas,function(t,n){e.areas[n]._destroy=1}),t.refreshScroll(),setTimeout(function(){$(window).resize()},0))},t.sortableSections={items:"li:not(.cover_page_li)",axis:"y",disabled:!0,handle:".cool-drag-handler",update:function(){setTimeout(function(){t.refreshScroll()},250)}}}]),textTemplateEdit.directive("myDraggable",function(){return{restrict:"A",link:function(t,e,n){e.draggable({connectToSortable:".proposal-areas",helper:function(t){return $("<div class='my-draggable-helper'>Drag me into the content of a section.</div>")},appendTo:document.body,revert:"invalid"})}}}),textTemplateEdit.directive("onFinishRender",["$timeout",function(t){return{restrict:"A",link:function(e,n,i){e.$last===!0&&t(function(){e.$emit("ngRepeatFinished")})}}}]),textTemplateEdit.directive("wysiwygeditor",function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){function r(){i.$setViewValue(o.getData())}if(i){var o=CKEDITOR.replace(e[0],{extraPlugins:"tokens,sourcedialog,dragresize",toolbar:"Area",height:320});e.bind("$destroy",function(){o.destroy()}),i.$render=function(){o.setData(i.$viewValue||"")},o.on("change",function(){t.$apply(r)})}}}}),textTemplateEdit.directive("contenteditableadvanced",function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){function r(){i.$setViewValue(a.getData())}if(i){var o=e.parents(".editing-section"),s=o.is(":visible");$.browser.webkit&&!s&&o.show();var a=CKEDITOR.inline(e[0],{extraPlugins:"sharedspace,tokens,sourcedialog,dragresize",sharedSpaces:{top:"wysiwyg-main-toolbar"},toolbar:"Inline"});$.browser.mozilla&&a.on("instanceReady",function(t){t.editor.document.on("drop",function(t){return setTimeout(function(){var t=a.getData();t&&t.length>0&&t.indexOf('src="data:')>-1&&t.indexOf("base64")>-1&&alert("You can't drop images here. Please delete the image and upload your images using the button in the top toolbar.")},500),!0})}),$.browser.webkit&&!s&&a.on("instanceReady",function(){1==window.Quotes.vars.edit_view_first_static||t.isEditing||o.hide()}),a.on("blur",function(){$("#wysiwyg-main-toolbar").hide()}),a.on("focus",function(){$("#wysiwyg-main-toolbar").show()}),e.bind("$destroy",function(){a.destroy()}),i.$render=function(){a.setData(i.$viewValue||"")},e.bind("blur keyup change",function(){t.$apply(r)})}}}}),textTemplateEdit.directive("mycontenteditable",function(){return{require:"ngModel",link:function(t,e,n,i){var r=function(t){};e.addClass("mycontenteditable"),e.attr("contenteditable","true"),e.attr("title","Click to edit"),e.contentEditable(),e.on("blur keypress keyup paste",function(n){t.$apply(function(){if("keypress"!=n.type&&"keyup"!=n.type&&0==e.text().length&&e.text("(blank)"),i.$setViewValue(e.text()),r(e),"keypress"==n.type&&13==n.keyCode){n.preventDefault();var t=$(e).nextInDOM(".mycontenteditable, .cke_editable").get(0);void 0!==t&&setTimeout(function(){t.focus()},200)}})}),e.on("blur paste",function(){t.$apply(function(){e.text(i.$viewValue),r(e)})}),i.$render=function(){var t=i.$viewValue;""==t&&(t="(blank)"),e.text(t),r(e)}}}}),textTemplateEdit.directive("uiMultiSortable",["$parse",function(t){var e={};e.connectWith=".proposal-areas",e.handle=".cool-drag-handler",e.tolerance="intersect",e.appendTo="body",e.helper="clone",e.revert=!0,e.zIndex=99999;var n=function(e,n){function i(){u.data={origSubset:e.item.data(l),destSubset:n.modelSubset,origKind:e.item.attr("my-kind"),origPosition:e.item.data(c),destPosition:e.item.index()}}function r(){return u.data.origPosition!==u.data.destPosition||!o()}function o(){return void 0===n.modelSubset||u.data.origSubset===u.data.destSubset}function s(t,e){var n=e,i=0;return angular.forEach(t,function(t,r){t._destroy?e+1>i&&(n+=1):i++}),n}function a(i){if(void 0!==u.data.origKind&&void 0!==e&&void 0!==e.item&&(e.item.hasClass("cool-add-button")||e.item.hasClass("add-from-library"))){var r={};if("price-table"==u.data.origKind)r={kind:u.data.origKind},"undefined"!=typeof window.Quotes.vars.first_pricing_table_id&&(r.pricing_table_id=window.Quotes.vars.first_pricing_table_id,r.choose_pricing_table=!0),setTimeout(function(){initializeGalleryPopup()},1e3);else if(r={kind:"text",name:"New area",content:"<p>Click to edit...</p>"},e.item.hasClass("add-from-library")){var o=angular.element(e.item).scope().$eval(e.item.attr("my-model"));r.name=o.name,r.content=o.content}return void t(u.data.destSubset)(i).splice(s(t(u.data.destSubset)(i),u.data.destPosition),0,r)}void 0===n.modelSubset?i.splice(u.data.destPosition,0,i.splice(u.data.origPosition,1)[0]):t(u.data.destSubset)(i).splice(s(t(u.data.destSubset)(i),u.data.destPosition),0,t(u.data.origSubset)(i).splice(s(t(u.data.origSubset)(i),u.data.origPosition),1)[0])}var l="ui-sortable-model-subset",c="ui-sortable-start-pos",u=this;this.appendDataOnStart=function(){e.item.data(c,e.item.index()),e.item.data(l,n.modelSubset)},this.updateSingleSortableModel=function(t){i(),(o()&&r()||void 0!==u.data.origKind&&void 0!==e&&void 0!==e.item&&(e.item.hasClass("cool-add-button")||e.item.hasClass("add-from-library")))&&a(t)},this.updateMultiSortableModel=function(t){i(),a(t)}};return{require:"?ngModel",link:function(t,i,r,o){function s(e){return"function"==typeof e?e:"function"==typeof t[e]?t[e]:function(){}}var a=angular.extend({},e,t.$eval(r.uiOptions));if(null!==o){var l=a.start;a.start=function(e,i){return $(".area-heading").blur(),$('div[contentEditable="true"]').blur(),new n(i,r).appendDataOnStart(),i.placeholder.height(i.helper.outerHeight(!0)),s(l)(e,i),t.$apply()};var c=a.update;a.update=function(e,n){return s(c)(e,n),t.$apply()};var u=a.stop;a.stop=function(e,i){var a=new n(i,r);return a.updateSingleSortableModel(o.$modelValue),(i.item.hasClass("cool-add-button")||i.item.hasClass("add-from-library"))&&i.item.remove(),s(u)(e,i),t.$apply()};var h=a.receive;a.receive=function(e,i){var a=new n(i,r);return i.item.hasClass("cool-add-button")||i.item.hasClass("add-from-library")||a.updateMultiSortableModel(o.$modelValue),s(h)(e,i),t.$apply()}}return i.sortable(a)}}}]),function(t){t.fn.contentEditable=function(){this.on("paste",function(e){if(e.originalEvent.clipboardData||window.clipboardData){e.preventDefault();var n=window.getSelection?window.getSelection():document.selection,i=n.getRangeAt?n.getRangeAt(0):n.createRange(),r=i.startOffset,o=t(e.target),s=e.originalEvent.clipboardData?e.originalEvent.clipboardData.getData("text/plain"):window.clipboardData.getData("Text"),a=o.text().substring(0,i.startOffset)+s+o.text().substring(i.endOffset,o.text().length);o.text(a);var l=e.target;if(window.getSelection){e.target.childNodes.length>0&&(l=e.target.childNodes[0]);var c=document.createRange();c.setStart(l,r+s.length),c.setEnd(l,r+s.length),n.rangeCount>0&&n.removeAllRanges(),n.addRange(c)}else{e.target.childNodes.length>0&&(l=e.target.childNodes[0]);var c=document.selection.createRange();c.moveToElementText(e.target),c.setStart(l,r+s.length),c.setEnd(l,r+s.length),c.select()}}}),this.on("drop",function(e){e.preventDefault(),console.log(window.getSelection().getRangeAt(0));var n=e.originalEvent.dataTransfer?e.originalEvent.dataTransfer.getData("text/plain"):window.event.dataTransfer.getData("Text"),i,r;document.caretPositionFromPoint?(i=caretPositionFromPoint(e.originalEvent.clientX,e.originalEvent.clientY),r=i.startOffset):document.caretRangeFromPoint?(i=document.caretRangeFromPoint(e.originalEvent.clientX,e.originalEvent.clientY),r=i.startOffset):e.originalEvent.rangeOffset?r=e.originalEvent.rangeOffset:(i=document.body.createTextRange(),i.moveToPoint(e.originalEvent.clientX,e.originalEvent.clientY),i.select(),r=i.startOffset);var o=t(e.target),s=o.text().substring(0,r)+n+o.text().substring(r,o.text().length);o.text(s)})}}(jQuery),textTemplateEdit.filter("startFrom",function(){return function(t,e){return e=+e,t.slice(e)}}),angular.module("truncate",[]).filter("characters",function(){return function(t,e,n){if(t=angular.element("<div>").html(t).text(),isNaN(e))return t;if(0>=e)return"";if(t&&t.length>=e){if(t=t.substring(0,e),n)for(;" "==t.charAt(t.length-1);)t=t.substr(0,t.length-1);else{var i=t.lastIndexOf(" ");-1!==i&&(t=t.substr(0,i))}return t+"..."}return t}}).filter("words",function(){return function(t,e){if(isNaN(e))return t;if(0>=e)return"";if(t){var n=t.split(/\s+/);n.length>e&&(t=n.slice(0,e).join(" ")+"...")}return t}}),angular.module("pasvaz.bindonce",[]).directive("bindonce",function(){var t=function(t){if(t&&0!==t.length){var e=angular.lowercase(""+t);t=!("f"==e||"0"==e||"false"==e||"no"==e||"n"==e||"[]"==e)}else t=!1;return t},e=parseInt((/msie (\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10);isNaN(e)&&(e=parseInt((/trident\/.*; rv:(\d+)/.exec(angular.lowercase(navigator.userAgent))||[])[1],10));var n={restrict:"AM",controller:["$scope","$element","$attrs","$interpolate",function(n,i,r,o){var s=function(e,n,i){var r="show"==n?"":"none",o="hide"==n?"":"none";e.css("display",t(i)?r:o)},a=function(t,e){if(angular.isObject(e)&&!angular.isArray(e)){var n=[];angular.forEach(e,function(t,e){t&&n.push(e)}),e=n}e&&t.addClass(angular.isArray(e)?e.join(" "):e)},l={watcherRemover:void 0,binders:[],group:r.boName,element:i,ran:!1,addBinder:function(t){this.binders.push(t),this.ran&&this.runBinders()},setupWatcher:function(t){var e=this;this.watcherRemover=n.$watch(t,function(t){void 0!=t&&(e.removeWatcher(),e.runBinders())},!0)},removeWatcher:function(){void 0!=this.watcherRemover&&(this.watcherRemover(),this.watcherRemover=void 0)},runBinders:function(){var n,i;for(n=0,i=this.binders.length;i>n;n++){var r=this.binders[n];if(!this.group||this.group==r.group){var l=r.scope.$eval(r.interpolate?o(r.value):r.value);switch(r.attr){case"if":t(l)&&r.transclude(r.scope.$new(),function(t){var e=r.element.parent(),n=r.element&&r.element[r.element.length-1],i=e&&e[0]||n&&n.parentNode,o=n&&n.nextSibling||null;angular.forEach(t,function(t){i.insertBefore(t,o)})});break;case"hide":case"show":s(r.element,r.attr,l);break;case"class":a(r.element,l);break;case"text":r.element.text(l);break;case"html":r.element.html(l);break;case"style":r.element.css(l);break;case"src":r.element.attr(r.attr,l),e&&r.element.prop("src",l);case"attr":angular.forEach(r.attrs,function(t,e){var n,i;e.match(/^boAttr./)&&r.attrs[e]&&(n=e.replace(/^boAttr/,"").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=r.scope.$eval(r.attrs[e]),r.element.attr(n,i))});break;case"href":case"alt":case"title":case"id":case"value":r.element.attr(r.attr,l)}}}this.ran=!0,this.binders=[]}};return l}],link:function(t,e,n,i){var r=n.bindonce?t.$eval(n.bindonce):!0;
void 0!=r?i.runBinders():(i.setupWatcher(n.bindonce),e.bind("$destroy",i.removeWatcher))}};return n}),angular.forEach([{directiveName:"boShow",attribute:"show"},{directiveName:"boIf",attribute:"if",transclude:"element",terminal:!0,priority:1e3},{directiveName:"boHide",attribute:"hide"},{directiveName:"boClass",attribute:"class"},{directiveName:"boText",attribute:"text"},{directiveName:"boHtml",attribute:"html"},{directiveName:"boSrcI",attribute:"src",interpolate:!0},{directiveName:"boSrc",attribute:"src"},{directiveName:"boHrefI",attribute:"href",interpolate:!0},{directiveName:"boHref",attribute:"href"},{directiveName:"boAlt",attribute:"alt"},{directiveName:"boTitle",attribute:"title"},{directiveName:"boId",attribute:"id"},{directiveName:"boStyle",attribute:"style"},{directiveName:"boValue",attribute:"value"},{directiveName:"boAttr",attribute:"attr"}],function(t){var e=200;return angular.module("pasvaz.bindonce").directive(t.directiveName,function(){var n={priority:t.priority||e,transclude:t.transclude||!1,terminal:t.terminal||!1,require:"^bindonce",compile:function(e,n,i){return function(e,n,r,o){var s=r.boParent;if(s&&o.group!=s){var a=o.element.parent();o=void 0;for(var l;9!=a[0].nodeType&&a.length;){if((l=a.data("$bindonceController"))&&l.group==s){o=l;break}a=a.parent()}if(!o)throw Error("No bindonce controller: "+s)}o.addBinder({element:n,attr:t.attribute,attrs:r,value:r[t.directiveName],interpolate:t.interpolate,group:s,transclude:i,scope:e})}}};return n})});var dialogModule=angular.module("ui.bootstrap.dialog",["ui.bootstrap.transition"]);dialogModule.controller("MessageBoxController",["$scope","dialog","model",function(t,e,n){t.title=n.title,t.message=n.message,t.buttons=n.buttons,t.close=function(t){e.close(t)}}]),dialogModule.provider("$dialog",function(){var t={backdrop:!0,dialogClass:"modal",backdropClass:"modal-backdrop",transitionClass:"fade",triggerClass:"in",resolve:{},backdropFade:!1,dialogFade:!1,keyboard:!0,backdropClick:!0},e={},n={value:0};this.options=function(t){e=t},this.$get=["$http","$document","$compile","$rootScope","$controller","$templateCache","$q","$transition","$injector",function(i,r,o,s,a,l,c,u,h){function d(t){var e=angular.element("<div>");return e.addClass(t),e}function p(n){var i=this,r=this.options=angular.extend({},t,e,n);this._open=!1,this.backdropEl=d(r.backdropClass),r.backdropFade&&(this.backdropEl.addClass(r.transitionClass),this.backdropEl.removeClass(r.triggerClass)),this.modalEl=d(r.dialogClass),r.dialogFade&&(this.modalEl.addClass(r.transitionClass),this.modalEl.removeClass(r.triggerClass)),this.handledEscapeKey=function(t){27===t.which&&(i.close(),t.preventDefault(),i.$scope.$apply())},this.handleBackDropClick=function(t){i.close(),t.preventDefault(),i.$scope.$apply()},this.handleLocationChange=function(){i.close()}}var f=r.find("body");return p.prototype.isOpen=function(){return this._open},p.prototype.open=function(t,e){var n=this,i=this.options;if(t&&(i.templateUrl=t),e&&(i.controller=e),!i.template&&!i.templateUrl)throw new Error("Dialog.open expected template or templateUrl, neither found. Use options or open method to specify them.");return this._loadResolves().then(function(t){var e=t.$scope=n.$scope=t.$scope?t.$scope:s.$new();if(n.modalEl.html(t.$template),n.options.controller){var i=a(n.options.controller,t);n.modalEl.children().data("ngControllerController",i)}o(n.modalEl)(e),n._addElementsToDom(),setTimeout(function(){n.options.dialogFade&&n.modalEl.addClass(n.options.triggerClass),n.options.backdropFade&&n.backdropEl.addClass(n.options.triggerClass)}),n._bindEvents()}),this.deferred=c.defer(),this.deferred.promise},p.prototype.close=function(t){function e(t){t.removeClass(i.options.triggerClass)}function n(){i._open&&i._onCloseComplete(t)}var i=this,r=this._getFadingElements();if(r.length>0)for(var o=r.length-1;o>=0;o--)u(r[o],e).then(n);else this._onCloseComplete(t)},p.prototype._getFadingElements=function(){var t=[];return this.options.dialogFade&&t.push(this.modalEl),this.options.backdropFade&&t.push(this.backdropEl),t},p.prototype._bindEvents=function(){this.options.keyboard&&f.bind("keydown",this.handledEscapeKey),this.options.backdrop&&this.options.backdropClick&&this.backdropEl.bind("click",this.handleBackDropClick)},p.prototype._unbindEvents=function(){this.options.keyboard&&f.unbind("keydown",this.handledEscapeKey),this.options.backdrop&&this.options.backdropClick&&this.backdropEl.unbind("click",this.handleBackDropClick)},p.prototype._onCloseComplete=function(t){this._removeElementsFromDom(),this._unbindEvents(),this.deferred.resolve(t)},p.prototype._addElementsToDom=function(){f.append(this.modalEl),this.options.backdrop&&(0===n.value&&f.append(this.backdropEl),n.value++),this._open=!0},p.prototype._removeElementsFromDom=function(){this.modalEl.remove(),this.options.backdrop&&(n.value--,0===n.value&&this.backdropEl.remove()),this._open=!1},p.prototype._loadResolves=function(){var t=[],e=[],n,r=this;return this.options.template?n=c.when(this.options.template):this.options.templateUrl&&(n=i.get(this.options.templateUrl,{cache:l}).then(function(t){return t.data})),angular.forEach(this.options.resolve||[],function(n,i){e.push(i),t.push(angular.isString(n)?h.get(n):h.invoke(n))}),e.push("$template"),t.push(n),c.all(t).then(function(t){var n={};return angular.forEach(t,function(t,i){n[e[i]]=t}),n.dialog=r,n})},{dialog:function(t){return new p(t)},messageBox:function(t,e,n){return new p({templateUrl:"template/dialog/message.html",controller:"MessageBoxController",resolve:{model:function(){return{title:t,message:e,buttons:n}}}})}}}]}),angular.module("ui.bootstrap.modal",["ui.bootstrap.dialog"]).directive("modal",["$parse","$dialog",function(t,e){return{restrict:"EA",terminal:!0,link:function(n,i,r){var o=angular.extend({},n.$eval(r.uiOptions||r.bsOptions||r.options)),s=r.modal||r.show,a;o=angular.extend(o,{template:i.html(),resolve:{$scope:function(){return n}}});var l=e.dialog(o);i.remove(),a=r.close?function(){t(r.close)(n)}:function(){angular.isFunction(t(s).assign)&&t(s).assign(n,!1)},n.$watch(s,function(t,e){t?l.open().then(function(){a()}):l.isOpen()&&l.close()})}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(t,e){function n(t,n){return t.currentStyle?t.currentStyle[n]:e.getComputedStyle?e.getComputedStyle(t)[n]:t.style[n]}function i(t){return"static"===(n(t,"position")||"static")}var r,o;t.bind("mousemove",function a(t){r=t.pageX,o=t.pageY});var s=function(e){for(var n=t[0],r=e.offsetParent||n;r&&r!==n&&i(r);)r=r.offsetParent;return r||n};return{position:function(e){var n=this.offset(e),i={top:0,left:0},r=s(e[0]);return r!=t[0]&&(i=this.offset(angular.element(r)),i.top+=r.clientTop,i.left+=r.clientLeft),{width:e.prop("offsetWidth"),height:e.prop("offsetHeight"),top:n.top-i.top,left:n.left-i.left}},offset:function(n){var i=n[0].getBoundingClientRect();return{width:n.prop("offsetWidth"),height:n.prop("offsetHeight"),top:i.top+(e.pageYOffset||t[0].body.scrollTop),left:i.left+(e.pageXOffset||t[0].body.scrollLeft)}},mouse:function(){return{x:r,y:o}}}}]),angular.module("ui.select2",[]).value("uiSelect2Config",{}).directive("uiSelect2",["uiSelect2Config","$timeout",function(t,e){var n={};return t&&angular.extend(n,t),{require:"ngModel",compile:function(t,i){var r,o,s,a=t.is("select"),l=void 0!==i.multiple;return t.is("select")&&(o=t.find("option[ng-repeat], option[data-ng-repeat]"),o.length&&(s=o.attr("ng-repeat")||o.attr("data-ng-repeat"),r=jQuery.trim(s.split("|")[0]).split(" ").pop())),function(t,o,s,c){var u=angular.extend({},n,t.$eval(s.uiSelect2)),h=function(t){var e;return u.simple_tags?(e=[],angular.forEach(t,function(t,n){e.push(t.id)})):e=t,e},d=function(t){var e=[];return t?(u.simple_tags?(e=[],angular.forEach(t,function(t,n){e.push({id:t,text:t})})):e=t,e):e};if(a?(delete u.multiple,delete u.initSelection):l&&(u.multiple=!0),c&&(t.$watch(i.ngModel,function(t,e){t&&t!=e&&c.$render()},!0),c.$render=function(){a?o.select2("val",c.$viewValue):u.multiple?o.select2("data",d(c.$viewValue)):angular.isObject(c.$viewValue)?o.select2("data",c.$viewValue):c.$viewValue?o.select2("val",c.$viewValue):o.select2("data",null)},r&&t.$watch(r,function(t,n,i){t&&e(function(){o.select2("val",c.$viewValue),o.trigger("change")})}),c.$parsers.push(function(t){var e=o.prev();return e.toggleClass("ng-invalid",!c.$valid).toggleClass("ng-valid",c.$valid).toggleClass("ng-invalid-required",!c.$valid).toggleClass("ng-valid-required",c.$valid).toggleClass("ng-dirty",c.$dirty).toggleClass("ng-pristine",c.$pristine),t}),!a&&(o.bind("change",function(){t.$$phase||t.$apply(function(){c.$setViewValue(h(o.select2("data")))})}),u.initSelection))){var p=u.initSelection;u.initSelection=function(t,e){p(t,function(t){c.$setViewValue(h(t)),e(t)})}}o.bind("$destroy",function(){o.select2("destroy")}),s.$observe("disabled",function(t){o.select2("enable",!t)}),s.ngMultiple&&t.$watch(s.ngMultiple,function(t){o.select2(u)}),e(function(){o.select2(u),o.val(c.$viewValue),c.$render(),u.initSelection||a||c.$setViewValue(h(o.select2("data")))})}}}}]),angular.module("ui.sortable",[]).value("uiSortableConfig",{}).directive("uiSortable",["uiSortableConfig",function(t){return{require:"?ngModel",link:function(e,n,i,r){function o(t,e){return e&&"function"==typeof e?function(n,i){t(n,i),e(n,i)}:t}function s(t,e){var n=e,i=0;return angular.forEach(t,function(t,r){t._destroy?e+1>i&&(n+=1):i++}),n}var a={},l={receive:null,remove:null,start:null,stop:null,update:null};angular.extend(a,t),r&&(r.$render=function(){n.sortable("refresh")},l.start=function(t,e){e.item.sortable={index:e.item.index()}},l.update=function(t,e){e.item.sortable.resort=r},l.receive=function(t,e){e.item.sortable.relocate=!0,r.$modelValue.splice(e.item.index(),0,e.item.sortable.moved)},l.remove=function(t,e){e.item.sortable.moved=1===r.$modelValue.length?r.$modelValue.splice(0,1)[0]:r.$modelValue.splice(e.item.sortable.index,1)[0]},l.stop=function(t,n){if(n.item.sortable.resort&&!n.item.sortable.relocate){var i,r;r=n.item.sortable.index-1,i=n.item.index()-1,r=s(n.item.sortable.resort.$modelValue,r),i=s(n.item.sortable.resort.$modelValue,i),n.item.sortable.resort.$modelValue.splice(i,0,n.item.sortable.resort.$modelValue.splice(r,1)[0])}(n.item.sortable.resort||n.item.sortable.relocate)&&e.$apply()}),e.$watch(i.uiSortable,function(t,e){angular.forEach(t,function(t,e){l[e]&&(t=o(l[e],t)),n.sortable("option",e,t)})},!0),angular.forEach(l,function(t,e){a[e]=o(t,a[e])}),n.sortable(a)}}}]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(t,e,n){function i(t){for(var e in t)if(void 0!==o.style[e])return t[e]}var r=function(i,o,s){s=s||{};var a=t.defer(),l=r[s.animation?"animationEndEventName":"transitionEndEventName"],c=function(t){n.$apply(function(){i.unbind(l,c),a.resolve(i)})};return l&&i.bind(l,c),e(function(){angular.isString(o)?i.addClass(o):angular.isFunction(o)?o(i):angular.isObject(o)&&i.css(o),l||a.resolve(i)}),a.promise.cancel=function(){l&&i.unbind(l,c),a.reject("Transition cancelled")},a.promise},o=document.createElement("trans"),s={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},a={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return r.transitionEndEventName=i(s),r.animationEndEventName=i(a),r}]),angular.module("template/typeahead/typeahead.html",[]).run(["$templateCache",function(t){t.put("template/typeahead/typeahead.html","<ul class=\"typeahead dropdown-menu\" ng-style=\"{display: isOpen()&&'block' || 'none', top: position.top+'px', left: position.left+'px'}\">\n"+'    <li ng-repeat="match in matches" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)">\n        <a tabindex="-1" ng-click="selectMatch($index)" ng-bind-html-unsafe="match.label | typeaheadHighlight:query"></a>\n    </li>\n</ul>')}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position"]).factory("typeaheadParser",["$parse",function(t){var e=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{parse:function(n){var i=n.match(e),r,o,s;if(!i)throw new Error("Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_' but got '"+n+"'.");return{itemName:i[3],source:t(i[4]),viewMapper:t(i[2]||i[1]),modelMapper:t(i[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(t,e,n,i,r,o,s){var a=[9,13,27,38,40];return{require:"ngModel",link:function(l,c,u,h){var d,p=l.$eval(u.typeaheadMinLength)||1,f=l.$eval(u.typeaheadWaitMs)||0,m=s.parse(u.typeahead),g=l.$eval(u.typeaheadEditable)!==!1,v=e(u.typeaheadLoading).assign||angular.noop,y=e(u.typeaheadOnSelect),b=angular.element("<typeahead-popup></typeahead-popup>");b.attr({matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"});var _=l.$new();l.$on("$destroy",function(){_.$destroy()});var w=function(){_.matches=[],_.activeIdx=-1},x=function(t){var e={$viewValue:t};v(l,!0),n.when(m.source(_,e)).then(function(n){if(t===h.$viewValue){if(n.length>0){_.activeIdx=-1,_.matches.length=0;for(var i=0;i<n.length;i++)e[m.itemName]=n[i],_.matches.push({label:m.viewMapper(_,e),model:n[i]});_.query=t,_.position=o.position(c),_.position.top=_.position.top+c.prop("offsetHeight")}else w();v(l,!1)}},function(){w(),v(l,!1)})};w(),_.query=void 0,h.$parsers.push(function(t){var e;return w(),d?t:((0===p||t&&t.length>=p)&&(f>0?(e&&i.cancel(e),e=i(function(){x(t)},f)):x(t)),g?t:void 0)}),h.$render=function(){var t={};t[m.itemName]=d||h.$viewValue,c.val(m.viewMapper(_,t)||h.$viewValue),d=void 0},_.select=function(t){var e={},n,i;e[m.itemName]=i=d=_.matches[t].model,n=m.modelMapper(_,e),h.$setViewValue(n),h.$render(),y(_,{$item:i,$model:n,$label:m.viewMapper(_,e)}),c[0].focus()},c.bind("focus",function(t){""===h.$viewValue&&h.$setViewValue(" ")}),c.bind("keydown",function(t){0!==_.matches.length&&-1!==a.indexOf(t.which)&&(-1!=_.activeIdx||13!==t.which&&9!==t.which)&&(t.preventDefault(),40===t.which?(_.activeIdx=(_.activeIdx+1)%_.matches.length,_.$digest()):38===t.which?(_.activeIdx=(_.activeIdx>0?_.activeIdx:_.matches.length)-1,_.$digest()):13===t.which||9===t.which?_.$apply(function(){_.select(_.activeIdx)}):27===t.which&&(t.stopPropagation(),w(),_.$digest()))}),r.bind("click",function(){w(),_.$digest()}),c.after(t(b)(_))}}}]).directive("typeaheadPopup",function(){return{restrict:"E",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead.html",link:function(t,e,n){t.isOpen=function(){return t.matches.length>0},t.isActive=function(e){return t.active==e},t.selectActive=function(e){t.active=e},t.selectMatch=function(e){t.select({activeIdx:e})}}}}).filter("typeaheadHighlight",function(){function t(t){return t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(e,n){return n?e.replace(new RegExp(t(n),"gi"),"<strong>$&</strong>"):n}}),"function"!=typeof Object.create&&(Object.create=function(t){function e(){}return e.prototype=t,new e}),function(t){var e={init:function(e){return this.options=t.extend({},t.noty.defaults,e),this.options.layout=this.options.custom?t.noty.layouts.inline:t.noty.layouts[this.options.layout],this.options.theme=t.noty.themes[this.options.theme],delete e.layout,delete e.theme,this.options=t.extend({},this.options,this.options.layout.options),this.options.id="noty_"+(new Date).getTime()*Math.floor(1e6*Math.random()),this.options=t.extend({},this.options,e),this._build(),this},_build:function(){var e=t('<div class="noty_bar"></div>').attr("id",this.options.id);if(e.append(this.options.template).find(".noty_text").html(this.options.text),this.$bar=null!==this.options.layout.parent.object?t(this.options.layout.parent.object).css(this.options.layout.parent.css).append(e):e,this.options.buttons){this.options.closeWith=[],this.options.timeout=!1;var n=t("<div/>").addClass("noty_buttons");null!==this.options.layout.parent.object?this.$bar.find(".noty_bar").append(n):this.$bar.append(n);var i=this;t.each(this.options.buttons,function(e,n){var r=t("<button/>").addClass(n.addClass?n.addClass:"gray").html(n.text).appendTo(i.$bar.find(".noty_buttons")).bind("click",function(){t.isFunction(n.onClick)&&n.onClick.call(r,i)})})}this.$message=this.$bar.find(".noty_message"),this.$closeButton=this.$bar.find(".noty_close"),this.$buttons=this.$bar.find(".noty_buttons"),t.noty.store[this.options.id]=this},show:function(){var e=this;return t(e.options.layout.container.selector).append(e.$bar),e.options.theme.style.apply(e),"function"===t.type(e.options.layout.css)?this.options.layout.css.apply(e.$bar):e.$bar.css(this.options.layout.css||{}),e.$bar.addClass(e.options.layout.addClass),e.options.layout.container.style.apply(t(e.options.layout.container.selector)),e.options.theme.callback.onShow.apply(this),t.inArray("click",e.options.closeWith)>-1&&e.$bar.css("cursor","pointer").one("click",function(){e.close()}),t.inArray("hover",e.options.closeWith)>-1&&e.$bar.one("mouseenter",function(){e.close()}),t.inArray("button",e.options.closeWith)>-1&&e.$closeButton.one("click",function(){e.close()}),-1==t.inArray("button",e.options.closeWith)&&e.$closeButton.remove(),e.options.callback.onShow&&e.options.callback.onShow.apply(e),e.$bar.animate(e.options.animation.open,e.options.animation.speed,e.options.animation.easing,function(){e.options.callback.afterShow&&e.options.callback.afterShow.apply(e),e.shown=!0}),e.options.timeout&&e.$bar.delay(e.options.timeout).promise().done(function(){e.close()}),this},close:function(){if(!this.closed){var e=this;if(!this.shown){var n=[];return t.each(t.noty.queue,function(t,i){i.options.id!=e.options.id&&n.push(i)}),void(t.noty.queue=n)}e.$bar.addClass("i-am-closing-now"),e.options.callback.onClose&&e.options.callback.onClose.apply(e),e.$bar.clearQueue().stop().animate(e.options.animation.close,e.options.animation.speed,e.options.animation.easing,function(){e.options.callback.afterClose&&e.options.callback.afterClose.apply(e)}).promise().done(function(){e.options.modal&&(t.notyRenderer.setModalCount(-1),0==t.notyRenderer.getModalCount()&&t(".noty_modal").fadeOut("fast",function(){t(this).remove()})),t.notyRenderer.setLayoutCountFor(e,-1),0==t.notyRenderer.getLayoutCountFor(e)&&t(e.options.layout.container.selector).remove(),"undefined"!=typeof e.$bar&&null!==e.$bar&&(e.$bar.remove(),e.$bar=null,e.closed=!0),delete t.noty.store[e.options.id],e.options.theme.callback.onClose.apply(e),e.options.dismissQueue||(t.noty.ontap=!0,t.notyRenderer.render())})}},setText:function(t){return this.closed||(this.options.text=t,this.$bar.find(".noty_text").html(t)),this},setType:function(t){return this.closed||(this.options.type=t,this.options.theme.style.apply(this),this.options.theme.callback.onShow.apply(this)),this},setTimeout:function(t){if(!this.closed){var e=this;this.options.timeout=t,e.$bar.delay(e.options.timeout).promise().done(function(){e.close()})}return this},closed:!1,shown:!1};t.notyRenderer={},t.notyRenderer.init=function(n){var i=Object.create(e).init(n);return i.options.force?t.noty.queue.unshift(i):t.noty.queue.push(i),t.notyRenderer.render(),"object"==t.noty.returns?i:i.options.id},t.notyRenderer.render=function(){var e=t.noty.queue[0];"object"===t.type(e)?e.options.dismissQueue?t.notyRenderer.show(t.noty.queue.shift()):t.noty.ontap&&(t.notyRenderer.show(t.noty.queue.shift()),t.noty.ontap=!1):t.noty.ontap=!0},t.notyRenderer.show=function(e){e.options.modal&&(t.notyRenderer.createModalFor(e),t.notyRenderer.setModalCount(1)),0==t(e.options.layout.container.selector).length?e.options.custom?e.options.custom.append(t(e.options.layout.container.object).addClass("i-am-new")):t("body").append(t(e.options.layout.container.object).addClass("i-am-new")):t(e.options.layout.container.selector).removeClass("i-am-new"),t.notyRenderer.setLayoutCountFor(e,1),e.show()},t.notyRenderer.createModalFor=function(e){0==t(".noty_modal").length&&t("<div/>").addClass("noty_modal").data("noty_modal_count",0).css(e.options.theme.modal.css).prependTo(t("body")).fadeIn("fast")},t.notyRenderer.getLayoutCountFor=function(e){return t(e.options.layout.container.selector).data("noty_layout_count")||0},t.notyRenderer.setLayoutCountFor=function(e,n){return t(e.options.layout.container.selector).data("noty_layout_count",t.notyRenderer.getLayoutCountFor(e)+n)},t.notyRenderer.getModalCount=function(){return t(".noty_modal").data("noty_modal_count")||0},t.notyRenderer.setModalCount=function(e){return t(".noty_modal").data("noty_modal_count",t.notyRenderer.getModalCount()+e)},t.fn.noty=function(e){return e.custom=t(this),t.notyRenderer.init(e)},t.noty={},t.noty.queue=[],t.noty.ontap=!0,t.noty.layouts={},t.noty.themes={},t.noty.returns="object",t.noty.store={},t.noty.get=function(e){return t.noty.store.hasOwnProperty(e)?t.noty.store[e]:!1},t.noty.close=function(e){return t.noty.get(e)?t.noty.get(e).close():!1},t.noty.setText=function(e,n){return t.noty.get(e)?t.noty.get(e).setText(n):!1},t.noty.setType=function(e,n){return t.noty.get(e)?t.noty.get(e).setType(n):!1},t.noty.clearQueue=function(){t.noty.queue=[]},t.noty.closeAll=function(){t.noty.clearQueue(),t.each(t.noty.store,function(t,e){e.close()})};var n=window.alert;t.noty.consumeAlert=function(e){window.alert=function(n){e?e.text=n:e={text:n},t.notyRenderer.init(e)}},t.noty.stopConsumeAlert=function(){window.alert=n},t.noty.defaults={layout:"top",theme:"defaultTheme",type:"alert",text:"",dismissQueue:!0,template:'<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>',animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:500},timeout:!1,force:!1,modal:!1,closeWith:["click"],callback:{onShow:function(){},afterShow:function(){},onClose:function(){},afterClose:function(){}},buttons:!1},t(window).resize(function(){t.each(t.noty.layouts,function(e,n){n.container.style.apply(t(n.container.selector))})})}(jQuery),$(function(){"ontouchstart"in document.documentElement&&(document.documentElement.className+=" my-touch-device"),$('textarea[class!="noresize"]').autoResize(),$(".user-m").change(function(){window.location=$(this).find("option:selected").data("url")}),$(document).ajaxError(function(t,e,n,i){"abort"!=i&&($(document).off("ajaxSuccess"),window.Quotes.vars.proposalTabChange=null)})}),$(function(){$("#clients th a, #clients .pagination a").live("click",function(){return $.getScript(this.href),!1}),$("#clients_search").submit(function(){return $.get($("#clients_search").attr("action"),$("#clients_search").serialize(),null,"script"),!1})}),function(){$(function(){return window.Quotes.functions.newDialog=function(t,e,n,i){var r,o;return null==i&&(i=null),null===i?(r=$("#dialog"),o=!0):(r=$("#dialog2"),o=!1),$.ajax({url:t,success:function(t,s,a){return r.html(t),r.dialog({title:n,width:880,minHeight:80,modal:o,draggable:!1,resizable:!1,dialogClass:"nifty-dialog nifty-dialog-header",zIndex:1030,open:function(t,e){return"function"==typeof i&&i(r),$(".ui-widget-overlay").live("click",function(){return $(this).parent().length>0?$(this).siblings(".ui-dialog").find(".ui-dialog-content").dialog("close"):void 0})}}),e?$(e).on("ajax:success",function(t,e){return $("#dialog").html(e)}):void 0}})}})}.call(this),function(){var t,e;$(function(){var n;return $("li.universal-search input.search-hidden").length>0?(n=$("li.universal-search input.search-hidden"),n.select2({width:"150px",placeholder:"Search ...",minimumInputLength:2,multiple:!0,ajax:{url:"/universal_search",dataType:"json",quietMillis:1100,data:function(t,e){return{search:t}},results:function(t,e){return{results:t}}},formatResult:t,formatSelection:e,dropdownCssClass:"bigdrop"}).on("select2-open",function(){var t;return t=$("li.universal-search .select2-container"),t.animate({width:230},{step:function(){return n.select2("positionDropdown")}})}).on("select2-close",function(){var t;return t=$("li.universal-search .select2-container"),t.animate({width:150},{step:function(){return n.select2("positionDropdown")}})}).on("change",function(t){var e,i;return n.select2("val",""),i="",e=t.added,e.first_name||e.last_name||e.business_name?i="/clients/"+e.id+"/edit":e.name&&(i="/proposals/"+e.id+"/overview"),""!==i?window.location=i:void 0})):void 0}),t=function(t){var e,n,i,r,o,s,a,l;return t.id?(s="<table class='search-result'>",l="",n="",i="",r="",t.first_name||t.last_name||t.business_name?(e=t,l+=e.is_company?e.business_name:e.first_name+" "+e.last_name,e.company_id&&(n+=e.business_name),e.email&&(i+=e.email),o=1,""!==n&&o++,""!==i&&o++,s+='<tr><td class="first-column" rowspan="'+o+'"><i class="fa fa-user"></i></td><td>'+l+"</td></tr>",""!==n&&(s+='<tr><td class="second-line">'+n+"</td></tr>"),""!==i&&(s+='<tr><td class="third-line">'+i+"</td></tr>")):t.name&&(l=t.name,t.code&&""!==t.code&&(l=t.code+" | "+l),t.client&&(e=t.client,e.is_company?n+=e.business_name:(n+=e.first_name+" "+e.last_name,""!==e.business_name&&e.first_name+" "+e.last_name!==e.business_name&&(i+=e.business_name))),a='<span class="state-'+t.state+'"><span class="state">'+t.state_text+"</span>",""!==i?r=a:i=a,o=1,""!==n&&o++,""!==i&&o++,""!==r&&o++,s+='<tr><td class="first-column" rowspan="'+o+'"><i class="fa fa-envelope-o"></i></td><td>'+l+"</td></tr>",""!==n&&(s+='<tr><td class="second-line">'+n+"</td></tr>"),""!==i&&(s+='<tr><td class="third-line">'+i+"</td></tr>"),""!==r&&(s+='<tr><td class="third-line">'+r+"</td></tr>")),s+="</table>"):t.text},e=function(t){var e;return e=""}}.call(this),function(){$(document).ready(function(){return $(".template-list-my").length>0?($(".template-list-my").sortable({update:function(t,e){return $.ajax(e.item.data("url"),{type:"POST",dataType:"json",data:{_method:"PUT",template:{position_position:e.item.index()}}})}}),$(".template-list-my").disableSelection(),$(".delete-template").bind("ajax:success",function(){return $(this).closest(".template").remove()})):void 0})}.call(this);var ZeroClipboard={version:"1.0.7",clients:{},moviePath:"ZeroClipboard.swf",nextId:1,$:function(t){return"string"==typeof t&&(t=document.getElementById(t)),t.addClass||(t.hide=function(){this.style.display="none"},t.show=function(){this.style.display=""},t.addClass=function(t){this.removeClass(t),this.className+=" "+t},t.removeClass=function(t){for(var e=this.className.split(/\s+/),n=-1,i=0;i<e.length;i++)e[i]==t&&(n=i,i=e.length);return n>-1&&(e.splice(n,1),this.className=e.join(" ")),this},t.hasClass=function(t){return!!this.className.match(new RegExp("\\s*"+t+"\\s*"))}),t},setMoviePath:function(t){this.moviePath=t},dispatch:function(t,e,n){var i=this.clients[t];i&&i.receiveEvent(e,n)},register:function(t,e){this.clients[t]=e},getDOMObjectPosition:function(t,e){for(var n={left:0,top:0,width:t.width?t.width:t.offsetWidth,height:t.height?t.height:t.offsetHeight};t&&t!=e;)n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent;return n},Client:function(t){this.handlers={},this.id=ZeroClipboard.nextId++,this.movieId="ZeroClipboardMovie_"+this.id,ZeroClipboard.register(this.id,this),t&&this.glue(t)}};ZeroClipboard.Client.prototype={id:0,ready:!1,movie:null,clipText:"",handCursorEnabled:!0,cssEffects:!0,handlers:null,glue:function(t,e,n){this.domElement=ZeroClipboard.$(t);var i=99;this.domElement.style.zIndex&&(i=parseInt(this.domElement.style.zIndex,10)+1),"string"==typeof e?e=ZeroClipboard.$(e):"undefined"==typeof e&&(e=document.getElementsByTagName("body")[0]);var r=ZeroClipboard.getDOMObjectPosition(this.domElement,e);this.div=document.createElement("div");var o=this.div.style;if(o.position="absolute",o.left=""+r.left+"px",o.top=""+r.top+"px",o.width=""+r.width+"px",o.height=""+r.height+"px",o.zIndex=i,"object"==typeof n)for(addedStyle in n)o[addedStyle]=n[addedStyle];e.appendChild(this.div),this.div.innerHTML=this.getHTML(r.width,r.height)},getHTML:function(t,e){var n="",i="id="+this.id+"&width="+t+"&height="+e;if(navigator.userAgent.match(/MSIE/)){var r=location.href.match(/^https/i)?"https://":"http://";n+='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+r+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+t+'" height="'+e+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+ZeroClipboard.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+i+'"/><param name="wmode" value="transparent"/></object>'}else n+='<embed id="'+this.movieId+'" src="'+ZeroClipboard.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+t+'" height="'+e+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+i+'" wmode="transparent" />';return n},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide(),this.div.innerHTML="";var t=document.getElementsByTagName("body")[0];try{t.removeChild(this.div)}catch(e){}this.domElement=null,this.div=null}},reposition:function(t){if(t&&(this.domElement=ZeroClipboard.$(t),this.domElement||this.hide()),this.domElement&&this.div){var e=ZeroClipboard.getDOMObjectPosition(this.domElement),n=this.div.style;n.left=""+e.left+"px",n.top=""+e.top+"px"}},setText:function(t){this.clipText=t,this.ready&&this.movie.setText(t)},addEventListener:function(t,e){t=t.toString().toLowerCase().replace(/^on/,""),this.handlers[t]||(this.handlers[t]=[]),this.handlers[t].push(e)},setHandCursor:function(t){this.handCursorEnabled=t,this.ready&&this.movie.setHandCursor(t)},setCSSEffects:function(t){this.cssEffects=!!t},receiveEvent:function(t,e){switch(t=t.toString().toLowerCase().replace(/^on/,"")){case"load":if(this.movie=document.getElementById(this.movieId),!this.movie){var n=this;return void setTimeout(function(){n.receiveEvent("load",null)},1)}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){var n=this;return setTimeout(function(){n.receiveEvent("load",null)},100),void(this.ready=!0)}this.ready=!0,this.movie.setText(this.clipText),this.movie.setHandCursor(this.handCursorEnabled);break;case"mouseover":this.domElement&&this.cssEffects&&(this.domElement.addClass("hover"),this.recoverActive&&this.domElement.addClass("active"));break;case"mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0),this.domElement.removeClass("hover"));break;case"mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case"mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[t])for(var i=0,r=this.handlers[t].length;r>i;i++){var o=this.handlers[t][i];"function"==typeof o?o(this,e):"object"==typeof o&&2==o.length?o[0][o[1]](this,e):"string"==typeof o&&window[o](this,e)}}},function(t){return t.extend(t.fn,{backboneLink:function(e){return t(this).find(":input").each(function(){var n,i;return n=t(this),"radio"!=n.attr("type")?(i=n.attr("name"),0==n.hasClass("editor")&&e.bind("change:"+i,function(){return 0==n.is(":focus")?n.val(e.get(i)):void 0}),t(this).bind("change keyup",function(){var i;return n=t(this),i={},i[n.attr("name")]=n.val(),e.set(i)})):void 0})}})}(jQuery),"undefined"!=typeof Raphael&&!function(t){t.colorwheel=function(t,e,n,i,o){return new r(t,e,n,i,o)};var e=Math.PI,n=document,i=window,r=function(n,i,r,o,s){r=r||200;var a=3*r/200,l=r/200,c=1.6180339887,u=e*r/5,h=r/20,d=r/2,p=2*r/200,f=this,m=1,g=1,v=1,y=r-4*h,b=s?t(s,r,r):t(n,i,r,r),_=y/6+2*h+p,w=2*y/3-2*p;1>l&&(l=1),1>a&&(a=1);for(var x=e/2-2*e/u*1.3,$=d-p,k=d-p-2*h,C=["M",d,p,"A",$,$,0,0,1,$*Math.cos(x)+$+p,$-$*Math.sin(x)+p,"L",k*Math.cos(x)+$+p,$-k*Math.sin(x)+p,"A",k,k,0,0,0,d,p+2*h,"z"].join(),S=0;u>S;S++)b.path(C).attr({stroke:"none",fill:"hsb("+S*(255/u)/255+", 1, 0.78)",transform:"r"+[360/u*S,d,d]});b.path(["M",d,p,"A",$,$,0,1,1,d-1,p,"l1,0","M",d,p+2*h,"A",k,k,0,1,1,d-1,p+2*h,"l1,0"]).attr({"stroke-width":a,stroke:"#fff"}),f.cursorhsb=b.set();var T=2*h+2;f.cursorhsb.push(b.rect(d-T/c/2,p-1,T/c,T,3*r/200).attr({stroke:"#000",opacity:.5,"stroke-width":a})),f.cursorhsb.push(f.cursorhsb[0].clone().attr({stroke:"#fff",opacity:1,"stroke-width":l})),f.ring=b.path(["M",d,p,"A",$,$,0,1,1,d-1,p,"l1,0M",d,p+2*h,"A",k,k,0,1,1,d-1,p+2*h,"l1,0"]).attr({fill:"#000",opacity:0,stroke:"none"}),f.main=b.rect(_,_,w,w).attr({stroke:"none",fill:"#f00",opacity:1}),f.main.clone().attr({stroke:"none",fill:"0-#fff-#fff",opacity:0}),f.square=b.rect(_-1,_-1,w+2,w+2).attr({r:2,stroke:"#fff","stroke-width":a,fill:"90-#000-#000",opacity:0,cursor:"crosshair"}),f.cursor=b.set(),f.cursor.push(b.circle(d,d,h/2).attr({stroke:"#000",opacity:.5,"stroke-width":a})),f.cursor.push(f.cursor[0].clone().attr({stroke:"#fff",opacity:1,"stroke-width":l})),f.H=f.S=f.B=1,f.raphael=b,f.size2=d,f.wh=w,f.x=n,f.xy=_,f.y=i,f.ring.drag(function(t,e,n,i){f.docOnMove(t,e,n,i)
},function(t,e){f.hsbOnTheMove=!0,f.setH(t-f.x-f.size2,e-f.y-f.size2)},function(){f.hsbOnTheMove=!1}),f.square.drag(function(t,e,n,i){f.docOnMove(t,e,n,i)},function(t,e){f.clrOnTheMove=!0,f.setSB(t-f.x,e-f.y)},function(){f.clrOnTheMove=!1}),f.color(o||"#f00"),this.onchanged&&this.onchanged(this.color())},o=r.prototype;o.setH=function(e,n){var i=t.angle(e,n,0,0),r=t.rad(i);this.cursorhsb.attr({transform:"r"+[i+90,this.size2,this.size2]}),this.H=(i+90)/360,this.main.attr({fill:"hsb("+this.H+",1,1)"}),this.onchange&&this.onchange(this.color())},o.setSB=function(t,e){var n=this;t<n.size2-n.wh/2&&(t=n.size2-n.wh/2),t>n.size2+n.wh/2&&(t=n.size2+n.wh/2),e<n.size2-n.wh/2&&(e=n.size2-n.wh/2),e>n.size2+n.wh/2&&(e=n.size2+n.wh/2),n.cursor.attr({cx:t,cy:e}),n.B=1-(e-n.xy)/n.wh,n.S=(t-n.xy)/n.wh,n.onchange&&n.onchange(n.color())},o.docOnMove=function(t,e,n,i){this.hsbOnTheMove&&this.setH(n-this.x-this.size2,i-this.y-this.size2),this.clrOnTheMove&&this.setSB(n-this.x,i-this.y)},o.remove=function(){this.raphael.remove(),this.color=function(){return!1}},o.color=function(e){if(e){e=t.color(e);var n=360*e.h;this.H=e.h,this.S=e.s,this.B=e.v,this.cursorhsb.attr({transform:"r"+[n,this.size2,this.size2]}),this.main.attr({fill:"hsb("+this.H+",1,1)"});var i=this.S*this.wh+this.xy,r=(1-this.B)*this.wh+this.xy;return this.cursor.attr({cx:i,cy:r}),this}return t.hsb2rgb(this.H,this.S,this.B).hex}}(window.Raphael),/**
 * Intro.js v0.5.0
 * https://github.com/usablica/intro.js
 * MIT licensed
 *
 * Copyright (C) 2013 usabli.ca - A weekend project by Afshin Mehrabani (@afshinmeh)
 */
function(t,e){"object"==typeof exports?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t)}(this,function(t){function e(t){this._targetElement=t,this._options={nextLabel:"Next &rarr;",prevLabel:"&larr; Back",skipLabel:"Skip",doneLabel:"Done",tooltipPosition:"bottom",tooltipClass:"",exitOnEsc:!0,exitOnOverlayClick:!0,showStepNumbers:!0}}function n(t){var e=[],n=this;if(this._options.steps)for(var i=[],a=0,c=this._options.steps.length;c>a;a++){var u=this._options.steps[a];u.step=a+1,"string"==typeof u.element&&(u.element=document.querySelector(u.element)),e.push(u)}else{var i=t.querySelectorAll("*[data-intro]");if(i.length<1)return!1;for(var a=0,h=i.length;h>a;a++){var d=i[a];e.push({element:d,intro:d.getAttribute("data-intro"),step:parseInt(d.getAttribute("data-step"),10),tooltipClass:d.getAttribute("data-tooltipClass"),position:d.getAttribute("data-position")||this._options.tooltipPosition})}}if(e.sort(function(t,e){return t.step-e.step}),n._introItems=e,p.call(n,t)){r.call(n);var f=t.querySelector(".introjs-skipbutton"),m=t.querySelector(".introjs-nextbutton");n._onKeyDown=function(e){27===e.keyCode&&1==n._options.exitOnEsc?(s.call(n,t),void 0!=n._introExitCallback&&n._introExitCallback.call(n)):37===e.keyCode?o.call(n):(39===e.keyCode||13===e.keyCode)&&(r.call(n),e.preventDefault?e.preventDefault():e.returnValue=!1)},n._onResize=function(t){l.call(n,document.querySelector(".introjs-helperLayer"))},window.addEventListener?(window.addEventListener("keydown",n._onKeyDown,!0),window.addEventListener("resize",n._onResize,!0)):document.attachEvent&&(document.attachEvent("onkeydown",n._onKeyDown),document.attachEvent("onresize",n._onResize))}return!1}function i(t){this._currentStep=t-2,"undefined"!=typeof this._introItems&&r.call(this)}function r(){if("undefined"==typeof this._currentStep?this._currentStep=0:++this._currentStep,this._introItems.length<=this._currentStep)return"function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this),void s.call(this,this._targetElement);var t=this._introItems[this._currentStep];"undefined"!=typeof this._introBeforeChangeCallback&&this._introBeforeChangeCallback.call(this,t.element),c.call(this,t)}function o(){if(0===this._currentStep)return!1;var t=this._introItems[--this._currentStep];"undefined"!=typeof this._introBeforeChangeCallback&&this._introBeforeChangeCallback.call(this,t.element),c.call(this,t)}function s(t){var e=t.querySelector(".introjs-overlay");e.style.opacity=0,this._options.exitOnOverlayClick=!1;var n=this;setTimeout(function(){e.parentNode&&(e.parentNode.removeChild(e),n._options.exitOnOverlayClick=!0)},500);var i=t.querySelector(".introjs-helperLayer");i&&i.parentNode.removeChild(i);var r=document.querySelector(".introjs-showElement");r&&(r.className=r.className.replace(/introjs-[a-zA-Z]+/g,"").replace(/^\s+|\s+$/g,""));var o=document.querySelectorAll(".introjs-fixParent");if(o&&o.length>0)for(var s=o.length-1;s>=0;s--)o[s].className=o[s].className.replace(/introjs-fixParent/g,"").replace(/^\s+|\s+$/g,"");window.removeEventListener?window.removeEventListener("keydown",this._onKeyDown,!0):document.detachEvent&&document.detachEvent("onkeydown",this._onKeyDown),this._currentStep=void 0}function a(t,e,n){if(e.style.top=null,e.style.right=null,e.style.bottom=null,e.style.left=null,this._introItems[this._currentStep]){var i="",r=this._introItems[this._currentStep];i="string"==typeof r.tooltipClass?r.tooltipClass:this._options.tooltipClass,e.className=("introjs-tooltip "+i).replace(/^\s+|\s+$/g,"");var i=this._options.tooltipClass,o=this._introItems[this._currentStep].position;switch(o){case"top":e.style.left="15px",e.style.top="-"+(f(e).height+10)+"px",n.className="introjs-arrow bottom";break;case"right":e.style.left=f(t).width+20+"px",n.className="introjs-arrow left";break;case"left":e.style.top="15px",e.style.right=f(t).width+20+"px",n.className="introjs-arrow right";break;case"bottom":default:e.style.bottom="-"+(f(e).height+10)+"px",n.className="introjs-arrow top"}}}function l(t){if(t){if(!this._introItems[this._currentStep])return;var e=f(this._introItems[this._currentStep].element);t.setAttribute("style","width: "+(e.width+10)+"px; height:"+(e.height+10)+"px; top:"+(e.top-5)+"px;left: "+(e.left-5)+"px;")}}function c(t){"undefined"!=typeof this._introChangeCallback&&this._introChangeCallback.call(this,t.element);var e=this,n=document.querySelector(".introjs-helperLayer"),i=f(t.element);if(null!=n){var c=n.querySelector(".introjs-helperNumberLayer"),p=n.querySelector(".introjs-tooltiptext"),m=n.querySelector(".introjs-arrow"),g=n.querySelector(".introjs-tooltip"),v=n.querySelector(".introjs-skipbutton"),y=n.querySelector(".introjs-prevbutton"),b=n.querySelector(".introjs-nextbutton");g.style.opacity=0,l.call(e,n);var _=document.querySelectorAll(".introjs-fixParent");if(_&&_.length>0)for(var w=_.length-1;w>=0;w--)_[w].className=_[w].className.replace(/introjs-fixParent/g,"").replace(/^\s+|\s+$/g,"");var x=document.querySelector(".introjs-showElement");x.className=x.className.replace(/introjs-[a-zA-Z]+/g,"").replace(/^\s+|\s+$/g,""),e._lastShowElementTimer&&clearTimeout(e._lastShowElementTimer),e._lastShowElementTimer=setTimeout(function(){null!=c&&(c.innerHTML=t.step),p.innerHTML=t.intro,a.call(e,t.element,g,m),g.style.opacity=1},350)}else{var $=document.createElement("div"),k=document.createElement("div"),C=document.createElement("div");if($.className="introjs-helperLayer",l.call(e,$),this._targetElement.appendChild($),k.className="introjs-arrow",C.innerHTML='<div class="introjs-tooltiptext">'+t.intro+'</div><div class="introjs-tooltipbuttons"></div>',this._options.showStepNumbers){var S=document.createElement("span");S.className="introjs-helperNumberLayer",S.innerHTML=t.step,$.appendChild(S)}C.appendChild(k),$.appendChild(C);var b=document.createElement("a");b.onclick=function(){e._introItems.length-1!=e._currentStep&&r.call(e)},b.href="javascript:void(0);",b.innerHTML=this._options.nextLabel;var y=document.createElement("a");y.onclick=function(){0!=e._currentStep&&o.call(e)},y.href="javascript:void(0);",y.innerHTML=this._options.prevLabel;var v=document.createElement("a");v.className="introjs-button introjs-skipbutton",v.href="javascript:void(0);",v.innerHTML=this._options.skipLabel,v.onclick=function(){e._introItems.length-1==e._currentStep&&"function"==typeof e._introCompleteCallback&&e._introCompleteCallback.call(e),e._introItems.length-1!=e._currentStep&&"function"==typeof e._introExitCallback&&e._introExitCallback.call(e),s.call(e,e._targetElement)};var T=C.querySelector(".introjs-tooltipbuttons");T.appendChild(v),this._introItems.length>1&&(T.appendChild(y),T.appendChild(b)),a.call(e,t.element,C,k)}0==this._currentStep?(y.className="introjs-button introjs-prevbutton introjs-disabled",b.className="introjs-button introjs-nextbutton",v.innerHTML=this._options.skipLabel):this._introItems.length-1==this._currentStep?(v.innerHTML=this._options.doneLabel,y.className="introjs-button introjs-prevbutton",b.className="introjs-button introjs-nextbutton introjs-disabled"):(y.className="introjs-button introjs-prevbutton",b.className="introjs-button introjs-nextbutton",v.innerHTML=this._options.skipLabel),b.focus(),t.element.className+=" introjs-showElement";var A=u(t.element,"position");"absolute"!==A&&"relative"!==A&&(t.element.className+=" introjs-relativePosition");for(var E=t.element.parentNode;null!=E&&"body"!==E.tagName.toLowerCase();){var P=u(E,"z-index");/[0-9]+/.test(P)&&(E.className+=" introjs-fixParent"),E=E.parentNode}if(!d(t.element)){var N=t.element.getBoundingClientRect(),O=N.bottom-(N.bottom-N.top),j=N.bottom-h().height;0>O?window.scrollBy(0,O-30):window.scrollBy(0,j+100)}}function u(t,e){var n="";return t.currentStyle?n=t.currentStyle[e]:document.defaultView&&document.defaultView.getComputedStyle&&(n=document.defaultView.getComputedStyle(t,null).getPropertyValue(e)),n&&n.toLowerCase?n.toLowerCase():n}function h(){if(void 0!=window.innerWidth)return{width:window.innerWidth,height:window.innerHeight};var t=document.documentElement;return{width:t.clientWidth,height:t.clientHeight}}function d(t){var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom+80<=window.innerHeight&&e.right<=window.innerWidth}function p(t){var e=document.createElement("div"),n="",i=this;if(e.className="introjs-overlay","body"===t.tagName.toLowerCase())n+="top: 0;bottom: 0; left: 0;right: 0;position: fixed;",e.setAttribute("style",n);else{var o=f(t);o&&(n+="width: "+o.width+"px; height:"+o.height+"px; top:"+o.top+"px;left: "+o.left+"px;",e.setAttribute("style",n))}return t.appendChild(e),e.onclick=function(){1==i._options.exitOnOverlayClick&&(i._introItems.length-1!=i._currentStep?r.call(i):(s.call(i,t),void 0!=i._introExitCallback&&i._introExitCallback.call(i)))},setTimeout(function(){n+="opacity: .8;",e.setAttribute("style",n)},10),!0}function f(t){var e={};e.width=t.offsetWidth,e.height=t.offsetHeight;for(var n=0,i=0;t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)n+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;return e.top=i,e.left=n,e}function m(t,e){var n={};for(var i in t)n[i]=t[i];for(var i in e)n[i]=e[i];return n}var g="0.5.0",v=function(t){if("object"==typeof t)return new e(t);if("string"==typeof t){var n=document.querySelector(t);if(n)return new e(n);throw new Error("There is no element with given selector.")}return new e(document.body)};return v.version=g,v.fn=e.prototype={clone:function(){return new e(this)},setOption:function(t,e){return this._options[t]=e,this},setOptions:function(t){return this._options=m(this._options,t),this},start:function(){return n.call(this,this._targetElement),this},goToStep:function(t){return i.call(this,t),this},exit:function(){s.call(this,this._targetElement)},refresh:function(){return l.call(this,document.querySelector(".introjs-helperLayer")),this},onbeforechange:function(t){if("function"!=typeof t)throw new Error("Provided callback for onbeforechange was not a function");return this._introBeforeChangeCallback=t,this},onchange:function(t){if("function"!=typeof t)throw new Error("Provided callback for onchange was not a function.");return this._introChangeCallback=t,this},oncomplete:function(t){if("function"!=typeof t)throw new Error("Provided callback for oncomplete was not a function.");return this._introCompleteCallback=t,this},onexit:function(t){if("function"!=typeof t)throw new Error("Provided callback for onexit was not a function.");return this._introExitCallback=t,this}},t.introJs=v,v}),/*

jSignature v2
Copyright (c) 2012 Willow Systems Corp http://willow-systems.com
Copyright (c) 2010 Brinley Ang http://www.unbolt.net
MIT License <http://www.opensource.org/licenses/mit-license.php> 


jSignature v2 jSignature's custom "base30" format export and import plugins.
Copyright (c) 2011 Willow Systems Corp http://willow-systems.com
MIT License <http://www.opensource.org/licenses/mit-license.php>


Simplify.js BSD 
(c) 2012, Vladimir Agafonkin
mourner.github.com/simplify-js


base64 encoder
MIT, GPL
http://phpjs.org/functions/base64_encode
+   original by: Tyler Akins (http://rumkin.com)
+   improved by: Bayron Guevara
+   improved by: Thunder.m
+   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
+   bugfixed by: Pellentesque Malesuada
+   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
+   improved by: Rafal Kukawski (http://kukawski.pl)


jSignature v2 SVG export plugin.
Copyright (c) 2012 Willow Systems Corp http://willow-systems.com
MIT License <http://www.opensource.org/licenses/mit-license.php>


jSignature v2 jSignature's Undo Button and undo functionality plugin
Copyright (c) 2011 Willow Systems Corp http://willow-systems.com
MIT License <http://www.opensource.org/licenses/mit-license.php>

*/
function(){function t(t){for(var e,n=t.css("color"),i;void 0===i&&void 0!==t;){try{e=t.css("background-color")}catch(r){e="transparent"}"transparent"!==e&&"rgba(0, 0, 0, 0)"!==e&&(i=e);try{t=t.parent(),t[0]===document&&(t=void 0)}catch(o){t=void 0}}var t=/rgb[a]*\((\d+),\s*(\d+),\s*(\d+)/,s=/#([AaBbCcDdEeFf\d]{2})([AaBbCcDdEeFf\d]{2})([AaBbCcDdEeFf\d]{2})/,a;e=void 0,(e=n.match(t))?a={r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}:(e=n.match(s))&&(a={r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)});var l;return i?(e=void 0,(e=i.match(t))?l={r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}:(e=i.match(s))&&(l={r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)})):l=a&&127<Math.max.apply(null,[a.r,a.g,a.b])?{r:0,g:0,b:0}:{r:255,g:255,b:255},e=function(t){return"rgb("+[t.r,t.g,t.b].join(", ")+")"},a&&l?(t=Math.max.apply(null,[a.r,a.g,a.b]),a=Math.max.apply(null,[l.r,l.g,l.b]),a=Math.round(a+-.75*(a-t)),a={r:a,g:a,b:a}):a?(a=Math.max.apply(null,[a.r,a.g,a.b]),t=1,a>127&&(t=-1),a=Math.round(a+96*t),a={r:a,g:a,b:a}):a={r:191,g:191,b:191},{color:n,"background-color":l?e(l):i,"decor-color":e(a)}}function e(t,e){this.x=t,this.y=e,this.reverse=function(){return new this.constructor(-1*this.x,-1*this.y)},this._length=null,this.getLength=function(){return this._length||(this._length=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))),this._length};var n=function(t){return Math.round(t/Math.abs(t))};this.resizeTo=function(t){if(0===this.x&&0===this.y)this._length=0;else if(0===this.x)this._length=t,this.y=t*n(this.y);else if(0===this.y)this._length=t,this.x=t*n(this.x);else{var e=Math.abs(this.y/this.x),i=Math.sqrt(Math.pow(t,2)/(1+Math.pow(e,2))),e=e*i;this._length=t,this.x=i*n(this.x),this.y=e*n(this.y)}return this},this.angleTo=function(t){var e=this.getLength()*t.getLength();return 0===e?0:Math.acos(Math.min(Math.max((this.x*t.x+this.y*t.y)/e,-1),1))/Math.PI}}function n(t,n){this.x=t,this.y=n,this.getVectorToCoordinates=function(t,n){return new e(t-this.x,n-this.y)},this.getVectorFromCoordinates=function(t,e){return this.getVectorToCoordinates(t,e).reverse()},this.getVectorToPoint=function(t){return new e(t.x-this.x,t.y-this.y)},this.getVectorFromPoint=function(t){return this.getVectorToPoint(t).reverse()}}function i(t,e,n,i,r){if(this.data=t,this.context=e,t.length)for(var o=t.length,s,a,l=0;o>l;l++){s=t[l],a=s.x.length,n.call(e,s);for(var c=1;a>c;c++)i.call(e,s,c);r.call(e,s)}this.changed=function(){},this.startStrokeFn=n,this.addToStrokeFn=i,this.endStrokeFn=r,this.inStroke=!1,this._stroke=this._lastPoint=null,this.startStroke=function(t){if(t&&"number"==typeof t.x&&"number"==typeof t.y){this._stroke={x:[t.x],y:[t.y]},this.data.push(this._stroke),this._lastPoint=t,this.inStroke=!0;var e=this._stroke,n=this.startStrokeFn,i=this.context;return setTimeout(function(){n.call(i,e)},3),t}return null},this.addToStroke=function(t){if(this.inStroke&&"number"==typeof t.x&&"number"==typeof t.y&&4<Math.abs(t.x-this._lastPoint.x)+Math.abs(t.y-this._lastPoint.y)){var e=this._stroke.x.length;this._stroke.x.push(t.x),this._stroke.y.push(t.y),this._lastPoint=t;var n=this._stroke,i=this.addToStrokeFn,r=this.context;return setTimeout(function(){i.call(r,n,e)},3),t}return null},this.endStroke=function(){var t=this.inStroke;if(this.inStroke=!1,this._lastPoint=null,t){var e=this._stroke,n=this.endStrokeFn,i=this.context,r=this.changed;return setTimeout(function(){n.call(i,e),r.call(i)},3),!0}return null}}function r(e,i,r){var l=this.$parent=$(e),e=this.eventTokens={};this.events=new a(this);var c=$.fn[o]("globalEvents"),u={width:"ratio",height:"ratio",sizeRatio:4,color:"#000","background-color":"#fff","decor-color":"#eee",lineWidth:0,minFatFingerCompensation:-10,showUndoButton:!1,data:[]};$.extend(u,t(l)),i&&$.extend(u,i),this.settings=u;for(var h in r)r.hasOwnProperty(h)&&r[h].call(this,h);this.events.publish(o+".initializing"),this.$controlbarUpper=$('<div style="padding:0 !important;margin:0 !important;width: 100% !important; height: 0 !important;margin-top:-1em !important;margin-bottom:1em !important;"></div>').appendTo(l),this.isCanvasEmulator=!1,r=this.canvas=this.initializeCanvas(u),i=$(r),this.$controlbarLower=$('<div style="padding:0 !important;margin:0 !important;width: 100% !important; height: 0 !important;margin-top:-1.5em !important;margin-bottom:1.5em !important;"></div>').appendTo(l),this.canvasContext=r.getContext("2d"),i.data(o+".this",this),l=(l=u.lineWidth)?l:Math.max(Math.round(r.width/400),2),u.lineWidth=l,this.lineCurveThreshold=3*u.lineWidth,u.cssclass&&""!=$.trim(u.cssclass)&&i.addClass(u.cssclass),this.fatFingerCompensation=0;var l=function(t){var e,i,r=function(r){return r=r.changedTouches&&0<r.changedTouches.length?r.changedTouches[0]:r,new n(Math.round(r.pageX+e),Math.round(r.pageY+i)+t.fatFingerCompensation)},o=new s(750,function(){t.dataEngine.endStroke()});return this.drawEndHandler=function(e){try{e.preventDefault()}catch(n){}o.clear(),t.dataEngine.endStroke()},this.drawStartHandler=function(n){n.preventDefault();var s=$(t.canvas).offset();e=-1*s.left,i=-1*s.top,t.dataEngine.startStroke(r(n)),o.kick()},this.drawMoveHandler=function(e){e.preventDefault(),t.dataEngine.inStroke&&(t.dataEngine.addToStroke(r(e)),o.kick())},this}.call({},this),d=l.drawEndHandler,p=l.drawStartHandler,f=l.drawMoveHandler,m=this.canvas,i=$(m);this.isCanvasEmulator?(i.bind("mousemove."+o,f),i.bind("mouseup."+o,d),i.bind("mousedown."+o,p)):(m.ontouchstart=function(t){m.onmousedown=void 0,m.onmouseup=void 0,m.onmousemove=void 0,this.fatFingerCompensation=u.minFatFingerCompensation&&-3*u.lineWidth>u.minFatFingerCompensation?-3*u.lineWidth:u.minFatFingerCompensation,p(t),m.ontouchend=d,m.ontouchstart=p,m.ontouchmove=f},m.onmousedown=function(t){m.ontouchstart=void 0,m.ontouchend=void 0,m.ontouchmove=void 0,p(t),m.onmousedown=p,m.onmouseup=d,m.onmousemove=f}),e[o+".windowmouseup"]=c.subscribe(o+".windowmouseup",l.drawEndHandler),this.events.publish(o+".attachingEventHandlers");var g=this,e=u.width.toString(10),v=o;return("ratio"===e||"%"===e.split("")[e.length-1])&&(this.eventTokens[v+".parentresized"]=c.subscribe(v+".parentresized",function(t,e,n){return function(){var i=e.width();if(i!==n){for(var r in t)t.hasOwnProperty(r)&&(c.unsubscribe(t[r]),delete t[r]);var o=g.settings;g.$parent.children().remove();for(r in g)g.hasOwnProperty(r)&&delete g[r];r=o.data;var i=1*i/n,s=[],a,l,u,h,d,p;for(l=0,u=r.length;u>l;l++){for(p=r[l],a={x:[],y:[]},h=0,d=p.x.length;d>h;h++)a.x.push(p.x[h]*i),a.y.push(p.y[h]*i);s.push(a)}o.data=s,e[v](o)}}}(this.eventTokens,this.$parent,this.$parent.width(),1*this.canvas.width/this.canvas.height))),this.resetCanvas(u.data),this.events.publish(o+".initialized"),this}var o="jSignature",s=function(t,e){var n;return this.kick=function(){clearTimeout(n),n=setTimeout(e,t)},this.clear=function(){clearTimeout(n)},this},a=function(t){this.topics={},this.context=t?t:this,this.publish=function(t,e,n,i){if(this.topics[t]){var r=this.topics[t],o=Array.prototype.slice.call(arguments,1),s=[],a,l,c,u;for(l=0,c=r.length;c>l;l++)u=r[l],a=u[0],u[1]&&(u[0]=function(){},s.push(l)),a.apply(this.context,o);for(l=0,c=s.length;c>l;l++)r.splice(s[l],1)}},this.subscribe=function(t,e,n){return this.topics[t]?this.topics[t].push([e,n]):this.topics[t]=[[e,n]],{topic:t,callback:e}},this.unsubscribe=function(t){if(this.topics[t.topic])for(var e=this.topics[t.topic],n=0,i=e.length;i>n;n++)e[n][0]===t.callback&&e.splice(n,1)}},l=function(t){var e=this.canvasContext,n=t.x[0],t=t.y[0],i=this.settings.lineWidth,r=e.fillStyle;e.fillStyle=e.strokeStyle,e.fillRect(n+i/-2,t+i/-2,i,i),e.fillStyle=r},c=function(t,i){var r=new n(t.x[i-1],t.y[i-1]),o=new n(t.x[i],t.y[i]),s=r.getVectorToPoint(o);if(i>1){var a=new n(t.x[i-2],t.y[i-2]),l=a.getVectorToPoint(r),c;if(l.getLength()>this.lineCurveThreshold){c=i>2?new n(t.x[i-3],t.y[i-3]).getVectorToPoint(a):new e(0,0);var u=.35*l.getLength(),h=l.angleTo(c.reverse()),d=s.angleTo(l.reverse());c=new e(c.x+l.x,c.y+l.y).resizeTo(Math.max(.05,h)*u);var p=new e(l.x+s.x,l.y+s.y).reverse().resizeTo(Math.max(.05,d)*u),l=this.canvasContext,u=a.x,d=a.y,h=r.x,f=r.y,m=a.x+c.x,a=a.y+c.y;c=r.x+p.x,p=r.y+p.y,l.beginPath(),l.moveTo(u,d),l.bezierCurveTo(m,a,c,p,h,f),l.stroke()}}s.getLength()<=this.lineCurveThreshold&&(s=this.canvasContext,a=r.x,r=r.y,c=o.x,o=o.y,s.beginPath(),s.moveTo(a,r),s.lineTo(c,o),s.stroke())},u=function(t){var i=t.x.length-1;if(i>0){var r=new n(t.x[i],t.y[i]),o=new n(t.x[i-1],t.y[i-1]),s=o.getVectorToPoint(r);if(s.getLength()>this.lineCurveThreshold){if(i>1){var t=new n(t.x[i-2],t.y[i-2]).getVectorToPoint(o),a=new e(t.x+s.x,t.y+s.y).resizeTo(s.getLength()/2),s=this.canvasContext,t=o.x,i=o.y,l=r.x,c=r.y,u=o.x+a.x,o=o.y+a.y,a=r.x,r=r.y;s.beginPath(),s.moveTo(t,i),s.bezierCurveTo(u,o,a,r,l,c)}else s=this.canvasContext,t=o.x,o=o.y,i=r.x,r=r.y,s.beginPath(),s.moveTo(t,o),s.lineTo(i,r);s.stroke()}}};if(r.prototype.resetCanvas=function(t){var e=this.canvas,n=this.settings,r=this.canvasContext,s=this.isCanvasEmulator,a=e.width,h=e.height;r.clearRect(0,0,a+30,h+30),r.shadowColor=r.fillStyle=n["background-color"],s&&r.fillRect(0,0,a+30,h+30),r.lineWidth=Math.ceil(parseInt(n.lineWidth,10)),r.lineCap=r.lineJoin="round",r.strokeStyle=n["decor-color"],r.shadowOffsetX=0,r.shadowOffsetY=0;var d=Math.round(h/5),p=1.5*d,f=h-d,a=a-1.5*d,h=h-d;r.beginPath(),r.moveTo(p,f),r.lineTo(a,h),r.stroke(),r.strokeStyle=n.color,s||(r.shadowColor=r.strokeStyle,r.shadowOffsetX=0*r.lineWidth,r.shadowOffsetY=-0*r.lineWidth,r.shadowBlur=0),t||(t=[]),r=this.dataEngine=new i(t,this,l,c,u),n.data=t,$(e).data(o+".data",t).data(o+".settings",n);var m=this.$parent,g=this.events,v=o;return r.changed=function(){g.publish(v+".change"),m.trigger("change")},r.changed(),!0},r.prototype.initializeCanvas=function(t){var e=document.createElement("canvas"),n=$(e);if(t.width===t.height&&"ratio"===t.height&&(t.width="100%"),n.css("margin",0).css("padding",0).css("border","none").css("height","ratio"!==t.height&&t.height?t.height.toString(10):1).css("width","ratio"!==t.width&&t.width?t.width.toString(10):1),n.appendTo(this.$parent),"ratio"===t.height?n.css("height",Math.round(n.width()/t.sizeRatio)):"ratio"===t.width&&n.css("width",Math.round(n.height()*t.sizeRatio)),n.addClass(o),e.width=n.width(),e.height=n.height(),t=e,t.getContext)t=!1;else{if("undefined"==typeof FlashCanvas)throw Error("Canvas element does not support 2d context. jSignature cannot proceed.");t=FlashCanvas.initElement(t),n=1,window&&window.screen&&window.screen.deviceXDPI&&window.screen.logicalXDPI&&(n=1*window.screen.deviceXDPI/window.screen.logicalXDPI),1!==n&&($(t).children("object").get(0).resize(Math.ceil(t.width*n),Math.ceil(t.height*n)),t.getContext("2d").scale(n,n)),t=!0}return this.isCanvasEmulator=t,e.onselectstart=function(t){return t&&t.preventDefault&&t.preventDefault(),t&&t.stopPropagation&&t.stopPropagation(),!1},e},null==this.jQuery)throw Error("We need jQuery for some of the functionality. jQuery is not detected. Failing to initialize...");var h=this.jQuery,d=function(t,e){var n=new Image,i=this;n.onload=function(){i.getContext("2d").drawImage(n,0,0,n.width<i.width?n.width:i.width,n.height<i.height?n.height:i.height)},n.src="data:"+e+","+t},p=function(t){return this.find("canvas."+o).add(this.filter("canvas."+o)).data(o+".this").resetCanvas(t),this},f=function(t,e){if(void 0!==e||"string"!=typeof t||"data:"!==t.substr(0,5)||(e=t.slice(5).split(",")[0],t=t.slice(6+e.length),e!==t)){var n=this.find("canvas."+o).add(this.filter("canvas."+o));if(!w.hasOwnProperty(e))throw Error(o+" is unable to find import plugin with for format '"+String(e)+"'");return 0!==n.length&&w[e].call(n[0],t,e,function(t){return function(){return t.resetCanvas(arguments)}}(n.data(o+".this"))),this}},m=new a,g=o,v,y=function(){m.publish(g+".parentresized")};h(window).bind("resize."+g,function(){v&&clearTimeout(v),v=setTimeout(y,500)}).bind("mouseup."+g,function(t){m.publish(g+".windowmouseup",t)});var b={exampleExtension:function(t){this.events.subscribe(o+".initializing",function(){this.settings.hasOwnProperty("non-existent setting category?")&&console.log(t+" is here")})}},_={"default":function(){return this.toDataURL()},"native":function(t){return t},image:function(){var t=this.toDataURL();if("string"==typeof t&&4<t.length&&"data:"===t.slice(0,5)&&-1!==t.indexOf(",")){var e=t.indexOf(",");return[t.slice(5,e),t.substr(e+1)]}return[]}},w={"native":function(t,e,n){n(t)},image:d,"image/png;base64":d,"image/jpeg;base64":d,"image/jpg;base64":d},x={"export":_,"import":w,instance:b},k={init:function(t){return this.each(function(){new r(this,t,b)})},getSettings:function(){return this.find("canvas."+o).add(this.filter("canvas."+o)).data(o+".this").settings},clear:p,reset:p,addPlugin:function(t,e,n){return x.hasOwnProperty(t)&&(x[t][e]=n),this},listPlugins:function(t){var e=[];if(x.hasOwnProperty(t)){var t=x[t],n;for(n in t)t.hasOwnProperty(n)&&e.push(n)}return e},getData:function(t){var e=this.find("canvas."+o).add(this.filter("canvas."+o));return void 0===t&&(t="default"),0!==e.length&&_.hasOwnProperty(t)?_[t].call(e.get(0),e.data(o+".data")):void 0},importData:f,setData:f,globalEvents:function(){return m},events:function(){return this.find("canvas."+o).add(this.filter("canvas."+o)).data(o+".this").events}};h.fn[o]=function(t){return t&&"object"!=typeof t?"string"==typeof t&&k[t]?k[t].apply(this,Array.prototype.slice.call(arguments,1)):void h.error("Method "+String(t)+" does not exist on jQuery."+o):k.init.apply(this,arguments)}}(),function(){for(var t={},e={},n="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWX".split(""),i=n.length/2,r=i-1;r>-1;r--)t[n[r]]=n[r+i],e[n[r+i]]=n[r];var o=function(e){for(var e=e.split(""),n=e.length,i=1;n>i;i++)e[i]=t[e[i]];return e.join("")},s=function(t){for(var e=[],n=0,r=1,s=t.length,a,l,c=0;s>c;c++)a=Math.round(t[c]),l=a-n,n=a,0>l&&r>0?(r=-1,e.push("Z")):l>0&&0>r&&(r=1,e.push("Y")),a=Math.abs(l),e.push(a>=i?o(a.toString(i)):a.toString(i));return e.join("")},a=function(n){for(var r=[],n=n.split(""),o=n.length,s,a=1,l=[],c=0,u=0;o>u;u++)s=n[u],s in t||"Z"===s||"Y"===s?(0!==l.length&&(l=parseInt(l.join(""),i)*a+c,r.push(l),c=l),"Z"===s?(a=-1,l=[]):"Y"===s?(a=1,l=[]):l=[s]):l.push(e[s]);return r.push(parseInt(l.join(""),i)*a+c),r},l=function(t){for(var e=[],n=t.length,i,r=0;n>r;r++)i=t[r],e.push(s(i.x)),e.push(s(i.y));return e.join("_")},c=function(t){for(var e=[],t=t.split("_"),n=t.length/2,i=0;n>i;i++)e.push({x:a(t[2*i]),y:a(t[2*i+1])});return e},n=function(t){return["image/jsignature;base30",l(t)]},r=function(t,e,n){"string"==typeof t&&("image/jsignature;base30"===t.substring(0,23).toLowerCase()&&(t=t.substring(24)),n(c(t)))};if(null==this.jQuery)throw Error("We need jQuery for some of the functionality. jQuery is not detected. Failing to initialize...");var u=this.jQuery.fn.jSignature;u("addPlugin","export","base30",n),u("addPlugin","export","image/jsignature;base30",n),u("addPlugin","import","base30",r),u("addPlugin","import","image/jsignature;base30",r),this.jSignatureDebug&&(this.jSignatureDebug.base30={remapTailChars:o,compressstrokeleg:s,uncompressstrokeleg:a,compressstrokes:l,uncompressstrokes:c,charmap:t})}.call("undefined"!=typeof window?window:this),function(){function t(t,e){this.x=t,this.y=e,this.reverse=function(){return new this.constructor(-1*this.x,-1*this.y)},this._length=null,this.getLength=function(){return this._length||(this._length=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))),this._length};var n=function(t){return Math.round(t/Math.abs(t))};this.resizeTo=function(t){if(0===this.x&&0===this.y)this._length=0;else if(0===this.x)this._length=t,this.y=t*n(this.y);else if(0===this.y)this._length=t,this.x=t*n(this.x);else{var e=Math.abs(this.y/this.x),i=Math.sqrt(Math.pow(t,2)/(1+Math.pow(e,2))),e=e*i;this._length=t,this.x=i*n(this.x),this.y=e*n(this.y)}return this},this.angleTo=function(t){var e=this.getLength()*t.getLength();return 0===e?0:Math.acos(Math.min(Math.max((this.x*t.x+this.y*t.y)/e,-1),1))/Math.PI}}function e(e,n){this.x=e,this.y=n,this.getVectorToCoordinates=function(e,n){return new t(e-this.x,n-this.y)},this.getVectorFromCoordinates=function(t,e){return this.getVectorToCoordinates(t,e).reverse()},this.getVectorToPoint=function(e){return new t(e.x-this.x,e.y-this.y)},this.getVectorFromPoint=function(t){return this.getVectorToPoint(t).reverse()}}function n(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}function i(i,r,o){var r=r+1,s=new e(i.x[r-1],i.y[r-1]),a=new e(i.x[r],i.y[r]),a=s.getVectorToPoint(a),l=new e(i.x[r-2],i.y[r-2]),s=l.getVectorToPoint(s);return s.getLength()>o?(o=r>2?new e(i.x[r-3],i.y[r-3]).getVectorToPoint(l):new t(0,0),i=.35*s.getLength(),l=s.angleTo(o.reverse()),r=a.angleTo(s.reverse()),o=new t(o.x+s.x,o.y+s.y).resizeTo(Math.max(.05,l)*i),a=new t(s.x+a.x,s.y+a.y).reverse().resizeTo(Math.max(.05,r)*i),a=new t(s.x+a.x,s.y+a.y),["c",n(o.x,2),n(o.y,2),n(a.x,2),n(a.y,2),n(s.x,2),n(s.y,2)]):["l",n(s.x,2),n(s.y,2)]}function r(i,r){var o=i.x.length-1,s=new e(i.x[o],i.y[o]),a=new e(i.x[o-1],i.y[o-1]),s=a.getVectorToPoint(s);if(o>1&&s.getLength()>r){var o=new e(i.x[o-2],i.y[o-2]).getVectorToPoint(a),a=s.angleTo(o.reverse()),l=.35*s.getLength(),o=new t(o.x+s.x,o.y+s.y).resizeTo(Math.max(.05,a)*l);return["c",n(o.x,2),n(o.y,2),n(s.x,2),n(s.y,2),n(s.x,2),n(s.y,2)]}return["l",n(s.x,2),n(s.y,2)]}function o(t,e,o){for(var e=["M",n(t.x[0]-e,2),n(t.y[0]-o,2)],o=1,s=t.x.length-1;s>o;o++)e.push.apply(e,i(t,o,1));return s>0?e.push.apply(e,r(t,o,1)):0===s&&e.push.apply(e,["l",1,1]),e.join(" ")}function s(t){var e=['<?xml version="1.0" encoding="UTF-8" standalone="no"?>','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'],n,i=t.length,r,s=[],a=[],l=r=n=0,c=0,u=[];if(0!==i){for(n=0;i>n;n++){l=t[n],c=[],r={x:[],y:[]};for(var h=void 0,d=void 0,h=0,d=l.x.length;d>h;h++)c.push({x:l.x[h],y:l.y[h]});for(c=simplify(c,.7,!0),h=0,d=c.length;d>h;h++)r.x.push(c[h].x),r.y.push(c[h].y);u.push(r),s=s.concat(r.x),a=a.concat(r.y)}t=Math.min.apply(null,s)-1,i=Math.max.apply(null,s)+1,s=Math.min.apply(null,a)-1,a=Math.max.apply(null,a)+1,l=0>t?0:t,c=0>s?0:s,n=i-t,r=a-s}for(e.push('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+n.toString()+'" height="'+r.toString()+'">'),n=0,i=u.length;i>n;n++)r=u[n],e.push('<path fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="'+o(r,l,c)+'"/>');return e.push("</svg>"),e.join("")}function a(t){return[h,s(t)]}function l(t){return[d,u(s(t))]}var c=window;if(("undefined"!=typeof exports?exports:c).simplify=function(t,e,n){if(e=void 0!==e?e*e:1,!n){for(var i=t.length,r,o=t[0],s=[o],n=1;i>n;n++){r=t[n];var a=r.x-o.x,l=r.y-o.y;a*a+l*l>e&&(s.push(r),o=r)}o!==r&&s.push(r),t=s}r=t;var n=r.length,i=new("undefined"!=typeof Uint8Array?Uint8Array:Array)(n),o=0,s=n-1,c,u,h=[],d=[],p=[];for(i[o]=i[s]=1;s;){for(l=0,a=o+1;s>a;a++){c=r[a];var f=r[o],m=r[s],g=f.x,v=f.y,f=m.x-g,y=m.y-v,b=void 0;(0!==f||0!==y)&&(b=((c.x-g)*f+(c.y-v)*y)/(f*f+y*y),b>1?(g=m.x,v=m.y):b>0&&(g+=f*b,v+=y*b)),f=c.x-g,y=c.y-v,c=f*f+y*y,c>l&&(u=a,l=c)}l>e&&(i[u]=1,h.push(o),d.push(u),h.push(u),d.push(s)),o=h.pop(),s=d.pop()}for(a=0;n>a;a++)i[a]&&p.push(r[a]);return t=p},"function"!=typeof u)var u=function(t){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),n,i,r,o,s=0,a=0,l="",l=[];do n=t.charCodeAt(s++),i=t.charCodeAt(s++),r=t.charCodeAt(s++),o=n<<16|i<<8|r,n=o>>18&63,i=o>>12&63,r=o>>6&63,o&=63,l[a++]=e[n]+e[i]+e[r]+e[o];while(s<t.length);return l=l.join(""),t=t.length%3,(t?l.slice(0,t-3):l)+"===".slice(t||3)};var h="image/svg+xml",d="image/svg+xml;base64";if("undefined"==typeof $)throw Error("We need jQuery for some of the functionality. jQuery is not detected. Failing to initialize...");c=$.fn.jSignature,c("addPlugin","export","svg",a),c("addPlugin","export",h,a),c("addPlugin","export","svgbase64",l),c("addPlugin","export",d,l)}(),function(){$.fn.jSignature("addPlugin","instance","UndoButton",function(t){this.events.subscribe("jSignature.attachingEventHandlers",function(){if(this.settings[t]){var e=this.settings[t];"function"!=typeof e&&(e=function(){var t=$('<input type="button" value="Undo last stroke" style="position:absolute;display:none;margin:0 !important;top:auto" />').appendTo(this.$controlbarLower),e=t.width();return t.css("left",Math.round((this.canvas.width-e)/2)),e!==t.width()&&t.width(e),t});var n=e.call(this),i=this;i.events.subscribe("jSignature.change",function(){i.dataEngine.data.length?n.show():n.hide()});var r=this,o=(this.events.topics.hasOwnProperty("jSignature.undo")?t:"jSignature")+".undo";n.bind("click",function(){r.events.publish(o)}),r.events.subscribe(o,function(){var t=r.dataEngine.data;t.length&&(t.pop(),r.resetCanvas(t))})}})})}(),function(t){var e={init:function(e){var n=t.extend({},e);return this.each(function(){var e=t(this),n=e.data("jacolorwheel");if(!n){var i=200,r=t('<div class="jacolorpicker" id="jacolorpicker'+t(this).attr("name")+'" style="display:none;overflow:hidden;width: '+i+"px;height: "+i+'px;"></div>');t(this).before(r);var o=e,s=this;t(this).on("change",function(){this.style.background=this.value,this.style.color=Raphael.rgb2hsb(this.value).b<.5?"#fff":"#000"}),t(this).on("refreshcolorwheel",function(){this.style.background=this.value,this.style.color=Raphael.rgb2hsb(this.value).b<.5?"#fff":"#000"}),t(this).change(),t(this).on("focus",function(){o.data("cw")&&(o.data("cw").remove(),o.removeData("cw")),r.css("z-index","55555"),r.css("position","absolute"),r.css("left",t(o).position().left+t(o).outerWidth(!0)+"px");var e=t(o).position().top+t(o).outerHeight(!0)/2-i/2;0>e&&(e=10),r.css("top",e+"px"),r.show(),t(this).parents(".ui-dialog").bind("dialogdragstart",function(t,e){o.blur()});var n=r.offset().left,l=r.offset().top,c=t(this).val();""==c&&(c="#3aadc5");var u=Raphael.colorwheel(n,l,i,c,"jacolorpicker"+t(this).attr("name"));o.data("cw",u),u.onchange=function(e){t(s).val(e.replace(a,"#$1$2$3")),t(s).change()},t("svg").css("z-index",20002),t("svg").show()}),t(this).on("blur",function(){r.hide(),t("svg").hide(),o.data("cw")&&(o.data("cw").remove(),o.removeData("cw"))});var a=/^#(.)\1(.)\2(.)\3$/;t(this).data("jacolorwheel",{target:e})}})},destroy:function(){return this.each(function(){var e=t(this),n=e.data("jacolorwheel");t(window).unbind(".jacolorwheel"),e.removeData("jacolorwheel")})},update:function(t){}};t.fn.jacolorwheel=function(n){return e[n]?e[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void t.error("Method "+n+" does not exist on jQuery.jacolorwheel"):e.init.apply(this,arguments)}}(jQuery),function(t,e){"use strict";function n(e){t.fn.cycle.debug&&i(e)}function i(){window.console&&console.log&&console.log("[cycle] "+Array.prototype.join.call(arguments," "))}function r(e,n,i){var r=t(e).data("cycle.opts");if(r){var o=!!e.cyclePause;o&&r.paused?r.paused(e,r,n,i):!o&&r.resumed&&r.resumed(e,r,n,i)}}function o(n,o,s){function l(e,n,r){if(!e&&n===!0){var o=t(r).data("cycle.opts");if(!o)return i("options not found, can not resume"),!1;r.cycleTimeout&&(clearTimeout(r.cycleTimeout),r.cycleTimeout=0),d(o.elements,o,1,!o.backwards)}}if(n.cycleStop===e&&(n.cycleStop=0),(o===e||null===o)&&(o={}),o.constructor==String){switch(o){case"destroy":case"stop":var c=t(n).data("cycle.opts");return c?(n.cycleStop++,n.cycleTimeout&&clearTimeout(n.cycleTimeout),n.cycleTimeout=0,c.elements&&t(c.elements).stop(),t(n).removeData("cycle.opts"),"destroy"==o&&a(n,c),!1):!1;case"toggle":return n.cyclePause=1===n.cyclePause?0:1,l(n.cyclePause,s,n),r(n),!1;case"pause":return n.cyclePause=1,r(n),!1;case"resume":return n.cyclePause=0,l(!1,s,n),r(n),!1;case"prev":case"next":return(c=t(n).data("cycle.opts"))?(t.fn.cycle[o](c),!1):(i('options not found, "prev/next" ignored'),!1);default:o={fx:o}}return o}if(o.constructor==Number){var u=o;return(o=t(n).data("cycle.opts"))?0>u||u>=o.elements.length?(i("invalid slide index: "+u),!1):(o.nextSlide=u,n.cycleTimeout&&(clearTimeout(n.cycleTimeout),n.cycleTimeout=0),"string"==typeof s&&(o.oneTimeFx=s),d(o.elements,o,1,u>=o.currSlide),!1):(i("options not found, can not advance slide"),!1)}return o}function s(e,n){if(!t.support.opacity&&n.cleartype&&e.style.filter)try{e.style.removeAttribute("filter")}catch(i){}}function a(e,n){n.next&&t(n.next).unbind(n.prevNextEvent),n.prev&&t(n.prev).unbind(n.prevNextEvent),(n.pager||n.pagerAnchorBuilder)&&t.each(n.pagerAnchors||[],function(){this.unbind().remove()}),n.pagerAnchors=null,t(e).unbind("mouseenter.cycle mouseleave.cycle"),n.destroy&&n.destroy(n)}function l(n,o,a,l,p){var v,y=t.extend({},t.fn.cycle.defaults,l||{},t.metadata?n.metadata():t.meta?n.data():{}),b=t.isFunction(n.data)?n.data(y.metaAttr):null;b&&(y=t.extend(y,b)),y.autostop&&(y.countdown=y.autostopCount||a.length);var _=n[0];if(n.data("cycle.opts",y),y.$cont=n,y.stopCount=_.cycleStop,y.elements=a,y.before=y.before?[y.before]:[],y.after=y.after?[y.after]:[],!t.support.opacity&&y.cleartype&&y.after.push(function(){s(this,y)}),y.continuous&&y.after.push(function(){d(a,y,0,!y.backwards)}),c(y),t.support.opacity||!y.cleartype||y.cleartypeNoBg||g(o),"static"==n.css("position")&&n.css("position","relative"),y.width&&n.width(y.width),y.height&&"auto"!=y.height&&n.height(y.height),y.startingSlide!==e?(y.startingSlide=parseInt(y.startingSlide,10),y.startingSlide>=a.length||y.startSlide<0?y.startingSlide=0:v=!0):y.startingSlide=y.backwards?a.length-1:0,y.random){y.randomMap=[];for(var w=0;w<a.length;w++)y.randomMap.push(w);if(y.randomMap.sort(function(t,e){return Math.random()-.5}),v)for(var x=0;x<a.length;x++)y.startingSlide==y.randomMap[x]&&(y.randomIndex=x);else y.randomIndex=1,y.startingSlide=y.randomMap[1]}else y.startingSlide>=a.length&&(y.startingSlide=0);y.currSlide=y.startingSlide||0;var $=y.startingSlide;o.css({position:"absolute",top:0,left:0}).hide().each(function(e){var n;n=y.backwards?$?$>=e?a.length+(e-$):$-e:a.length-e:$?e>=$?a.length-(e-$):$-e:a.length-e,t(this).css("z-index",n)}),t(a[$]).css("opacity",1).show(),s(a[$],y),y.fit&&(y.aspect?o.each(function(){var e=t(this),n=y.aspect===!0?e.width()/e.height():y.aspect;y.width&&e.width()!=y.width&&(e.width(y.width),e.height(y.width/n)),y.height&&e.height()<y.height&&(e.height(y.height),e.width(y.height*n))}):(y.width&&o.width(y.width),y.height&&"auto"!=y.height&&o.height(y.height))),!y.center||y.fit&&!y.aspect||o.each(function(){var e=t(this);e.css({"margin-left":y.width?(y.width-e.width())/2+"px":0,"margin-top":y.height?(y.height-e.height())/2+"px":0})}),!y.center||y.fit||y.slideResize||o.each(function(){var e=t(this);e.css({"margin-left":y.width?(y.width-e.width())/2+"px":0,"margin-top":y.height?(y.height-e.height())/2+"px":0})});var k=(y.containerResize||y.containerResizeHeight)&&!n.innerHeight();if(k){for(var C=0,S=0,T=0;T<a.length;T++){var A=t(a[T]),E=A[0],P=A.outerWidth(),N=A.outerHeight();P||(P=E.offsetWidth||E.width||A.attr("width")),N||(N=E.offsetHeight||E.height||A.attr("height")),C=P>C?P:C,S=N>S?N:S}y.containerResize&&C>0&&S>0&&n.css({width:C+"px",height:S+"px"}),y.containerResizeHeight&&S>0&&n.css({height:S+"px"})}var O=!1;if(y.pause&&n.bind("mouseenter.cycle",function(){O=!0,this.cyclePause++,r(_,!0)}).bind("mouseleave.cycle",function(){O&&this.cyclePause--,r(_,!0)}),u(y)===!1)return!1;var j=!1;if(l.requeueAttempts=l.requeueAttempts||0,o.each(function(){var e=t(this);if(this.cycleH=y.fit&&y.height?y.height:e.height()||this.offsetHeight||this.height||e.attr("height")||0,this.cycleW=y.fit&&y.width?y.width:e.width()||this.offsetWidth||this.width||e.attr("width")||0,e.is("img")){var n=t.browser.msie&&28==this.cycleW&&30==this.cycleH&&!this.complete,r=t.browser.mozilla&&34==this.cycleW&&19==this.cycleH&&!this.complete,o=t.browser.opera&&(42==this.cycleW&&19==this.cycleH||37==this.cycleW&&17==this.cycleH)&&!this.complete,s=0===this.cycleH&&0===this.cycleW&&!this.complete;if(n||r||o||s){if(p.s&&y.requeueOnImageNotLoaded&&++l.requeueAttempts<100)return i(l.requeueAttempts," - img slide not loaded, requeuing slideshow: ",this.src,this.cycleW,this.cycleH),setTimeout(function(){t(p.s,p.c).cycle(l)},y.requeueTimeout),j=!0,!1;i("could not determine size of image: "+this.src,this.cycleW,this.cycleH)}}return!0}),j)return!1;if(y.cssBefore=y.cssBefore||{},y.cssAfter=y.cssAfter||{},y.cssFirst=y.cssFirst||{},y.animIn=y.animIn||{},y.animOut=y.animOut||{},o.not(":eq("+$+")").css(y.cssBefore),t(o[$]).css(y.cssFirst),y.timeout){y.timeout=parseInt(y.timeout,10),y.speed.constructor==String&&(y.speed=t.fx.speeds[y.speed]||parseInt(y.speed,10)),y.sync||(y.speed=y.speed/2);for(var M="none"==y.fx?0:"shuffle"==y.fx?500:250;y.timeout-y.speed<M;)y.timeout+=y.speed}if(y.easing&&(y.easeIn=y.easeOut=y.easing),y.speedIn||(y.speedIn=y.speed),y.speedOut||(y.speedOut=y.speed),y.slideCount=a.length,y.currSlide=y.lastSlide=$,y.random?(++y.randomIndex==a.length&&(y.randomIndex=0),y.nextSlide=y.randomMap[y.randomIndex]):y.nextSlide=y.backwards?0===y.startingSlide?a.length-1:y.startingSlide-1:y.startingSlide>=a.length-1?0:y.startingSlide+1,!y.multiFx){var R=t.fn.cycle.transitions[y.fx];if(t.isFunction(R))R(n,o,y);else if("custom"!=y.fx&&!y.multiFx)return i("unknown transition: "+y.fx,"; slideshow terminating"),!1}var F=o[$];return y.skipInitializationCallbacks||(y.before.length&&y.before[0].apply(F,[F,F,y,!0]),y.after.length&&y.after[0].apply(F,[F,F,y,!0])),y.next&&t(y.next).bind(y.prevNextEvent,function(){return f(y,1)}),y.prev&&t(y.prev).bind(y.prevNextEvent,function(){return f(y,0)}),(y.pager||y.pagerAnchorBuilder)&&m(a,y),h(y,a),y}function c(e){e.original={before:[],after:[]},e.original.cssBefore=t.extend({},e.cssBefore),e.original.cssAfter=t.extend({},e.cssAfter),e.original.animIn=t.extend({},e.animIn),e.original.animOut=t.extend({},e.animOut),t.each(e.before,function(){e.original.before.push(this)}),t.each(e.after,function(){e.original.after.push(this)})}function u(e){var r,o,s=t.fn.cycle.transitions;if(e.fx.indexOf(",")>0){for(e.multiFx=!0,e.fxs=e.fx.replace(/\s*/g,"").split(","),r=0;r<e.fxs.length;r++){var a=e.fxs[r];o=s[a],o&&s.hasOwnProperty(a)&&t.isFunction(o)||(i("discarding unknown transition: ",a),e.fxs.splice(r,1),r--)}if(!e.fxs.length)return i("No valid transitions named; slideshow terminating."),!1}else if("all"==e.fx){e.multiFx=!0,e.fxs=[];for(var l in s)s.hasOwnProperty(l)&&(o=s[l],s.hasOwnProperty(l)&&t.isFunction(o)&&e.fxs.push(l))}if(e.multiFx&&e.randomizeEffects){var c=Math.floor(20*Math.random())+30;for(r=0;c>r;r++){var u=Math.floor(Math.random()*e.fxs.length);e.fxs.push(e.fxs.splice(u,1)[0])}n("randomized fx sequence: ",e.fxs)}return!0}function h(e,n){e.addSlide=function(i,r){var o=t(i),s=o[0];e.autostopCount||e.countdown++,n[r?"unshift":"push"](s),e.els&&e.els[r?"unshift":"push"](s),e.slideCount=n.length,e.random&&(e.randomMap.push(e.slideCount-1),e.randomMap.sort(function(t,e){return Math.random()-.5})),o.css("position","absolute"),o[r?"prependTo":"appendTo"](e.$cont),r&&(e.currSlide++,e.nextSlide++),t.support.opacity||!e.cleartype||e.cleartypeNoBg||g(o),e.fit&&e.width&&o.width(e.width),e.fit&&e.height&&"auto"!=e.height&&o.height(e.height),s.cycleH=e.fit&&e.height?e.height:o.height(),s.cycleW=e.fit&&e.width?e.width:o.width(),o.css(e.cssBefore),(e.pager||e.pagerAnchorBuilder)&&t.fn.cycle.createPagerAnchor(n.length-1,s,t(e.pager),n,e),t.isFunction(e.onAddSlide)?e.onAddSlide(o):o.hide()}}function d(i,r,o,s){function a(){var t=0,e=r.timeout;r.timeout&&!r.continuous?(t=p(i[r.currSlide],i[r.nextSlide],r,s),"shuffle"==r.fx&&(t-=r.speedOut)):r.continuous&&l.cyclePause&&(t=10),t>0&&(l.cycleTimeout=setTimeout(function(){d(i,r,0,!r.backwards)},t))}var l=r.$cont[0],c=i[r.currSlide],u=i[r.nextSlide];if(o&&r.busy&&r.manualTrump&&(n("manualTrump in go(), stopping active transition"),t(i).stop(!0,!0),r.busy=0,clearTimeout(l.cycleTimeout)),r.busy)return void n("transition active, ignoring new tx request");if(l.cycleStop==r.stopCount&&(0!==l.cycleTimeout||o)){if(!o&&!l.cyclePause&&!r.bounce&&(r.autostop&&--r.countdown<=0||r.nowrap&&!r.random&&r.nextSlide<r.currSlide))return void(r.end&&r.end(r));var h=!1;if(!o&&l.cyclePause||r.nextSlide==r.currSlide)a();else{h=!0;var f=r.fx;c.cycleH=c.cycleH||t(c).height(),c.cycleW=c.cycleW||t(c).width(),u.cycleH=u.cycleH||t(u).height(),u.cycleW=u.cycleW||t(u).width(),r.multiFx&&(s&&(r.lastFx===e||++r.lastFx>=r.fxs.length)?r.lastFx=0:!s&&(r.lastFx===e||--r.lastFx<0)&&(r.lastFx=r.fxs.length-1),f=r.fxs[r.lastFx]),r.oneTimeFx&&(f=r.oneTimeFx,r.oneTimeFx=null),t.fn.cycle.resetState(r,f),r.before.length&&t.each(r.before,function(t,e){l.cycleStop==r.stopCount&&e.apply(u,[c,u,r,s])});var m=function(){r.busy=0,t.each(r.after,function(t,e){l.cycleStop==r.stopCount&&e.apply(u,[c,u,r,s])}),l.cycleStop||a()};n("tx firing("+f+"); currSlide: "+r.currSlide+"; nextSlide: "+r.nextSlide),r.busy=1,r.fxFn?r.fxFn(c,u,r,m,s,o&&r.fastOnEvent):t.isFunction(t.fn.cycle[r.fx])?t.fn.cycle[r.fx](c,u,r,m,s,o&&r.fastOnEvent):t.fn.cycle.custom(c,u,r,m,s,o&&r.fastOnEvent)
}if(h||r.nextSlide==r.currSlide){var g;r.lastSlide=r.currSlide,r.random?(r.currSlide=r.nextSlide,++r.randomIndex==i.length&&(r.randomIndex=0,r.randomMap.sort(function(t,e){return Math.random()-.5})),r.nextSlide=r.randomMap[r.randomIndex],r.nextSlide==r.currSlide&&(r.nextSlide=r.currSlide==r.slideCount-1?0:r.currSlide+1)):r.backwards?(g=r.nextSlide-1<0,g&&r.bounce?(r.backwards=!r.backwards,r.nextSlide=1,r.currSlide=0):(r.nextSlide=g?i.length-1:r.nextSlide-1,r.currSlide=g?0:r.nextSlide+1)):(g=r.nextSlide+1==i.length,g&&r.bounce?(r.backwards=!r.backwards,r.nextSlide=i.length-2,r.currSlide=i.length-1):(r.nextSlide=g?0:r.nextSlide+1,r.currSlide=g?i.length-1:r.nextSlide-1))}h&&r.pager&&r.updateActivePagerLink(r.pager,r.currSlide,r.activePagerClass)}}function p(t,e,i,r){if(i.timeoutFn){for(var o=i.timeoutFn.call(t,t,e,i,r);"none"!=i.fx&&o-i.speed<250;)o+=i.speed;if(n("calculated timeout: "+o+"; speed: "+i.speed),o!==!1)return o}return i.timeout}function f(e,n){var i=n?1:-1,r=e.elements,o=e.$cont[0],s=o.cycleTimeout;if(s&&(clearTimeout(s),o.cycleTimeout=0),e.random&&0>i)e.randomIndex--,-2==--e.randomIndex?e.randomIndex=r.length-2:-1==e.randomIndex&&(e.randomIndex=r.length-1),e.nextSlide=e.randomMap[e.randomIndex];else if(e.random)e.nextSlide=e.randomMap[e.randomIndex];else if(e.nextSlide=e.currSlide+i,e.nextSlide<0){if(e.nowrap)return!1;e.nextSlide=r.length-1}else if(e.nextSlide>=r.length){if(e.nowrap)return!1;e.nextSlide=0}var a=e.onPrevNextEvent||e.prevNextClick;return t.isFunction(a)&&a(i>0,e.nextSlide,r[e.nextSlide]),d(r,e,1,n),!1}function m(e,n){var i=t(n.pager);t.each(e,function(r,o){t.fn.cycle.createPagerAnchor(r,o,i,e,n)}),n.updateActivePagerLink(n.pager,n.startingSlide,n.activePagerClass)}function g(e){function i(t){return t=parseInt(t,10).toString(16),t.length<2?"0"+t:t}function r(e){for(;e&&"html"!=e.nodeName.toLowerCase();e=e.parentNode){var n=t.css(e,"background-color");if(n&&n.indexOf("rgb")>=0){var r=n.match(/\d+/g);return"#"+i(r[0])+i(r[1])+i(r[2])}if(n&&"transparent"!=n)return n}return"#ffffff"}n("applying clearType background-color hack"),e.each(function(){t(this).css("background-color",r(this))})}var v="2.9999.8";t.support===e&&(t.support={opacity:!t.browser.msie}),t.expr[":"].paused=function(t){return t.cyclePause},t.fn.cycle=function(e,r){var s={s:this.selector,c:this.context};return 0===this.length&&"stop"!=e?!t.isReady&&s.s?(i("DOM not ready, queuing slideshow"),t(function(){t(s.s,s.c).cycle(e,r)}),this):(i("terminating; zero elements found by selector"+(t.isReady?"":" (DOM not ready)")),this):this.each(function(){var a=o(this,e,r);if(a!==!1){a.updateActivePagerLink=a.updateActivePagerLink||t.fn.cycle.updateActivePagerLink,this.cycleTimeout&&clearTimeout(this.cycleTimeout),this.cycleTimeout=this.cyclePause=0,this.cycleStop=0;var c=t(this),u=a.slideExpr?t(a.slideExpr,this):c.children(),h=u.get();if(h.length<2)return void i("terminating; too few slides: "+h.length);var f=l(c,u,h,a,s);if(f!==!1){var m=f.continuous?10:p(h[f.currSlide],h[f.nextSlide],f,!f.backwards);m&&(m+=f.delay||0,10>m&&(m=10),n("first timeout: "+m),this.cycleTimeout=setTimeout(function(){d(h,f,0,!a.backwards)},m))}}})},t.fn.cycle.resetState=function(e,n){n=n||e.fx,e.before=[],e.after=[],e.cssBefore=t.extend({},e.original.cssBefore),e.cssAfter=t.extend({},e.original.cssAfter),e.animIn=t.extend({},e.original.animIn),e.animOut=t.extend({},e.original.animOut),e.fxFn=null,t.each(e.original.before,function(){e.before.push(this)}),t.each(e.original.after,function(){e.after.push(this)});var i=t.fn.cycle.transitions[n];t.isFunction(i)&&i(e.$cont,t(e.elements),e)},t.fn.cycle.updateActivePagerLink=function(e,n,i){t(e).each(function(){t(this).children().removeClass(i).eq(n).addClass(i)})},t.fn.cycle.next=function(t){f(t,1)},t.fn.cycle.prev=function(t){f(t,0)},t.fn.cycle.createPagerAnchor=function(e,i,o,s,a){var l;if(t.isFunction(a.pagerAnchorBuilder)?(l=a.pagerAnchorBuilder(e,i),n("pagerAnchorBuilder("+e+", el) returned: "+l)):l='<a href="#">'+(e+1)+"</a>",l){var c=t(l);if(0===c.parents("body").length){var u=[];o.length>1?(o.each(function(){var e=c.clone(!0);t(this).append(e),u.push(e[0])}),c=t(u)):c.appendTo(o)}a.pagerAnchors=a.pagerAnchors||[],a.pagerAnchors.push(c);var h=function(n){n.preventDefault(),a.nextSlide=e;var i=a.$cont[0],r=i.cycleTimeout;r&&(clearTimeout(r),i.cycleTimeout=0);var o=a.onPagerEvent||a.pagerClick;t.isFunction(o)&&o(a.nextSlide,s[a.nextSlide]),d(s,a,1,a.currSlide<e)};/mouseenter|mouseover/i.test(a.pagerEvent)?c.hover(h,function(){}):c.bind(a.pagerEvent,h),/^click/.test(a.pagerEvent)||a.allowPagerClickBubble||c.bind("click.cycle",function(){return!1});var p=a.$cont[0],f=!1;a.pauseOnPagerHover&&c.hover(function(){f=!0,p.cyclePause++,r(p,!0,!0)},function(){f&&p.cyclePause--,r(p,!0,!0)})}},t.fn.cycle.hopsFromLast=function(t,e){var n,i=t.lastSlide,r=t.currSlide;return n=e?r>i?r-i:t.slideCount-i:i>r?i-r:i+t.slideCount-r},t.fn.cycle.commonReset=function(e,n,i,r,o,s){t(i.elements).not(e).hide(),"undefined"==typeof i.cssBefore.opacity&&(i.cssBefore.opacity=1),i.cssBefore.display="block",i.slideResize&&r!==!1&&n.cycleW>0&&(i.cssBefore.width=n.cycleW),i.slideResize&&o!==!1&&n.cycleH>0&&(i.cssBefore.height=n.cycleH),i.cssAfter=i.cssAfter||{},i.cssAfter.display="none",t(e).css("zIndex",i.slideCount+(s===!0?1:0)),t(n).css("zIndex",i.slideCount+(s===!0?0:1))},t.fn.cycle.custom=function(e,n,i,r,o,s){var a=t(e),l=t(n),c=i.speedIn,u=i.speedOut,h=i.easeIn,d=i.easeOut;l.css(i.cssBefore),s&&(c=u="number"==typeof s?s:1,h=d=null);var p=function(){l.animate(i.animIn,c,h,function(){r()})};a.animate(i.animOut,u,d,function(){a.css(i.cssAfter),i.sync||p()}),i.sync&&p()},t.fn.cycle.transitions={fade:function(e,n,i){n.not(":eq("+i.currSlide+")").css("opacity",0),i.before.push(function(e,n,i){t.fn.cycle.commonReset(e,n,i),i.cssBefore.opacity=0}),i.animIn={opacity:1},i.animOut={opacity:0},i.cssBefore={top:0,left:0}}},t.fn.cycle.ver=function(){return v},t.fn.cycle.defaults={activePagerClass:"activeSlide",after:null,allowPagerClickBubble:!1,animIn:null,animOut:null,aspect:!1,autostop:0,autostopCount:0,backwards:!1,before:null,center:null,cleartype:!t.support.opacity,cleartypeNoBg:!1,containerResize:1,containerResizeHeight:0,continuous:0,cssAfter:null,cssBefore:null,delay:0,easeIn:null,easeOut:null,easing:null,end:null,fastOnEvent:0,fit:0,fx:"fade",fxFn:null,height:"auto",manualTrump:!0,metaAttr:"cycle",next:null,nowrap:0,onPagerEvent:null,onPrevNextEvent:null,pager:null,pagerAnchorBuilder:null,pagerEvent:"click.cycle",pause:0,pauseOnPagerHover:0,prev:null,prevNextEvent:"click.cycle",random:0,randomizeEffects:1,requeueOnImageNotLoaded:!0,requeueTimeout:250,rev:0,shuffle:null,skipInitializationCallbacks:!1,slideExpr:null,slideResize:1,speed:1e3,speedIn:null,speedOut:null,startingSlide:e,sync:1,timeout:4e3,timeoutFn:null,updateActivePagerLink:null,width:null}}(jQuery),/*!
 * jQuery Cycle Plugin Transition Definitions
 * This script is a plugin for the jQuery Cycle Plugin
 * Examples and documentation at: http://malsup.com/jquery/cycle/
 * Copyright (c) 2007-2010 M. Alsup
 * Version:	 2.73
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 */
function(t){"use strict";t.fn.cycle.transitions.none=function(e,n,i){i.fxFn=function(e,n,i,r){t(n).show(),t(e).hide(),r()}},t.fn.cycle.transitions.fadeout=function(e,n,i){n.not(":eq("+i.currSlide+")").css({display:"block",opacity:1}),i.before.push(function(e,n,i,r,o,s){t(e).css("zIndex",i.slideCount+(s!==!0?1:0)),t(n).css("zIndex",i.slideCount+(s!==!0?0:1))}),i.animIn.opacity=1,i.animOut.opacity=0,i.cssBefore.opacity=1,i.cssBefore.display="block",i.cssAfter.zIndex=0},t.fn.cycle.transitions.scrollUp=function(e,n,i){e.css("overflow","hidden"),i.before.push(t.fn.cycle.commonReset);var r=e.height();i.cssBefore.top=r,i.cssBefore.left=0,i.cssFirst.top=0,i.animIn.top=0,i.animOut.top=-r},t.fn.cycle.transitions.scrollDown=function(e,n,i){e.css("overflow","hidden"),i.before.push(t.fn.cycle.commonReset);var r=e.height();i.cssFirst.top=0,i.cssBefore.top=-r,i.cssBefore.left=0,i.animIn.top=0,i.animOut.top=r},t.fn.cycle.transitions.scrollLeft=function(e,n,i){e.css("overflow","hidden"),i.before.push(t.fn.cycle.commonReset);var r=e.width();i.cssFirst.left=0,i.cssBefore.left=r,i.cssBefore.top=0,i.animIn.left=0,i.animOut.left=0-r},t.fn.cycle.transitions.scrollRight=function(e,n,i){e.css("overflow","hidden"),i.before.push(t.fn.cycle.commonReset);var r=e.width();i.cssFirst.left=0,i.cssBefore.left=-r,i.cssBefore.top=0,i.animIn.left=0,i.animOut.left=r},t.fn.cycle.transitions.scrollHorz=function(e,n,i){e.css("overflow","hidden").width(),i.before.push(function(e,n,i,r){i.rev&&(r=!r),t.fn.cycle.commonReset(e,n,i),i.cssBefore.left=r?n.cycleW-1:1-n.cycleW,i.animOut.left=r?-e.cycleW:e.cycleW}),i.cssFirst.left=0,i.cssBefore.top=0,i.animIn.left=0,i.animOut.top=0},t.fn.cycle.transitions.scrollVert=function(e,n,i){e.css("overflow","hidden"),i.before.push(function(e,n,i,r){i.rev&&(r=!r),t.fn.cycle.commonReset(e,n,i),i.cssBefore.top=r?1-n.cycleH:n.cycleH-1,i.animOut.top=r?e.cycleH:-e.cycleH}),i.cssFirst.top=0,i.cssBefore.left=0,i.animIn.top=0,i.animOut.left=0},t.fn.cycle.transitions.slideX=function(e,n,i){i.before.push(function(e,n,i){t(i.elements).not(e).hide(),t.fn.cycle.commonReset(e,n,i,!1,!0),i.animIn.width=n.cycleW}),i.cssBefore.left=0,i.cssBefore.top=0,i.cssBefore.width=0,i.animIn.width="show",i.animOut.width=0},t.fn.cycle.transitions.slideY=function(e,n,i){i.before.push(function(e,n,i){t(i.elements).not(e).hide(),t.fn.cycle.commonReset(e,n,i,!0,!1),i.animIn.height=n.cycleH}),i.cssBefore.left=0,i.cssBefore.top=0,i.cssBefore.height=0,i.animIn.height="show",i.animOut.height=0},t.fn.cycle.transitions.shuffle=function(e,n,i){var r,o=e.css("overflow","visible").width();for(n.css({left:0,top:0}),i.before.push(function(e,n,i){t.fn.cycle.commonReset(e,n,i,!0,!0,!0)}),i.speedAdjusted||(i.speed=i.speed/2,i.speedAdjusted=!0),i.random=0,i.shuffle=i.shuffle||{left:-o,top:15},i.els=[],r=0;r<n.length;r++)i.els.push(n[r]);for(r=0;r<i.currSlide;r++)i.els.push(i.els.shift());i.fxFn=function(e,n,i,r,o){i.rev&&(o=!o);var s=t(o?e:n);t(n).css(i.cssBefore);var a=i.slideCount;s.animate(i.shuffle,i.speedIn,i.easeIn,function(){for(var n=t.fn.cycle.hopsFromLast(i,o),l=0;n>l;l++)o?i.els.push(i.els.shift()):i.els.unshift(i.els.pop());if(o)for(var c=0,u=i.els.length;u>c;c++)t(i.els[c]).css("z-index",u-c+a);else{var h=t(e).css("z-index");s.css("z-index",parseInt(h,10)+1+a)}s.animate({left:0,top:0},i.speedOut,i.easeOut,function(){t(o?this:e).hide(),r&&r()})})},t.extend(i.cssBefore,{display:"block",opacity:1,top:0,left:0})},t.fn.cycle.transitions.turnUp=function(e,n,i){i.before.push(function(e,n,i){t.fn.cycle.commonReset(e,n,i,!0,!1),i.cssBefore.top=n.cycleH,i.animIn.height=n.cycleH,i.animOut.width=n.cycleW}),i.cssFirst.top=0,i.cssBefore.left=0,i.cssBefore.height=0,i.animIn.top=0,i.animOut.height=0},t.fn.cycle.transitions.turnDown=function(e,n,i){i.before.push(function(e,n,i){t.fn.cycle.commonReset(e,n,i,!0,!1),i.animIn.height=n.cycleH,i.animOut.top=e.cycleH}),i.cssFirst.top=0,i.cssBefore.left=0,i.cssBefore.top=0,i.cssBefore.height=0,i.animOut.height=0},t.fn.cycle.transitions.turnLeft=function(e,n,i){i.before.push(function(e,n,i){t.fn.cycle.commonReset(e,n,i,!1,!0),i.cssBefore.left=n.cycleW,i.animIn.width=n.cycleW}),i.cssBefore.top=0,i.cssBefore.width=0,i.animIn.left=0,i.animOut.width=0},t.fn.cycle.transitions.turnRight=function(e,n,i){i.before.push(function(e,n,i){t.fn.cycle.commonReset(e,n,i,!1,!0),i.animIn.width=n.cycleW,i.animOut.left=e.cycleW}),t.extend(i.cssBefore,{top:0,left:0,width:0}),i.animIn.left=0,i.animOut.width=0},t.fn.cycle.transitions.zoom=function(e,n,i){i.before.push(function(e,n,i){t.fn.cycle.commonReset(e,n,i,!1,!1,!0),i.cssBefore.top=n.cycleH/2,i.cssBefore.left=n.cycleW/2,t.extend(i.animIn,{top:0,left:0,width:n.cycleW,height:n.cycleH}),t.extend(i.animOut,{width:0,height:0,top:e.cycleH/2,left:e.cycleW/2})}),i.cssFirst.top=0,i.cssFirst.left=0,i.cssBefore.width=0,i.cssBefore.height=0},t.fn.cycle.transitions.fadeZoom=function(e,n,i){i.before.push(function(e,n,i){t.fn.cycle.commonReset(e,n,i,!1,!1),i.cssBefore.left=n.cycleW/2,i.cssBefore.top=n.cycleH/2,t.extend(i.animIn,{top:0,left:0,width:n.cycleW,height:n.cycleH})}),i.cssBefore.width=0,i.cssBefore.height=0,i.animOut.opacity=0},t.fn.cycle.transitions.blindX=function(e,n,i){var r=e.css("overflow","hidden").width();i.before.push(function(e,n,i){t.fn.cycle.commonReset(e,n,i),i.animIn.width=n.cycleW,i.animOut.left=e.cycleW}),i.cssBefore.left=r,i.cssBefore.top=0,i.animIn.left=0,i.animOut.left=r},t.fn.cycle.transitions.blindY=function(e,n,i){var r=e.css("overflow","hidden").height();i.before.push(function(e,n,i){t.fn.cycle.commonReset(e,n,i),i.animIn.height=n.cycleH,i.animOut.top=e.cycleH}),i.cssBefore.top=r,i.cssBefore.left=0,i.animIn.top=0,i.animOut.top=r},t.fn.cycle.transitions.blindZ=function(e,n,i){var r=e.css("overflow","hidden").height(),o=e.width();i.before.push(function(e,n,i){t.fn.cycle.commonReset(e,n,i),i.animIn.height=n.cycleH,i.animOut.top=e.cycleH}),i.cssBefore.top=r,i.cssBefore.left=o,i.animIn.top=0,i.animIn.left=0,i.animOut.top=r,i.animOut.left=o},t.fn.cycle.transitions.growX=function(e,n,i){i.before.push(function(e,n,i){t.fn.cycle.commonReset(e,n,i,!1,!0),i.cssBefore.left=this.cycleW/2,i.animIn.left=0,i.animIn.width=this.cycleW,i.animOut.left=0}),i.cssBefore.top=0,i.cssBefore.width=0},t.fn.cycle.transitions.growY=function(e,n,i){i.before.push(function(e,n,i){t.fn.cycle.commonReset(e,n,i,!0,!1),i.cssBefore.top=this.cycleH/2,i.animIn.top=0,i.animIn.height=this.cycleH,i.animOut.top=0}),i.cssBefore.height=0,i.cssBefore.left=0},t.fn.cycle.transitions.curtainX=function(e,n,i){i.before.push(function(e,n,i){t.fn.cycle.commonReset(e,n,i,!1,!0,!0),i.cssBefore.left=n.cycleW/2,i.animIn.left=0,i.animIn.width=this.cycleW,i.animOut.left=e.cycleW/2,i.animOut.width=0}),i.cssBefore.top=0,i.cssBefore.width=0},t.fn.cycle.transitions.curtainY=function(e,n,i){i.before.push(function(e,n,i){t.fn.cycle.commonReset(e,n,i,!0,!1,!0),i.cssBefore.top=n.cycleH/2,i.animIn.top=0,i.animIn.height=n.cycleH,i.animOut.top=e.cycleH/2,i.animOut.height=0}),i.cssBefore.height=0,i.cssBefore.left=0},t.fn.cycle.transitions.cover=function(e,n,i){var r=i.direction||"left",o=e.css("overflow","hidden").width(),s=e.height();i.before.push(function(e,n,i){t.fn.cycle.commonReset(e,n,i),i.cssAfter.display="","right"==r?i.cssBefore.left=-o:"up"==r?i.cssBefore.top=s:"down"==r?i.cssBefore.top=-s:i.cssBefore.left=o}),i.animIn.left=0,i.animIn.top=0,i.cssBefore.top=0,i.cssBefore.left=0},t.fn.cycle.transitions.uncover=function(e,n,i){var r=i.direction||"left",o=e.css("overflow","hidden").width(),s=e.height();i.before.push(function(e,n,i){t.fn.cycle.commonReset(e,n,i,!0,!0,!0),"right"==r?i.animOut.left=o:"up"==r?i.animOut.top=-s:"down"==r?i.animOut.top=s:i.animOut.left=-o}),i.animIn.left=0,i.animIn.top=0,i.cssBefore.top=0,i.cssBefore.left=0},t.fn.cycle.transitions.toss=function(e,n,i){var r=e.css("overflow","visible").width(),o=e.height();i.before.push(function(e,n,i){t.fn.cycle.commonReset(e,n,i,!0,!0,!0),i.animOut.left||i.animOut.top?i.animOut.opacity=0:t.extend(i.animOut,{left:2*r,top:-o/2,opacity:0})}),i.cssBefore.left=0,i.cssBefore.top=0,i.animIn.left=0},t.fn.cycle.transitions.wipe=function(e,n,i){var r=e.css("overflow","hidden").width(),o=e.height();i.cssBefore=i.cssBefore||{};var s;if(i.clip)if(/l2r/.test(i.clip))s="rect(0px 0px "+o+"px 0px)";else if(/r2l/.test(i.clip))s="rect(0px "+r+"px "+o+"px "+r+"px)";else if(/t2b/.test(i.clip))s="rect(0px "+r+"px 0px 0px)";else if(/b2t/.test(i.clip))s="rect("+o+"px "+r+"px "+o+"px 0px)";else if(/zoom/.test(i.clip)){var a=parseInt(o/2,10),l=parseInt(r/2,10);s="rect("+a+"px "+l+"px "+a+"px "+l+"px)"}i.cssBefore.clip=i.cssBefore.clip||s||"rect(0px 0px 0px 0px)";var c=i.cssBefore.clip.match(/(\d+)/g),u=parseInt(c[0],10),h=parseInt(c[1],10),d=parseInt(c[2],10),p=parseInt(c[3],10);i.before.push(function(e,n,i){if(e!=n){var s=t(e),a=t(n);t.fn.cycle.commonReset(e,n,i,!0,!0,!1),i.cssAfter.display="block";var l=1,c=parseInt(i.speedIn/13,10)-1;!function f(){var t=u?u-parseInt(l*(u/c),10):0,e=p?p-parseInt(l*(p/c),10):0,n=o>d?d+parseInt(l*((o-d)/c||1),10):o,i=r>h?h+parseInt(l*((r-h)/c||1),10):r;a.css({clip:"rect("+t+"px "+i+"px "+n+"px "+e+"px)"}),l++<=c?setTimeout(f,13):s.css("display","none")}()}}),t.extend(i.cssBefore,{display:"block",opacity:1,top:0,left:0}),i.animIn={left:0},i.animOut={left:0}}}(jQuery),function(t){"use strict";function e(e){var n=e.data;e.isDefaultPrevented()||(e.preventDefault(),t(this).ajaxSubmit(n))}function n(e){var n=e.target,i=t(n);if(!i.is("[type=submit],[type=image]")){var r=i.closest("[type=submit]");if(0===r.length)return;n=r[0]}var o=this;if(o.clk=n,"image"==n.type)if(void 0!==e.offsetX)o.clk_x=e.offsetX,o.clk_y=e.offsetY;else if("function"==typeof t.fn.offset){var s=i.offset();o.clk_x=e.pageX-s.left,o.clk_y=e.pageY-s.top}else o.clk_x=e.pageX-n.offsetLeft,o.clk_y=e.pageY-n.offsetTop;setTimeout(function(){o.clk=o.clk_x=o.clk_y=null},100)}function i(){if(t.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}var r={};r.fileapi=void 0!==t("<input type='file'/>").get(0).files,r.formdata=void 0!==window.FormData;var o=!!t.fn.prop;t.fn.attr2=function(){if(!o)return this.attr.apply(this,arguments);var t=this.prop.apply(this,arguments);return t&&t.jquery||"string"==typeof t?t:this.attr.apply(this,arguments)},t.fn.ajaxSubmit=function(e){function n(e){var n=t.param(e).split("&"),i=n.length,r=[],o,s;for(o=0;i>o;o++)n[o]=n[o].replace(/\+/g," "),s=n[o].split("="),r.push([decodeURIComponent(s[0]),decodeURIComponent(s[1])]);return r}function s(i){for(var r=new FormData,o=0;o<i.length;o++)r.append(i[o].name,i[o].value);if(e.extraData){var s=n(e.extraData);for(o=0;o<s.length;o++)s[o]&&r.append(s[o][0],s[o][1])}e.data=null;var a=t.extend(!0,{},t.ajaxSettings,e,{contentType:!1,processData:!1,cache:!1,type:l||"POST"});e.uploadProgress&&(a.xhr=function(){var t=jQuery.ajaxSettings.xhr();return t.upload&&t.upload.addEventListener("progress",function(t){var n=0,i=t.loaded||t.position,r=t.total;t.lengthComputable&&(n=Math.ceil(i/r*100)),e.uploadProgress(t,i,r,n)},!1),t}),a.data=null;var c=a.beforeSend;return a.beforeSend=function(t,e){e.data=r,c&&c.call(this,t,e)},t.ajax(a)}function a(n){function r(t){var e=null;try{t.contentWindow&&(e=t.contentWindow.document)}catch(n){i("cannot get iframe.contentWindow document: "+n)}if(e)return e;try{e=t.contentDocument?t.contentDocument:t.document}catch(n){i("cannot get iframe.contentDocument: "+n),e=t.document}return e}function s(){function e(){try{var t=r(y).readyState;i("state = "+t),t&&"uninitialized"==t.toLowerCase()&&setTimeout(e,50)}catch(n){i("Server abort: ",n," (",n.name,")"),a(S),$&&clearTimeout($),$=void 0}}var n=h.attr2("target"),o=h.attr2("action");c.setAttribute("target",g),l||c.setAttribute("method","POST"),o!=p.url&&c.setAttribute("action",p.url),p.skipEncodingOverride||l&&!/post/i.test(l)||h.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),p.timeout&&($=setTimeout(function(){x=!0,a(C)},p.timeout));var s=[];try{if(p.extraData)for(var u in p.extraData)p.extraData.hasOwnProperty(u)&&s.push(t.isPlainObject(p.extraData[u])&&p.extraData[u].hasOwnProperty("name")&&p.extraData[u].hasOwnProperty("value")?t('<input type="hidden" name="'+p.extraData[u].name+'">').val(p.extraData[u].value).appendTo(c)[0]:t('<input type="hidden" name="'+u+'">').val(p.extraData[u]).appendTo(c)[0]);p.iframeTarget||(v.appendTo("body"),y.attachEvent?y.attachEvent("onload",a):y.addEventListener("load",a,!1)),setTimeout(e,15);try{c.submit()}catch(d){var f=document.createElement("form").submit;f.apply(c)}}finally{c.setAttribute("action",o),n?c.setAttribute("target",n):h.removeAttr("target"),t(s).remove()}}function a(e){if(!b.aborted&&!O){if(P=r(y),P||(i("cannot access response document"),e=S),e===C&&b)return b.abort("timeout"),void k.reject(b,"timeout");if(e==S&&b)return b.abort("server abort"),void k.reject(b,"error","server abort");if(P&&P.location.href!=p.iframeSrc||x){y.detachEvent?y.detachEvent("onload",a):y.removeEventListener("load",a,!1);var n="success",o;try{if(x)throw"timeout";var s="xml"==p.dataType||P.XMLDocument||t.isXMLDoc(P);if(i("isXml="+s),!s&&window.opera&&(null===P.body||!P.body.innerHTML)&&--N)return i("requeing onLoad callback, DOM not available"),void setTimeout(a,250);var l=P.body?P.body:P.documentElement;b.responseText=l?l.innerHTML:null,b.responseXML=P.XMLDocument?P.XMLDocument:P,s&&(p.dataType="xml"),b.getResponseHeader=function(t){var e={"content-type":p.dataType};return e[t]},l&&(b.status=Number(l.getAttribute("status"))||b.status,b.statusText=l.getAttribute("statusText")||b.statusText);var c=(p.dataType||"").toLowerCase(),u=/(json|script|text)/.test(c);if(u||p.textarea){var h=P.getElementsByTagName("textarea")[0];if(h)b.responseText=h.value,b.status=Number(h.getAttribute("status"))||b.status,b.statusText=h.getAttribute("statusText")||b.statusText;else if(u){var d=P.getElementsByTagName("pre")[0],f=P.getElementsByTagName("body")[0];d?b.responseText=d.textContent?d.textContent:d.innerText:f&&(b.responseText=f.textContent?f.textContent:f.innerText)}}else"xml"==c&&!b.responseXML&&b.responseText&&(b.responseXML=j(b.responseText));try{E=R(b,c,p)}catch(g){n="parsererror",b.error=o=g||n}}catch(g){i("error caught: ",g),n="error",b.error=o=g||n}b.aborted&&(i("upload aborted"),n=null),b.status&&(n=b.status>=200&&b.status<300||304===b.status?"success":"error"),"success"===n?(p.success&&p.success.call(p.context,E,"success",b),k.resolve(b.responseText,"success",b),m&&t.event.trigger("ajaxSuccess",[b,p])):n&&(void 0===o&&(o=b.statusText),p.error&&p.error.call(p.context,b,n,o),k.reject(b,"error",o),m&&t.event.trigger("ajaxError",[b,p,o])),m&&t.event.trigger("ajaxComplete",[b,p]),m&&!--t.active&&t.event.trigger("ajaxStop"),p.complete&&p.complete.call(p.context,b,n),O=!0,p.timeout&&clearTimeout($),setTimeout(function(){p.iframeTarget||v.remove(),b.responseXML=null},100)}}}var c=h[0],u,d,p,m,g,v,y,b,_,w,x,$,k=t.Deferred();if(n)for(d=0;d<f.length;d++)u=t(f[d]),o?u.prop("disabled",!1):u.removeAttr("disabled");if(p=t.extend(!0,{},t.ajaxSettings,e),p.context=p.context||p,g="jqFormIO"+(new Date).getTime(),p.iframeTarget?(v=t(p.iframeTarget),w=v.attr2("name"),w?g=w:v.attr2("name",g)):(v=t('<iframe name="'+g+'" src="'+p.iframeSrc+'" />'),v.css({position:"absolute",top:"-1000px",left:"-1000px"})),y=v[0],b={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var n="timeout"===e?"timeout":"aborted";i("aborting upload... "+n),this.aborted=1;try{y.contentWindow.document.execCommand&&y.contentWindow.document.execCommand("Stop")}catch(r){}v.attr("src",p.iframeSrc),b.error=n,p.error&&p.error.call(p.context,b,n,e),m&&t.event.trigger("ajaxError",[b,p,n]),p.complete&&p.complete.call(p.context,b,n)}},m=p.global,m&&0===t.active++&&t.event.trigger("ajaxStart"),m&&t.event.trigger("ajaxSend",[b,p]),p.beforeSend&&p.beforeSend.call(p.context,b,p)===!1)return p.global&&t.active--,k.reject(),k;if(b.aborted)return k.reject(),k;_=c.clk,_&&(w=_.name,w&&!_.disabled&&(p.extraData=p.extraData||{},p.extraData[w]=_.value,"image"==_.type&&(p.extraData[w+".x"]=c.clk_x,p.extraData[w+".y"]=c.clk_y)));var C=1,S=2,T=t("meta[name=csrf-token]").attr("content"),A=t("meta[name=csrf-param]").attr("content");A&&T&&(p.extraData=p.extraData||{},p.extraData[A]=T),p.forceSync?s():setTimeout(s,10);var E,P,N=50,O,j=t.parseXML||function(t,e){return window.ActiveXObject?(e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml"),e&&e.documentElement&&"parsererror"!=e.documentElement.nodeName?e:null},M=t.parseJSON||function(t){return window.eval("("+t+")")},R=function(e,n,i){var r=e.getResponseHeader("content-type")||"",o="xml"===n||!n&&r.indexOf("xml")>=0,s=o?e.responseXML:e.responseText;return o&&"parsererror"===s.documentElement.nodeName&&t.error&&t.error("parsererror"),i&&i.dataFilter&&(s=i.dataFilter(s,n)),"string"==typeof s&&("json"===n||!n&&r.indexOf("json")>=0?s=M(s):("script"===n||!n&&r.indexOf("javascript")>=0)&&t.globalEval(s)),s};return k}if(!this.length)return i("ajaxSubmit: skipping submit process - no element selected"),this;var l,c,u,h=this;"function"==typeof e&&(e={success:e}),l=this.attr2("method"),c=this.attr2("action"),u="string"==typeof c?t.trim(c):"",u=u||window.location.href||"",u&&(u=(u.match(/^([^#]+)/)||[])[1]),e=t.extend(!0,{url:u,success:t.ajaxSettings.success,type:l||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},e);var d={};if(this.trigger("form-pre-serialize",[this,e,d]),d.veto)return i("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(e.beforeSerialize&&e.beforeSerialize(this,e)===!1)return i("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var p=e.traditional;void 0===p&&(p=t.ajaxSettings.traditional);var f=[],m,g=this.formToArray(e.semantic,f);if(e.data&&(e.extraData=e.data,m=t.param(e.data,p)),e.beforeSubmit&&e.beforeSubmit(g,this,e)===!1)return i("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[g,this,e,d]),d.veto)return i("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var v=t.param(g,p);m&&(v=v?v+"&"+m:m),"GET"==e.type.toUpperCase()?(e.url+=(e.url.indexOf("?")>=0?"&":"?")+v,e.data=null):e.data=v;var y=[];if(e.resetForm&&y.push(function(){h.resetForm()}),e.clearForm&&y.push(function(){h.clearForm(e.includeHidden)}),!e.dataType&&e.target){var b=e.success||function(){};y.push(function(n){var i=e.replaceTarget?"replaceWith":"html";t(e.target)[i](n).each(b,arguments)})}else e.success&&y.push(e.success);e.success=function(t,n,i){for(var r=e.context||this,o=0,s=y.length;s>o;o++)y[o].apply(r,[t,n,i||h,h])};var _=t('input[type=file]:enabled[value!=""]',this),w=_.length>0,x="multipart/form-data",$=h.attr("enctype")==x||h.attr("encoding")==x,k=r.fileapi&&r.formdata;i("fileAPI :"+k);var C=(w||$)&&!k,S;e.iframe!==!1&&(e.iframe||C)?e.closeKeepAlive?t.get(e.closeKeepAlive,function(){S=a(g)}):S=a(g):S=(w||$)&&k?s(g):t.ajax(e),h.removeData("jqxhr").data("jqxhr",S);for(var T=0;T<f.length;T++)f[T]=null;return this.trigger("form-submit-notify",[this,e]),this},t.fn.ajaxForm=function(r){if(r=r||{},r.delegation=r.delegation&&t.isFunction(t.fn.on),!r.delegation&&0===this.length){var o={s:this.selector,c:this.context};return!t.isReady&&o.s?(i("DOM not ready, queuing ajaxForm"),t(function(){t(o.s,o.c).ajaxForm(r)}),this):(i("terminating; zero elements found by selector"+(t.isReady?"":" (DOM not ready)")),this)}return r.delegation?(t(document).off("submit.form-plugin",this.selector,e).off("click.form-plugin",this.selector,n).on("submit.form-plugin",this.selector,r,e).on("click.form-plugin",this.selector,r,n),this):this.ajaxFormUnbind().bind("submit.form-plugin",r,e).bind("click.form-plugin",r,n)},t.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},t.fn.formToArray=function(e,n){var i=[];if(0===this.length)return i;var o=this[0],s=e?o.getElementsByTagName("*"):o.elements;if(!s)return i;var a,l,c,u,h,d,p;for(a=0,d=s.length;d>a;a++)if(h=s[a],c=h.name,c&&!h.disabled)if(e&&o.clk&&"image"==h.type)o.clk==h&&(i.push({name:c,value:t(h).val(),type:h.type}),i.push({name:c+".x",value:o.clk_x},{name:c+".y",value:o.clk_y}));else if(u=t.fieldValue(h,!0),u&&u.constructor==Array)for(n&&n.push(h),l=0,p=u.length;p>l;l++)i.push({name:c,value:u[l]});else if(r.fileapi&&"file"==h.type){n&&n.push(h);var f=h.files;if(f.length)for(l=0;l<f.length;l++)i.push({name:c,value:f[l],type:h.type});else i.push({name:c,value:"",type:h.type})}else null!==u&&"undefined"!=typeof u&&(n&&n.push(h),i.push({name:c,value:u,type:h.type,required:h.required}));if(!e&&o.clk){var m=t(o.clk),g=m[0];c=g.name,c&&!g.disabled&&"image"==g.type&&(i.push({name:c,value:m.val()}),i.push({name:c+".x",value:o.clk_x},{name:c+".y",value:o.clk_y}))}return i},t.fn.formSerialize=function(e){return t.param(this.formToArray(e))},t.fn.fieldSerialize=function(e){var n=[];return this.each(function(){var i=this.name;if(i){var r=t.fieldValue(this,e);if(r&&r.constructor==Array)for(var o=0,s=r.length;s>o;o++)n.push({name:i,value:r[o]});else null!==r&&"undefined"!=typeof r&&n.push({name:this.name,value:r})}}),t.param(n)},t.fn.fieldValue=function(e){for(var n=[],i=0,r=this.length;r>i;i++){var o=this[i],s=t.fieldValue(o,e);null===s||"undefined"==typeof s||s.constructor==Array&&!s.length||(s.constructor==Array?t.merge(n,s):n.push(s))}return n},t.fieldValue=function(e,n){var i=e.name,r=e.type,o=e.tagName.toLowerCase();if(void 0===n&&(n=!0),n&&(!i||e.disabled||"reset"==r||"button"==r||("checkbox"==r||"radio"==r)&&!e.checked||("submit"==r||"image"==r)&&e.form&&e.form.clk!=e||"select"==o&&-1==e.selectedIndex))return null;if("select"==o){var s=e.selectedIndex;if(0>s)return null;for(var a=[],l=e.options,c="select-one"==r,u=c?s+1:l.length,h=c?s:0;u>h;h++){var d=l[h];if(d.selected){var p=d.value;if(p||(p=d.attributes&&d.attributes.value&&!d.attributes.value.specified?d.text:d.value),c)return p;a.push(p)}}return a}return t(e).val()},t.fn.clearForm=function(e){return this.each(function(){t("input,select,textarea",this).clearFields(e)})},t.fn.clearFields=t.fn.clearInputs=function(e){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var i=this.type,r=this.tagName.toLowerCase();n.test(i)||"textarea"==r?this.value="":"checkbox"==i||"radio"==i?this.checked=!1:"select"==r?this.selectedIndex=-1:"file"==i?/MSIE/.test(navigator.userAgent)?t(this).replaceWith(t(this).clone(!0)):t(this).val(""):e&&(e===!0&&/hidden/.test(i)||"string"==typeof e&&t(this).is(e))&&(this.value="")})},t.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},t.fn.enable=function(t){return void 0===t&&(t=!0),this.each(function(){this.disabled=!t})},t.fn.selected=function(e){return void 0===e&&(e=!0),this.each(function(){var n=this.type;if("checkbox"==n||"radio"==n)this.checked=e;else if("option"==this.tagName.toLowerCase()){var i=t(this).parent("select");e&&i[0]&&"select-one"==i[0].type&&i.find("option").selected(!1),this.selected=e}})},t.fn.ajaxSubmit.debug=!1}(jQuery),function(t){function e(e){var n=t.formatCurrency.regions[e];if(n)return n;if(/(\w+)-(\w+)/g.test(e)){var i=e.replace(/(\w+)-(\w+)/g,"$1");return t.formatCurrency.regions[i]}return null}function n(t){switch(t.toLowerCase()){case"int":return"Int";case"float":return"Float";default:throw"invalid parseType"}}function i(t){if(""===t.symbol)return new RegExp("[^\\d"+t.decimalSymbol+"-]","g");var e=t.symbol.replace("$","\\$").replace(".","\\.");return new RegExp(e+"|[^\\d"+t.decimalSymbol+"-]","g")}t.formatCurrency={},t.formatCurrency.regions=[],t.formatCurrency.regions[""]={symbol:"$",positiveFormat:"%s%n",negativeFormat:"-%s%n",decimalSymbol:".",digitGroupSymbol:",",groupDigits:!0},t.fn.formatCurrency=function(n,r){1==arguments.length&&"string"!=typeof n&&(r=n,n=!1);var o={name:"formatCurrency",colorize:!1,region:"",global:!0,roundToDecimalPlace:2,eventOnDecimalsEntered:!1};return o=t.extend(o,t.formatCurrency.regions[""]),r=t.extend(o,r),r.region.length>0&&(r=t.extend(r,e(r.region))),r.regex=i(r),this.each(function(){$this=t(this);var e="0";if(e=$this[$this.is("input, select, textarea")?"val":"html"](),e.search("\\(")>=0&&(e="-"+e),""!==e&&("-"!==e||-1!==r.roundToDecimalPlace)){if(isNaN(e)){if(e=e.replace(r.regex,""),""===e||"-"===e&&-1===r.roundToDecimalPlace)return;"."!=r.decimalSymbol&&(e=e.replace(r.decimalSymbol,".")),isNaN(e)&&(e="0")}var i=String(e).split("."),o=e==Math.abs(e),s=i.length>1,a=s?i[1].toString():"0",l=a;if(e=Math.abs(i[0]),e=isNaN(e)?0:e,r.roundToDecimalPlace>=0&&(a=parseFloat("1."+a),a=a.toFixed(r.roundToDecimalPlace),"2"==a.substring(0,1)&&(e=Number(e)+1),a=a.substring(2)),e=String(e),r.groupDigits)for(var c=0;c<Math.floor((e.length-(1+c))/3);c++)e=e.substring(0,e.length-(4*c+3))+r.digitGroupSymbol+e.substring(e.length-(4*c+3));(s&&-1==r.roundToDecimalPlace||r.roundToDecimalPlace>0)&&(e+=r.decimalSymbol+a);var u=o?r.positiveFormat:r.negativeFormat,h=u.replace(/%s/g,r.symbol);h=h.replace(/%n/g,e);var d=t([]);d=n?t(n):$this,d[d.is("input, select, textarea")?"val":"html"](h),s&&r.eventOnDecimalsEntered&&l.length>r.roundToDecimalPlace&&d.trigger("decimalsEntered",l),r.colorize&&d.css("color",o?"black":"red")}})},t.formatCurrency.toMoney=function(n,r){destination=!1;var o={name:"formatCurrency",colorize:!1,region:"",global:!0,roundToDecimalPlace:2,eventOnDecimalsEntered:!1};if(o=t.extend(o,t.formatCurrency.regions[""]),r=t.extend(o,r),r.region.length>0&&(r=t.extend(r,e(r.region))),r.regex=i(r),n.search("\\(")>=0&&(n="-"+n),""!==n&&("-"!==n||-1!==r.roundToDecimalPlace)){if(isNaN(n)){if(n=n.replace(r.regex,""),""===n||"-"===n&&-1===r.roundToDecimalPlace)return;"."!=r.decimalSymbol&&(n=n.replace(r.decimalSymbol,".")),isNaN(n)&&(n="0")}var s=String(n).split("."),a=n==Math.abs(n),l=s.length>1,c=l?s[1].toString():"0",u=c;if(n=Math.abs(s[0]),n=isNaN(n)?0:n,r.roundToDecimalPlace>=0&&(c=parseFloat("1."+c),c=c.toFixed(r.roundToDecimalPlace),"2"==c.substring(0,1)&&(n=Number(n)+1),c=c.substring(2)),n=String(n),r.groupDigits)for(var h=0;h<Math.floor((n.length-(1+h))/3);h++)n=n.substring(0,n.length-(4*h+3))+r.digitGroupSymbol+n.substring(n.length-(4*h+3));(l&&-1==r.roundToDecimalPlace||r.roundToDecimalPlace>0)&&(n+=r.decimalSymbol+c);var d=a?r.positiveFormat:r.negativeFormat,p=d.replace(/%s/g,r.symbol);return p=p.replace(/%n/g,n)}},t.formatCurrency.myRound=function(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n},t.fn.toNumber=function(n){var r=t.extend({name:"toNumber",region:"",global:!0},t.formatCurrency.regions[""]);return n=jQuery.extend(r,n),n.region.length>0&&(n=t.extend(n,e(n.region))),n.regex=i(n),this.each(function(){var e=t(this).is("input, select, textarea")?"val":"html";t(this)[e](t(this)[e]().replace("(","(-").replace(n.regex,""))})},t.fn.asNumber=function(r){var o=t.extend({name:"asNumber",region:"",parse:!0,parseType:"Float",global:!0},t.formatCurrency.regions[""]);r=jQuery.extend(o,r),r.region.length>0&&(r=t.extend(r,e(r.region))),r.regex=i(r),r.parseType=n(r.parseType);var s=t(this).is("input, select, textarea")?"val":"html",a=t(this)[s]();return a=a?a:"",a=a.replace("(","(-"),a=a.replace(r.regex,""),r.parse?(0==a.length&&(a="0"),"."!=r.decimalSymbol&&(a=a.replace(r.decimalSymbol,".")),window["parse"+r.parseType](a)):a},t.formatCurrency.asNumber=function(r,o){var s=t.extend({name:"asNumber",region:"",parse:!0,parseType:"Float",global:!0},t.formatCurrency.regions[""]);return o=jQuery.extend(s,o),o.region.length>0&&(o=t.extend(o,e(o.region))),o.regex=i(o),o.parseType=n(o.parseType),r=r?r:"",r=r.replace("(","(-"),r=r.replace(o.regex,""),o.parse?(0==r.length&&(r="0"),"."!=o.decimalSymbol&&(r=r.replace(o.decimalSymbol,".")),window["parse"+o.parseType](r)):r}}(jQuery),function(t){t.titleAlert=function(e,n){if(t.titleAlert._running&&t.titleAlert.stop(),t.titleAlert._settings=n=t.extend({},t.titleAlert.defaults,n),!n.requireBlur||!t.titleAlert.hasFocus){n.originalTitleInterval=n.originalTitleInterval||n.interval,t.titleAlert._running=!0,t.titleAlert._initialText=document.title,document.title=e;var i=!0,r=function(){t.titleAlert._running&&(i=!i,document.title=i?e:t.titleAlert._initialText,t.titleAlert._intervalToken=setTimeout(r,i?n.interval:n.originalTitleInterval))};t.titleAlert._intervalToken=setTimeout(r,n.interval),n.stopOnMouseMove&&t(document).mousemove(function(e){t(this).unbind(e),t.titleAlert.stop()}),n.duration>0&&(t.titleAlert._timeoutToken=setTimeout(function(){t.titleAlert.stop()},n.duration))}},t.titleAlert.defaults={interval:500,originalTitleInterval:null,duration:0,stopOnFocus:!0,requireBlur:!1,stopOnMouseMove:!1},t.titleAlert.stop=function(){t.titleAlert._running&&(clearTimeout(t.titleAlert._intervalToken),clearTimeout(t.titleAlert._timeoutToken),document.title=t.titleAlert._initialText,t.titleAlert._timeoutToken=null,t.titleAlert._intervalToken=null,t.titleAlert._initialText=null,t.titleAlert._running=!1,t.titleAlert._settings=null)},t.titleAlert.hasFocus=!0,t.titleAlert._running=!1,t.titleAlert._intervalToken=null,t.titleAlert._timeoutToken=null,t.titleAlert._initialText=null,t.titleAlert._settings=null,t.titleAlert._focus=function(){if(t.titleAlert.hasFocus=!0,t.titleAlert._running&&t.titleAlert._settings.stopOnFocus){var e=t.titleAlert._initialText;t.titleAlert.stop(),setTimeout(function(){t.titleAlert._running||(document.title=".",document.title=e)},1e3)}},t.titleAlert._blur=function(){t.titleAlert.hasFocus=!1},t(window).bind("focus",t.titleAlert._focus),t(window).bind("blur",t.titleAlert._blur)}(jQuery),/*
 * jQuery UI Font Selector Widget
 *
 * Copyright 2012, Olav Andreas Lindekleiv (http://lindekleiv.com/)
 * Available under the BSD License
 * See the LICENSE file or http://opensource.org/licenses/BSD-3-Clause
 *
 * Available on BitBucket at
 * https://bitbucket.org/lindekleiv/jquery-ui-fontselector
 */
$.widget("oal.fontSelector",{options:{inSpeed:500,outSpeed:250,bold:!1,italic:!1,underline:!1},_create:function(){var t,e,n,i,r,o,s,a,l,c,u,h,d=this;for(this.element.hide(),r=[],u=this.element.children(),s=0,l=u.length;l>s;s++)t=u[s],n=$(t).text(),i=$(t).attr("value"),"inherit"==n&&(n="Default font - Arial"),$(t).attr("selected")&&(this.selected=i),r.push([i,n]);for(this.selected||(this.selected=r[0][0]),this.dropdown=$('<div class="fontSelector ui-widget"><span class="handle">&#9660;</span></div>'),this.list=$('<ul class="fonts"></ul>'),this.list.css("zIndex",3e4),a=0,c=r.length;c>a;a++){if(t=r[a],h=t,t=h[0],o=h[1],"inherit"!=t){var p="400,700";"Raleway"==t&&(p="100"),this.element.before("<link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css?family="+t+":"+p+"'></link>")}var f=t;"inherit"!=t&&(f="'"+f+"'"),e=$('<li style="font-family: '+f+'">'+o+"</li>"),e.data("font",t),t===this.selected&&(e.addClass("selected"),this.dropdown.prepend($('<h4 style="font-family: '+f+"\" class='selected handle'>"+o+"</h4>"))),this.list.append(e)}return this.dropdown.append(this.list),this.element.after(this.dropdown),this.dropdown.find(".handle").click(function(){return d._toggleOpen()})},_toggleOpen:function(){var t=this;return this.list.is(":visible")?(this.dropdown.find("span.handle").html("&#9660;"),this.list.slideUp(this.options.outSpeed)):(this.dropdown.find("span.handle").html("&#9650;"),this.list.slideDown(this.options.inSpeed),this.list.find("li").click(function(e){var n,i,r,o,s,a,l,c,u,h,d,p,f;if(n=$(e.target).data("font"),s=$(e.target).text(),a=t.selected,n===a)return!1;for(t._trigger("fontChange",null,{font:n,oldFont:a}),t.selected=n,t.dropdown.find("h4.selected").text(s).css({fontFamily:n}),d=t.list.children(),l=0,u=d.length;u>l;l++)i=d[l],$(i).data("font")===n?$(i).addClass("selected"):$(i).data("font")===a&&$(i).removeClass("selected");for(p=t.element.children(),f=[],c=0,h=p.length;h>c;c++)o=p[c],r=$(o).val(),f.push(r===n?$(o).attr("selected","selected"):void 0);return f}))},_setOption:function(t,e){return"bold"!==t||e!==!0&&e!==!1?"italic"!==t||e!==!0&&e!==!1?"underline"!==t||e!==!0&&e!==!1||(this.options.underline=e,e===!0?(this.dropdown.find("h4.selected").css({textDecoration:"underline"}),this.list.css({textDecoration:"underline"})):(this.dropdown.find("h4.selected").css({textDecoration:"none"}),this.list.css({textDecoration:"none"}))):(this.options.italic=e,e===!0?(this.dropdown.find("h4.selected").css({fontStyle:"italic"}),this.list.css({fontStyle:"italic"})):(this.dropdown.find("h4.selected").css({fontStyle:"normal"}),this.list.css({fontStyle:"normal"}))):(this.options.bold=e,e===!0?(this.dropdown.find("h4.selected").css({fontWeight:"bold"}),this.list.css({fontWeight:"bold"})):(this.dropdown.find("h4.selected").css({fontWeight:"normal"}),this.list.css({fontWeight:"normal"}))),"bold"!==t&&"italic"!==t&&"underline"!==t||e!==!0&&e!==!1?void 0:this._trigger("styleChange",null,{style:t,value:e})},destroy:function(){this.dropdown.remove(),this.list.remove()}}),function(t){t.noty.defaults={layout:"topRight",theme:"defaults",type:"alert",text:"",dismissQueue:!0,template:'<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>',animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:400},timeout:1e3,force:!1,modal:!1,closeWith:["click"],callback:{onShow:function(){},afterShow:function(){},onClose:function(){},afterClose:function(){}},buttons:!1},t.noty.themes.defaults={name:"defaults",helpers:{borderFix:function(){if(this.options.dismissQueue){var e=this.options.layout.container.selector+" "+this.options.layout.parent.selector;switch(this.options.layout.name){case"top":t(e).css({borderRadius:"0px 0px 0px 0px"}),t(e).last().css({borderRadius:"0px 0px 5px 5px"});break;case"topCenter":case"topLeft":case"topRight":case"bottomCenter":case"bottomLeft":case"bottomRight":case"center":case"centerLeft":case"centerRight":case"inline":t(e).css({borderRadius:"0px 0px 0px 0px"}),t(e).first().css({"border-top-left-radius":"5px","border-top-right-radius":"5px"}),t(e).last().css({"border-bottom-left-radius":"5px","border-bottom-right-radius":"5px"});break;case"bottom":t(e).css({borderRadius:"0px 0px 0px 0px"}),t(e).first().css({borderRadius:"5px 5px 0px 0px"})}}}},modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,opacity:.6,display:"none",left:0,top:0}},style:function(){switch(this.$bar.css({overflow:"hidden",background:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAoCAYAAAAPOoFWAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAPZJREFUeNq81tsOgjAMANB2ov7/7ypaN7IlIwi9rGuT8QSc9EIDAsAznxvY4pXPKr05RUE5MEVB+TyWfCEl9LZApYopCmo9C4FKSMtYoI8Bwv79aQJU4l6hXXCZrQbokJEksxHo9KMOgc6w1atHXM8K9DVC7FQnJ0i8iK3QooGgbnyKgMDygBWyYFZoqx4qS27KqLZJjA1D0jK6QJcYEQEiWv9PGkTsbqxQ8oT+ZtZB6AkdsJnQDnMoHXHLGKOgDYuCWmYhEERCI5gaamW0bnHdA3k2ltlIN+2qKRyCND0bhqSYCyTB3CAOc4WusBEIpkeBuPgJMAAX8Hs1NfqHRgAAAABJRU5ErkJggg==') repeat-x scroll left top #fff"}),this.$message.css({fontSize:"13px",lineHeight:"16px",textAlign:"center",padding:"8px 10px 9px",width:"auto",position:"relative"}),this.$closeButton.css({position:"absolute",top:4,right:4,width:10,height:10,background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAATpJREFUeNoszrFqVFEUheG19zlz7sQ7ijMQBAvfYBqbpJCoZSAQbOwEE1IHGytbLQUJ8SUktW8gCCFJMSGSNxCmFBJO7j5rpXD6n5/P5vM53H3b3T9LOiB5AQDuDjM7BnA7DMPHDGBH0nuSzwHsRcRVRNRSysuU0i6AOwA/02w2+9Fae00SEbEh6SGAR5K+k3zWWptKepCm0+kpyRoRGyRBcpPkDsn1iEBr7drdP2VJZyQXERGSPpiZAViTBACXKaV9kqd5uVzCzO5KKb/d/UZSDwD/eyxqree1VqSu6zKAF2Z2RPJJaw0rAkjOJT0m+SuT/AbgDcmnkmBmfwAsJL1dXQ8lWY6IGwB1ZbrOOb8zs8thGP4COFwx/mE8Ho9Go9ErMzvJOW/1fY/JZIJSypqZfXX3L13X9fcDAKJct1sx3OiuAAAAAElFTkSuQmCC)",display:"none",cursor:"pointer"}),this.$buttons.css({padding:5,textAlign:"right",borderTop:"1px solid #ccc",backgroundColor:"#fff"}),this.$buttons.find("button").css({marginLeft:5}),this.$buttons.find("button:first").css({marginLeft:0}),this.$bar.bind({mouseenter:function(){t(this).find(".noty_close").fadeIn()},mouseleave:function(){t(this).find(".noty_close").fadeOut()}}),this.options.layout.name){case"top":this.$bar.css({borderRadius:"0px 0px 5px 5px",borderBottom:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"});break;case"topCenter":case"center":case"bottomCenter":case"inline":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"center"});break;case"topLeft":case"topRight":case"bottomLeft":case"bottomRight":case"centerLeft":case"centerRight":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"left"});break;case"bottom":this.$bar.css({borderRadius:"5px 5px 0px 0px",borderTop:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 -2px 4px rgba(0, 0, 0, 0.1)"});break;default:this.$bar.css({border:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"})}switch(this.options.type){case"alert":case"notification":this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"});break;case"warning":this.$bar.css({backgroundColor:"#FFEAA8",borderColor:"#FFC237",color:"#826200"}),this.$buttons.css({borderTop:"1px solid #FFC237"});break;case"error":this.$bar.css({backgroundColor:"red",borderColor:"darkred",color:"#FFF"}),this.$message.css({fontWeight:"bold"}),this.$buttons.css({borderTop:"1px solid darkred"});break;case"information":this.$bar.css({backgroundColor:"#57B7E2",borderColor:"#0B90C4",color:"#FFF"}),this.$buttons.css({borderTop:"1px solid #0B90C4"});break;case"success":this.$bar.css({backgroundColor:"lightgreen",borderColor:"#50C24E",color:"darkgreen"}),this.$buttons.css({borderTop:"1px solid #50C24E"});break;default:this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"})}},callback:{onShow:function(){t.noty.themes.defaults.helpers.borderFix.apply(this)},onClose:function(){t.noty.themes.defaults.helpers.borderFix.apply(this)}}}}(jQuery);/* PDFObject, copyright (C) 2008 Philip Hutchison (pipwerks.com). Documentation and examples are at www.pdfobject.com. Version 1.2, April 2011. MIT style license */
var PDFObject=function(t){if(!t||!t.url)return!1;var e="1.2",n=t.id||!1,i=t.width||"100%",r=t.height||"100%",o=t.pdfOpenParams,s,a,l=function(){var t=null;return window.ActiveXObject&&(t=new ActiveXObject("AcroPDF.PDF"),t||(t=new ActiveXObject("PDF.PdfCtrl")),null!==t)?!0:!1},c=function(){var t,e=navigator.plugins,n=e.length,i=/Adobe Reader|Adobe PDF|Acrobat/gi;for(t=0;n>t;t++)if(i.test(e[t].name))return!0;return!1},u=function(){var t=navigator.mimeTypes["application/pdf"];return t&&t.enabledPlugin},h=function(){var t=null;return c()||l()?t="Adobe":u()&&(t="generic"),t},d=function(){var t=document.getElementsByTagName("html");if(!t)return!1;var e=t[0].style,n=document.body.style;e.height="100%",e.overflow="hidden",n.margin="0",n.padding="0",n.height="100%",n.overflow="hidden"},p=function(t){var e="",n;if(!t)return e;for(n in t)t.hasOwnProperty(n)&&(e+=n+"=",e+="search"===n?encodeURI(t[n]):t[n],e+="&");return e.slice(0,e.length-1)},f=function(t){var l=null;switch(t){case"url":l=s;break;case"id":l=n;break;case"width":l=i;break;case"height":l=r;break;case"pdfOpenParams":l=o;break;case"pluginTypeFound":l=a;break;case"pdfobjectversion":l=e}return l},m=function(t){if(!a)return!1;var e=null;if(t){if(e=t.nodeType&&1===t.nodeType?t:document.getElementById(t),!e)return!1}else e=document.body,d(),i="100%",r="100%";return e.innerHTML='<object	data="'+s+'" type="application/pdf" width="'+i+'" height="'+r+'"></object>',e.getElementsByTagName("object")[0]};return s=encodeURI(t.url)+"#"+p(o),a=h(),this.get=function(t){return f(t)},this.embed=function(t){return m(t)},this};!function(t){function e(t,e){if("object"==typeof t&&t.hasOwnProperty("_tc_id"))return t;var i=n(t),o=i.r,a=i.g,c=i.b,u=C(i.a),h=w(100*u)/100,d=i.format;return 1>o&&(o=w(o)),1>a&&(a=w(a)),1>c&&(c=w(c)),{ok:i.ok,format:d,_tc_id:b++,alpha:u,toHsv:function(){var t=s(o,a,c);return{h:360*t.h,s:t.s,v:t.v,a:u}},toHsvString:function(){var t=s(o,a,c),e=w(360*t.h),n=w(100*t.s),i=w(100*t.v);return 1==u?"hsv("+e+", "+n+"%, "+i+"%)":"hsva("+e+", "+n+"%, "+i+"%, "+h+")"},toHsl:function(){var t=r(o,a,c);return{h:360*t.h,s:t.s,l:t.l,a:u}},toHslString:function(){var t=r(o,a,c),e=w(360*t.h),n=w(100*t.s),i=w(100*t.l);return 1==u?"hsl("+e+", "+n+"%, "+i+"%)":"hsla("+e+", "+n+"%, "+i+"%, "+h+")"},toHex:function(){return l(o,a,c)},toHexString:function(){return"#"+l(o,a,c)},toRgb:function(){return{r:w(o),g:w(a),b:w(c),a:u}},toRgbString:function(){return 1==u?"rgb("+w(o)+", "+w(a)+", "+w(c)+")":"rgba("+w(o)+", "+w(a)+", "+w(c)+", "+h+")"},toName:function(){return T[l(o,a,c)]||!1},toFilter:function(){var t=l(o,a,c),e=Math.round(255*C(u)).toString(16);return"progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+e+t+",endColorstr=#"+e+t+")"},toString:function(t){t=t||this.format;var e=!1;return"rgb"===t&&(e=this.toRgbString()),"hex"===t&&(e=this.toHexString()),"name"===t&&(e=this.toName()),"hsl"===t&&(e=this.toHslString()),"hsv"===t&&(e=this.toHsvString()),e||this.toHexString()}}}function n(t){var e={r:255,g:255,b:255},n=1,r=!1,s=!1;if("string"==typeof t&&(t=g(t)),"object"==typeof t){if(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b"))e=i(t.r,t.g,t.b),r=!0,s="rgb";else if(t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v"))t.s=m(t.s),t.v=m(t.v),e=a(t.h,t.s,t.v),r=!0,s="hsv";else if(t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("l")){t.s=m(t.s),t.l=m(t.l);var e=o(t.h,t.s,t.l);r=!0,s="hsl"}t.hasOwnProperty("a")&&(n=t.a)}return{ok:r,format:t.format||s,r:x(255,$(e.r,0)),g:x(255,$(e.g,0)),b:x(255,$(e.b,0)),a:n}}function i(t,e,n){return{r:255*u(t,255),g:255*u(e,255),b:255*u(n,255)}}function r(t,e,n){t=u(t,255),e=u(e,255),n=u(n,255);var i=$(t,e,n),r=x(t,e,n),o,s,a=(i+r)/2;if(i==r)o=s=0;else{var l=i-r;switch(s=a>.5?l/(2-i-r):l/(i+r),i){case t:o=(e-n)/l+(n>e?6:0);break;case e:o=(n-t)/l+2;break;case n:o=(t-e)/l+4}o/=6}return{h:o,s:s,l:a}}function o(t,e,n){function i(t,e,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?t+6*(e-t)*n:.5>n?e:2/3>n?t+(e-t)*(2/3-n)*6:t}var r,o,s;if(t=u(t,360),e=u(e,100),n=u(n,100),0==e)r=o=s=n;else{var a=.5>n?n*(1+e):n+e-n*e,l=2*n-a;r=i(l,a,t+1/3),o=i(l,a,t),s=i(l,a,t-1/3)}return{r:255*r,g:255*o,b:255*s}}function s(t,e,n){t=u(t,255),e=u(e,255),n=u(n,255);var i=$(t,e,n),r=x(t,e,n),o,s,a=i,l=i-r;if(s=0==i?0:l/i,i==r)o=0;else{switch(i){case t:o=(e-n)/l+(n>e?6:0);break;case e:o=(n-t)/l+2;break;case n:o=(t-e)/l+4}o/=6}return{h:o,s:s,v:a}}function a(t,e,n){var i,r,o;t=6*u(t,360),e=u(e,100),n=u(n,100);var s=_.floor(t),a=t-s,l=n*(1-e),c=n*(1-a*e),h=n*(1-(1-a)*e),d=s%6,i=[n,c,l,l,h,n][d],r=[h,n,n,c,l,l][d],o=[l,l,h,n,n,c][d];return{r:255*i,g:255*r,b:255*o}}function l(t,e,n){function i(t){return 1==t.length?"0"+t:""+t}var r=[i(w(t).toString(16)),i(w(e).toString(16)),i(w(n).toString(16))];return r[0][0]==r[0][1]&&r[1][0]==r[1][1]&&r[2][0]==r[2][1]?r[0][0]+r[1][0]+r[2][0]:r.join("")}function c(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function u(t,e){p(t)&&(t="100%");var n=f(t);return t=x(e,$(0,C(t))),n&&(t=parseInt(t*e)/100),_.abs(t-e)<1e-6?1:t%e/C(e)}function h(t){return x(1,$(0,t))}function d(t){return parseInt(t,16)}function p(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===C(t)}function f(t){return"string"==typeof t&&-1!=t.indexOf("%")}function m(t){return 1>=t&&(t=100*t+"%"),t}function g(t){t=t.replace(v,"").replace(y,"").toLowerCase();var e=!1;if(S[t])t=S[t],e=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0};var n;return(n=A.rgb.exec(t))?{r:n[1],g:n[2],b:n[3]}:(n=A.rgba.exec(t))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=A.hsl.exec(t))?{h:n[1],s:n[2],l:n[3]}:(n=A.hsla.exec(t))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=A.hsv.exec(t))?{h:n[1],s:n[2],v:n[3]}:(n=A.hex6.exec(t))?{r:d(n[1]),g:d(n[2]),b:d(n[3]),format:e?"name":"hex"}:(n=A.hex3.exec(t))?{r:d(n[1]+""+n[1]),g:d(n[2]+""+n[2]),b:d(n[3]+""+n[3]),format:e?"name":"hex"}:!1}var v=/^[\s,#]+/,y=/\s+$/,b=0,_=Math,w=_.round,x=_.min,$=_.max,k=_.random,C=t.parseFloat;e.fromRatio=function(t){if("object"==typeof t){var n={};for(var i in t)n[i]=m(t[i]);t=n}return e(t)},e.equals=function(t,n){return t&&n?e(t).toHex()==e(n).toHex():!1},e.random=function(){return e.fromRatio({r:k(),g:k(),b:k()})},e.desaturate=function(t,n){var i=e(t).toHsl();return i.s-=(n||10)/100,i.s=h(i.s),e(i)},e.saturate=function(t,n){var i=e(t).toHsl();return i.s+=(n||10)/100,i.s=h(i.s),e(i)},e.greyscale=function(t){return e.desaturate(t,100)},e.lighten=function(t,n){var i=e(t).toHsl();return i.l+=(n||10)/100,i.l=h(i.l),e(i)},e.darken=function(t,n){var i=e(t).toHsl();return i.l-=(n||10)/100,i.l=h(i.l),e(i)},e.complement=function(t){var n=e(t).toHsl();return n.h=(n.h+180)%360,e(n)},e.triad=function(t){var n=e(t).toHsl(),i=n.h;return[e(t),e({h:(i+120)%360,s:n.s,l:n.l}),e({h:(i+240)%360,s:n.s,l:n.l})]},e.tetrad=function(t){var n=e(t).toHsl(),i=n.h;return[e(t),e({h:(i+90)%360,s:n.s,l:n.l}),e({h:(i+180)%360,s:n.s,l:n.l}),e({h:(i+270)%360,s:n.s,l:n.l})]},e.splitcomplement=function(t){var n=e(t).toHsl(),i=n.h;return[e(t),e({h:(i+72)%360,s:n.s,l:n.l}),e({h:(i+216)%360,s:n.s,l:n.l})]},e.analogous=function(t,n,i){n=n||6,i=i||30;var r=e(t).toHsl(),o=360/i,s=[e(t)];for(r.h=(r.h-(o*n>>1)+720)%360;--n;)r.h=(r.h+o)%360,s.push(e(r));return s},e.monochromatic=function(t,n){n=n||6;for(var i=e(t).toHsv(),r=i.h,o=i.s,s=i.v,a=[],l=1/n;n--;)a.push(e({h:r,s:o,v:s})),s=(s+l)%1;return a},e.readable=function(t,n){var i=e(t).toRgb(),r=e(n).toRgb();return(r.r-i.r)*(r.r-i.r)+(r.g-i.g)*(r.g-i.g)+(r.b-i.b)*(r.b-i.b)>10404};var S=e.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},T=e.hexNames=c(S),A=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",n="(?:"+e+")|(?:"+t+")",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+r),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+r),hsv:new RegExp("hsv"+i),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();t.tinycolor=e}(this),function(t){t.noty.layouts.topRight={name:"topRight",options:{},container:{object:'<ul id="noty_topRight_layout_container" />',selector:"ul#noty_topRight_layout_container",style:function(){t(this).css({top:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&t(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(t){var e=0,n=function(){return(new Date).getTime()+e++},i=function(t){return"["+t+"]$1"},r=function(t){return"_"+t+"_$1"};t(document).on("click",".add_fields",function(e){e.preventDefault();var o=t(this),s=o.data("association"),a=o.data("associations"),l=o.data("association-insertion-template"),c=o.data("association-insertion-method")||o.data("association-insertion-position")||"before",u=o.data("association-insertion-node"),h=o.data("association-insertion-traversal"),d=parseInt(o.data("count"),10),p=new RegExp("\\[new_"+s+"\\](.*?\\s)","g"),f=new RegExp("_new_"+s+"_(\\w*)","g"),m=n(),g=l.replace(p,i(m)),v=[];for(g==l&&(p=new RegExp("\\[new_"+a+"\\](.*?\\s)","g"),f=new RegExp("_new_"+a+"_(\\w*)","g"),g=l.replace(p,i(m))),g=g.replace(f,r(m)),v=[g],d=isNaN(d)?1:Math.max(d,1),d-=1;d;)m=n(),g=l.replace(p,i(m)),g=g.replace(f,r(m)),v.push(g),d-=1;u=u?h?o[h](u):"this"==u?o:t(u):o.parent(),t.each(v,function(e,n){var i=t(n);u.trigger("cocoon:before-insert",[i]);var r=u[c](i);u.trigger("cocoon:after-insert",[i])})}),t(document).on("click",".remove_fields.dynamic, .remove_fields.existing",function(e){var n=t(this),i=n.data("wrapper-class")||"nested-fields",r=n.closest("."+i),o=r.parent();e.preventDefault(),o.trigger("cocoon:before-remove",[r]);var s=o.data("remove-timeout")||0;setTimeout(function(){n.hasClass("dynamic")?r.remove():(n.prev("input[type=hidden]").val("1"),r.hide()),o.trigger("cocoon:after-remove",[r])},s)}),t(".remove_fields.existing.destroyed").each(function(e,n){var i=t(this),r=i.data("wrapper-class")||"nested-fields";i.closest("."+r).hide()})}(jQuery),/*
Copyright 2012 Igor Vaynberg

Version: 3.5.1

This software is licensed under the Apache License, Version 2.0 (the "Apache License") or the GNU
General Public License version 2 (the "GPL License"). You may choose either license to govern your
use of this software only upon the condition that you accept all of the terms of either the Apache
License or the GPL License.

You may obtain a copy of the Apache License and the GPL License at:

    http://www.apache.org/licenses/LICENSE-2.0
    http://www.gnu.org/licenses/gpl-2.0.html

Unless required by applicable law or agreed to in writing, software distributed under the
Apache License or the GPL License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
CONDITIONS OF ANY KIND, either express or implied. See the Apache License and the GPL License for
the specific language governing permissions and limitations under the Apache License and the GPL License.
*/
function(t){"undefined"==typeof t.fn.each2&&t.extend(t.fn,{each2:function(e){for(var n=t([0]),i=-1,r=this.length;++i<r&&(n.context=n[0]=this[i])&&e.call(n[0],i,n)!==!1;);return this}})}(jQuery),function(t,e){"use strict";function n(e){var n=t(document.createTextNode(""));e.before(n),n.before(e),n.remove()}function i(t){function e(t){return z[t]||t}return t.replace(/[^\u0000-\u007E]/g,e)}function r(t,e){for(var n=0,i=e.length;i>n;n+=1)if(s(t,e[n]))return n;return-1}function o(){var e=t(B);e.appendTo("body");var n={width:e.width()-e[0].clientWidth,height:e.height()-e[0].clientHeight};return e.remove(),n}function s(t,n){return t===n?!0:t===e||n===e?!1:null===t||null===n?!1:t.constructor===String?t+""==n+"":n.constructor===String?n+""==t+"":!1}function a(e,n){var i,r,o;if(null===e||e.length<1)return[];for(i=e.split(n),r=0,o=i.length;o>r;r+=1)i[r]=t.trim(i[r]);return i}function l(t){return t.outerWidth(!1)-t.width()}function c(n){var i="keyup-change-value";n.on("keydown",function(){t.data(n,i)===e&&t.data(n,i,n.val())}),n.on("keyup",function(){var r=t.data(n,i);r!==e&&n.val()!==r&&(t.removeData(n,i),n.trigger("keyup-change"))})}function u(n){n.on("mousemove",function(n){var i=F;(i===e||i.x!==n.pageX||i.y!==n.pageY)&&t(n.target).trigger("mousemove-filtered",n)})}function h(t,n,i){i=i||e;var r;return function(){var e=arguments;window.clearTimeout(r),r=window.setTimeout(function(){n.apply(i,e)},t)}}function d(t,e){var n=h(t,function(t){e.trigger("scroll-debounced",t)});e.on("scroll",function(t){r(t.target,e.get())>=0&&n(t)})}function p(t){t[0]!==document.activeElement&&window.setTimeout(function(){var e=t[0],n=t.val().length,i;t.focus();var r=e.offsetWidth>0||e.offsetHeight>0;r&&e===document.activeElement&&(e.setSelectionRange?e.setSelectionRange(n,n):e.createTextRange&&(i=e.createTextRange(),i.collapse(!1),i.select()))},0)}function f(e){e=t(e)[0];var n=0,i=0;if("selectionStart"in e)n=e.selectionStart,i=e.selectionEnd-n;else if("selection"in document){e.focus();var r=document.selection.createRange();i=document.selection.createRange().text.length,r.moveStart("character",-e.value.length),n=r.text.length-i}return{offset:n,length:i}}function m(t){t.preventDefault(),t.stopPropagation()}function g(t){t.preventDefault(),t.stopImmediatePropagation()}function v(e){if(!R){var n=e[0].currentStyle||window.getComputedStyle(e[0],null);R=t(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"}),R.attr("class","select2-sizer"),t("body").append(R)}return R.text(e.val()),R.width()}function y(e,n,i){var r,o=[],s;r=t.trim(e.attr("class")),r&&(r=""+r,t(r.split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&o.push(this)})),r=t.trim(n.attr("class")),r&&(r=""+r,t(r.split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(s=i(this),s&&o.push(s))})),e.attr("class",o.join(" "))}function b(t,e,n,r){var o=i(t.toUpperCase()).indexOf(i(e.toUpperCase())),s=e.length;return 0>o?void n.push(r(t)):(n.push(r(t.substring(0,o))),n.push("<span class='select2-match'>"),n.push(r(t.substring(o,o+s))),n.push("</span>"),void n.push(r(t.substring(o+s,t.length))))}function _(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(t).replace(/[&<>"'\/\\]/g,function(t){return e[t]})}function w(n){var i,r=null,o=n.quietMillis||100,s=n.url,a=this;return function(l){window.clearTimeout(i),i=window.setTimeout(function(){var i=n.data,o=s,c=n.transport||t.fn.select2.ajaxDefaults.transport,u={type:n.type||"GET",cache:n.cache||!1,jsonpCallback:n.jsonpCallback||e,dataType:n.dataType||"json"},h=t.extend({},t.fn.select2.ajaxDefaults.params,u);i=i?i.call(a,l.term,l.page,l.context):null,o="function"==typeof o?o.call(a,l.term,l.page,l.context):o,r&&"function"==typeof r.abort&&r.abort(),n.params&&(t.isFunction(n.params)?t.extend(h,n.params.call(a)):t.extend(h,n.params)),t.extend(h,{url:o,dataType:n.dataType,data:i,success:function(t){var e=n.results(t,l.page,l);l.callback(e)},error:function(t,e,n){var i={hasError:!0,jqXHR:t,textStatus:e,errorThrown:n};l.callback(i)}}),r=c.call(a,h)},o)}}function x(e){var n=e,i,r,o=function(t){return""+t.text};t.isArray(n)&&(r=n,n={results:r}),t.isFunction(n)===!1&&(r=n,n=function(){return r});var s=n();return s.text&&(o=s.text,t.isFunction(o)||(i=s.text,o=function(t){return t[i]})),function(e){var i=e.term,r={results:[]},s;return""===i?void e.callback(n()):(s=function(n,r){var a,l;if(n=n[0],n.children){a={};for(l in n)n.hasOwnProperty(l)&&(a[l]=n[l]);a.children=[],t(n.children).each2(function(t,e){s(e,a.children)}),(a.children.length||e.matcher(i,o(a),n))&&r.push(a)}else e.matcher(i,o(n),n)&&r.push(n)},t(n().results).each2(function(t,e){s(e,r.results)}),void e.callback(r))}}function $(n){var i=t.isFunction(n);return function(r){var o=r.term,s={results:[]},a=i?n(r):n;t.isArray(a)&&(t(a).each(function(){var t=this.text!==e,n=t?this.text:this;(""===o||r.matcher(o,n))&&s.results.push(t?this:{id:this,text:this})}),r.callback(s))}}function k(e,n){if(t.isFunction(e))return!0;if(!e)return!1;if("string"==typeof e)return!0;throw new Error(n+" must be a string, function, or falsy value")}function C(e,n){if(t.isFunction(e)){var i=Array.prototype.slice.call(arguments,2);return e.apply(n,i)}return e}function S(e){var n=0;return t.each(e,function(t,e){e.children?n+=S(e.children):n++}),n}function T(t,n,i,r){var o=t,a=!1,l,c,u,h,d;if(!r.createSearchChoice||!r.tokenSeparators||r.tokenSeparators.length<1)return e;for(;;){for(c=-1,u=0,h=r.tokenSeparators.length;h>u&&(d=r.tokenSeparators[u],c=t.indexOf(d),!(c>=0));u++);if(0>c)break;if(l=t.substring(0,c),t=t.substring(c+d.length),l.length>0&&(l=r.createSearchChoice.call(this,l,n),l!==e&&null!==l&&r.id(l)!==e&&null!==r.id(l))){for(a=!1,u=0,h=n.length;h>u;u++)if(s(r.id(l),r.id(n[u]))){a=!0;break}a||i(l)}}return o!==t?t:void 0}function A(){var e=this;t.each(arguments,function(t,n){e[n].remove(),e[n]=null})}function E(e,n){var i=function(){};return i.prototype=new e,i.prototype.constructor=i,i.prototype.parent=e.prototype,i.prototype=t.extend(i.prototype,n),i}if(window.Select2===e){var P,N,O,j,M,R,F={x:0,y:0},I,D,P={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(t){switch(t=t.which?t.which:t){case P.LEFT:case P.RIGHT:case P.UP:case P.DOWN:return!0}return!1},isControl:function(t){var e=t.which;switch(e){case P.SHIFT:case P.CTRL:case P.ALT:return!0}return t.metaKey?!0:!1},isFunctionKey:function(t){return t=t.which?t.which:t,t>=112&&123>=t}},B="<div class='select2-measure-scrollbar'></div>",z={"\u24b6":"A","\uff21":"A","\xc0":"A","\xc1":"A","\xc2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\xc3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\xc4":"A","\u01de":"A","\u1ea2":"A","\xc5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\xc6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\xc7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\xc8":"E","\xc9":"E","\xca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\xcb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\xcc":"I","\xcd":"I","\xce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\xcf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\xd1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\xd2":"O","\xd3":"O","\xd4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\xd5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\xd6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\xd8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\xd9":"U","\xda":"U","\xdb":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\xdc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\xdd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\xe0":"a","\xe1":"a","\xe2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\xe3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\xe4":"a","\u01df":"a","\u1ea3":"a","\xe5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\xe6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\xe7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\xe8":"e","\xe9":"e","\xea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\xeb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\xec":"i","\xed":"i","\xee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\xef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\xf1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\xf2":"o","\xf3":"o","\xf4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\xf5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\xf6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\xf8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\xdf":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\xf9":"u","\xfa":"u","\xfb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\xfc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\xfd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\xff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z","\u0386":"\u0391","\u0388":"\u0395","\u0389":"\u0397","\u038a":"\u0399","\u03aa":"\u0399","\u038c":"\u039f","\u038e":"\u03a5","\u03ab":"\u03a5","\u038f":"\u03a9","\u03ac":"\u03b1","\u03ad":"\u03b5","\u03ae":"\u03b7","\u03af":"\u03b9","\u03ca":"\u03b9","\u0390":"\u03b9","\u03cc":"\u03bf","\u03cd":"\u03c5","\u03cb":"\u03c5","\u03b0":"\u03c5","\u03c9":"\u03c9","\u03c2":"\u03c3"};I=t(document),M=function(){var t=1;return function(){return t++}}(),N=E(Object,{bind:function(t){var e=this;return function(){t.apply(e,arguments)}},init:function(n){var i,r,s=".select2-results";this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==e&&null!==n.element.data("select2")&&n.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+M()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",n.element.attr("title")),this.body=t("body"),y(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",n.element.attr("style")),this.container.css(C(n.containerCss,this.opts.element)),this.container.addClass(C(n.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",m),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),y(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(C(n.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",m),this.results=i=this.container.find(s),this.search=r=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",m),u(this.results),this.dropdown.on("mousemove-filtered",s,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",s,this.bind(function(t){this._touchEvent=!0,this.highlightUnderEvent(t)})),this.dropdown.on("touchmove",s,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",s,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(t){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),d(80,this.results),this.dropdown.on("scroll-debounced",s,this.bind(this.loadMoreIfNeeded)),t(this.container).on("change",".select2-input",function(t){t.stopPropagation()}),t(this.dropdown).on("change",".select2-input",function(t){t.stopPropagation()}),t.fn.mousewheel&&i.mousewheel(function(t,e,n,r){var o=i.scrollTop();r>0&&0>=o-r?(i.scrollTop(0),m(t)):0>r&&i.get(0).scrollHeight-i.scrollTop()+r<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),m(t))}),c(r),r.on("keyup-change input paste",this.bind(this.updateResults)),r.on("focus",function(){r.addClass("select2-focused")}),r.on("blur",function(){r.removeClass("select2-focused")}),this.dropdown.on("mouseup",s,this.bind(function(e){t(e.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(e),this.selectHighlighted(e))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(t){t.stopPropagation()}),this.nextSearchTerm=e,t.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==n.maximumInputLength&&this.search.attr("maxlength",n.maximumInputLength);var a=n.element.prop("disabled");a===e&&(a=!1),this.enable(!a);var l=n.element.prop("readonly");l===e&&(l=!1),this.readonly(l),D=D||o(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",n.searchInputPlaceholder)},destroy:function(){var t=this.opts.element,n=t.data("select2"),i=this;this.close(),t.length&&t[0].detachEvent&&t.each(function(){this.detachEvent("onpropertychange",i._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,n!==e&&(n.container.remove(),n.liveRegion.remove(),n.dropdown.remove(),t.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?t.attr({tabindex:this.elementTabIndex}):t.removeAttr("tabindex"),t.show()),A.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(t){return t.is("option")?{id:t.prop("value"),text:t.text(),element:t.get(),css:t.attr("class"),disabled:t.prop("disabled"),locked:s(t.attr("locked"),"locked")||s(t.data("locked"),!0)}:t.is("optgroup")?{text:t.attr("label"),children:[],element:t.get(),css:t.attr("class")}:void 0},prepareOpts:function(n){var i,r,o,l,c=this;if(i=n.element,"select"===i.get(0).tagName.toLowerCase()&&(this.select=r=n.element),r&&t.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),n=t.extend({},{populateResults:function(i,r,o){var s,a=this.opts.id,l=this.liveRegion;(s=function(i,r,u){var h,d,p,f,m,g,v,y,b,_;i=n.sortResults(i,r,o);var w=[];for(h=0,d=i.length;d>h;h+=1)p=i[h],m=p.disabled===!0,f=!m&&a(p)!==e,g=p.children&&p.children.length>0,v=t("<li></li>"),v.addClass("select2-results-dept-"+u),v.addClass("select2-result"),v.addClass(f?"select2-result-selectable":"select2-result-unselectable"),m&&v.addClass("select2-disabled"),g&&v.addClass("select2-result-with-children"),v.addClass(c.opts.formatResultCssClass(p)),v.attr("role","presentation"),y=t(document.createElement("div")),y.addClass("select2-result-label"),y.attr("id","select2-result-label-"+M()),y.attr("role","option"),_=n.formatResult(p,y,o,c.opts.escapeMarkup),_!==e&&(y.html(_),v.append(y)),g&&(b=t("<ul></ul>"),b.addClass("select2-result-sub"),s(p.children,b,u+1),v.append(b)),v.data("select2-data",p),w.push(v[0]);r.append(w),l.text(n.formatMatches(i.length))})(r,i,0)}},t.fn.select2.defaults,n),"function"!=typeof n.id&&(o=n.id,n.id=function(t){return t[o]}),t.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}if(r?(n.query=this.bind(function(t){var n={results:[],more:!1},r=t.term,o,s,a;a=function(e,n){var i;e.is("option")?t.matcher(r,e.text(),e)&&n.push(c.optionToData(e)):e.is("optgroup")&&(i=c.optionToData(e),e.children().each2(function(t,e){a(e,i.children)}),i.children.length>0&&n.push(i))},o=i.children(),this.getPlaceholder()!==e&&o.length>0&&(s=this.getPlaceholderOption(),s&&(o=o.not(s))),o.each2(function(t,e){a(e,n.results)}),t.callback(n)}),n.id=function(t){return t.id}):"query"in n||("ajax"in n?(l=n.element.data("ajax-url"),l&&l.length>0&&(n.ajax.url=l),n.query=w.call(n.element,n.ajax)):"data"in n?n.query=x(n.data):"tags"in n&&(n.query=$(n.tags),n.createSearchChoice===e&&(n.createSearchChoice=function(e){return{id:t.trim(e),text:t.trim(e)}}),n.initSelection===e&&(n.initSelection=function(e,i){var r=[];t(a(e.val(),n.separator)).each(function(){var e={id:this,text:this},i=n.tags;t.isFunction(i)&&(i=i()),t(i).each(function(){return s(this.id,e.id)?(e=this,!1):void 0}),r.push(e)}),i(r)}))),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");if("top"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(t,e){t.unshift(e)};else if("bottom"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(t,e){t.push(e)};else if("function"!=typeof n.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return n},monitorSource:function(){var n=this.opts.element,i,r=this;n.on("change.select2",this.bind(function(t){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),this._sync=this.bind(function(){var t=n.prop("disabled");t===e&&(t=!1),this.enable(!t);var i=n.prop("readonly");i===e&&(i=!1),this.readonly(i),y(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(C(this.opts.containerCssClass,this.opts.element)),y(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(C(this.opts.dropdownCssClass,this.opts.element))}),n.length&&n[0].attachEvent&&n.each(function(){this.attachEvent("onpropertychange",r._sync)}),i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,i!==e&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new i(function(e){t.each(e,r._sync)}),this.propertyObserver.observe(n.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(e){var n=t.Event("select2-selecting",{val:this.id(e),object:e,choice:e});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(e){e=e||{},e=t.extend({},e,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(e),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var t=this._enabled&&!this._readonly,e=!t;return t===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",e),this.close(),this.enabledInterface=t,!0)},enable:function(t){t===e&&(t=!0),this._enabled!==t&&(this._enabled=t,this.opts.element.prop("disabled",!t),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(t){t===e&&(t=!1),this._readonly!==t&&(this._readonly=t,this.opts.element.prop("readonly",t),this.enableInterface())},opened:function(){return this.container?this.container.hasClass("select2-dropdown-open"):!1},positionDropdown:function(){var e=this.dropdown,n=this.container.offset(),i=this.container.outerHeight(!1),r=this.container.outerWidth(!1),o=e.outerHeight(!1),s=t(window),a=s.width(),l=s.height(),c=s.scrollLeft()+a,u=s.scrollTop()+l,h=n.top+i,d=n.left,p=u>=h+o,f=n.top-o>=s.scrollTop(),m=e.outerWidth(!1),g=c>=d+m,v=e.hasClass("select2-drop-above"),y,b,_,w,x;v?(b=!0,!f&&p&&(_=!0,b=!1)):(b=!1,!p&&f&&(_=!0,b=!0)),_&&(e.hide(),n=this.container.offset(),i=this.container.outerHeight(!1),r=this.container.outerWidth(!1),o=e.outerHeight(!1),c=s.scrollLeft()+a,u=s.scrollTop()+l,h=n.top+i,d=n.left,m=e.outerWidth(!1),g=c>=d+m,e.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(x=t(".select2-results",e)[0],e.addClass("select2-drop-auto-width"),e.css("width",""),m=e.outerWidth(!1)+(x.scrollHeight===x.clientHeight?0:D.width),m>r?r=m:m=r,o=e.outerHeight(!1),g=c>=d+m):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(y=this.body.offset(),h-=y.top,d-=y.left),g||(d=n.left+this.container.outerWidth(!1)-m),w={left:d,width:r},b?(w.top=n.top-o,w.bottom="auto",this.container.addClass("select2-drop-above"),e.addClass("select2-drop-above")):(w.top=h,w.bottom="auto",this.container.removeClass("select2-drop-above"),e.removeClass("select2-drop-above")),w=t.extend(w,C(this.opts.dropdownCss,this.opts.element)),e.css(w)},shouldOpen:function(){var e;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(e=t.Event("select2-opening"),this.opts.element.trigger(e),!e.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),I.on("mousemove.select2Event",function(t){F.x=t.pageX,F.y=t.pageY}),!0):!1},opening:function(){var e=this.containerEventName,i="scroll."+e,r="resize."+e,o="orientationchange."+e,s;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),s=t("#select2-drop-mask"),0==s.length&&(s=t(document.createElement("div")),s.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),s.hide(),s.appendTo(this.body),s.on("mousedown touchstart click",function(e){n(s);var i=t("#select2-drop"),r;i.length>0&&(r=i.data("select2"),r.opts.selectOnBlur&&r.selectHighlighted({noFocus:!0}),r.close(),e.preventDefault(),e.stopPropagation())})),this.dropdown.prev()[0]!==s[0]&&this.dropdown.before(s),t("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),s.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var a=this;this.container.parents().add(window).each(function(){t(this).on(r+" "+i+" "+o,function(t){a.opened()&&a.positionDropdown()})})},close:function(){if(this.opened()){var e=this.containerEventName,n="scroll."+e,i="resize."+e,r="orientationchange."+e;this.container.parents().add(window).each(function(){t(this).off(n).off(i).off(r)}),this.clearDropdownAlignmentPreference(),t("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),I.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(t.Event("select2-close"))}},externalSearch:function(t){this.open(),this.search.val(t),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return C(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var e=this.results,n,i,r,o,s,a,l,c;if(i=this.highlight(),!(0>i)){if(0==i)return void e.scrollTop(0);n=this.findHighlightableChoices().find(".select2-result-label"),r=t(n[i]),c=(r.offset()||{}).top||0,o=c+r.outerHeight(!0),i===n.length-1&&(l=e.find("li.select2-more-results"),l.length>0&&(o=l.offset().top+l.outerHeight(!0))),s=e.offset().top+e.outerHeight(!0),o>s&&e.scrollTop(e.scrollTop()+(o-s)),a=c-e.offset().top,0>a&&"none"!=r.css("display")&&e.scrollTop(e.scrollTop()+a)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(e){for(var n=this.findHighlightableChoices(),i=this.highlight();i>-1&&i<n.length;){i+=e;var r=t(n[i]);if(r.hasClass("select2-result-selectable")&&!r.hasClass("select2-disabled")&&!r.hasClass("select2-selected")){this.highlight(i);break}}},highlight:function(e){var n=this.findHighlightableChoices(),i,o;return 0===arguments.length?r(n.filter(".select2-highlighted")[0],n.get()):(e>=n.length&&(e=n.length-1),0>e&&(e=0),this.removeHighlight(),i=t(n[e]),i.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",i.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(i.text()),o=i.data("select2-data"),void(o&&this.opts.element.trigger({type:"select2-highlight",val:this.id(o),choice:o})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length
},highlightUnderEvent:function(e){var n=t(e.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var i=this.findHighlightableChoices();this.highlight(i.index(n))}else 0==n.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var t=this.results,e=t.find("li.select2-more-results"),n,i=this.resultsPage+1,r=this,o=this.search.val(),s=this.context;0!==e.length&&(n=e.offset().top-t.offset().top-t.height(),n<=this.opts.loadMorePadding&&(e.addClass("select2-active"),this.opts.query({element:this.opts.element,term:o,page:i,context:s,matcher:this.opts.matcher,callback:this.bind(function(n){r.opened()&&(r.opts.populateResults.call(this,t,n.results,{term:o,page:i,context:s}),r.postprocessResults(n,!1,!1),n.more===!0?(e.detach().appendTo(t).text(C(r.opts.formatLoadMore,r.opts.element,i+1)),window.setTimeout(function(){r.loadMoreIfNeeded()},10)):e.remove(),r.positionDropdown(),r.resultsPage=i,r.context=n.context,this.opts.element.trigger({type:"select2-loaded",items:n}))})})))},tokenize:function(){},updateResults:function(n){function i(){o.removeClass("select2-active"),u.positionDropdown(),u.liveRegion.text(a.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?a.text():u.opts.formatMatches(a.find(".select2-result-selectable").length))}function r(t){a.html(t),i()}var o=this.search,a=this.results,l=this.opts,c,u=this,h,d=o.val(),p=t.data(this.container,"select2-last-term"),f;if((n===!0||!p||!s(d,p))&&(t.data(this.container,"select2-last-term",d),n===!0||this.showSearchInput!==!1&&this.opened())){f=++this.queryCount;var m=this.getMaximumSelectionSize();if(m>=1&&(c=this.data(),t.isArray(c)&&c.length>=m&&k(l.formatSelectionTooBig,"formatSelectionTooBig")))return void r("<li class='select2-selection-limit'>"+C(l.formatSelectionTooBig,l.element,m)+"</li>");if(o.val().length<l.minimumInputLength)return r(k(l.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+C(l.formatInputTooShort,l.element,o.val(),l.minimumInputLength)+"</li>":""),void(n&&this.showSearch&&this.showSearch(!0));if(l.maximumInputLength&&o.val().length>l.maximumInputLength)return void r(k(l.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+C(l.formatInputTooLong,l.element,o.val(),l.maximumInputLength)+"</li>":"");l.formatSearching&&0===this.findHighlightableChoices().length&&r("<li class='select2-searching'>"+C(l.formatSearching,l.element)+"</li>"),o.addClass("select2-active"),this.removeHighlight(),h=this.tokenize(),h!=e&&null!=h&&o.val(h),this.resultsPage=1,l.query({element:l.element,term:o.val(),page:this.resultsPage,context:null,matcher:l.matcher,callback:this.bind(function(c){var h;if(f==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(c.hasError!==e&&k(l.formatAjaxError,"formatAjaxError"))return void r("<li class='select2-ajax-error'>"+C(l.formatAjaxError,l.element,c.jqXHR,c.textStatus,c.errorThrown)+"</li>");if(this.context=c.context===e?null:c.context,this.opts.createSearchChoice&&""!==o.val()&&(h=this.opts.createSearchChoice.call(u,o.val(),c.results),h!==e&&null!==h&&u.id(h)!==e&&null!==u.id(h)&&0===t(c.results).filter(function(){return s(u.id(this),u.id(h))}).length&&this.opts.createSearchChoicePosition(c.results,h)),0===c.results.length&&k(l.formatNoMatches,"formatNoMatches"))return void r("<li class='select2-no-results'>"+C(l.formatNoMatches,l.element,o.val())+"</li>");a.empty(),u.opts.populateResults.call(this,a,c.results,{term:o.val(),page:this.resultsPage,context:null}),c.more===!0&&k(l.formatLoadMore,"formatLoadMore")&&(a.append("<li class='select2-more-results'>"+l.escapeMarkup(C(l.formatLoadMore,l.element,this.resultsPage))+"</li>"),window.setTimeout(function(){u.loadMoreIfNeeded()},10)),this.postprocessResults(c,n),i(),this.opts.element.trigger({type:"select2-loaded",items:c})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){p(this.search)},selectHighlighted:function(t){if(this._touchMoved)return void this.clearTouchMoved();var e=this.highlight(),n=this.results.find(".select2-highlighted"),i=n.closest(".select2-result").data("select2-data");i?(this.highlight(e),this.onSelect(i,t)):t&&t.noFocus&&this.close()},getPlaceholder:function(){var t;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((t=this.getPlaceholderOption())!==e?t.text():e)},getPlaceholderOption:function(){if(this.select){var n=this.select.children("option").first();if(this.opts.placeholderOption!==e)return"first"===this.opts.placeholderOption&&n||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===t.trim(n.text())&&""===n.val())return n}},initContainerWidth:function(){function n(){var n,i,r,o,s,a;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(n=this.opts.element.attr("style"),n!==e)for(i=n.split(";"),o=0,s=i.length;s>o;o+=1)if(a=i[o].replace(/\s/g,""),r=a.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==r&&r.length>=1)return r[1];return"resolve"===this.opts.width?(n=this.opts.element.css("width"),n.indexOf("%")>0?n:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return t.isFunction(this.opts.width)?this.opts.width():this.opts.width}var i=n.call(this);null!==i&&this.container.css("width",i)}}),O=E(N,{createContainer:function(){var e=t(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return e},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var n,i,r;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),n=this.search.get(0),n.createTextRange?(i=n.createTextRange(),i.collapse(!1),i.select()):n.setSelectionRange&&(r=this.search.val().length,n.setSelectionRange(r,r))),""===this.search.val()&&this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){t("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),A.call(this,"selection","focusser")},initContainer:function(){var e,i=this.container,r=this.dropdown,o=M(),s;this.showSearch(this.opts.minimumResultsForSearch<0?!1:!0),this.selection=e=i.find(".select2-choice"),this.focusser=i.find(".select2-focusser"),e.find(".select2-chosen").attr("id","select2-chosen-"+o),this.focusser.attr("aria-labelledby","select2-chosen-"+o),this.results.attr("id","select2-results-"+o),this.search.attr("aria-owns","select2-results-"+o),this.focusser.attr("id","s2id_autogen"+o),s=t("label[for='"+this.opts.element.attr("id")+"']"),this.focusser.prev().text(s.text()).attr("for",this.focusser.attr("id"));var a=this.opts.element.attr("title");this.opts.element.attr("title",a||s.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(t("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()&&229!=t.keyCode){if(t.which===P.PAGE_UP||t.which===P.PAGE_DOWN)return void m(t);switch(t.which){case P.UP:case P.DOWN:return this.moveHighlight(t.which===P.UP?-1:1),void m(t);case P.ENTER:return this.selectHighlighted(),void m(t);case P.TAB:return void this.selectHighlighted({noFocus:!0});case P.ESC:return this.cancel(t),void m(t)}}})),this.search.on("blur",this.bind(function(t){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()&&t.which!==P.TAB&&!P.isControl(t)&&!P.isFunctionKey(t)&&t.which!==P.ESC){if(this.opts.openOnEnter===!1&&t.which===P.ENTER)return void m(t);if(t.which==P.DOWN||t.which==P.UP||t.which==P.ENTER&&this.opts.openOnEnter){if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return;return this.open(),void m(t)}return t.which==P.DELETE||t.which==P.BACKSPACE?(this.opts.allowClear&&this.clear(),void m(t)):void 0}})),c(this.focusser),this.focusser.on("keyup-change input",this.bind(function(t){if(this.opts.minimumResultsForSearch>=0){if(t.stopPropagation(),this.opened())return;this.open()}})),e.on("mousedown touchstart","abbr",this.bind(function(t){this.isInterfaceEnabled()&&(this.clear(),g(t),this.close(),this.selection.focus())})),e.on("mousedown touchstart",this.bind(function(i){n(e),this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),m(i)})),r.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),e.on("focus",this.bind(function(t){m(t)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(t.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(e){var n=this.selection.data("select2-data");if(n){var i=t.Event("select2-clearing");if(this.opts.element.trigger(i),i.isDefaultPrevented())return;var r=this.getPlaceholderOption();this.opts.element.val(r?r.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),e!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))}},initSelection:function(){var t;if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var n=this;this.opts.initSelection.call(null,this.opts.element,function(t){t!==e&&null!==t&&(n.updateSelection(t),n.close(),n.setPlaceholder(),n.nextSearchTerm=n.opts.nextSearchTerm(t,n.search.val()))})}},isPlaceholderOptionSelected:function(){var t;return this.getPlaceholder()===e?!1:(t=this.getPlaceholderOption())!==e&&t.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===e||null===this.opts.element.val()},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var i=t.find("option").filter(function(){return this.selected&&!this.disabled});e(n.optionToData(i))}:"data"in e&&(e.initSelection=e.initSelection||function(n,i){var r=n.val(),o=null;e.query({matcher:function(t,n,i){var a=s(r,e.id(i));return a&&(o=i),a},callback:t.isFunction(i)?function(){i(o)}:t.noop})}),e},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===e?e:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var t=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&t!==e){if(this.select&&this.getPlaceholderOption()===e)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(t)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(t,e,n){var i=0,r=this,o=!0;if(this.findHighlightableChoices().each2(function(t,e){return s(r.id(e.data("select2-data")),r.opts.element.val())?(i=t,!1):void 0}),n!==!1&&this.highlight(e===!0&&i>=0?i:0),e===!0){var a=this.opts.minimumResultsForSearch;a>=0&&this.showSearch(S(t.results)>=a)}},showSearch:function(e){this.showSearchInput!==e&&(this.showSearchInput=e,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!e),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!e),t(this.dropdown,this.container).toggleClass("select2-with-searchbox",e))},onSelect:function(t,e){if(this.triggerSelect(t)){var n=this.opts.element.val(),i=this.data();this.opts.element.val(this.id(t)),this.updateSelection(t),this.opts.element.trigger({type:"select2-selected",val:this.id(t),choice:t}),this.nextSearchTerm=this.opts.nextSearchTerm(t,this.search.val()),this.close(),e&&e.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),s(n,this.id(t))||this.triggerChange({added:t,removed:i})}},updateSelection:function(t){var n=this.selection.find(".select2-chosen"),i,r;this.selection.data("select2-data",t),n.empty(),null!==t&&(i=this.opts.formatSelection(t,n,this.opts.escapeMarkup)),i!==e&&n.append(i),r=this.opts.formatSelectionCssClass(t,n),r!==e&&n.addClass(r),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==e&&this.container.addClass("select2-allowclear")},val:function(){var t,n=!1,i=null,r=this,o=this.data();if(0===arguments.length)return this.opts.element.val();if(t=arguments[0],arguments.length>1&&(n=arguments[1]),this.select)this.select.val(t).find("option").filter(function(){return this.selected}).each2(function(t,e){return i=r.optionToData(e),!1}),this.updateSelection(i),this.setPlaceholder(),n&&this.triggerChange({added:i,removed:o});else{if(!t&&0!==t)return void this.clear(n);if(this.opts.initSelection===e)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(t),this.opts.initSelection(this.opts.element,function(t){r.opts.element.val(t?r.id(t):""),r.updateSelection(t),r.setPlaceholder(),n&&r.triggerChange({added:t,removed:o})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(t){var n,i=!1;return 0===arguments.length?(n=this.selection.data("select2-data"),n==e&&(n=null),n):(arguments.length>1&&(i=arguments[1]),void(t?(n=this.data(),this.opts.element.val(t?this.id(t):""),this.updateSelection(t),i&&this.triggerChange({added:t,removed:n})):this.clear(i)))}}),j=E(N,{createContainer:function(){var e=t(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return e},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var i=[];t.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(t,e){i.push(n.optionToData(e))}),e(i)}:"data"in e&&(e.initSelection=e.initSelection||function(n,i){var r=a(n.val(),e.separator),o=[];e.query({matcher:function(n,i,a){var l=t.grep(r,function(t){return s(t,e.id(a))}).length;return l&&o.push(a),l},callback:t.isFunction(i)?function(){for(var t=[],n=0;n<r.length;n++)for(var a=r[n],l=0;l<o.length;l++){var c=o[l];if(s(a,e.id(c))){t.push(c),o.splice(l,1);break}}i(t)}:t.noop})}),e},selectChoice:function(t){var e=this.container.find(".select2-search-choice-focus");e.length&&t&&t[0]==e[0]||(e.length&&this.opts.element.trigger("choice-deselected",e),e.removeClass("select2-search-choice-focus"),t&&t.length&&(this.close(),t.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",t)))},destroy:function(){t("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),A.call(this,"searchContainer","selection")},initContainer:function(){var e=".select2-choices",n;this.searchContainer=this.container.find(".select2-search-field"),this.selection=n=this.container.find(e);var i=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(e){i.search[0].focus(),i.selectChoice(t(this))}),this.search.attr("id","s2id_autogen"+M()),this.search.prev().text(t("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()){++this.keydowns;var e=n.find(".select2-search-choice-focus"),i=e.prev(".select2-search-choice:not(.select2-locked)"),r=e.next(".select2-search-choice:not(.select2-locked)"),o=f(this.search);if(e.length&&(t.which==P.LEFT||t.which==P.RIGHT||t.which==P.BACKSPACE||t.which==P.DELETE||t.which==P.ENTER)){var s=e;return t.which==P.LEFT&&i.length?s=i:t.which==P.RIGHT?s=r.length?r:null:t.which===P.BACKSPACE?this.unselect(e.first())&&(this.search.width(10),s=i.length?i:r):t.which==P.DELETE?this.unselect(e.first())&&(this.search.width(10),s=r.length?r:null):t.which==P.ENTER&&(s=null),this.selectChoice(s),m(t),void(s&&s.length||this.open())}if((t.which===P.BACKSPACE&&1==this.keydowns||t.which==P.LEFT)&&0==o.offset&&!o.length)return this.selectChoice(n.find(".select2-search-choice:not(.select2-locked)").last()),void m(t);if(this.selectChoice(null),this.opened())switch(t.which){case P.UP:case P.DOWN:return this.moveHighlight(t.which===P.UP?-1:1),void m(t);case P.ENTER:return this.selectHighlighted(),void m(t);case P.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case P.ESC:return this.cancel(t),void m(t)}if(t.which!==P.TAB&&!P.isControl(t)&&!P.isFunctionKey(t)&&t.which!==P.BACKSPACE&&t.which!==P.ESC){if(t.which===P.ENTER){if(this.opts.openOnEnter===!1)return;if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return}this.open(),(t.which===P.PAGE_UP||t.which===P.PAGE_DOWN)&&m(t),t.which===P.ENTER&&m(t)}}})),this.search.on("keyup",this.bind(function(t){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),e.stopImmediatePropagation(),this.opts.element.trigger(t.Event("select2-blur"))})),this.container.on("click",e,this.bind(function(e){this.isInterfaceEnabled()&&(t(e.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.open(),this.focusSearch(),e.preventDefault()))})),this.container.on("focus",e,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){var t;if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var n=this;this.opts.initSelection.call(null,this.opts.element,function(t){t!==e&&null!==t&&(n.updateSelection(t),n.close(),n.clearSearch())})}},clearSearch:function(){var t=this.getPlaceholder(),n=this.getMaxSearchWidth();t!==e&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(t).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(e){var n=[],i=[],o=this;t(e).each(function(){r(o.id(this),n)<0&&(n.push(o.id(this)),i.push(this))}),e=i,this.selection.find(".select2-search-choice").remove(),t(e).each(function(){o.addSelectedChoice(this)}),o.postprocessResults()},tokenize:function(){var t=this.search.val();t=this.opts.tokenizer.call(this,t,this.data(),this.bind(this.onSelect),this.opts),null!=t&&t!=e&&(this.search.val(t),t.length>0&&this.open())},onSelect:function(t,n){this.triggerSelect(t)&&""!==t.text&&(this.addSelectedChoice(t),this.opts.element.trigger({type:"selected",val:this.id(t),choice:t}),this.nextSearchTerm=this.opts.nextSearchTerm(t,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(t,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:t}),n&&n.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var i=!n.locked,r=t("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),o=t("<li class='select2-search-choice select2-locked'><div></div></li>"),s=i?r:o,a=this.id(n),l=this.getVal(),c,u;c=this.opts.formatSelection(n,s.find("div"),this.opts.escapeMarkup),c!=e&&s.find("div").replaceWith("<div>"+c+"</div>"),u=this.opts.formatSelectionCssClass(n,s.find("div")),u!=e&&s.addClass(u),i&&s.find(".select2-search-choice-close").on("mousedown",m).on("click dblclick",this.bind(function(e){this.isInterfaceEnabled()&&(this.unselect(t(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),m(e),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),s.data("select2-data",n),s.insertBefore(this.searchContainer),l.push(a),this.setVal(l)},unselect:function(e){var n=this.getVal(),i,o;if(e=e.closest(".select2-search-choice"),0===e.length)throw"Invalid argument: "+e+". Must be .select2-search-choice";if(i=e.data("select2-data")){var s=t.Event("select2-removing");if(s.val=this.id(i),s.choice=i,this.opts.element.trigger(s),s.isDefaultPrevented())return!1;for(;(o=r(this.id(i),n))>=0;)n.splice(o,1),this.setVal(n),this.select&&this.postprocessResults();return e.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}),!0}},postprocessResults:function(t,e,n){var i=this.getVal(),o=this.results.find(".select2-result"),s=this.results.find(".select2-result-with-children"),a=this;o.each2(function(t,e){var n=a.id(e.data("select2-data"));r(n,i)>=0&&(e.addClass("select2-selected"),e.find(".select2-result-selectable").addClass("select2-selected"))}),s.each2(function(t,e){e.is(".select2-result-selectable")||0!==e.find(".select2-result-selectable:not(.select2-selected)").length||e.addClass("select2-selected")}),-1==this.highlight()&&n!==!1&&a.highlight(0),!this.opts.createSearchChoice&&!o.filter(".select2-result:not(.select2-selected)").length>0&&(!t||t&&!t.more&&0===this.results.find(".select2-no-results").length)&&k(a.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+C(a.opts.formatNoMatches,a.opts.element,a.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-l(this.search)},resizeSearch:function(){var t,e,n,i,r,o=l(this.search);t=v(this.search)+10,e=this.search.offset().left,n=this.selection.width(),i=this.selection.offset().left,r=n-(e-i)-o,t>r&&(r=n-o),40>r&&(r=n-o),0>=r&&(r=t),this.search.width(Math.floor(r))},getVal:function(){var t;return this.select?(t=this.select.val(),null===t?[]:t):(t=this.opts.element.val(),a(t,this.opts.separator))},setVal:function(e){var n;this.select?this.select.val(e):(n=[],t(e).each(function(){r(this,n)<0&&n.push(this)}),this.opts.element.val(0===n.length?"":n.join(this.opts.separator)))},buildChangeDetails:function(t,e){for(var e=e.slice(0),t=t.slice(0),n=0;n<e.length;n++)for(var i=0;i<t.length;i++)s(this.opts.id(e[n]),this.opts.id(t[i]))&&(e.splice(n,1),n>0&&n--,t.splice(i,1),i--);return{added:e,removed:t}},val:function(n,i){var r,o=this;if(0===arguments.length)return this.getVal();if(r=this.data(),r.length||(r=[]),!n&&0!==n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(i&&this.triggerChange({added:this.data(),removed:r}));if(this.setVal(n),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange(this.buildChangeDetails(r,this.data()));else{if(this.opts.initSelection===e)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(e){var n=t.map(e,o.id);o.setVal(n),o.updateSelection(e),o.clearSearch(),i&&o.triggerChange(o.buildChangeDetails(r,o.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var e=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){e.push(n.opts.id(t(this).data("select2-data")))}),this.setVal(e),this.triggerChange()},data:function(e,n){var i=this,r,o;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return t(this).data("select2-data")}).get():(o=this.data(),e||(e=[]),r=t.map(e,function(t){return i.opts.id(t)}),this.setVal(r),this.updateSelection(e),this.clearSearch(),n&&this.triggerChange(this.buildChangeDetails(o,this.data())),void 0)}}),t.fn.select2=function(){var n=Array.prototype.slice.call(arguments,0),i,o,s,a,l,c=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],u=["opened","isFocused","container","dropdown"],h=["val","data"],d={search:"externalSearch"};return this.each(function(){if(0===n.length||"object"==typeof n[0])i=0===n.length?{}:t.extend({},n[0]),i.element=t(this),"select"===i.element.get(0).tagName.toLowerCase()?l=i.element.prop("multiple"):(l=i.multiple||!1,"tags"in i&&(i.multiple=l=!0)),o=l?new window.Select2["class"].multi:new window.Select2["class"].single,o.init(i);else{if("string"!=typeof n[0])throw"Invalid arguments to select2 plugin: "+n;if(r(n[0],c)<0)throw"Unknown method: "+n[0];if(a=e,o=t(this).data("select2"),o===e)return;if(s=n[0],"container"===s?a=o.container:"dropdown"===s?a=o.dropdown:(d[s]&&(s=d[s]),a=o[s].apply(o,n.slice(1))),r(n[0],u)>=0||r(n[0],h)>=0&&1==n.length)return!1}}),a===e?this:a},t.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(t,e,n,i){var r=[];return b(t.text,n.term,r,i),r.join("")},formatSelection:function(t,n,i){return t?i(t.text):e},sortResults:function(t,e,n){return t},formatResultCssClass:function(t){return t.css},formatSelectionCssClass:function(t,n){return e},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(t){return t==e?null:t.id},matcher:function(t,e){return i(""+e).toUpperCase().indexOf(i(""+t).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:T,escapeMarkup:_,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(t){return t},adaptDropdownCssClass:function(t){return null},nextSearchTerm:function(t,n){return e},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(t){var e="ontouchstart"in window||navigator.msMaxTouchPoints>0;return e&&t.opts.minimumResultsForSearch<0?!1:!0}},t.fn.select2.locales=[],t.fn.select2.locales.en={formatMatches:function(t){return 1===t?"One result is available, press enter to select it.":t+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(t,e,n){return"Loading failed"},formatInputTooShort:function(t,e){var n=e-t.length;return"Please enter "+n+" or more character"+(1==n?"":"s")},formatInputTooLong:function(t,e){var n=t.length-e;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(t){return"You can only select "+t+" item"+(1==t?"":"s")},formatLoadMore:function(t){return"Loading more results\u2026"},formatSearching:function(){return"Searching\u2026"}},t.extend(t.fn.select2.defaults,t.fn.select2.locales.en),t.fn.select2.ajaxDefaults={transport:t.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:w,local:x,tags:$},util:{debounce:h,markMatch:b,escapeMarkup:_,stripDiacritics:i},"class":{"abstract":N,single:O,multi:j}}}}(jQuery),$.formatCurrency.regions[""]={symbol:"$",positiveFormat:"%s%n",negativeFormat:"-%s%n",decimalSymbol:".",digitGroupSymbol:",",groupDigits:!0},function(t){t.fn.serializeObject=function(){var e=this,n={},i={},r={validate:/^[a-zA-Z][a-zA-Z0-9_]*(?:\[(?:\d*|[a-zA-Z0-9_]+)\])*$/,key:/[a-zA-Z0-9_]+|(?=\[\])/g,push:/^$/,fixed:/^\d+$/,named:/^[a-zA-Z0-9_]+$/};return this.build=function(t,e,n){return t[e]=n,t},this.push_counter=function(t){return void 0===i[t]&&(i[t]=0),i[t]++},t.each(t(this).serializeArray(),function(){if(r.validate.test(this.name)){for(var i,o=this.name.match(r.key),s=this.value,a=this.name;void 0!==(i=o.pop());)a=a.replace(new RegExp("\\["+i+"\\]$"),""),i.match(r.push)?s=e.build([],e.push_counter(a),s):i.match(r.fixed)?s=e.build([],i,s):i.match(r.named)&&(s=e.build({},i,s));
n=t.extend(!0,n,s)}}),n}}(jQuery);